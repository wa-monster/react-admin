"use strict";(self.webpackChunkyang_template=self.webpackChunkyang_template||[]).push([[113],{3486:(e,t,r)=>{r.d(t,{d:()=>o});var s=r(1563);const o=()=>{const e=new s.cPb(75,1,.1,100);return e.position.set(5,5,20),e.lookAt(0,0,0),e}},2375:(e,t,r)=>{r.d(t,{Q:()=>o});var s=r(1563);const o=()=>{const e=new s.CP7({antialias:!0});return e.physicallyCorrectLights=!0,e}},9055:(e,t,r)=>{r.d(t,{a:()=>o});var s=r(1563);const o=()=>{const e=new s.xsS;return e.background=new s.Ilk("0xeee"),e}},2208:(e,t,r)=>{r.d(t,{r:()=>o});const s=new(r(1563).SUY);class o{constructor(e,t,r){this.updateAbles=void 0,this.renderer=void 0,this.scene=void 0,this.camera=void 0,this.camera=e,this.scene=t,this.renderer=r,this.updateAbles=[]}start(){this.renderer.setAnimationLoop((()=>{this.tick(),this.renderer.render(this.scene,this.camera)}))}stop(){this.renderer.setAnimationLoop(null)}tick(){const e=s.getDelta();for(const t of this.updateAbles)t.tick(e)}}},2783:(e,t,r)=>{function s(e,t,r){e.aspect=r.clientWidth/r.clientHeight,e.updateProjectionMatrix(),t.setSize(r.clientWidth,r.clientHeight),t.setPixelRatio(window.devicePixelRatio)}r.d(t,{t:()=>o});class o{constructor(e,t,r){s(e,t,r),window.addEventListener("resize",(()=>{s(e,t,r),this.onResize()}))}onResize(){}}},1113:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var s=r(571),o=r(2208),i=r(2783),n=r(9055),a=r(2375),c=r(3486),d=r(8871),l=r(5380),h=r(1563);const u=new d.E,f=new l._,p=async()=>{f.setDecoderPath("/draco/"),u.setDRACOLoader(f);const e=(e=>{const t=e.scene.children[0],r=e.animations[0],s=new h.Xcj(t),o=s.clipAction(r);return t.tick=e=>{s.update(e)},console.log("data",e),o.play(),t})(await u.loadAsync("/yang-admin/models/house/LittlestTokyo.glb"));return e.position.set(0,20,0),e};var y=r(4828);const w=async e=>{const t=document.querySelector(e),r=(0,n.a)(),s=(0,a.Q)(),d=(0,c.d)(),l=await p();l.scale.set(.1,.1,.1);const{hemisphereLight:u,directionalLight1:f,directionalLight2:w,directionalLight3:g,directionalLight4:b,directionalLight5:k,directionalLight6:m}=(()=>{const e=new h.vmT("white","blue",15),t=new h.Ox3("0xfff",10),r=new h.Ox3("0xfff",1),s=new h.Ox3("0xfff",1),o=new h.Ox3("0xfff",1),i=new h.Ox3("0xfff",1),n=new h.Ox3("0xfff",1);return t.position.set(0,15,0),r.position.set(15,0,0),s.position.set(0,-15,0),o.position.set(-15,0,0),i.position.set(0,0,15),n.position.set(0,0,-15),{hemisphereLight:e,directionalLight1:t,directionalLight2:r,directionalLight3:s,directionalLight4:o,directionalLight5:i,directionalLight6:n}})();if(r.add(l,u,f,w,b,k,m),r.background=new h.Ilk(12575709),d.position.set(50,50,50),!t)throw Error("\u627e\u4e0d\u5230\u5143\u7d20");{const e=new o.r(d,r,s);e.updateAbles.push(l);new y.z(d,s.domElement).addEventListener("change",(()=>{s.render(r,d)}));new i.t(d,s,t).onResize=()=>{s.render(r,d)},t.append(s.domElement),e.start()}};var g=r(3140);const b=function(){return(0,s.useEffect)((()=>{w("#canvas002")}),[]),(0,g.jsx)("div",{className:"bg-white h-full p-2 ",id:"canvas002"})}},5380:(e,t,r)=>{r.d(t,{_:()=>i});var s=r(1563);const o=new WeakMap;class i extends s.aNw{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,o){const i=new s.hH6(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(e=>{const r={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,r).then(t).catch(o)}),r,o)}decodeDracoFile(e,t,r,s){const o={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,o).then(t)}decodeGeometry(e,t){for(const o in t.attributeTypes){const e=t.attributeTypes[o];void 0!==e.BYTES_PER_ELEMENT&&(t.attributeTypes[o]=e.name)}const r=JSON.stringify(t);if(o.has(e)){const t=o.get(e);if(t.key===r)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const i=this.workerNextTaskID++,n=e.byteLength,a=this._getWorker(i,n).then((r=>(s=r,new Promise(((r,o)=>{s._callbacks[i]={resolve:r,reject:o},s.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return a.catch((()=>!0)).then((()=>{s&&i&&this._releaseTask(s,i)})),o.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new s.u9r;e.index&&t.setIndex(new s.TlE(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const o=e.attributes[r],i=o.name,n=o.array,a=o.itemSize;t.setAttribute(i,new s.TlE(n,a))}return t}_loadLibrary(e,t){const r=new s.hH6(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise(((t,s)=>{r.load(e,t,void 0,s)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const r=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const s=n.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([o]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const r=t.data;switch(r.type){case"decode":e._callbacks[r.id].resolve(r);break;case"error":e._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function n(){let e,t;function r(e,t,r,s,o,i){const n=i.num_components(),a=r.num_points()*n,c=a*o.BYTES_PER_ELEMENT,d=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,o),l=e._malloc(c);t.GetAttributeDataArrayForAllPoints(r,i,d,c,l);const h=new o(e.HEAPF32.buffer,l,a).slice();return e._free(l),{name:s,array:h,itemSize:n}}onmessage=function(s){const o=s.data;switch(o.type){case"init":e=o.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const s=o.buffer,i=o.taskConfig;t.then((e=>{const t=e.draco,n=new t.Decoder,a=new t.DecoderBuffer;a.Init(new Int8Array(s),s.byteLength);try{const e=function(e,t,s,o){const i=o.attributeIDs,n=o.attributeTypes;let a,c;const d=t.GetEncodedGeometryType(s);if(d===e.TRIANGULAR_MESH)a=new e.Mesh,c=t.DecodeBufferToMesh(s,a);else{if(d!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,c=t.DecodeBufferToPointCloud(s,a)}if(!c.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+c.error_msg());const l={index:null,attributes:[]};for(const h in i){const s=self[n[h]];let c,d;if(o.useUniqueIDs)d=i[h],c=t.GetAttributeByUniqueId(a,d);else{if(d=t.GetAttributeId(a,e[i[h]]),-1===d)continue;c=t.GetAttribute(a,d)}l.attributes.push(r(e,t,a,h,s,c))}d===e.TRIANGULAR_MESH&&(l.index=function(e,t,r){const s=r.num_faces(),o=3*s,i=4*o,n=e._malloc(i);t.GetTrianglesUInt32Array(r,i,n);const a=new Uint32Array(e.HEAPF32.buffer,n,o).slice();return e._free(n),{array:a,itemSize:1}}(e,t,a));return e.destroy(a),l}(t,n,a,i),s=e.attributes.map((e=>e.array.buffer));e.index&&s.push(e.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:e},s)}catch(c){console.error(c),self.postMessage({type:"error",id:o.id,error:c.message})}finally{t.destroy(a),t.destroy(n)}}))}}}}}]);