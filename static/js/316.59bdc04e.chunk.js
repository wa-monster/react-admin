(self.webpackChunkyang_template=self.webpackChunkyang_template||[]).push([[316],{3727:function(){"object"===typeof window&&window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(t){Object.prototype.hasOwnProperty.call(t,"append")||Object.defineProperty(t,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){for(var t=document.createDocumentFragment(),e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e){var n=e instanceof Node;t.appendChild(n?e:document.createTextNode(String(e)))})),this.appendChild(t)}})}))},9316:function(t,e,n){"use strict";n.d(e,{kJ:function(){return Kv}});var r={};n.r(r),n.d(r,{dot:function(){return Ql},doubleMesh:function(){return ec},fixedDot:function(){return Kl},mesh:function(){return tc}});var i={};n.r(i),n.d(i,{flipX:function(){return oc},flipXY:function(){return sc},flipY:function(){return ac},watermark:function(){return uc}});var o={};n.r(o),n.d(o,{blur:function(){return gc},brightness:function(){return kc},contrast:function(){return wc},dropShadow:function(){return dc},grayScale:function(){return vc},highlight:function(){return fc},hueRotate:function(){return mc},invert:function(){return bc},outline:function(){return hc},saturate:function(){return yc},sepia:function(){return pc}});var a={};n.r(a),n.d(a,{async:function(){return jh},block:function(){return kh},circle:function(){return Lh},circlePlus:function(){return Bh},classic:function(){return wh},cross:function(){return Sh},diamond:function(){return Ch},ellipse:function(){return Dh},path:function(){return Eh}});var s={};n.r(s),n.d(s,{annotations:function(){return ah},atConnectionLength:function(){return Yh},atConnectionLengthIgnoreGradient:function(){return Wh},atConnectionLengthKeepGradient:function(){return Uh},atConnectionRatio:function(){return $h},atConnectionRatioIgnoreGradient:function(){return Xh},atConnectionRatioKeepGradient:function(){return Jh},connection:function(){return Hh},displayEmpty:function(){return uh},eol:function(){return sh},fill:function(){return Qc},filter:function(){return ph},html:function(){return vh},lineHeight:function(){return rh},port:function(){return yh},ref:function(){return Pc},refCx:function(){return Bc},refCy:function(){return Ic},refD:function(){return Fc},refDKeepOffset:function(){return Rc},refDResetOffset:function(){return Dc},refDx:function(){return Oc},refDy:function(){return Ec},refHeight:function(){return Sc},refHeight2:function(){return Uc},refPoints:function(){return Gc},refPointsKeepOffset:function(){return Zc},refPointsResetOffset:function(){return Vc},refR:function(){return zc},refRCircumscribed:function(){return Lc},refRInscribed:function(){return Nc},refRx:function(){return Tc},refRy:function(){return jc},refWidth:function(){return Mc},refWidth2:function(){return Hc},refX:function(){return Ac},refX2:function(){return _c},refY:function(){return Cc},refY2:function(){return qc},resetOffset:function(){return fh},sourceMarker:function(){return Zh},stroke:function(){return Kc},style:function(){return dh},targetMarker:function(){return zh},text:function(){return th},textPath:function(){return oh},textVerticalAnchor:function(){return ih},textWrap:function(){return eh},title:function(){return lh},vertexMarker:function(){return Fh},xAlign:function(){return ch},yAlign:function(){return hh}});var u={};n.r(u),n.d(u,{className:function(){return nf},opacity:function(){return of},stroke:function(){return lf}});var l={};n.r(l),n.d(l,{absolute:function(){return ff},bottom:function(){return xf},ellipse:function(){return gf},ellipseSpread:function(){return df},left:function(){return bf},line:function(){return mf},right:function(){return kf},top:function(){return wf}});var c={};n.r(c),n.d(c,{bottom:function(){return Tf},inside:function(){return Lf},insideOriented:function(){return Bf},left:function(){return Ef},manual:function(){return Of},outside:function(){return jf},outsideOriented:function(){return Nf},radial:function(){return Zf},radialOriented:function(){return zf},right:function(){return Mf},top:function(){return Sf}});var h={};n.r(h),n.d(h,{noop:function(){return tg},pinAbsolute:function(){return og},pinRelative:function(){return ig}});var f={};n.r(f),n.d(f,{bottom:function(){return Og},bottomLeft:function(){return jg},bottomRight:function(){return Ng},center:function(){return Ag},left:function(){return Eg},midSide:function(){return Zg},nodeCenter:function(){return Vg},orth:function(){return Rg},right:function(){return Mg},top:function(){return Cg},topLeft:function(){return Sg},topRight:function(){return Tg}});var g={};n.r(g),n.d(g,{closest:function(){return qg},length:function(){return Gg},orth:function(){return Hg},ratio:function(){return Fg}});var d={};n.r(d),n.d(d,{anchor:function(){return Qg},bbox:function(){return Jg},boundary:function(){return Yg},rect:function(){return Xg}});var v={};n.r(v),n.d(v,{er:function(){return Sd},loop:function(){return Nd},manhattan:function(){return Od},metro:function(){return Md},normal:function(){return Kg},oneSide:function(){return td},orth:function(){return ad}});var p={};n.r(p),n.d(p,{jumpover:function(){return Hd},loop:function(){return Dd},normal:function(){return Id},rounded:function(){return Rd},smooth:function(){return Vd}});var y=n(2481),m=(n(3727),n(1953)),b=n(9044),k=function(){function t(){(0,m.Z)(this,t)}return(0,b.Z)(t,[{key:"disposed",get:function(){return!0===this._disposed}},{key:"dispose",value:function(){this._disposed=!0}}]),t}();!function(t){t.dispose=function(){return function(t,e,n){var r=n.value,i=t.__proto__;n.value=function(){if(!this.disposed){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r.call.apply(r,[this].concat(e)),i.dispose.call(this)}}}}}(k||(k={}));var w=function(){function t(){(0,m.Z)(this,t),this.isDisposed=!1,this.items=new Set}return(0,b.Z)(t,[{key:"disposed",get:function(){return this.isDisposed}},{key:"dispose",value:function(){this.isDisposed||(this.isDisposed=!0,this.items.forEach((function(t){t.dispose()})),this.items.clear())}},{key:"contains",value:function(t){return this.items.has(t)}},{key:"add",value:function(t){this.items.add(t)}},{key:"remove",value:function(t){this.items.delete(t)}},{key:"clear",value:function(){this.items.clear()}}]),t}();!function(t){t.from=function(e){var n=new t;return e.forEach((function(t){n.add(t)})),n}}(w||(w={}));var x=n(3664),P=n(6710),A=n(9624);var C=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},O="object"==typeof global&&global&&global.Object===Object&&global,E="object"==typeof self&&self&&self.Object===Object&&self,M=O||E||Function("return this")(),S=function(){return M.Date.now()},T=/\s/;var j=function(t){for(var e=t.length;e--&&T.test(t.charAt(e)););return e},N=/^\s+/;var L=function(t){return t?t.slice(0,j(t)+1).replace(N,""):t},B=M.Symbol,I=Object.prototype,D=I.hasOwnProperty,R=I.toString,V=B?B.toStringTag:void 0;var Z=function(t){var e=D.call(t,V),n=t[V];try{t[V]=void 0;var r=!0}catch(o){}var i=R.call(t);return r&&(e?t[V]=n:delete t[V]),i},z=Object.prototype.toString;var F=function(t){return z.call(t)},G=B?B.toStringTag:void 0;var _=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":G&&G in Object(t)?Z(t):F(t)};var q=function(t){return null!=t&&"object"==typeof t};var H=function(t){return"symbol"==typeof t||q(t)&&"[object Symbol]"==_(t)},U=/^[-+]0x[0-9a-f]+$/i,W=/^0b[01]+$/i,J=/^0o[0-7]+$/i,X=parseInt;var Y=function(t){if("number"==typeof t)return t;if(H(t))return NaN;if(C(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=C(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=L(t);var n=W.test(t);return n||J.test(t)?X(t.slice(2),n?2:8):U.test(t)?NaN:+t},$=Math.max,Q=Math.min;var K=function(t,e,n){var r,i,o,a,s,u,l=0,c=!1,h=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var n=r,o=i;return r=i=void 0,l=e,a=t.apply(o,n)}function d(t){var n=t-u;return void 0===u||n>=e||n<0||h&&t-l>=o}function v(){var t=S();if(d(t))return p(t);s=setTimeout(v,function(t){var n=e-(t-u);return h?Q(n,o-(t-l)):n}(t))}function p(t){return s=void 0,f&&r?g(t):(r=i=void 0,a)}function y(){var t=S(),n=d(t);if(r=arguments,i=this,u=t,n){if(void 0===s)return function(t){return l=t,s=setTimeout(v,e),c?g(t):a}(u);if(h)return clearTimeout(s),s=setTimeout(v,e),g(u)}return void 0===s&&(s=setTimeout(v,e)),a}return e=Y(e)||0,C(n)&&(c=!!n.leading,o=(h="maxWait"in n)?$(Y(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},y.flush=function(){return void 0===s?a:p(S())},y};var tt=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return C(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),K(t,e,{leading:r,maxWait:e,trailing:i})};function et(t,e,n){if(n)switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);case 4:return t.call(e,n[0],n[1],n[2],n[3]);case 5:return t.call(e,n[0],n[1],n[2],n[3],n[4]);case 6:return t.call(e,n[0],n[1],n[2],n[3],n[4],n[5]);default:return t.apply(e,n)}return t.call(e)}function nt(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return et(t,e,r)}function rt(t){return null!=t&&(t instanceof Promise||function(t){return"object"===typeof t&&t.then&&"function"===typeof t.then}(t))}function it(){for(var t=[],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.forEach((function(e){Array.isArray(e)?t.push.apply(t,(0,A.Z)(e)):t.push(e)})),t.some((function(t){return rt(t)}))){var i=t.map((function(t){return rt(t)?t:Promise.resolve(!1!==t)}));return Promise.all(i).then((function(t){return t.reduce((function(t,e){return!1!==e&&t}),!0)}))}return t.every((function(t){return!1!==t}))}function ot(t,e){for(var n=[],r=0;r<t.length;r+=2){var i=et(t[r],t[r+1],Array.isArray(e)?e:[e]);n.push(i)}return it(n)}var at=function(){function t(){(0,m.Z)(this,t),this.listeners={}}return(0,b.Z)(t,[{key:"on",value:function(t,e,n){return null==e||(this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e,n)),this}},{key:"once",value:function(t,e,n){var r=this;return this.on(t,(function i(){r.off(t,i);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return ot([e,n],a)}),this)}},{key:"off",value:function(t,e,n){if(!(t||e||n))return this.listeners={},this;var r=this.listeners;return(t?[t]:Object.keys(r)).forEach((function(t){var i=r[t];if(i)if(e||n)for(var o=i.length-2;o>=0;o-=2)e&&i[o]!==e||n&&i[o+1]!==n||i.splice(o,2);else delete r[t]})),this}},{key:"trigger",value:function(t){for(var e=!0,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if("*"!==t){var o=this.listeners[t];null!=o&&(e=ot((0,A.Z)(o),r))}var a=this.listeners["*"];return null!=a?it([e,ot((0,A.Z)(a),[t].concat(r))]):e}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.trigger.apply(this,[t].concat(n))}}]),t}(),st=Object.prototype.hasOwnProperty;var ut=function(t,e){return null!=t&&st.call(t,e)},lt=Array.isArray,ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ht=/^\w*$/;var ft=function(t,e){if(lt(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!H(t))||(ht.test(t)||!ct.test(t)||null!=e&&t in Object(e))};var gt=function(t){if(!C(t))return!1;var e=_(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},dt=M["__core-js_shared__"],vt=function(){var t=/[^.]+$/.exec(dt&&dt.keys&&dt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var pt=function(t){return!!vt&&vt in t},yt=Function.prototype.toString;var mt=function(t){if(null!=t){try{return yt.call(t)}catch(e){}try{return t+""}catch(e){}}return""},bt=/^\[object .+?Constructor\]$/,kt=Function.prototype,wt=Object.prototype,xt=kt.toString,Pt=wt.hasOwnProperty,At=RegExp("^"+xt.call(Pt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Ct=function(t){return!(!C(t)||pt(t))&&(gt(t)?At:bt).test(mt(t))};var Ot=function(t,e){return null==t?void 0:t[e]};var Et=function(t,e){var n=Ot(t,e);return Ct(n)?n:void 0},Mt=Et(Object,"create");var St=function(){this.__data__=Mt?Mt(null):{},this.size=0};var Tt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},jt=Object.prototype.hasOwnProperty;var Nt=function(t){var e=this.__data__;if(Mt){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return jt.call(e,t)?e[t]:void 0},Lt=Object.prototype.hasOwnProperty;var Bt=function(t){var e=this.__data__;return Mt?void 0!==e[t]:Lt.call(e,t)};var It=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Mt&&void 0===e?"__lodash_hash_undefined__":e,this};function Dt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Dt.prototype.clear=St,Dt.prototype.delete=Tt,Dt.prototype.get=Nt,Dt.prototype.has=Bt,Dt.prototype.set=It;var Rt=Dt;var Vt=function(){this.__data__=[],this.size=0};var Zt=function(t,e){return t===e||t!==t&&e!==e};var zt=function(t,e){for(var n=t.length;n--;)if(Zt(t[n][0],e))return n;return-1},Ft=Array.prototype.splice;var Gt=function(t){var e=this.__data__,n=zt(e,t);return!(n<0)&&(n==e.length-1?e.pop():Ft.call(e,n,1),--this.size,!0)};var _t=function(t){var e=this.__data__,n=zt(e,t);return n<0?void 0:e[n][1]};var qt=function(t){return zt(this.__data__,t)>-1};var Ht=function(t,e){var n=this.__data__,r=zt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function Ut(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ut.prototype.clear=Vt,Ut.prototype.delete=Gt,Ut.prototype.get=_t,Ut.prototype.has=qt,Ut.prototype.set=Ht;var Wt=Ut,Jt=Et(M,"Map");var Xt=function(){this.size=0,this.__data__={hash:new Rt,map:new(Jt||Wt),string:new Rt}};var Yt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var $t=function(t,e){var n=t.__data__;return Yt(e)?n["string"==typeof e?"string":"hash"]:n.map};var Qt=function(t){var e=$t(this,t).delete(t);return this.size-=e?1:0,e};var Kt=function(t){return $t(this,t).get(t)};var te=function(t){return $t(this,t).has(t)};var ee=function(t,e){var n=$t(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function ne(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ne.prototype.clear=Xt,ne.prototype.delete=Qt,ne.prototype.get=Kt,ne.prototype.has=te,ne.prototype.set=ee;var re=ne;function ie(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ie.Cache||re),n}ie.Cache=re;var oe=ie;var ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,se=/\\(\\)?/g,ue=function(t){var e=oe(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ae,(function(t,n,r,i){e.push(r?i.replace(se,"$1"):n||t)})),e}));var le=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},ce=B?B.prototype:void 0,he=ce?ce.toString:void 0;var fe=function t(e){if("string"==typeof e)return e;if(lt(e))return le(e,t)+"";if(H(e))return he?he.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n};var ge=function(t){return null==t?"":fe(t)};var de=function(t,e){return lt(t)?t:ft(t,e)?[t]:ue(ge(t))};var ve=function(t){return q(t)&&"[object Arguments]"==_(t)},pe=Object.prototype,ye=pe.hasOwnProperty,me=pe.propertyIsEnumerable,be=ve(function(){return arguments}())?ve:function(t){return q(t)&&ye.call(t,"callee")&&!me.call(t,"callee")},ke=be,we=/^(?:0|[1-9]\d*)$/;var xe=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&we.test(t))&&t>-1&&t%1==0&&t<e};var Pe=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var Ae=function(t){if("string"==typeof t||H(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};var Ce=function(t,e,n){for(var r=-1,i=(e=de(e,t)).length,o=!1;++r<i;){var a=Ae(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Pe(i)&&xe(a,i)&&(lt(t)||ke(t))};var Oe=function(t,e){return null!=t&&Ce(t,e,ut)};var Ee=function(t,e){for(var n=0,r=(e=de(e,t)).length;null!=t&&n<r;)t=t[Ae(e[n++])];return n&&n==r?t:void 0},Me=function(){try{var t=Et(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();var Se=function(t,e,n){"__proto__"==e&&Me?Me(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Te=Object.prototype.hasOwnProperty;var je=function(t,e,n){var r=t[e];Te.call(t,e)&&Zt(r,n)&&(void 0!==n||e in t)||Se(t,e,n)};var Ne=function(t,e,n,r){if(!C(t))return t;for(var i=-1,o=(e=de(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var u=Ae(e[i]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=a){var c=s[u];void 0===(l=r?r(c,u,s):void 0)&&(l=C(c)?c:xe(e[i+1])?[]:{})}je(s,u,l),s=s[u]}return t};var Le=function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=Ee(t,a);n(s,a)&&Ne(o,de(a,t),s)}return o};var Be=function(t,e){return null!=t&&e in Object(t)};var Ie=function(t,e){return null!=t&&Ce(t,e,Be)};var De=function(t,e){return Le(t,e,(function(e,n){return Ie(t,n)}))};var Re=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Ve=B?B.isConcatSpreadable:void 0;var Ze=function(t){return lt(t)||ke(t)||!!(Ve&&t&&t[Ve])};var ze=function t(e,n,r,i,o){var a=-1,s=e.length;for(r||(r=Ze),o||(o=[]);++a<s;){var u=e[a];n>0&&r(u)?n>1?t(u,n-1,r,i,o):Re(o,u):i||(o[o.length]=u)}return o};var Fe=function(t){return(null==t?0:t.length)?ze(t,1):[]};var Ge=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},_e=Math.max;var qe=function(t,e,n){return e=_e(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=_e(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),Ge(t,this,s)}};var He=function(t){return function(){return t}};var Ue=function(t){return t},We=Me?function(t,e){return Me(t,"toString",{configurable:!0,enumerable:!1,value:He(e),writable:!0})}:Ue,Je=Date.now;var Xe=function(t){var e=0,n=0;return function(){var r=Je(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},Ye=Xe(We);$e=function(t,e){return null==t?{}:De(t,e)},Ye(qe($e,void 0,Fe),$e+"");var $e;var Qe=function(){this.__data__=new Wt,this.size=0};var Ke=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var tn=function(t){return this.__data__.get(t)};var en=function(t){return this.__data__.has(t)};var nn=function(t,e){var n=this.__data__;if(n instanceof Wt){var r=n.__data__;if(!Jt||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new re(r)}return n.set(t,e),this.size=n.size,this};function rn(t){var e=this.__data__=new Wt(t);this.size=e.size}rn.prototype.clear=Qe,rn.prototype.delete=Ke,rn.prototype.get=tn,rn.prototype.has=en,rn.prototype.set=nn;var on=rn;var an=function(t,e,n){(void 0!==n&&!Zt(t[e],n)||void 0===n&&!(e in t))&&Se(t,e,n)};var sn=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}(),un="object"==typeof exports&&exports&&!exports.nodeType&&exports,ln=un&&"object"==typeof module&&module&&!module.nodeType&&module,cn=ln&&ln.exports===un?M.Buffer:void 0,hn=cn?cn.allocUnsafe:void 0;var fn=function(t,e){if(e)return t.slice();var n=t.length,r=hn?hn(n):new t.constructor(n);return t.copy(r),r},gn=M.Uint8Array;var dn=function(t){var e=new t.constructor(t.byteLength);return new gn(e).set(new gn(t)),e};var vn=function(t,e){var n=e?dn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var pn=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},yn=Object.create,mn=function(){function t(){}return function(e){if(!C(e))return{};if(yn)return yn(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var bn=function(t,e){return function(n){return t(e(n))}},kn=bn(Object.getPrototypeOf,Object),wn=Object.prototype;var xn=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||wn)};var Pn=function(t){return"function"!=typeof t.constructor||xn(t)?{}:mn(kn(t))};var An=function(t){return null!=t&&Pe(t.length)&&!gt(t)};var Cn=function(t){return q(t)&&An(t)};var On=function(){return!1},En="object"==typeof exports&&exports&&!exports.nodeType&&exports,Mn=En&&"object"==typeof module&&module&&!module.nodeType&&module,Sn=Mn&&Mn.exports===En?M.Buffer:void 0,Tn=(Sn?Sn.isBuffer:void 0)||On,jn=Function.prototype,Nn=Object.prototype,Ln=jn.toString,Bn=Nn.hasOwnProperty,In=Ln.call(Object);var Dn=function(t){if(!q(t)||"[object Object]"!=_(t))return!1;var e=kn(t);if(null===e)return!0;var n=Bn.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ln.call(n)==In},Rn={};Rn["[object Float32Array]"]=Rn["[object Float64Array]"]=Rn["[object Int8Array]"]=Rn["[object Int16Array]"]=Rn["[object Int32Array]"]=Rn["[object Uint8Array]"]=Rn["[object Uint8ClampedArray]"]=Rn["[object Uint16Array]"]=Rn["[object Uint32Array]"]=!0,Rn["[object Arguments]"]=Rn["[object Array]"]=Rn["[object ArrayBuffer]"]=Rn["[object Boolean]"]=Rn["[object DataView]"]=Rn["[object Date]"]=Rn["[object Error]"]=Rn["[object Function]"]=Rn["[object Map]"]=Rn["[object Number]"]=Rn["[object Object]"]=Rn["[object RegExp]"]=Rn["[object Set]"]=Rn["[object String]"]=Rn["[object WeakMap]"]=!1;var Vn=function(t){return q(t)&&Pe(t.length)&&!!Rn[_(t)]};var Zn=function(t){return function(e){return t(e)}},zn="object"==typeof exports&&exports&&!exports.nodeType&&exports,Fn=zn&&"object"==typeof module&&module&&!module.nodeType&&module,Gn=Fn&&Fn.exports===zn&&O.process,_n=function(){try{var t=Fn&&Fn.require&&Fn.require("util").types;return t||Gn&&Gn.binding&&Gn.binding("util")}catch(e){}}(),qn=_n&&_n.isTypedArray,Hn=qn?Zn(qn):Vn;var Un=function(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]};var Wn=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?Se(n,s,u):je(n,s,u)}return n};var Jn=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},Xn=Object.prototype.hasOwnProperty;var Yn=function(t,e){var n=lt(t),r=!n&&ke(t),i=!n&&!r&&Tn(t),o=!n&&!r&&!i&&Hn(t),a=n||r||i||o,s=a?Jn(t.length,String):[],u=s.length;for(var l in t)!e&&!Xn.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||xe(l,u))||s.push(l);return s};var $n=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},Qn=Object.prototype.hasOwnProperty;var Kn=function(t){if(!C(t))return $n(t);var e=xn(t),n=[];for(var r in t)("constructor"!=r||!e&&Qn.call(t,r))&&n.push(r);return n};var tr=function(t){return An(t)?Yn(t,!0):Kn(t)};var er=function(t){return Wn(t,tr(t))};var nr=function(t,e,n,r,i,o,a){var s=Un(t,n),u=Un(e,n),l=a.get(u);if(l)an(t,n,l);else{var c=o?o(s,u,n+"",t,e,a):void 0,h=void 0===c;if(h){var f=lt(u),g=!f&&Tn(u),d=!f&&!g&&Hn(u);c=u,f||g||d?lt(s)?c=s:Cn(s)?c=pn(s):g?(h=!1,c=fn(u,!0)):d?(h=!1,c=vn(u,!0)):c=[]:Dn(u)||ke(u)?(c=s,ke(s)?c=er(s):C(s)&&!gt(s)||(c=Pn(u))):h=!1}h&&(a.set(u,c),i(c,u,r,o,a),a.delete(u)),an(t,n,c)}};var rr=function t(e,n,r,i,o){e!==n&&sn(n,(function(a,s){if(o||(o=new on),C(a))nr(e,n,s,r,t,i,o);else{var u=i?i(Un(e,s),a,s+"",e,n,o):void 0;void 0===u&&(u=a),an(e,s,u)}}),tr)};var ir=function(t,e){return Ye(qe(t,e,Ue),t+"")};var or=function(t,e,n){if(!C(n))return!1;var r=typeof e;return!!("number"==r?An(n)&&xe(e,n.length):"string"==r&&e in n)&&Zt(n[e],t)};var ar=function(t){return ir((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&or(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e}))},sr=ar((function(t,e,n){rr(t,e,n)}));var ur=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var lr=function(t){return this.__data__.has(t)};function cr(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new re;++e<n;)this.add(t[e])}cr.prototype.add=cr.prototype.push=ur,cr.prototype.has=lr;var hr=cr;var fr=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var gr=function(t,e){return t.has(e)};var dr=function(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(t),c=o.get(e);if(l&&c)return l==e&&c==t;var h=-1,f=!0,g=2&n?new hr:void 0;for(o.set(t,e),o.set(e,t);++h<s;){var d=t[h],v=e[h];if(r)var p=a?r(v,d,h,e,t,o):r(d,v,h,t,e,o);if(void 0!==p){if(p)continue;f=!1;break}if(g){if(!fr(e,(function(t,e){if(!gr(g,e)&&(d===t||i(d,t,n,r,o)))return g.push(e)}))){f=!1;break}}else if(d!==v&&!i(d,v,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f};var vr=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n};var pr=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},yr=B?B.prototype:void 0,mr=yr?yr.valueOf:void 0;var br=function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new gn(t),new gn(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Zt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=vr;case"[object Set]":var u=1&r;if(s||(s=pr),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=dr(s(t),s(e),r,i,o,a);return a.delete(t),c;case"[object Symbol]":if(mr)return mr.call(t)==mr.call(e)}return!1};var kr=function(t,e,n){var r=e(t);return lt(t)?r:Re(r,n(t))};var wr=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o};var xr=function(){return[]},Pr=Object.prototype.propertyIsEnumerable,Ar=Object.getOwnPropertySymbols,Cr=Ar?function(t){return null==t?[]:(t=Object(t),wr(Ar(t),(function(e){return Pr.call(t,e)})))}:xr,Or=bn(Object.keys,Object),Er=Object.prototype.hasOwnProperty;var Mr=function(t){if(!xn(t))return Or(t);var e=[];for(var n in Object(t))Er.call(t,n)&&"constructor"!=n&&e.push(n);return e};var Sr=function(t){return An(t)?Yn(t):Mr(t)};var Tr=function(t){return kr(t,Sr,Cr)},jr=Object.prototype.hasOwnProperty;var Nr=function(t,e,n,r,i,o){var a=1&n,s=Tr(t),u=s.length;if(u!=Tr(e).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in e:jr.call(e,c)))return!1}var h=o.get(t),f=o.get(e);if(h&&f)return h==e&&f==t;var g=!0;o.set(t,e),o.set(e,t);for(var d=a;++l<u;){var v=t[c=s[l]],p=e[c];if(r)var y=a?r(p,v,c,e,t,o):r(v,p,c,t,e,o);if(!(void 0===y?v===p||i(v,p,n,r,o):y)){g=!1;break}d||(d="constructor"==c)}if(g&&!d){var m=t.constructor,b=e.constructor;m==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(g=!1)}return o.delete(t),o.delete(e),g},Lr=Et(M,"DataView"),Br=Et(M,"Promise"),Ir=Et(M,"Set"),Dr=Et(M,"WeakMap"),Rr="[object Map]",Vr="[object Promise]",Zr="[object Set]",zr="[object WeakMap]",Fr="[object DataView]",Gr=mt(Lr),_r=mt(Jt),qr=mt(Br),Hr=mt(Ir),Ur=mt(Dr),Wr=_;(Lr&&Wr(new Lr(new ArrayBuffer(1)))!=Fr||Jt&&Wr(new Jt)!=Rr||Br&&Wr(Br.resolve())!=Vr||Ir&&Wr(new Ir)!=Zr||Dr&&Wr(new Dr)!=zr)&&(Wr=function(t){var e=_(t),n="[object Object]"==e?t.constructor:void 0,r=n?mt(n):"";if(r)switch(r){case Gr:return Fr;case _r:return Rr;case qr:return Vr;case Hr:return Zr;case Ur:return zr}return e});var Jr=Wr,Xr="[object Arguments]",Yr="[object Array]",$r="[object Object]",Qr=Object.prototype.hasOwnProperty;var Kr=function(t,e,n,r,i,o){var a=lt(t),s=lt(e),u=a?Yr:Jr(t),l=s?Yr:Jr(e),c=(u=u==Xr?$r:u)==$r,h=(l=l==Xr?$r:l)==$r,f=u==l;if(f&&Tn(t)){if(!Tn(e))return!1;a=!0,c=!1}if(f&&!c)return o||(o=new on),a||Hn(t)?dr(t,e,n,r,i,o):br(t,e,u,n,r,i,o);if(!(1&n)){var g=c&&Qr.call(t,"__wrapped__"),d=h&&Qr.call(e,"__wrapped__");if(g||d){var v=g?t.value():t,p=d?e.value():e;return o||(o=new on),i(v,p,n,r,o)}}return!!f&&(o||(o=new on),Nr(t,e,n,r,i,o))};var ti=function t(e,n,r,i,o){return e===n||(null==e||null==n||!q(e)&&!q(n)?e!==e&&n!==n:Kr(e,n,r,i,t,o))};var ei=function(t,e){return ti(t,e)},ni=Object.prototype.hasOwnProperty;var ri=function(t){if(null==t)return!0;if(An(t)&&(lt(t)||"string"==typeof t||"function"==typeof t.splice||Tn(t)||Hn(t)||ke(t)))return!t.length;var e=Jr(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(xn(t))return!Mr(t).length;for(var n in t)if(ni.call(t,n))return!1;return!0};var ii=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t};var oi=function(t,e){return t&&Wn(e,Sr(e),t)};var ai=function(t,e){return t&&Wn(e,tr(e),t)};var si=function(t,e){return Wn(t,Cr(t),e)},ui=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Re(e,Cr(t)),t=kn(t);return e}:xr;var li=function(t,e){return Wn(t,ui(t),e)};var ci=function(t){return kr(t,tr,ui)},hi=Object.prototype.hasOwnProperty;var fi=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&hi.call(t,"index")&&(n.index=t.index,n.input=t.input),n};var gi=function(t,e){var n=e?dn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},di=/\w*$/;var vi=function(t){var e=new t.constructor(t.source,di.exec(t));return e.lastIndex=t.lastIndex,e},pi=B?B.prototype:void 0,yi=pi?pi.valueOf:void 0;var mi=function(t){return yi?Object(yi.call(t)):{}};var bi=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return dn(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return gi(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return vn(t,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return vi(t);case"[object Symbol]":return mi(t)}};var ki=function(t){return q(t)&&"[object Map]"==Jr(t)},wi=_n&&_n.isMap,xi=wi?Zn(wi):ki;var Pi=function(t){return q(t)&&"[object Set]"==Jr(t)},Ai=_n&&_n.isSet,Ci=Ai?Zn(Ai):Pi,Oi="[object Arguments]",Ei="[object Function]",Mi="[object Object]",Si={};Si[Oi]=Si["[object Array]"]=Si["[object ArrayBuffer]"]=Si["[object DataView]"]=Si["[object Boolean]"]=Si["[object Date]"]=Si["[object Float32Array]"]=Si["[object Float64Array]"]=Si["[object Int8Array]"]=Si["[object Int16Array]"]=Si["[object Int32Array]"]=Si["[object Map]"]=Si["[object Number]"]=Si[Mi]=Si["[object RegExp]"]=Si["[object Set]"]=Si["[object String]"]=Si["[object Symbol]"]=Si["[object Uint8Array]"]=Si["[object Uint8ClampedArray]"]=Si["[object Uint16Array]"]=Si["[object Uint32Array]"]=!0,Si["[object Error]"]=Si[Ei]=Si["[object WeakMap]"]=!1;var Ti=function t(e,n,r,i,o,a){var s,u=1&n,l=2&n,c=4&n;if(r&&(s=o?r(e,i,o,a):r(e)),void 0!==s)return s;if(!C(e))return e;var h=lt(e);if(h){if(s=fi(e),!u)return pn(e,s)}else{var f=Jr(e),g=f==Ei||"[object GeneratorFunction]"==f;if(Tn(e))return fn(e,u);if(f==Mi||f==Oi||g&&!o){if(s=l||g?{}:Pn(e),!u)return l?li(e,ai(s,e)):si(e,oi(s,e))}else{if(!Si[f])return o?e:{};s=bi(e,f,u)}}a||(a=new on);var d=a.get(e);if(d)return d;a.set(e,s),Ci(e)?e.forEach((function(i){s.add(t(i,n,r,i,e,a))})):xi(e)&&e.forEach((function(i,o){s.set(o,t(i,n,r,o,e,a))}));var v=h?void 0:(c?l?ci:Tr:l?tr:Sr)(e);return ii(v||e,(function(i,o){v&&(i=e[o=i]),je(s,o,t(i,n,r,o,e,a))})),s};var ji=function(t){return Ti(t,4)};var Ni=function(t){return Ti(t,5)},Li=Object.prototype,Bi=Li.hasOwnProperty,Ii=ir((function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&or(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=tr(o),s=-1,u=a.length;++s<u;){var l=a[s],c=t[l];(void 0===c||Zt(c,Li[l])&&!Bi.call(t,l))&&(t[l]=o[l])}return t}));var Di=function t(e,n,r,i,o,a){return C(e)&&C(n)&&(a.set(n,e),rr(e,n,void 0,t,a),a.delete(n)),e},Ri=ar((function(t,e,n,r){rr(t,e,n,r)})),Vi=ir((function(t){return t.push(void 0,Di),Ge(Ri,void 0,t)}));var Zi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])};var zi=/^\s*class\s+/.test("".concat((0,b.Z)((function t(){(0,m.Z)(this,t)}))))||/^\s*class\s*\{/.test("".concat(function(){return(0,b.Z)((function t(){(0,m.Z)(this,t)}))}()));function Fi(t,e){var n;return zi?n=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n)}(e):(n=function(){return e.apply(this,arguments)},function(t,e){function n(){this.constructor=t}Zi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(n,e)),Object.defineProperty(n,"name",{value:t}),n}function Gi(t){return"__proto__"===t}function _i(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",i=Array.isArray(e)?e:e.split(r);if(i.length)for(n=t;i.length;){var o=i.shift();if(Object(n)!==n||!o||!(o in n))return;n=n[o]}return n}function qi(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",i=Array.isArray(e)?e:e.split(r),o=i.pop();if(o&&!Gi(o)){var a=t;i.forEach((function(t){Gi(t)||(null==a[t]&&(a[t]={}),a=a[t])})),a[o]=n}return t}function Hi(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",r=Array.isArray(e)?e.slice():e.split(n),i=r.pop();if(i)if(r.length>0){var o=_i(t,r);o&&delete o[i]}else delete t[i];return t}var Ui=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Wi=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"dispose",value:function(){this.off()}}]),n}(at);Ui([k.dispose()],Wi.prototype,"dispose",null),function(t){t.dispose=k.dispose}(Wi||(Wi={})),function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach((function(e){Object.getOwnPropertyNames(e.prototype).forEach((function(n){"constructor"!==n&&Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype,n))}))}))}(Wi,k);var Ji=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1};var Xi=function(t){return t!==t};var Yi=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1};var $i=function(t,e,n){return e===e?Yi(t,e,n):Ji(t,Xi,n)};var Qi=function(t,e){return!!(null==t?0:t.length)&&$i(t,e,0)>-1};var Ki=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1};var to=function(){},eo=Ir&&1/pr(new Ir([,-0]))[1]==1/0?function(t){return new Ir(t)}:to;var no=function(t,e,n){var r=-1,i=Qi,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=Ki;else if(o>=200){var l=e?null:eo(t);if(l)return pr(l);a=!1,i=gr,u=new hr}else u=e?[]:s;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h===h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),s.push(c)}else i(u,h,n)||(u!==s&&u.push(h),s.push(c))}return s};var ro=function(t){return t&&t.length?no(t):[]},io=ir((function(t){return no(ze(t,1,Cn,!0))})),oo=Math.floor,ao=Math.min;var so=function(t,e,n,r){var i=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=n(e))!==e,s=null===e,u=H(e),l=void 0===e;i<o;){var c=oo((i+o)/2),h=n(t[c]),f=void 0!==h,g=null===h,d=h===h,v=H(h);if(a)var p=r||d;else p=l?d&&(r||f):s?d&&f&&(r||!g):u?d&&f&&!g&&(r||!v):!g&&!v&&(r?h<=e:h<e);p?i=c+1:o=c}return ao(o,4294967294)};var uo=function(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!H(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return so(t,e,Ue,n)};var lo=function(t,e){return uo(t,e)};var co=function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],l=t[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in t))return!1}else{var h=new on;if(r)var f=r(l,c,u,t,e,h);if(!(void 0===f?ti(c,l,3,r,h):f))return!1}}return!0};var ho=function(t){return t===t&&!C(t)};var fo=function(t){for(var e=Sr(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ho(i)]}return e};var go=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}};var vo=function(t){var e=fo(t);return 1==e.length&&e[0][2]?go(e[0][0],e[0][1]):function(n){return n===t||co(n,t,e)}};var po=function(t,e,n){var r=null==t?void 0:Ee(t,e);return void 0===r?n:r};var yo=function(t,e){return ft(t)&&ho(e)?go(Ae(t),e):function(n){var r=po(n,t);return void 0===r&&r===e?Ie(n,t):ti(e,r,3)}};var mo=function(t){return function(e){return null==e?void 0:e[t]}};var bo=function(t){return function(e){return Ee(e,t)}};var ko=function(t){return ft(t)?mo(Ae(t)):bo(t)};var wo=function(t){return"function"==typeof t?t:null==t?Ue:"object"==typeof t?lt(t)?yo(t[0],t[1]):vo(t):ko(t)};var xo=function(t,e,n){return so(t,e,wo(n,2))};var Po=function(t,e){return function(n,r){if(null==n)return n;if(!An(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}((function(t,e){return t&&sn(t,e,Sr)}));var Ao=function(t,e){var n=-1,r=An(t)?Array(t.length):[];return Po(t,(function(t,i,o){r[++n]=e(t,i,o)})),r};var Co=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t};var Oo=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t===t,o=H(t),a=void 0!==e,s=null===e,u=e===e,l=H(e);if(!s&&!l&&!o&&t>e||o&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0};var Eo=function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Oo(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index};var Mo=function(t,e,n){e=e.length?le(e,(function(t){return lt(t)?function(e){return Ee(e,1===t.length?t[0]:t)}:t})):[Ue];var r=-1;e=le(e,Zn(wo));var i=Ao(t,(function(t,n,i){return{criteria:le(e,(function(e){return e(t)})),index:++r,value:t}}));return Co(i,(function(t,e){return Eo(t,e,n)}))},So=ir((function(t,e){if(null==t)return[];var n=e.length;return n>1&&or(t,e[0],e[1])?e=[]:n>2&&or(e[0],e[1],e[2])&&(e=[e[0]]),Mo(t,ze(e,1),[])}));var To=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r};var jo=function(t,e,n,r){return Po(t,(function(t,i,o){e(r,t,n(t),o)})),r};var No=function(t,e){return function(n,r){var i=lt(n)?To:jo,o=e?e():{};return i(n,t,wo(r,2),o)}},Lo=Object.prototype.hasOwnProperty,Bo=No((function(t,e,n){Lo.call(t,n)?t[n].push(e):Se(t,n,[e])}));var Io=function(t,e,n,r){var i=-1,o=Qi,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=le(e,Zn(n))),r?(o=Ki,a=!1):e.length>=200&&(o=gr,a=!1,e=new hr(e));t:for(;++i<s;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h===h){for(var f=l;f--;)if(e[f]===h)continue t;u.push(c)}else o(e,h,r)||u.push(c)}return u},Do=ir((function(t,e){return Cn(t)?Io(t,ze(e,1,Cn,!0)):[]}));var Ro=function(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a===a&&!H(a):n(a,s)))var s=a,u=o}return u};var Vo=function(t,e){return t>e};var Zo=function(t){return t&&t.length?Ro(t,Ue,Vo):void 0};var zo=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n};var Fo=function(t){return function(e){return null==t?void 0:t[e]}}({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Go=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_o=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var qo=function(t){return(t=ge(t))&&t.replace(Go,Fo).replace(_o,"")},Ho=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var Uo=function(t){return t.match(Ho)||[]},Wo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Jo=function(t){return Wo.test(t)},Xo="\\ud800-\\udfff",Yo="\\u2700-\\u27bf",$o="a-z\\xdf-\\xf6\\xf8-\\xff",Qo="A-Z\\xc0-\\xd6\\xd8-\\xde",Ko="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ta="["+Ko+"]",ea="\\d+",na="["+Yo+"]",ra="["+$o+"]",ia="[^"+Xo+Ko+ea+Yo+$o+Qo+"]",oa="(?:\\ud83c[\\udde6-\\uddff]){2}",aa="[\\ud800-\\udbff][\\udc00-\\udfff]",sa="["+Qo+"]",ua="(?:"+ra+"|"+ia+")",la="(?:"+sa+"|"+ia+")",ca="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ha="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",fa="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",ga="[\\ufe0e\\ufe0f]?",da=ga+fa+("(?:\\u200d(?:"+["[^"+Xo+"]",oa,aa].join("|")+")"+ga+fa+")*"),va="(?:"+[na,oa,aa].join("|")+")"+da,pa=RegExp([sa+"?"+ra+"+"+ca+"(?="+[ta,sa,"$"].join("|")+")",la+"+"+ha+"(?="+[ta,sa+ua,"$"].join("|")+")",sa+"?"+ua+"+"+ca,sa+"+"+ha,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ea,va].join("|"),"g");var ya=function(t){return t.match(pa)||[]};var ma=function(t,e,n){return t=ge(t),void 0===(e=n?void 0:e)?Jo(t)?ya(t):Uo(t):t.match(e)||[]},ba=RegExp("['\u2019]","g");var ka=function(t){return function(e){return zo(ma(qo(e).replace(ba,"")),t,"")}};var wa=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o};var xa=function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:wa(t,e,n)},Pa=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Aa=function(t){return Pa.test(t)};var Ca=function(t){return t.split("")},Oa="\\ud800-\\udfff",Ea="["+Oa+"]",Ma="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Sa="\\ud83c[\\udffb-\\udfff]",Ta="[^"+Oa+"]",ja="(?:\\ud83c[\\udde6-\\uddff]){2}",Na="[\\ud800-\\udbff][\\udc00-\\udfff]",La="(?:"+Ma+"|"+Sa+")"+"?",Ba="[\\ufe0e\\ufe0f]?",Ia=Ba+La+("(?:\\u200d(?:"+[Ta,ja,Na].join("|")+")"+Ba+La+")*"),Da="(?:"+[Ta+Ma+"?",Ma,ja,Na,Ea].join("|")+")",Ra=RegExp(Sa+"(?="+Sa+")|"+Da+Ia,"g");var Va=function(t){return t.match(Ra)||[]};var Za=function(t){return Aa(t)?Va(t):Ca(t)};var za=function(t){return function(e){e=ge(e);var n=Aa(e)?Za(e):void 0,r=n?n[0]:e.charAt(0),i=n?xa(n,1).join(""):e.slice(1);return r[t]()+i}},Fa=za("toUpperCase"),Ga=ka((function(t,e,n){return t+(n?" ":"")+Fa(e)}));var _a=function(t){return Fa(ge(t).toLowerCase())},qa=ka((function(t,e,n){return e=e.toLowerCase(),t+(n?_a(e):e)})),Ha=ka((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ua=ka((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Wa=za("toLowerCase"),Ja=function(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}},Xa=Ja((function(t){return t.replace(/\B([A-Z])/g,"-$1").toLowerCase()})),Ya=Ja((function(t){return Ga(qa(t)).replace(/ /g,"")}));Ja((function(t){return Ha(t).replace(/ /g,"_")})),Ja((function(t){return Ua(t).replace(/ /g,".")})),Ja((function(t){return Ua(t).replace(/ /g,"/")})),Ja((function(t){return Fa(Ua(t))})),Ja((function(t){return Ga(qa(t))}));function $a(t){for(var e=2166136261,n=!1,r=t,i=0,o=r.length;i<o;i+=1){var a=r.charCodeAt(i);a>127&&!n&&(a=(r=unescape(encodeURIComponent(r))).charCodeAt(i),n=!0),e^=a,e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}return e>>>0}function Qa(){for(var t="",e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",n=0;n<36;n+=1){var r=e[n],i=16*Math.random()|0;t+=("x"===r?i:"y"===r?3&i|8:r).toString(16)}return t}var Ka=n(1);function ts(t,e,n){for(var r=new Array(e.length+1),i=new Array(e.length+1),o=n+1,a=0;a<=e.length;a+=1)r[a]=a;for(var s=1;s<=t.length;s+=1){var u=t.charCodeAt(s-1),l=s>n?s-n:1,c=e.length>n+s?n+s:e.length;i[0]=s;for(var h=s,f=1;f<l;f+=1)i[f]=o;for(var g=l;g<=c;g+=1){var d=u===e.charCodeAt(g-1)?r[g-1]:Math.min(r[g]+1,i[g-1]+1,r[g-1]+2);i[g]=d,h=Math.min(h,d)}for(var v=c+1;v<=e.length;v+=1)i[v]=o;if(h>n)return;var p=r;r=i,i=p}var y=r[e.length];return y>n?void 0:y}var es=function(t){return"number"==typeof t||q(t)&&"[object Number]"==_(t)};var ns=function(t,e,n){return t===t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t};var rs=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=Y(n))===n?n:0),void 0!==e&&(e=(e=Y(e))===e?e:0),ns(Y(t),e,n)};function is(t){return"string"===typeof t&&"%"===t.slice(-1)}function os(t,e){if(null==t)return 0;var n;if("string"===typeof t){if(n=parseFloat(t),is(t)&&(n/=100,Number.isFinite(n)))return n*e}else n=t;return Number.isFinite(n)?n>0&&n<1?n*e:n:0}function as(t){if("object"===typeof t){var e=0,n=0,r=0,i=0;return null!=t.vertical&&Number.isFinite(t.vertical)&&(n=i=t.vertical),null!=t.horizontal&&Number.isFinite(t.horizontal)&&(r=e=t.horizontal),null!=t.left&&Number.isFinite(t.left)&&(e=t.left),null!=t.top&&Number.isFinite(t.top)&&(n=t.top),null!=t.right&&Number.isFinite(t.right)&&(r=t.right),null!=t.bottom&&Number.isFinite(t.bottom)&&(i=t.bottom),{top:n,right:r,bottom:i,left:e}}var o=0;return null!=t&&Number.isFinite(t)&&(o=t),{top:o,right:o,bottom:o,left:o}}var ss,us=!1,ls=!1,cs=!1,hs=!1,fs=!1,gs=!1,ds=!1,vs=!1,ps=!1,ys=!1,ms=!1,bs=!1,ks=!1,ws=!1,xs=!1,Ps=!1;if("object"===typeof navigator){var As=navigator.userAgent;us=As.indexOf("Macintosh")>=0,ls=!!As.match(/(iPad|iPhone|iPod)/g),cs=As.indexOf("Windows")>=0,hs=As.indexOf("MSIE")>=0,fs=!!As.match(/Trident\/7\./),gs=!!As.match(/Edge\//),ds=As.indexOf("Mozilla/")>=0&&As.indexOf("MSIE")<0&&As.indexOf("Edge/")<0,ps=As.indexOf("Chrome/")>=0&&As.indexOf("Edge/")<0,ys=As.indexOf("Opera/")>=0||As.indexOf("OPR/")>=0,ms=As.indexOf("Firefox/")>=0,bs=As.indexOf("AppleWebKit/")>=0&&As.indexOf("Chrome/")<0&&As.indexOf("Edge/")<0,"object"===typeof document&&(Ps=!document.createElementNS||"[object SVGForeignObjectElement]"!=="".concat(document.createElementNS("http://www.w3.org/2000/svg","foreignObject"))||As.indexOf("Opera/")>=0)}if("object"===typeof window&&(vs=null!=window.chrome&&null!=window.chrome.app&&null!=window.chrome.app.runtime,ws=null!=window.PointerEvent&&!us),"object"===typeof document){ks="ontouchstart"in document.documentElement;try{var Cs=Object.defineProperty({},"passive",{get:function(){xs=!0}}),Os=document.createElement("div");Os.addEventListener&&Os.addEventListener("click",(function(){}),Cs)}catch(rp){}}!function(t){t.IS_MAC=us,t.IS_IOS=ls,t.IS_WINDOWS=cs,t.IS_IE=hs,t.IS_IE11=fs,t.IS_EDGE=gs,t.IS_NETSCAPE=ds,t.IS_CHROME_APP=vs,t.IS_CHROME=ps,t.IS_OPERA=ys,t.IS_FIREFOX=ms,t.IS_SAFARI=bs,t.SUPPORT_TOUCH=ks,t.SUPPORT_POINTER=ws,t.SUPPORT_PASSIVE=xs,t.NO_FOREIGNOBJECT=Ps,t.SUPPORT_FOREIGNOBJECT=!t.NO_FOREIGNOBJECT}(ss||(ss={})),function(t){function e(){var t=window.module;return null!=t&&null!=t.hot&&null!=t.hot.status?t.hot.status():"unkonwn"}t.getHMRStatus=e,t.isApplyingHMR=function(){return"apply"===e()};var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};t.isEventSupported=function(t){var e=document.createElement(n[t]||"div"),r="on".concat(t),i=r in e;return i||(e.setAttribute(r,"return;"),i="function"===typeof e[r]),i}}(ss||(ss={}));var Es=/[\t\r\n\f]/g,Ms=/\S+/g,Ss=function(t){return" ".concat(t," ")};function Ts(t){return t&&t.getAttribute&&t.getAttribute("class")||""}function js(t,e){if(null==t||null==e)return!1;var n=Ss(Ts(t)),r=Ss(e);return 1===t.nodeType&&n.replace(Es," ").includes(r)}function Ns(t,e){if(null!=t&&null!=e){if("function"===typeof e)return Ns(t,e(Ts(t)));if("string"===typeof e&&1===t.nodeType){var n=e.match(Ms)||[],r=Ss(Ts(t)).replace(Es," "),i=n.reduce((function(t,e){return t.indexOf(Ss(e))<0?"".concat(t).concat(e," "):t}),r);r!==(i=i.trim())&&t.setAttribute("class",i)}}}function Ls(t,e){if(null!=t){if("function"===typeof e)return Ls(t,e(Ts(t)));if((!e||"string"===typeof e)&&1===t.nodeType){var n=(e||"").match(Ms)||[],r=Ss(Ts(t)).replace(Es," "),i=n.reduce((function(t,e){var n=Ss(e);return t.indexOf(n)>-1?t.replace(n," "):t}),r);r!==(i=e?i.trim():"")&&t.setAttribute("class",i)}}}function Bs(t,e,n){if(null!=t&&null!=e)if(null==n||"string"!==typeof e){if("function"===typeof e)return Bs(t,e(Ts(t),n),n);if("string"===typeof e)(e.match(Ms)||[]).forEach((function(e){js(t,e)?Ls(t,e):Ns(t,e)}))}else n?Ns(t,e):Ls(t,e)}var Is=0;function Ds(t){return null!=t.id&&""!==t.id||(t.id="v".concat(Is+=1)),t.id}function Rs(t){return null!=t&&("function"===typeof t.getScreenCTM&&t instanceof SVGElement)}var Vs={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"};function Zs(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).createElement(t)}function zs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vs.xhtml;return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document).createElementNS(e,t)}function Fs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return zs(t,Vs.svg,e)}function Gs(t){if(t){var e=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var r=new DOMParser;if(null!=n.async)r.async=n.async;e=r.parseFromString(t,n.mimeType||"text/xml")}catch(i){e=void 0}if(!e||e.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: ".concat(t));return e}('<svg xmlns="'.concat(Vs.svg,'" xmlns:xlink="').concat(Vs.xlink,'" version="').concat("1.1",'">').concat(t,"</svg>"),{async:!1});return e.documentElement}var n=document.createElementNS(Vs.svg,"svg");return n.setAttributeNS(Vs.xmlns,"xmlns:xlink",Vs.xlink),n.setAttribute("version","1.1"),n}function _s(t){for(var e=0,n=t.previousSibling;n;)1===n.nodeType&&(e+=1),n=n.previousSibling;return e}function qs(t,e,n){for(var r=t.ownerSVGElement,i=t.parentNode;i&&i!==n&&i!==r;){if(js(i,e))return i;i=i.parentNode}return null}function Hs(t,e){var n=e&&e.parentNode;return t===n||!!(n&&1===n.nodeType&&16&t.compareDocumentPosition(n))}function Us(t){t&&(Array.isArray(t)?t:[t]).forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))}function Ws(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Js(t,e){(Array.isArray(e)?e:[e]).forEach((function(e){null!=e&&t.appendChild(e)}))}function Xs(t,e){var n=t.parentNode;n&&(Array.isArray(e)?e:[e]).forEach((function(e){null!=e&&n.insertBefore(e,t)}))}function Ys(t){try{return t instanceof HTMLElement}catch(e){return"object"===typeof t&&1===t.nodeType&&"object"===typeof t.style&&"object"===typeof t.ownerDocument}}var $s,Qs,Ks=["viewBox","attributeName","attributeType","repeatCount","textLength","lengthAdjust","gradientUnits"];function tu(t,e){var n=iu(e);n.ns?t.hasAttributeNS(n.ns,n.local)&&t.removeAttributeNS(n.ns,n.local):t.hasAttribute(e)&&t.removeAttribute(e)}function eu(t,e,n){if(null==n)return tu(t,e);var r=iu(e);r.ns&&"string"===typeof n?t.setAttributeNS(r.ns,e,n):"id"===e?t.id="".concat(n):t.setAttribute(e,"".concat(n))}function nu(t,e){Object.keys(e).forEach((function(n){eu(t,n,e[n])}))}function ru(t,e,n){if(null==e){for(var r=t.attributes,i={},o=0;o<r.length;o+=1)i[r[o].name]=r[o].value;return i}if("string"===typeof e&&void 0===n)return t.getAttribute(e);"object"===typeof e?nu(t,e):eu(t,e,n)}function iu(t){if(-1!==t.indexOf(":")){var e=t.split(":");return{ns:Vs[e[0]],local:e[1]}}return{ns:null,local:t}}function ou(t){var e={};return Object.keys(t).forEach((function(n){var r=Ks.includes(n)?n:Xa(n);e[r]=t[n]})),e}function au(t){var e={};return t.split(";").forEach((function(t){var n=t.trim();if(n){var r=n.split("=");r.length&&(e[r[0].trim()]=r[1]?r[1].trim():"")}})),e}function su(t,e){return Object.keys(e).forEach((function(n){if("class"===n)t[n]=t[n]?"".concat(t[n]," ").concat(e[n]):e[n];else if("style"===n){var r,i,o="object"===typeof t[n],a="object"===typeof e[n];o&&a?(r=t[n],i=e[n]):o?(r=t[n],i=au(e[n])):a?(r=au(t[n]),i=e[n]):(r=au(t[n]),i=au(e[n])),t[n]=su(r,i)}else t[n]=e[n]})),t}function uu(t,e){for(var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.offset||0,a=[],s=[],u=null,l=0;l<t.length;l+=1){n=s[l]=t[l];for(var c=0,h=e.length;c<h;c+=1){var f=e[c],g=f.start+o,d=f.end+o;l>=g&&l<d&&("string"===typeof n?n=s[l]={t:t[l],attrs:f.attrs}:n.attrs=su(su({},n.attrs),f.attrs),i.includeAnnotationIndices&&(null==n.annotations&&(n.annotations=[]),n.annotations.push(c)))}(r=s[l-1])?C(n)&&C(r)?JSON.stringify(n.attrs)===JSON.stringify(r.attrs)?u.t+=n.t:(a.push(u),u=n):C(n)||C(r)?(a.push(u),u=n):u=(u||"")+n:u=n}return null!=u&&a.push(u),a}!function(t){function e(t){var e="data:";return t.substr(0,5)===e}function n(t){var e,n=t.replace(/\s/g,""),r=(n=decodeURIComponent(n)).indexOf(","),i=n.slice(0,r),o=i.split(":")[1].split(";")[0],a=n.slice(r+1);e=i.indexOf("base64")>=0?atob(a):unescape(encodeURIComponent(a));for(var s=new Uint8Array(e.length),u=0;u<e.length;u+=1)s[u]=e.charCodeAt(u);return new Blob([s],{type:o})}function r(t,e){var n=window.navigator.msSaveBlob;if(n)n(t,e);else{var r=window.URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r)}}function i(t){var e=parseFloat(t);return Number.isNaN(e)?null:e}t.isDataUrl=e,t.imageToDataUri=function(t,n){if(t&&!e(t)){var r=function(){n(new Error("Failed to load image: ".concat(t)))},i=window.FileReader?function(t){if(200===t.status){var e=new FileReader;e.onload=function(t){var e=t.target.result;n(null,e)},e.onerror=r,e.readAsDataURL(t.response)}else r()}:function(e){if(200===e.status){var i=t.split(".").pop()||"png";"svg"===i&&(i="svg+xml");var o="data:image/".concat(i,";base64,"),a=new Uint8Array(e.response),s=o+btoa(function(t){for(var e=[],n=0;n<t.length;n+=32768)e.push(String.fromCharCode.apply(null,t.subarray(n,n+32768)));return e.join("")}(a));n(null,s)}else r()},o=new XMLHttpRequest;o.responseType=window.FileReader?"blob":"arraybuffer",o.open("GET",t,!0),o.addEventListener("error",r),o.addEventListener("load",(function(){return i(o)})),o.send()}else setTimeout((function(){return n(null,t)}))},t.dataUriToBlob=n,t.downloadBlob=r,t.downloadDataUri=function(t,e){r(n(t),e)},t.svgToDataUrl=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=function(e){return null==n&&(n=function(t){var e=t.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return e&&e[2]?e[2].replace(/\s+/," ").split(" "):null}(t)),null!=n?i(n[e]):null},o=function(e){var n=t.match(e);return n&&n[2]?i(n[2]):null},a=e.width;if(null==a&&(a=o(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==a&&(a=r(2)),null==a)throw new Error("Can not parse width from svg string");var s=e.height;if(null==s&&(s=o(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==s&&(s=r(3)),null==s)throw new Error("Can not parse height from svg string");var u=encodeURIComponent(t).replace(/'/g,"%27").replace(/"/g,"%22");return"".concat("data:image/svg+xml",",").concat(u)}}($s||($s={}));var lu,cu={px:function(t){return t},mm:function(t){return Qs*t},cm:function(t){return Qs*t*10},in:function(t){return Qs*t*25.4},pt:function(t){return Qs*(25.4*t/72)},pc:function(t){return Qs*(25.4*t/6)}};!function(t){function e(t,e,n){var r=document.createElement("div"),i=r.style;i.display="inline-block",i.position="absolute",i.left="-15000px",i.top="-15000px",i.width=t+(n||"px"),i.height=e+(n||"px"),document.body.appendChild(r);var o=r.getBoundingClientRect(),a={width:o.width||0,height:o.height||0};return document.body.removeChild(r),a}t.measure=e,t.toPx=function(t,n){null==Qs&&(Qs=e("1","1","mm").width);var r=n?cu[n]:null;return r?r(t):t}}(lu||(lu={}));var hu=/-(.)/g;var fu={},gu=["webkit","ms","moz","o"],du=document?document.createElement("div").style:{};function vu(t){var e=t.replace(hu,(function(t,e){return e.toUpperCase()}));if(null==fu[e]){var n=e.charAt(0).toUpperCase()+e.slice(1);fu[e]=e in du?e:function(t){for(var e=0;e<gu.length;e+=1){var n=gu[e]+t;if(n in du)return n}return null}(n)}return fu[e]}function pu(t,e){var n=t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):window.getComputedStyle(t,null);return n&&e?n.getPropertyValue(e)||n[e]:n}!function(){var t=document;t.selection||window.getSelection}();var yu={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function mu(t,e,n){var r=window.getComputedStyle(t,null);return n?r.getPropertyValue(e)||void 0:r[e]||t.style[e]}function bu(t,e,n){if("string"!==typeof e)for(var r in e)bu(t,r,e[r]);else{var i=function(t){return/^--/.test(t)}(e);if(i||(e=vu(e)),void 0===n)return mu(t,e,i);i||(n=function(t,e){return yu[t]||"number"!==typeof e?e:"".concat(e,"px")}(e,n));var o=t.style;i?o.setProperty(e,n):o[e]=n}}var ku=new WeakMap;function wu(t,e){var n=qa(e),r=ku.get(t);if(r)return r[n]}function xu(t,e,n){if(!e){var r={};return Object.keys(ku).forEach((function(e){r[e]=wu(t,e)})),r}if("string"===typeof e)return void 0===n?wu(t,e):void function(t,e,n){var r=qa(e),i=ku.get(t);i?i[r]=n:ku.set(t,(0,y.Z)({},r,n))}(t,e,n);for(var i in e)xu(t,i,e[i])}var Pu=n(6234),Au=function(t){function e(t,n,r){if((0,m.Z)(this,e),!t)throw new TypeError("Invalid element to create vector");var i;if(e.isVector(t))i=t.node;else if("string"===typeof t)if("svg"===t.toLowerCase())i=Gs();else if("<"===t[0]){var o=Gs(t);i=document.importNode(o.firstChild,!0)}else i=document.createElementNS(Vs.svg,t);else i=t;this.node=i,n&&this.setAttributes(n),r&&this.append(r)}return(0,b.Z)(e,[{key:t,get:function(){return e.toStringTag}},{key:"type",get:function(){return this.node.nodeName}},{key:"id",get:function(){return this.node.id}},{key:"id",set:function(t){this.node.id=t}},{key:"transform",value:function(t,e){return null==t?Ku(this.node):(Ku(this.node,t,e),this)}},{key:"translate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return null==t?tl(this.node):(tl(this.node,t,e,n),this)}},{key:"rotate",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return null==t?el(this.node):(el(this.node,t,e,n,r),this)}},{key:"scale",value:function(t,e){return null==t?nl(this.node):(nl(this.node,t,e),this)}},{key:"getTransformToElement",value:function(t){var n=e.toNode(t);return rl(this.node,n)}},{key:"removeAttribute",value:function(t){return tu(this.node,t),this}},{key:"getAttribute",value:function(t){return function(t,e){return t.getAttribute(e)}(this.node,t)}},{key:"setAttribute",value:function(t,e){return eu(this.node,t,e),this}},{key:"setAttributes",value:function(t){return nu(this.node,t),this}},{key:"attr",value:function(t,e){return null==t?ru(this.node):"string"===typeof t&&void 0===e?ru(this.node,t):("object"===typeof t?ru(this.node,t):ru(this.node,t,e),this)}},{key:"svg",value:function(){return this.node instanceof SVGSVGElement?this:e.create(this.node.ownerSVGElement)}},{key:"defs",value:function(){var t=this.svg()||this,n=t.node.getElementsByTagName("defs")[0];return n?e.create(n):e.create("defs").appendTo(t)}},{key:"text",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Su(this.node,t,e),this}},{key:"tagName",value:function(){return function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.nodeName;return e?n.toLowerCase():n.toUpperCase()}(this.node)}},{key:"clone",value:function(){return e.create(this.node.cloneNode(!0))}},{key:"remove",value:function(){return Us(this.node),this}},{key:"empty",value:function(){return Ws(this.node),this}},{key:"append",value:function(t){return Js(this.node,e.toNodes(t)),this}},{key:"appendTo",value:function(t){return function(t,e){null!=e&&e.appendChild(t)}(this.node,e.isVector(t)?t.node:t),this}},{key:"prepend",value:function(t){return function(t,e){var n=t.firstChild;n?Xs(n,e):Js(t,e)}(this.node,e.toNodes(t)),this}},{key:"before",value:function(t){return Xs(this.node,e.toNodes(t)),this}},{key:"replace",value:function(t){return this.node.parentNode&&this.node.parentNode.replaceChild(e.toNode(t),this.node),e.create(t)}},{key:"first",value:function(){return this.node.firstChild?e.create(this.node.firstChild):null}},{key:"last",value:function(){return this.node.lastChild?e.create(this.node.lastChild):null}},{key:"get",value:function(t){var n=this.node.childNodes[t];return n?e.create(n):null}},{key:"indexOf",value:function(t){return Array.prototype.slice.call(this.node.childNodes).indexOf(e.toNode(t))}},{key:"find",value:function(t){var n=[],r=function(t,e){return t.querySelectorAll(e)}(this.node,t);if(r)for(var i=0,o=r.length;i<o;i+=1)n.push(e.create(r[i]));return n}},{key:"findOne",value:function(t){var n=function(t,e){return t.querySelector(e)}(this.node,t);return n?e.create(n):null}},{key:"findParentByClass",value:function(t,n){var r=qs(this.node,t,n);return r?e.create(r):null}},{key:"matches",value:function(t){var e=this.node,n=(this.node.matches,e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null);return n&&n.call(e,t)}},{key:"contains",value:function(t){return Hs(this.node,e.isVector(t)?t.node:t)}},{key:"wrap",value:function(t){var n=e.create(t),r=this.node.parentNode;return null!=r&&r.insertBefore(n.node,this.node),n.append(this)}},{key:"parent",value:function(t){var n=this;if(null==n.node.parentNode)return null;if(n=e.create(n.node.parentNode),null==t)return n;do{if("string"===typeof t?n.matches(t):n instanceof t)return n}while(n=e.create(n.node.parentNode));return n}},{key:"children",value:function(){for(var t=this.node.childNodes,n=[],r=0;r<t.length;r+=1){1===t[r].nodeType&&n.push(e.create(t[r]))}return n}},{key:"eachChild",value:function(t,e){for(var n=this.children(),r=0,i=n.length;r<i;r+=1)t.call(n[r],n[r],r,n),e&&n[r].eachChild(t,e);return this}},{key:"index",value:function(){return _s(this.node)}},{key:"hasClass",value:function(t){return js(this.node,t)}},{key:"addClass",value:function(t){return Ns(this.node,t),this}},{key:"removeClass",value:function(t){return Ls(this.node,t),this}},{key:"toggleClass",value:function(t,e){return Bs(this.node,t,e),this}},{key:"toLocalPoint",value:function(t,e){return function(t,e,n){var r=t instanceof SVGSVGElement?t:t.ownerSVGElement,i=r.createSVGPoint();i.x=e,i.y=n;try{var o=r.getScreenCTM(),a=i.matrixTransform(o.inverse()),s=rl(t,r).inverse();return a.matrixTransform(s)}catch(u){return i}}(this.node,t,e)}},{key:"sample",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.node instanceof SVGPathElement?function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=t.getTotalLength(),i=[],o=0;for(;o<r;)e=t.getPointAtLength(o),i.push({distance:o,x:e.x,y:e.y}),o+=n;return i}(this.node,t):[]}},{key:"toPath",value:function(){return e.create(function(t){var e=Fs("path");ru(e,ru(t));var n=Vu(t);n&&e.setAttribute("d",n);return e}(this.node))}},{key:"toPathData",value:function(){return Vu(this.node)}}]),e}(Symbol.toStringTag);!function(t){function e(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag],r=e;return(null==n||n===t.toStringTag)&&r.node instanceof SVGElement&&"function"===typeof r.sample&&"function"===typeof r.toPath}function n(e,n,r){return new t(e,n,r)}function r(t){return e(t)?t.node:t}t.toStringTag="X6.".concat(t.name),t.isVector=e,t.create=n,t.createVectors=function(t){if("<"===t[0]){for(var e=Gs(t),r=[],i=0,o=e.childNodes.length;i<o;i+=1){var a=e.childNodes[i];r.push(n(document.importNode(a,!0)))}return r}return[n(t)]},t.toNode=r,t.toNodes=function(t){return Array.isArray(t)?t.map((function(t){return r(t)})):[r(t)]}}(Au||(Au={}));var Cu=document.createElement("canvas").getContext("2d");function Ou(t,e,n){for(var r,i=n.eol,o=n.baseSize,a=n.lineHeight,s=0,u={},l=e.length-1,c=0;c<=l;c+=1){var h=e[c],f=null;if("object"===typeof h){var g=h.attrs,d=Au.create("tspan",g);r=d.node;var v=h.t;i&&c===l&&(v+=i),r.textContent=v;var p=g.class;p&&d.addClass(p),n.includeAnnotationIndices&&d.attr("annotations",h.annotations.join(",")),void 0===(f=parseFloat(g["font-size"]))&&(f=o),f&&f>s&&(s=f)}else i&&c===l&&(h+=i),r=document.createTextNode(h||" "),o&&o>s&&(s=o);t.appendChild(r)}return s&&(u.maxFontSize=s),a?u.lineHeight=a:s&&(u.lineHeight=1.2*s),u}var Eu=/em$/;function Mu(t,e){var n=parseFloat(t);return Eu.test(t)?n*e:n}function Su(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=e.replace(/ /g,"\xa0");var r=n.eol,i=n.textPath,o=n.textVerticalAnchor,a="middle"===o||"bottom"===o||"top"===o,s=n.x;void 0===s&&(s=t.getAttribute("x")||0);var u=n.includeAnnotationIndices,l=n.annotations;l&&!Array.isArray(l)&&(l=[l]);var c=n.lineHeight,h="auto"===c,f=h?"1.5em":c||"1em",g=!0,d=t.childNodes;if(1===d.length){var v=d[0];v&&"TITLE"===v.tagName.toUpperCase()&&(g=!1)}g&&Ws(t),ru(t,{"xml:space":"preserve",display:e||n.displayEmpty?null:"none"});var p,y,m=ru(t,"font-size"),b=parseFloat(m);b||(b=16,!a&&!l||m||ru(t,"font-size","".concat(b))),i?("string"===typeof i&&(i={d:i}),p=function(t,e){var n=Au.create(e),r=Au.create("textPath"),i=t.d;if(i&&void 0===t["xlink:href"]){var o=Au.create("path").attr("d",i).appendTo(n.defs());r.attr("xlink:href","#".concat(o.id))}return"object"===typeof t&&r.attr(t),r.node}(i,t)):p=document.createDocumentFragment();for(var k,w=0,x=e.split("\n"),P=[],A=x.length-1,C=0;C<=A;C+=1){y=f;var O="v-line",E=Fs("tspan"),M=void 0,S=x[C];if(S)if(l){var T=(M=Ou(E,uu(S,l,{offset:-w,includeAnnotationIndices:u}),{eol:C!==A&&r,baseSize:b,lineHeight:h?null:f,includeAnnotationIndices:u})).lineHeight;T&&h&&0!==C&&(y=T),0===C&&(k=.8*M.maxFontSize)}else r&&C!==A&&(S+=r),E.textContent=S;else{E.textContent="-",O+=" v-empty-line";var j=E.style;j.fillOpacity=0,j.strokeOpacity=0,l&&(M={})}M&&P.push(M),C>0&&E.setAttribute("dy",y),(C>0||i)&&E.setAttribute("x",s),E.className.baseVal=O,p.appendChild(E),w+=S.length+1}if(a)if(l)y=function(t,e,n,r){if(!Array.isArray(e))return 0;var i=e.length;if(!i)return 0;for(var o=e[0],a=Mu(o.maxFontSize,n)||n,s=0,u=Mu(r,n),l=1;l<i;l+=1)s+=Mu((o=e[l]).lineHeight,n)||u;var c,h=Mu(o.maxFontSize,n)||n;switch(t){case"middle":c=a/2-.15*h-s/2;break;case"bottom":c=-.25*h-s;break;default:c=.8*a}return c}(o,P,b,f);else if("top"===o)y="0.8em";else{var N;switch(A>0?(N=parseFloat(f)||1,N*=A,Eu.test(f)||(N/=b)):N=0,o){case"middle":y="".concat(.3-N/2,"em");break;case"bottom":y="".concat(-N-.3,"em")}}else 0===o?y="0em":o?y=o:(y=0,null==t.getAttribute("y")&&t.setAttribute("y","".concat(k||"0.8em")));p.firstChild.setAttribute("dy",y),t.appendChild(p)}function Tu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return{width:0};var n=[],r=e["font-size"]?"".concat(parseFloat(e["font-size"]),"px"):"14px";return n.push(e["font-style"]||"normal"),n.push(e["font-variant"]||"normal"),n.push(e["font-weight"]||400),n.push(r),n.push(e["font-family"]||"sans-serif"),Cu.font=n.join(" "),Cu.measureText(t)}function ju(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e>=n)return[t,""];var i=t.length,o={},a=Math.round(e/n*i-1);for(a<0&&(a=0);a>=0&&a<i;){var s=t.slice(0,a),u=o[s]||Tu(s,r).width,l=t.slice(0,a+1),c=o[l]||Tu(l,r).width;if(o[s]=u,o[l]=c,u>e)a-=1;else{if(!(c<=e))break;a+=1}}return[t.slice(0,a),t.slice(a)]}function Nu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.width,o=e.height,a=r.eol||"\n",s=n.fontSize||14,u=n.lineHeight?parseFloat(n.lineHeight):Math.ceil(1.4*s),l=Math.floor(o/u);if(t.indexOf(a)>-1){var c=Qa(),h=[];return t.split(a).map((function(t){var i=Nu(t,Object.assign(Object.assign({},e),{height:Number.MAX_SAFE_INTEGER}),n,Object.assign(Object.assign({},r),{eol:c}));i&&h.push.apply(h,(0,A.Z)(i.split(c)))})),h.slice(0,l).join(a)}var f=Tu(t,n).width;if(f<i)return t;var g=[],d=t,v=f,p=r.ellipsis,y=0;p&&("string"!==typeof p&&(p="\u2026"),y=Tu(p,n).width);for(var m=0;m<l;m+=1){if(!(v>i)){g.push(d);break}if(m===l-1){var b=ju(d,i-y,v,n),k=(0,Pu.Z)(b,1)[0];g.push(p?"".concat(k).concat(p):k)}else{var w=ju(d,i,v,n),x=(0,Pu.Z)(w,2),P=x[0],C=x[1];g.push(P),v=Tu(d=C,n).width}}return g.join(a)}var Lu=.551784;function Bu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,r=t.getAttribute(e);if(null==r)return n;var i=parseFloat(r);return Number.isNaN(i)?n:i}function Iu(t){var e=t.map((function(t){return"".concat(t.x," ").concat(t.y)}));return"M ".concat(e.join(" L"))}function Du(t){var e=[],n=t.points;if(n)for(var r=0,i=n.numberOfItems;r<i;r+=1)e.push(n.getItem(r));return e}function Ru(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=Math.min(t.rx||t["top-rx"]||0,r/2),a=Math.min(t.rx||t["bottom-rx"]||0,r/2),s=Math.min(t.ry||t["top-ry"]||0,i/2),u=Math.min(t.ry||t["bottom-ry"]||0,i/2);return(o||a||s||u?["M",e,n+s,"v",i-s-u,"a",a,u,0,0,0,a,u,"h",r-2*a,"a",a,u,0,0,0,a,-u,"v",-(i-u-s),"a",o,s,0,0,0,-o,-s,"h",-(r-2*o),"a",o,s,0,0,0,-o,s,"Z"]:["M",e,n,"H",e+r,"V",n+i,"H",e,"V",n,"Z"]).join(" ")}function Vu(t){var e=t.tagName.toLowerCase();switch(e){case"path":return t.getAttribute("d");case"line":return function(t){return["M",Bu(t,"x1"),Bu(t,"y1"),"L",Bu(t,"x2"),Bu(t,"y2")].join(" ")}(t);case"polygon":return function(t){var e=Du(t);return 0===e.length?null:"".concat(Iu(e)," Z")}(t);case"polyline":return function(t){var e=Du(t);return 0===e.length?null:Iu(e)}(t);case"ellipse":return function(t){var e=Bu(t,"cx",0),n=Bu(t,"cy",0),r=Bu(t,"rx"),i=Bu(t,"ry")||r,o=r*Lu,a=i*Lu;return["M",e,n-i,"C",e+o,n-i,e+r,n-a,e+r,n,"C",e+r,n+a,e+o,n+i,e,n+i,"C",e-o,n+i,e-r,n+a,e-r,n,"C",e-r,n-a,e-o,n-i,e,n-i,"Z"].join(" ")}(t);case"circle":return function(t){var e=Bu(t,"cx",0),n=Bu(t,"cy",0),r=Bu(t,"r"),i=r*Lu;return["M",e,n-r,"C",e+i,n-r,e+r,n-i,e+r,n,"C",e+r,n+i,e+i,n+r,e,n+r,"C",e-i,n+r,e-r,n+i,e-r,n,"C",e-r,n-i,e-i,n-r,e,n-r,"Z"].join(" ")}(t);case"rect":return function(t){return Ru({x:Bu(t,"x",0),y:Bu(t,"y",0),width:Bu(t,"width",0),height:Bu(t,"height",0),rx:Bu(t,"rx",0),ry:Bu(t,"ry",0)})}(t)}throw new Error('"'.concat(e,'" cannot be converted to svg path element.'))}var Zu,zu,Fu,Gu=Fs("svg"),_u=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,qu=/[ ,]+/,Hu=/^(\w+)\((.*)\)/;function Uu(t,e){var n=Gu.createSVGPoint();return n.x=t,n.y=e,n}function Wu(t){var e=Gu.createSVGMatrix();if(null!=t){var n=t,r=e;for(var i in n)r[i]=n[i]}return e}function Ju(t){return null!=t?(t instanceof DOMMatrix||(t=Wu(t)),Gu.createSVGTransformFromMatrix(t)):Gu.createSVGTransform()}function Xu(t){var e=Wu(),n=null!=t&&t.match(_u);if(!n)return e;for(var r=0,i=n.length;r<i;r+=1){var o=n[r].match(Hu);if(o){var a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,h=Wu(),f=o[2].split(qu);switch(o[1].toLowerCase()){case"scale":a=parseFloat(f[0]),s=void 0===f[1]?a:parseFloat(f[1]),h=h.scaleNonUniform(a,s);break;case"translate":u=parseFloat(f[0]),l=parseFloat(f[1]),h=h.translate(u,l);break;case"rotate":c=parseFloat(f[0]),u=parseFloat(f[1])||0,l=parseFloat(f[2])||0,h=0!==u||0!==l?h.translate(u,l).rotate(c).translate(-u,-l):h.rotate(c);break;case"skewx":c=parseFloat(f[0]),h=h.skewX(c);break;case"skewy":c=parseFloat(f[0]),h=h.skewY(c);break;case"matrix":h.a=parseFloat(f[0]),h.b=parseFloat(f[1]),h.c=parseFloat(f[2]),h.d=parseFloat(f[3]),h.e=parseFloat(f[4]),h.f=parseFloat(f[5]);break;default:continue}e=e.multiply(h)}}return e}function Yu(t){var e=t||{},n=null!=e.a?e.a:1,r=null!=e.b?e.b:0,i=null!=e.c?e.c:0,o=null!=e.d?e.d:1,a=null!=e.e?e.e:0,s=null!=e.f?e.f:0;return"matrix(".concat(n,",").concat(r,",").concat(i,",").concat(o,",").concat(a,",").concat(s,")")}function $u(t){var e,n,r;if(t){var i=qu;if(t.trim().indexOf("matrix")>=0){var o=function(t){var e=Qu(t,{x:0,y:1}),n=Qu(t,{x:1,y:0}),r=180/Math.PI*Math.atan2(e.y,e.x)-90,i=180/Math.PI*Math.atan2(n.y,n.x);return{skewX:r,skewY:i,translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),rotation:r}}(Xu(t));e=[o.translateX,o.translateY],n=[o.rotation],r=[o.scaleX,o.scaleY];var a=[];0===e[0]&&0===e[1]||a.push("translate(".concat(e.join(","),")")),1===r[0]&&1===r[1]||a.push("scale(".concat(r.join(","),")")),0!==n[0]&&a.push("rotate(".concat(n[0],")")),t=a.join(" ")}else{var s=t.match(/translate\((.*?)\)/);s&&(e=s[1].split(i));var u=t.match(/rotate\((.*?)\)/);u&&(n=u[1].split(i));var l=t.match(/scale\((.*?)\)/);l&&(r=l[1].split(i))}}var c=r&&r[0]?parseFloat(r[0]):1;return{raw:t||"",translation:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotation:{angle:n&&n[0]?parseInt(n[0],10):0,cx:n&&n[1]?parseInt(n[1],10):void 0,cy:n&&n[2]?parseInt(n[2],10):void 0},scale:{sx:c,sy:r&&r[1]?parseFloat(r[1]):c}}}function Qu(t,e){return{x:e.x*t.a+e.y*t.c+0,y:e.x*t.b+e.y*t.d+0}}function Ku(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==e)return Xu(ru(t,"transform"));if(n.absolute)t.setAttribute("transform",Yu(e));else{var r=t.transform,i=Ju(e);r.baseVal.appendItem(i)}}function tl(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=ru(t,"transform"),o=$u(i);if(null==e)return o.translation;i=(i=o.raw).replace(/translate\([^)]*\)/g,"").trim();var a=r.absolute?e:o.translation.tx+e,s=r.absolute?n:o.translation.ty+n,u="translate(".concat(a,",").concat(s,")");t.setAttribute("transform","".concat(u," ").concat(i).trim())}function el(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=ru(t,"transform"),a=$u(o);if(null==e)return a.rotation;o=(o=a.raw).replace(/rotate\([^)]*\)/g,"").trim(),e%=360;var s=i.absolute?e:a.rotation.angle+e,u=null!=n&&null!=r?",".concat(n,",").concat(r):"",l="rotate(".concat(s).concat(u,")");t.setAttribute("transform","".concat(o," ").concat(l).trim())}function nl(t,e,n){var r=ru(t,"transform"),i=$u(r);if(null==e)return i.scale;n=null==n?e:n,r=(r=i.raw).replace(/scale\([^)]*\)/g,"").trim();var o="scale(".concat(e,",").concat(n,")");t.setAttribute("transform","".concat(r," ").concat(o).trim())}function rl(t,e){if(Rs(e)&&Rs(t)){var n=e.getScreenCTM(),r=t.getScreenCTM();if(n&&r)return n.inverse().multiply(r)}return Wu()}!function(t){var e={};t.get=function(t){return e[t]||{}},t.register=function(t,n){e[t]=n},t.unregister=function(t){delete e[t]}}(Zu||(Zu={})),function(t){var e=new WeakMap;t.ensure=function(t){return e.has(t)||e.set(t,{events:Object.create(null)}),e.get(t)},t.get=function(t){return e.get(t)},t.remove=function(t){return e.delete(t)}}(zu||(zu={})),function(t){t.returnTrue=function(){return!0},t.returnFalse=function(){return!1},t.stopPropagationCallback=function(t){t.stopPropagation()},t.addEventListener=function(t,e,n){null!=t.addEventListener&&t.addEventListener(e,n)},t.removeEventListener=function(t,e,n){null!=t.removeEventListener&&t.removeEventListener(e,n)}}(Fu||(Fu={})),function(t){var e=/[^\x20\t\r\n\f]+/g,n=/^([^.]*)(?:\.(.+)|)/;t.splitType=function(t){return(t||"").match(e)||[""]},t.normalizeType=function(t){var e=n.exec(t)||[];return{originType:e[1]?e[1].trim():e[1],namespaces:e[2]?e[2].split(".").map((function(t){return t.trim()})).sort():[]}},t.isValidTarget=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},t.isValidSelector=function(t,e){if(e){var n=t;return null!=n.querySelector&&null!=n.querySelector(e)}return!0}}(Fu||(Fu={})),function(t){var e=0,n=new WeakMap;t.ensureHandlerId=function(t){return n.has(t)||(n.set(t,e),e+=1),n.get(t)},t.getHandlerId=function(t){return n.get(t)},t.removeHandlerId=function(t){return n.delete(t)},t.setHandlerId=function(t,e){return n.set(t,e)}}(Fu||(Fu={})),function(t){t.getHandlerQueue=function(t,e){var n=[],r=zu.get(t),i=r&&r.events&&r.events[e.type],o=i&&i.handlers||[],a=i?i.delegateCount:0;if(a>0&&!("click"===e.type&&"number"===typeof e.button&&e.button>=1))for(var s=e.target;s!==t;s=s.parentNode||t)if(1===s.nodeType&&("click"!==e.type||!0!==s.disabled)){for(var u=[],l={},c=function(){var e=o[h],n=e.selector;if(null!=n&&null==l[n]){var r=[];t.querySelectorAll(n).forEach((function(t){r.push(t)})),l[n]=r.includes(s)}l[n]&&u.push(e)},h=0;h<a;h+=1)c();u.length&&n.push({elem:s,handlers:u})}return a<o.length&&n.push({elem:t,handlers:o.slice(a)}),n}}(Fu||(Fu={})),function(t){t.isWindow=function(t){return null!=t&&t===t.window}}(Fu||(Fu={})),function(t){t.contains=function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}}(Fu||(Fu={}));var il,ol=(0,b.Z)((function t(e,n){var r=this;(0,m.Z)(this,t),this.isDefaultPrevented=Fu.returnFalse,this.isPropagationStopped=Fu.returnFalse,this.isImmediatePropagationStopped=Fu.returnFalse,this.isSimulated=!1,this.preventDefault=function(){var t=r.originalEvent;r.isDefaultPrevented=Fu.returnTrue,t&&!r.isSimulated&&t.preventDefault()},this.stopPropagation=function(){var t=r.originalEvent;r.isPropagationStopped=Fu.returnTrue,t&&!r.isSimulated&&t.stopPropagation()},this.stopImmediatePropagation=function(){var t=r.originalEvent;r.isImmediatePropagationStopped=Fu.returnTrue,t&&!r.isSimulated&&t.stopImmediatePropagation(),r.stopPropagation()},"string"===typeof e?this.type=e:e.type&&(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Fu.returnTrue:Fu.returnFalse,this.target=e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget,this.timeStamp=e.timeStamp),n&&Object.assign(this,n),this.timeStamp||(this.timeStamp=Date.now())}));!function(t){t.create=function(e){return e instanceof t?e:new t(e)}}(ol||(ol={})),function(t){t.addProperty=function(e,n){Object.defineProperty(t.prototype,e,{enumerable:!0,configurable:!0,get:"function"===typeof n?function(){if(this.originalEvent)return n(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})}}(ol||(ol={})),function(t){var e={bubbles:!0,cancelable:!0,eventPhase:!0,detail:!0,view:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pageX:!0,pageY:!0,screenX:!0,screenY:!0,toElement:!0,pointerId:!0,pointerType:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,touches:!0,changedTouches:!0,targetTouches:!0,which:!0,altKey:!0,ctrlKey:!0,metaKey:!0,shiftKey:!0};Object.keys(e).forEach((function(n){return t.addProperty(n,e[n])}))}(ol||(ol={})),il||(il={}),Zu.register("load",{noBubble:!0}),il||(il={}),Zu.register("beforeunload",{postDispatch:function(t,e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}),il||(il={}),Zu.register("mouseenter",{delegateType:"mouseover",bindType:"mouseover",handle:function(t,e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===t||Fu.contains(t,r))||(e.type=i.originType,n=i.handler.call(t,e),e.type="mouseover"),n}}),Zu.register("mouseleave",{delegateType:"mouseout",bindType:"mouseout",handle:function(t,e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===t||Fu.contains(t,r))||(e.type=i.originType,n=i.handler.call(t,e),e.type="mouseout"),n}});var al,sl,ul,ll=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};!function(t){var e;function n(t,e){var n=ol.create(e);n.delegateTarget=t;var r=Zu.get(n.type);if(!r.preDispatch||!1!==r.preDispatch(t,n)){for(var i=Fu.getHandlerQueue(t,n),o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];for(var u=0,l=i.length;u<l&&!n.isPropagationStopped();u+=1){var c=i[u];n.currentTarget=c.elem;for(var h=0,f=c.handlers.length;h<f&&!n.isImmediatePropagationStopped();h+=1){var g=c.handlers[h];if(null==n.rnamespace||g.namespace&&n.rnamespace.test(g.namespace)){var d;n.handleObj=g,n.data=g.data;var v=Zu.get(g.originType).handle,p=v?v.apply(void 0,[c.elem,n].concat(a)):(d=g.handler).call.apply(d,[c.elem,n].concat(a));void 0!==p&&(n.result=p,!1===p&&(n.preventDefault(),n.stopPropagation()))}}}return r.postDispatch&&r.postDispatch(t,n),n.result}}t.on=function(t,r,i,o,a){if(Fu.isValidTarget(t)){var s;if("function"!==typeof i){var u=i,l=u.handler,c=u.selector,h=ll(i,["handler","selector"]);i=l,a=c,s=h}var f=zu.ensure(t),g=f.handler;null==g&&(g=f.handler=function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return e!==r.type?n.apply(void 0,[t,r].concat(o)):void 0});var d=Fu.ensureHandlerId(i);Fu.splitType(r).forEach((function(e){var n=Fu.normalizeType(e),r=n.originType,u=n.namespaces;if(r){var l=r,c=Zu.get(l);l=(a?c.delegateType:c.bindType)||l,c=Zu.get(l);var h=Object.assign({type:l,originType:r,data:o,selector:a,guid:d,handler:i,namespace:u.join(".")},s),v=f.events,p=v[l];p||(p=v[l]={handlers:[],delegateCount:0},c.setup&&!1!==c.setup(t,o,u,g)||Fu.addEventListener(t,l,g)),c.add&&(Fu.removeHandlerId(h.handler),c.add(t,h),Fu.setHandlerId(h.handler,d)),a?(p.handlers.splice(p.delegateCount,0,h),p.delegateCount+=1):p.handlers.push(h)}}))}},t.off=function t(e,n,r,i,o){var a=zu.get(e);if(a){var s=a.events;s&&(Fu.splitType(n).forEach((function(n){var u=Fu.normalizeType(n),l=u.originType,c=u.namespaces;if(l){var h=l,f=Zu.get(h);h=(i?f.delegateType:f.bindType)||h;var g=s[h];if(g){for(var d=c.length>0?new RegExp("(^|\\.)".concat(c.join("\\.(?:.*\\.|)"),"(\\.|$)")):null,v=g.handlers.length,p=g.handlers.length-1;p>=0;p-=1){var y=g.handlers[p];!o&&l!==y.originType||r&&Fu.getHandlerId(r)!==y.guid||!(null==d||y.namespace&&d.test(y.namespace))||!(null==i||i===y.selector||"**"===i&&y.selector)||(g.handlers.splice(p,1),y.selector&&(g.delegateCount-=1),f.remove&&f.remove(e,y))}v&&0===g.handlers.length&&(f.teardown&&!1!==f.teardown(e,c,a.handler)||Fu.removeEventListener(e,h,a.handler),delete s[h])}}else Object.keys(s).forEach((function(o){t(e,o+n,r,i,!0)}))})),0===Object.keys(s).length&&zu.remove(e))}},t.dispatch=n,t.trigger=function(t,n,r,i){var o=t,a="string"===typeof t?t:t.type,s="string"===typeof t||null==o.namespace?[]:o.namespace.split("."),u=r;if(3!==u.nodeType&&8!==u.nodeType){a.indexOf(".")>-1&&(s=a.split("."),a=s.shift(),s.sort());var l=a.indexOf(":")<0&&"on".concat(a);(o=t instanceof ol?t:new ol(a,"object"===typeof t?t:null)).namespace=s.join("."),o.rnamespace=o.namespace?new RegExp("(^|\\.)".concat(s.join("\\.(?:.*\\.|)"),"(\\.|$)")):null,o.result=void 0,o.target||(o.target=u);var c=[o];Array.isArray(n)?c.push.apply(c,(0,A.Z)(n)):c.push(n);var h=Zu.get(a);if(i||!h.trigger||!1!==h.trigger(u,o,n)){var f,g=[u];if(!i&&!h.noBubble&&!Fu.isWindow(u)){f=h.delegateType||a;for(var d=u,v=u.parentNode;null!=v;)g.push(v),d=v,v=v.parentNode;if(d===(u.ownerDocument||document)){var p=d.defaultView||d.parentWindow||window;g.push(p)}}for(var y=u,m=0,b=g.length;m<b&&!o.isPropagationStopped();m+=1){var k=g[m];y=k,o.type=m>1?f:h.bindType||a;var w,x=zu.get(k);if(x)if(x.events[o.type]&&x.handler)(w=x.handler).call.apply(w,[k].concat(c));var P=l&&k[l]||null;P&&Fu.isValidTarget(k)&&(o.result=P.call.apply(P,[k].concat(c)),!1===o.result&&o.preventDefault())}if(o.type=a,!i&&!o.isDefaultPrevented()){var C=h.preventDefault;if((null==C||!1===C(g.pop(),o,n))&&Fu.isValidTarget(u)&&l&&"function"===typeof u[a]&&!Fu.isWindow(u)){var O=u[l];O&&(u[l]=null),e=a,o.isPropagationStopped()&&y.addEventListener(a,Fu.stopPropagationCallback),u[a](),o.isPropagationStopped()&&y.removeEventListener(a,Fu.stopPropagationCallback),e=void 0,O&&(u[l]=O)}}return o.result}}}}(al||(al={})),function(t){t.on=function(t,e,n,r,i){return ul.on(t,e,n,r,i),t},t.once=function(t,e,n,r,i){return ul.on(t,e,n,r,i,!0),t},t.off=function(t,e,n,r){return ul.off(t,e,n,r),t},t.trigger=function(t,e,n,r){return al.trigger(e,n,t,r),t}}(sl||(sl={})),function(t){t.on=function e(n,r,i,o,a,s){if("object"===typeof r)return"string"!==typeof i&&(o=o||i,i=void 0),void Object.keys(r).forEach((function(t){return e(n,t,i,o,r[t],s)}));if(null==o&&null==a?(a=i,o=i=void 0):null==a&&("string"===typeof i?(a=o,o=void 0):(a=o,o=i,i=void 0)),!1===a)a=Fu.returnFalse;else if(!a)return;if(s){var u=a;a=function(e){t.off(n,e);for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return u.call.apply(u,[this,e].concat(i))},Fu.setHandlerId(a,Fu.ensureHandlerId(u))}al.on(n,r,a,o,i)},t.off=function t(e,n,r,i){var o=n;if(o&&null!=o.preventDefault&&null!=o.handleObj){var a=o.handleObj;t(o.delegateTarget,a.namespace?"".concat(a.originType,".").concat(a.namespace):a.originType,a.selector,a.handler)}else if("object"!==typeof n)!1!==r&&"function"!==typeof r||(i=r,r=void 0),!1===i&&(i=Fu.returnFalse),al.off(e,n,i,r);else{var s=n;Object.keys(s).forEach((function(n){return t(e,n,r,s[n])}))}}}(ul||(ul={}));var cl=function(){function t(e,n,r){(0,m.Z)(this,t),this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=ss.isEventSupported("wheel")?"wheel":"mousewheel",this.target=e,this.onWheelCallback=n,this.onWheelGuard=r,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}return(0,b.Z)(t,[{key:"enable",value:function(){this.target.addEventListener(this.eventName,this.onWheel,{passive:!1})}},{key:"disable",value:function(){this.target.removeEventListener(this.eventName,this.onWheel)}},{key:"onWheel",value:function(t){var e,n=this;(null==this.onWheelGuard||this.onWheelGuard(t))&&(this.deltaX+=t.deltaX,this.deltaY+=t.deltaY,t.preventDefault(),0===this.deltaX&&0===this.deltaY||(t.stopPropagation(),e=!0),!0===e&&0===this.animationFrameId&&(this.animationFrameId=requestAnimationFrame((function(){n.didWheel(t)}))))}},{key:"didWheel",value:function(t){this.animationFrameId=0,this.onWheelCallback(t,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}]),t}();function hl(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,r=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];r&&clearTimeout(r),r=window.setTimeout((function(){t.apply(e,o)}),n)}}var fl,gl="undefined"!==typeof ResizeObserver?function(t){var e=null,n=[],r=hl((function(){n.forEach((function(e){e(t)}))})),i=function(){e&&(e.disconnect(),n=[],e=null)};return{element:t,bind:function(i){e||(e=function(){var e=new ResizeObserver(r);return e.observe(t),r(),e}()),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:function(t){var r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&e&&i()}}}:function(t){var e=null,n=[],r=hl((function(){n.forEach((function(e){return e(t)}))})),i=function(){e&&e.parentNode&&(e.contentDocument&&e.contentDocument.defaultView.removeEventListener("resize",r),e.parentNode.removeChild(e),e=null,n=[])};return{element:t,bind:function(i){e||(e=function(){"static"===getComputedStyle(t).position&&(t.style.position="relative");var e=document.createElement("object");return e.onload=function(){e.contentDocument.defaultView.addEventListener("resize",r),r()},e.style.display="block",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.height="100%",e.style.width="100%",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.zIndex="-1",e.style.opacity="0",e.setAttribute("tabindex","-1"),e.type="text/html",t.appendChild(e),e.data="about:blank",e}()),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:function(t){var r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&e&&i()}}};!function(t){var e=new WeakMap;function n(t){var n=e.get(t);return n||(n=gl(t),e.set(t,n),n)}t.bind=function(t,e){var r=n(t);return r.bind(e),function(){return r.unbind(e)}},t.clear=function(t){!function(t){t.destroy(),e.delete(t.element)}(n(t))}}(fl||(fl={}));var dl,vl=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,m.Z)(this,t),this.comparator=e.comparator||t.defaultComparator,this.index={},this.data=e.data||[],this.heapify()}return(0,b.Z)(t,[{key:"isEmpty",value:function(){return 0===this.data.length}},{key:"insert",value:function(t,e,n){var r={priority:t,value:e},i=this.data.length;return n&&(r.id=n,this.index[n]=i),this.data.push(r),this.bubbleUp(i),this}},{key:"peek",value:function(){return this.data[0]?this.data[0].value:null}},{key:"peekPriority",value:function(){return this.data[0]?this.data[0].priority:null}},{key:"updatePriority",value:function(t,e){var n=this.index[t];if("undefined"===typeof n)throw new Error("Node with id '".concat(t,"' was not found in the heap."));var r=this.data,i=r[n].priority,o=this.comparator(e,i);o<0?(r[n].priority=e,this.bubbleUp(n)):o>0&&(r[n].priority=e,this.bubbleDown(n))}},{key:"remove",value:function(){var t=this.data,e=t[0],n=t.pop();return e.id&&delete this.index[e.id],t.length>0&&(t[0]=n,n.id&&(this.index[n.id]=0),this.bubbleDown(0)),e?e.value:null}},{key:"heapify",value:function(){for(var t=0;t<this.data.length;t+=1)this.bubbleUp(t)}},{key:"bubbleUp",value:function(t){for(var e,n,r=this.data,i=t;i>0&&(n=i-1>>>1,this.comparator(r[i].priority,r[n].priority)<0);){e=r[n],r[n]=r[i];var o=r[i].id;null!=o&&(this.index[o]=n),r[i]=e,null!=(o=r[i].id)&&(this.index[o]=i),i=n}}},{key:"bubbleDown",value:function(t){for(var e=this.data,n=e.length-1,r=t;;){var i=1+(r<<1),o=i+1,a=r;if(i<=n&&this.comparator(e[i].priority,e[a].priority)<0&&(a=i),o<=n&&this.comparator(e[o].priority,e[a].priority)<0&&(a=o),a===r)break;var s=e[a];e[a]=e[r];var u=e[r].id;null!=u&&(this.index[u]=a),e[r]=s,null!=(u=e[r].id)&&(this.index[u]=r),r=a}}}]),t}();!function(t){t.defaultComparator=function(t,e){return t-e}}(vl||(vl={})),function(t){t.run=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t,e){return 1},r={},i={},o={},a=new vl;for(r[e]=0,Object.keys(t).forEach((function(t){t!==e&&(r[t]=1/0),a.insert(r[t],t,t)}));!a.isEmpty();){var s=a.remove();o[s]=!0;for(var u=t[s]||[],l=0;l<u.length;l+=1){var c=u[l];if(!o[c]){var h=r[s]+n(s,c);h<r[c]&&(r[c]=h,i[c]=s,a.updatePriority(c,h))}}}return i}}(dl||(dl={}));var pl=function(){function t(e,n,r,i){return(0,m.Z)(this,t),null==e?this.set(255,255,255,1):"number"===typeof e?this.set(e,n,r,i):"string"===typeof e?t.fromString(e)||this:Array.isArray(e)?this.set(e):void this.set(e.r,e.g,e.b,null==e.a?1:e.a)}return(0,b.Z)(t,[{key:"blend",value:function(t,e,n){this.set(t.r+(e.r-t.r)*n,t.g+(e.g-t.g)*n,t.b+(e.b-t.b)*n,t.a+(e.a-t.a)*n)}},{key:"lighten",value:function(e){var n=t.lighten(this.toArray(),e);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}},{key:"darken",value:function(t){this.lighten(-t)}},{key:"set",value:function(t,e,n,r){var i=Array.isArray(t)?t[0]:t,o=Array.isArray(t)?t[1]:e,a=Array.isArray(t)?t[2]:n,s=Array.isArray(t)?t[3]:r;return this.r=Math.round(rs(i,0,255)),this.g=Math.round(rs(o,0,255)),this.b=Math.round(rs(a,0,255)),this.a=null==s?1:rs(s,0,1),this}},{key:"toHex",value:function(){var t=this,e=["r","g","b"].map((function(e){var n=t[e].toString(16);return n.length<2?"0".concat(n):n}));return"#".concat(e.join(""))}},{key:"toRGBA",value:function(){return this.toArray()}},{key:"toHSLA",value:function(){return t.rgba2hsla(this.r,this.g,this.b,this.a)}},{key:"toCSS",value:function(t){var e="".concat(this.r,",").concat(this.g,",").concat(this.b,",");return t?"rgb(".concat(e,")"):"rgba(".concat(e,",").concat(this.a,")")}},{key:"toGrey",value:function(){return t.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}},{key:"toArray",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toString",value:function(){return this.toCSS()}}]),t}();!function(t){function e(e){return new t([].concat((0,A.Z)(s(e)),[1]))}function n(e){var n=e.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(n){var r=n[1].split(/\s*,\s*/).map((function(t){return parseInt(t,10)}));return new t(r)}return null}function r(t,e,n){n<0&&++n,n>1&&--n;var r=6*n;return r<1?t+(e-t)*r:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function i(e){var n=e.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(n){var r=n[2].split(/\s*,\s*/),i=(parseFloat(r[0])%360+360)%360/360,a=parseFloat(r[1])/100,s=parseFloat(r[2])/100,u=null==r[3]?1:parseInt(r[3],10);return new t(o(i,a,s,u))}return null}function o(t,e,n,i){var o=Array.isArray(t)?t[0]:t,a=Array.isArray(t)?t[1]:e,s=Array.isArray(t)?t[2]:n,u=Array.isArray(t)?t[3]:i,l=s<=.5?s*(a+1):s+a-s*a,c=2*s-l;return[256*r(c,l,o+1/3),256*r(c,l,o),256*r(c,l,o-1/3),null==u?1:u]}function a(e){return new t(Math.round(256*Math.random()),Math.round(256*Math.random()),Math.round(256*Math.random()),e?void 0:parseFloat(Math.random().toFixed(2)))}function s(t){var e=0===t.indexOf("#")?t:"#".concat(t),n=Number("0x".concat(e.substr(1)));if(4!==e.length&&7!==e.length||Number.isNaN(n))throw new Error("Invalid hex color.");var r=4===e.length?4:8,i=(1<<r)-1,o=["b","g","r"].map((function(){var t=n&i;return n>>=r,4===r?17*t:t}));return[o[2],o[1],o[0]]}function u(t,e,n){var r=function(t){return t.length<2?"0".concat(t):t};return"".concat(r(t.toString(16))).concat(r(e.toString(16))).concat(r(n.toString(16)))}function l(t,e){if("string"===typeof t){var n="#"===t[0],r=parseInt(n?t.substr(1):t,16),i=rs((r>>16)+e,0,255),o=rs((r>>8&255)+e,0,255),a=rs((255&r)+e,0,255);return"".concat(n?"#":"").concat((a|o<<8|i<<16).toString(16))}var c=s(l(u(t[0],t[1],t[2]),e));return[c[0],c[1],c[2],t[3]]}t.fromArray=function(e){return new t(e)},t.fromHex=e,t.fromRGBA=n,t.fromHSLA=i,t.fromString=function(r){if(r.startsWith("#"))return e(r);if(r.startsWith("rgb"))return n(r);var o=t.named[r];return o?e(o):i(r)},t.makeGrey=function(e,n){return t.fromArray([e,e,e,n])},t.rgba2hsla=function(t,e,n,r){var i=Array.isArray(t)?t[0]:t,o=Array.isArray(t)?t[1]:e,a=Array.isArray(t)?t[2]:n,s=Array.isArray(t)?t[3]:r,u=Math.max(i,o,a),l=Math.min(i,o,a),c=(u+l)/2,h=0,f=0;if(l!==u){var g=u-l;switch(f=c>.5?g/(2-u-l):g/(u+l),u){case i:h=(o-a)/g+(o<a?6:0);break;case o:h=(a-i)/g+2;break;case a:h=(i-o)/g+4}h/=6}return[h,f,c,null==s?1:s]},t.hsla2rgba=o,t.random=a,t.randomHex=function(){for(var t="#",e=0;e<6;e+=1)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},t.randomRGBA=function(t){return a(t).toString()},t.invert=function(t,e){if("string"===typeof t){var n="#"===t[0],r=s(t),i=(0,Pu.Z)(r,3),o=i[0],a=i[1],l=i[2];return e?.299*o+.587*a+.114*l>186?"#000000":"#ffffff":"".concat(n?"#":"").concat(u(255-o,255-a,255-l))}var c=t[0],h=t[1],f=t[2],g=t[3];return e?.299*c+.587*h+.114*f>186?[0,0,0,g]:[255,255,255,g]:[255-c,255-h,255-f,g]},t.lighten=function(t,e){return l(t,e)},t.darken=function(t,e){return l(t,-e)}}(pl||(pl={})),function(t){t.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(pl||(pl={}));var yl,ml,bl,kl=function(){function t(){(0,m.Z)(this,t),this.clear()}return(0,b.Z)(t,[{key:"clear",value:function(){this.map=new WeakMap,this.arr=[]}},{key:"has",value:function(t){return this.map.has(t)}},{key:"get",value:function(t){return this.map.get(t)}},{key:"set",value:function(t,e){this.map.set(t,e),this.arr.push(t)}},{key:"delete",value:function(t){var e=this.arr.indexOf(t);e>=0&&this.arr.splice(e,1);var n=this.map.get(t);return this.map.delete(t),n}},{key:"each",value:function(t){var e=this;this.arr.forEach((function(n){var r=e.map.get(n);t(r,n)}))}},{key:"dispose",value:function(){this.clear()}}]),t}();!function(t){function e(t){var e=[],n=[];return Array.isArray(t)?e.push.apply(e,(0,A.Z)(t)):t.split("|").forEach((function(t){-1===t.indexOf("&")?e.push(t):n.push.apply(n,(0,A.Z)(t.split("&")))})),{or:e,and:n}}t.parse=e,t.equals=function(t,n){if(null!=t&&null!=n){var r=e(t),i=e(n),o=r.or.sort(),a=i.or.sort(),s=r.and.sort(),u=i.and.sort(),l=function(t,e){return t.length===e.length&&(0===t.length||t.every((function(t,n){return t===e[n]})))};return l(o,a)&&l(s,u)}return null==t&&null==n},t.isMatch=function(t,n,r){if(null==n||Array.isArray(n)&&0===n.length)return!r||!0!==t.altKey&&!0!==t.ctrlKey&&!0!==t.metaKey&&!0!==t.shiftKey;var i=e(n),o=i.or,a=i.and,s=function(e){var n="".concat(e.toLowerCase(),"Key");return!0===t[n]};return o.some((function(t){return s(t)}))&&a.every((function(t){return s(t)}))}}(yl||(yl={})),function(t){t.linear=function(t){return t},t.quad=function(t){return t*t},t.cubic=function(t){return t*t*t},t.inout=function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},t.exponential=function(t){return Math.pow(2,10*(t-1))},t.bounce=function(t){for(var e=0,n=1;;e+=n,n/=2)if(t>=(7-4*e)/11){var r=(11-6*e-11*t)/4;return-r*r+n*n}}}(ml||(ml={})),function(t){t.decorators={reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(r){var i=t(r);return i<e?e:i>n?n:i}},back:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1.70158;return function(e){return e*e*((t+1)*e-t)}},elastic:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1.5;return function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}}}(ml||(ml={})),function(t){function e(t){var e=t/1;if(e<1/2.75)return 7.5625*e*e;if(e<2/2.75){var n=e-1.5/2.75;return 7.5625*n*n+.75}if(e<2.5/2.75){var r=e-2.25/2.75;return 7.5625*r*r+.9375}var i=e-2.625/2.75;return 7.5625*i*i+.984375}function n(t){return 1-e(1-t)}t.easeInSine=function(t){return-1*Math.cos(t*(Math.PI/2))+1},t.easeOutSine=function(t){return Math.sin(t*(Math.PI/2))},t.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.easeInQuad=function(t){return t*t},t.easeOutQuad=function(t){return t*(2-t)},t.easeInOutQuad=function(t){return t<.5?2*t*t:(4-2*t)*t-1},t.easeInCubic=function(t){return t*t*t},t.easeOutCubic=function(t){var e=t-1;return e*e*e+1},t.easeInOutCubic=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},t.easeInQuart=function(t){return t*t*t*t},t.easeOutQuart=function(t){var e=t-1;return 1-e*e*e*e},t.easeInOutQuart=function(t){var e=t-1;return t<.5?8*t*t*t*t:1-8*e*e*e*e},t.easeInQuint=function(t){return t*t*t*t*t},t.easeOutQuint=function(t){var e=t-1;return 1+e*e*e*e*e},t.easeInOutQuint=function(t){var e=t-1;return t<.5?16*t*t*t*t*t:1+16*e*e*e*e*e},t.easeInExpo=function(t){return 0===t?0:Math.pow(2,10*(t-1))},t.easeOutExpo=function(t){return 1===t?1:1-Math.pow(2,-10*t)},t.easeInOutExpo=function(t){if(0===t||1===t)return t;var e=2*t,n=e-1;return e<1?.5*Math.pow(2,10*n):.5*(2-Math.pow(2,-10*n))},t.easeInCirc=function(t){var e=t/1;return-1*(Math.sqrt(1-e*t)-1)},t.easeOutCirc=function(t){var e=t-1;return Math.sqrt(1-e*e)},t.easeInOutCirc=function(t){var e=2*t,n=e-2;return e<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-n*n)+1)},t.easeInBack=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.70158;return t*t*((e+1)*t-e)},t.easeOutBack=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.70158,n=t/1-1;return n*n*((e+1)*n+e)+1},t.easeInOutBack=function(t){var e=2*t,n=e-2,r=1.525*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.70158);return e<1?.5*e*e*((r+1)*e-r):.5*(n*n*((r+1)*n+r)+2)},t.easeInElastic=function(t){if(0===t||1===t)return t;var e=t/1-1,n=1-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7),r=n/(2*Math.PI)*Math.asin(1);return-Math.pow(2,10*e)*Math.sin((e-r)*(2*Math.PI)/n)},t.easeOutElastic=function(t){var e=1-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7),n=2*t;if(0===t||1===t)return t;var r=e/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*n)*Math.sin((n-r)*(2*Math.PI)/e)+1},t.easeInOutElastic=function(t){var e=1-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.65);if(0===t||1===t)return t;var n=2*t,r=n-1,i=e/(2*Math.PI)*Math.asin(1);return n<1?Math.pow(2,10*r)*Math.sin((r-i)*(2*Math.PI)/e)*-.5:Math.pow(2,-10*r)*Math.sin((r-i)*(2*Math.PI)/e)*.5+1},t.easeOutBounce=e,t.easeInBounce=n,t.easeInOutBounce=function(t){return t<.5?.5*n(2*t):.5*e(2*t-1)+.5}}(ml||(ml={})),function(t){t.number=function(t,e){var n=e-t;return function(e){return t+n*e}},t.object=function(t,e){var n=Object.keys(t);return function(r){for(var i={},o=n.length-1;-1!==o;o-=1){var a=n[o];i[a]=t[a]+(e[a]-t[a])*r}return i}},t.unit=function(t,e){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(t),i=n.exec(e),o=i?i[1]:"",a=r?+r[1]:0,s=i?+i[1]:0,u=o.indexOf("."),l=u>0?o[1].length-u-1:0,c=s-a,h=r?r[2]:"";return function(t){return(a+c*t).toFixed(l)+h}},t.color=function(t,e){var n=parseInt(t.slice(1),16),r=parseInt(e.slice(1),16),i=255&n,o=(255&r)-i,a=65280&n,s=(65280&r)-a,u=16711680&n,l=(16711680&r)-u;return function(t){return"#".concat((1<<24|i+o*t&255|a+s*t&65280|u+l*t&16711680).toString(16).slice(1))}}}(bl||(bl={}));var wl=[];var xl,Pl,Al=n(4418);!function(t){t.toDeg=function(t){return 180*t/Math.PI%360},t.toRad=function(t){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t:t%360)*Math.PI/180},t.normalize=function(t){return t%360+(t<0?360:0)}}(xl||(xl={})),function(t){t.round=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number.isInteger(t)?t:+t.toFixed(e)},t.random=function(t,e){var n,r;if(null==e?(r=null==t?1:t,n=0):(r=e,n=null==t?0:t),r<n){var i=n;n=r,r=i}return Math.floor(Math.random()*(r-n+1)+n)},t.clamp=function(t,e,n){return Number.isNaN(t)?NaN:Number.isNaN(e)||Number.isNaN(n)?0:e<n?t<e?e:t>n?n:t:t<n?n:t>e?e:t},t.snapToGrid=function(t,e){return e*Math.round(t/e)},t.containsPoint=function(t,e){return null!=e&&null!=t&&e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height},t.squaredLength=function(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}}(Pl||(Pl={}));var Cl=function(){function t(){(0,m.Z)(this,t)}return(0,b.Z)(t,[{key:"valueOf",value:function(){return this.toJSON()}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),t}(),Ol=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(t,r){var i;return(0,m.Z)(this,n),(i=e.call(this)).x=null==t?0:t,i.y=null==r?0:r,i}return(0,b.Z)(n,[{key:"round",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.x=Pl.round(this.x,t),this.y=Pl.round(this.y,t),this}},{key:"add",value:function(t,e){var r=n.create(t,e);return this.x+=r.x,this.y+=r.y,this}},{key:"update",value:function(t,e){var r=n.create(t,e);return this.x=r.x,this.y=r.y,this}},{key:"translate",value:function(t,e){var r=n.create(t,e);return this.x+=r.x,this.y+=r.y,this}},{key:"rotate",value:function(t,e){var r=n.rotate(this,t,e);return this.x=r.x,this.y=r.y,this}},{key:"scale",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new n,i=n.create(r);return this.x=i.x+t*(this.x-i.x),this.y=i.y+e*(this.y-i.y),this}},{key:"closest",value:function(t){var e=this;if(1===t.length)return n.create(t[0]);var r=null,i=1/0;return t.forEach((function(t){var n=e.squaredDistance(t);n<i&&(r=t,i=n)})),r?n.create(r):null}},{key:"distance",value:function(t){return Math.sqrt(this.squaredDistance(t))}},{key:"squaredDistance",value:function(t){var e=n.create(t),r=this.x-e.x,i=this.y-e.y;return r*r+i*i}},{key:"manhattanDistance",value:function(t){var e=n.create(t);return Math.abs(e.x-this.x)+Math.abs(e.y-this.y)}},{key:"magnitude",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}},{key:"theta",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n,e=n.create(t),r=-(e.y-this.y),i=e.x-this.x,o=Math.atan2(r,i);return o<0&&(o=2*Math.PI+o),180*o/Math.PI}},{key:"angleBetween",value:function(t,e){if(this.equals(t)||this.equals(e))return NaN;var n=this.theta(e)-this.theta(t);return n<0&&(n+=360),n}},{key:"vectorAngle",value:function(t){return new n(0,0).angleBetween(this,t)}},{key:"toPolar",value:function(t){return this.update(n.toPolar(this,t)),this}},{key:"changeInAngle",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new n;return this.clone().translate(-t,-e).theta(r)-this.theta(r)}},{key:"adhereToRect",value:function(t){return Pl.containsPoint(t,this)||(this.x=Math.min(Math.max(this.x,t.x),t.x+t.width),this.y=Math.min(Math.max(this.y,t.y),t.y+t.height)),this}},{key:"bearing",value:function(t){var e=n.create(t),r=xl.toRad(this.y),i=xl.toRad(e.y),o=this.x,a=e.x,s=xl.toRad(a-o),u=Math.sin(s)*Math.cos(i),l=Math.cos(r)*Math.sin(i)-Math.sin(r)*Math.cos(i)*Math.cos(s),c=xl.toDeg(Math.atan2(u,l))-22.5;return c<0&&(c+=360),["NE","E","SE","S","SW","W","NW","N"][c=parseInt(c/45,10)]}},{key:"cross",value:function(t,e){if(null!=t&&null!=e){var r=n.create(t),i=n.create(e);return(i.x-this.x)*(r.y-this.y)-(i.y-this.y)*(r.x-this.x)}return NaN}},{key:"dot",value:function(t){var e=n.create(t);return this.x*e.x+this.y*e.y}},{key:"diff",value:function(t,e){if("number"===typeof t)return new n(this.x-t,this.y-e);var r=n.create(t);return new n(this.x-r.x,this.y-r.y)}},{key:"lerp",value:function(t,e){var r=n.create(t);return new n((1-e)*this.x+e*r.x,(1-e)*this.y+e*r.y)}},{key:"normalize",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)/this.magnitude();return this.scale(t,t)}},{key:"move",value:function(t,e){var r=n.create(t),i=xl.toRad(r.theta(this));return this.translate(Math.cos(i)*e,-Math.sin(i)*e)}},{key:"reflection",value:function(t){return n.create(t).move(this,this.distance(t))}},{key:"snapToGrid",value:function(t,e){return this.x=Pl.snapToGrid(this.x,t),this.y=Pl.snapToGrid(this.y,null==e?t:e),this}},{key:"equals",value:function(t){var e=n.create(t);return null!=e&&e.x===this.x&&e.y===this.y}},{key:"clone",value:function(){return n.clone(this)}},{key:"toJSON",value:function(){return n.toJSON(this)}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y)}}]),n}(Cl);!function(t){t.isPoint=function(e){return null!=e&&e instanceof t}}(Ol||(Ol={})),function(t){t.isPointLike=function(t){return null!=t&&"object"===typeof t&&"number"===typeof t.x&&"number"===typeof t.y},t.isPointData=function(t){return null!=t&&Array.isArray(t)&&2===t.length&&"number"===typeof t[0]&&"number"===typeof t[1]}}(Ol||(Ol={})),function(t){function e(e){return t.isPoint(e)?new t(e.x,e.y):Array.isArray(e)?new t(e[0],e[1]):new t(e.x,e.y)}function n(t,e){return t===e||null!=t&&null!=e&&(t.x===e.x&&t.y===e.y)}function r(n,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new t,a=e(n),s=e(o),u=a.x-s.x,l=a.y-s.y,c=l*r+u*i;return new t(u*r-l*i+s.x,c+s.y)}t.create=function(n,r){return null==n||"number"===typeof n?new t(n,r):e(n)},t.clone=e,t.toJSON=function(e){return t.isPoint(e)?{x:e.x,y:e.y}:Array.isArray(e)?{x:e[0],y:e[1]}:{x:e.x,y:e.y}},t.fromPolar=function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new t,o=Math.abs(n*Math.cos(r)),a=Math.abs(n*Math.sin(r)),s=e(i),u=xl.normalize(xl.toDeg(r));return u<90?a=-a:u<180?(o=-o,a=-a):u<270&&(o=-o),new t(s.x+o,s.y+a)},t.toPolar=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new t,i=e(n),o=e(r),a=i.x-o.x,s=i.y-o.y;return new t(Math.sqrt(a*a+s*s),xl.toRad(o.theta(i)))},t.equals=n,t.equalPoints=function(t,e){if(null==t&&null!=e||null!=t&&null==e||null!=t&&null!=e&&t.length!==e.length)return!1;if(null!=t&&null!=e)for(var r=0,i=t.length;r<i;r+=1)if(!n(t[r],e[r]))return!1;return!0},t.random=function(e,n,r,i){return new t(Pl.random(e,n),Pl.random(r,i))},t.rotate=function(t,e,n){var i=xl.toRad(xl.normalize(-e)),o=Math.sin(i);return r(t,Math.cos(i),o,n)},t.rotateEx=r}(Ol||(Ol={}));var El=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(t,r,i,o){var a;return(0,m.Z)(this,n),(a=e.call(this)).x=null==t?0:t,a.y=null==r?0:r,a.width=null==i?0:i,a.height=null==o?0:o,a}return(0,b.Z)(n,[{key:"left",get:function(){return this.x}},{key:"top",get:function(){return this.y}},{key:"right",get:function(){return this.x+this.width}},{key:"bottom",get:function(){return this.y+this.height}},{key:"origin",get:function(){return new Ol(this.x,this.y)}},{key:"topLeft",get:function(){return new Ol(this.x,this.y)}},{key:"topCenter",get:function(){return new Ol(this.x+this.width/2,this.y)}},{key:"topRight",get:function(){return new Ol(this.x+this.width,this.y)}},{key:"center",get:function(){return new Ol(this.x+this.width/2,this.y+this.height/2)}},{key:"bottomLeft",get:function(){return new Ol(this.x,this.y+this.height)}},{key:"bottomCenter",get:function(){return new Ol(this.x+this.width/2,this.y+this.height)}},{key:"bottomRight",get:function(){return new Ol(this.x+this.width,this.y+this.height)}},{key:"corner",get:function(){return new Ol(this.x+this.width,this.y+this.height)}},{key:"rightMiddle",get:function(){return new Ol(this.x+this.width,this.y+this.height/2)}},{key:"leftMiddle",get:function(){return new Ol(this.x,this.y+this.height/2)}},{key:"topLine",get:function(){return new Ml(this.topLeft,this.topRight)}},{key:"rightLine",get:function(){return new Ml(this.topRight,this.bottomRight)}},{key:"bottomLine",get:function(){return new Ml(this.bottomLeft,this.bottomRight)}},{key:"leftLine",get:function(){return new Ml(this.topLeft,this.bottomLeft)}},{key:"getOrigin",value:function(){return this.origin}},{key:"getTopLeft",value:function(){return this.topLeft}},{key:"getTopCenter",value:function(){return this.topCenter}},{key:"getTopRight",value:function(){return this.topRight}},{key:"getCenter",value:function(){return this.center}},{key:"getCenterX",value:function(){return this.x+this.width/2}},{key:"getCenterY",value:function(){return this.y+this.height/2}},{key:"getBottomLeft",value:function(){return this.bottomLeft}},{key:"getBottomCenter",value:function(){return this.bottomCenter}},{key:"getBottomRight",value:function(){return this.bottomRight}},{key:"getCorner",value:function(){return this.corner}},{key:"getRightMiddle",value:function(){return this.rightMiddle}},{key:"getLeftMiddle",value:function(){return this.leftMiddle}},{key:"getTopLine",value:function(){return this.topLine}},{key:"getRightLine",value:function(){return this.rightLine}},{key:"getBottomLine",value:function(){return this.bottomLine}},{key:"getLeftLine",value:function(){return this.leftLine}},{key:"bbox",value:function(t){if(!t)return this.clone();var e=xl.toRad(t),r=Math.abs(Math.sin(e)),i=Math.abs(Math.cos(e)),o=this.width*i+this.height*r,a=this.width*r+this.height*i;return new n(this.x+(this.width-o)/2,this.y+(this.height-a)/2,o,a)}},{key:"round",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.x=Pl.round(this.x,t),this.y=Pl.round(this.y,t),this.width=Pl.round(this.width,t),this.height=Pl.round(this.height,t),this}},{key:"add",value:function(t,e,r,i){var o=n.create(t,e,r,i),a=Math.min(this.x,o.x),s=Math.min(this.y,o.y),u=Math.max(this.x+this.width,o.x+o.width),l=Math.max(this.y+this.height,o.y+o.height);return this.x=a,this.y=s,this.width=u-a,this.height=l-s,this}},{key:"update",value:function(t,e,r,i){var o=n.create(t,e,r,i);return this.x=o.x,this.y=o.y,this.width=o.width,this.height=o.height,this}},{key:"inflate",value:function(t,e){var n=t,r=null!=e?e:t;return this.x-=n,this.y-=r,this.width+=2*n,this.height+=2*r,this}},{key:"snapToGrid",value:function(t,e){var n=this.origin.snapToGrid(t,e),r=this.corner.snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this}},{key:"translate",value:function(t,e){var n=Ol.create(t,e);return this.x+=n.x,this.y+=n.y,this}},{key:"scale",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ol,r=this.origin.scale(t,e,n);return this.x=r.x,this.y=r.y,this.width*=t,this.height*=e,this}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCenter();if(0!==t){var r=xl.toRad(t),i=Math.cos(r),o=Math.sin(r),a=this.getOrigin(),s=this.getTopRight(),u=this.getBottomRight(),l=this.getBottomLeft();a=Ol.rotateEx(a,i,o,e),s=Ol.rotateEx(s,i,o,e),u=Ol.rotateEx(u,i,o,e),l=Ol.rotateEx(l,i,o,e);var c=new n(a.x,a.y,0,0);c.add(s.x,s.y,0,0),c.add(u.x,u.y,0,0),c.add(l.x,l.y,0,0),this.update(c)}return this}},{key:"rotate90",value:function(){var t=(this.width-this.height)/2;this.x+=t,this.y-=t;var e=this.width;return this.width=this.height,this.height=e,this}},{key:"moveAndExpand",value:function(t){var e=n.clone(t);return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this}},{key:"getMaxScaleToFit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.center,r=n.clone(t),i=e.x,o=e.y,a=1/0,s=1/0,u=1/0,l=1/0,c=1/0,h=1/0,f=1/0,g=1/0,d=r.topLeft;d.x<i&&(a=(this.x-i)/(d.x-i)),d.y<o&&(c=(this.y-o)/(d.y-o));var v=r.bottomRight;v.x>i&&(s=(this.x+this.width-i)/(v.x-i)),v.y>o&&(h=(this.y+this.height-o)/(v.y-o));var p=r.topRight;p.x>i&&(u=(this.x+this.width-i)/(p.x-i)),p.y<o&&(f=(this.y-o)/(p.y-o));var y=r.bottomLeft;return y.x<i&&(l=(this.x-i)/(y.x-i)),y.y>o&&(g=(this.y+this.height-o)/(y.y-o)),{sx:Math.min(a,s,u,l),sy:Math.min(c,h,f,g)}}},{key:"getMaxUniformScaleToFit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.center,n=this.getMaxScaleToFit(t,e);return Math.min(n.sx,n.sy)}},{key:"containsPoint",value:function(t,e){return Pl.containsPoint(this,Ol.create(t,e))}},{key:"containsRect",value:function(t,e,r,i){var o=n.create(t,e,r,i),a=this.x,s=this.y,u=this.width,l=this.height,c=o.x,h=o.y,f=o.width,g=o.height;return 0!==u&&0!==l&&0!==f&&0!==g&&(c>=a&&h>=s&&c+f<=a+u&&h+g<=s+l)}},{key:"intersectsWithLine",value:function(t){var e=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],n=[],r=[];return e.forEach((function(e){var i=t.intersectsWithLine(e);null!==i&&r.indexOf(i.toString())<0&&(n.push(i),r.push(i.toString()))})),n.length>0?n:null}},{key:"intersectsWithLineFromCenterToPoint",value:function(t,e){var n=Ol.clone(t),r=this.center,i=null;null!=e&&0!==e&&n.rotate(e,r);for(var o=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],a=new Ml(r,n),s=o.length-1;s>=0;s-=1){var u=o[s].intersectsWithLine(a);if(null!==u){i=u;break}}return i&&null!=e&&0!==e&&i.rotate(-e,r),i}},{key:"intersectsWithRect",value:function(t,e,r,i){var o=n.create(t,e,r,i);if(!this.isIntersectWithRect(o))return null;var a=this.origin,s=this.corner,u=o.origin,l=o.corner,c=Math.max(a.x,u.x),h=Math.max(a.y,u.y);return new n(c,h,Math.min(s.x,l.x)-c,Math.min(s.y,l.y)-h)}},{key:"isIntersectWithRect",value:function(t,e,r,i){var o=n.create(t,e,r,i),a=this.origin,s=this.corner,u=o.origin,l=o.corner;return!(l.x<=a.x||l.y<=a.y||u.x>=s.x||u.y>=s.y)}},{key:"normalize",value:function(){var t=this.x,e=this.y,n=this.width,r=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,r=-this.height),this.x=t,this.y=e,this.width=n,this.height=r,this}},{key:"union",value:function(t){var e=n.clone(t),r=this.origin,i=this.corner,o=e.origin,a=e.corner,s=Math.min(r.x,o.x),u=Math.min(r.y,o.y);return new n(s,u,Math.max(i.x,a.x)-s,Math.max(i.y,a.y)-u)}},{key:"getNearestSideToPoint",value:function(t){var e=Ol.clone(t),n=e.x-this.x,r=this.x+this.width-e.x,i=e.y-this.y,o=n,a="left";return r<o&&(o=r,a="right"),i<o&&(o=i,a="top"),this.y+this.height-e.y<o&&(a="bottom"),a}},{key:"getNearestPointToPoint",value:function(t){var e=Ol.clone(t);if(this.containsPoint(e)){var n=this.getNearestSideToPoint(e);if("left"===n)return new Ol(this.x,e.y);if("top"===n)return new Ol(e.x,this.y);if("right"===n)return new Ol(this.x+this.width,e.y);if("bottom"===n)return new Ol(e.x,this.y+this.height)}return e.adhereToRect(this)}},{key:"equals",value:function(t){return null!=t&&t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height}},{key:"clone",value:function(){return new n(this.x,this.y,this.width,this.height)}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y," ").concat(this.width," ").concat(this.height)}}]),n}(Cl);!function(t){t.isRectangle=function(e){return null!=e&&e instanceof t}}(El||(El={})),function(t){t.isRectangleLike=function(t){return null!=t&&"object"===typeof t&&"number"===typeof t.x&&"number"===typeof t.y&&"number"===typeof t.width&&"number"===typeof t.height}}(El||(El={})),function(t){function e(e){return t.isRectangle(e)?e.clone():Array.isArray(e)?new t(e[0],e[1],e[2],e[3]):new t(e.x,e.y,e.width,e.height)}t.create=function(n,r,i,o){return null==n||"number"===typeof n?new t(n,r,i,o):e(n)},t.clone=e,t.fromEllipse=function(e){return new t(e.x-e.a,e.y-e.b,2*e.a,2*e.b)},t.fromSize=function(e){return new t(0,0,e.width,e.height)},t.fromPositionAndSize=function(e,n){return new t(e.x,e.y,n.width,n.height)}}(El||(El={}));var Ml=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(t,r,i,o){var a;return(0,m.Z)(this,n),a=e.call(this),"number"===typeof t&&"number"===typeof r?(a.start=new Ol(t,r),a.end=new Ol(i,o)):(a.start=Ol.create(t),a.end=Ol.create(r)),a}return(0,b.Z)(n,[{key:"center",get:function(){return new Ol((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}},{key:"getCenter",value:function(){return this.center}},{key:"round",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.start.round(t),this.end.round(t),this}},{key:"translate",value:function(t,e){return"number"===typeof t?(this.start.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.end.translate(t)),this}},{key:"rotate",value:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this}},{key:"scale",value:function(t,e,n){return this.start.scale(t,e,n),this.end.scale(t,e,n),this}},{key:"length",value:function(){return Math.sqrt(this.squaredLength())}},{key:"squaredLength",value:function(){var t=this.start.x-this.end.x,e=this.start.y-this.end.y;return t*t+e*e}},{key:"setLength",value:function(t){var e=this.length();if(!e)return this;var n=t/e;return this.scale(n,n,this.start)}},{key:"parallel",value:function(t){var e=this.clone();if(!e.isDifferentiable())return e;var n=e.start,r=e.end,i=n.clone().rotate(270,r),o=r.clone().rotate(90,n);return n.move(o,t),r.move(i,t),e}},{key:"vector",value:function(){return new Ol(this.end.x-this.start.x,this.end.y-this.start.y)}},{key:"angle",value:function(){var t=new Ol(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)}},{key:"bbox",value:function(){var t=Math.min(this.start.x,this.end.x),e=Math.min(this.start.y,this.end.y),n=Math.max(this.start.x,this.end.x),r=Math.max(this.start.y,this.end.y);return new El(t,e,n-t,r-e)}},{key:"bearing",value:function(){return this.start.bearing(this.end)}},{key:"closestPoint",value:function(t){return this.pointAt(this.closestPointNormalizedLength(t))}},{key:"closestPointLength",value:function(t){return this.closestPointNormalizedLength(t)*this.length()}},{key:"closestPointTangent",value:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))}},{key:"closestPointNormalizedLength",value:function(t){var e=this.vector().dot(new n(this.start,t).vector()),r=Math.min(1,Math.max(0,e/this.squaredLength()));return Number.isNaN(r)?0:r}},{key:"pointAt",value:function(t){var e=this.start,n=this.end;return t<=0?e.clone():t>=1?n.clone():e.lerp(n,t)}},{key:"pointAtLength",value:function(t){var e=this.start,n=this.end,r=!0;t<0&&(r=!1,t=-t);var i=this.length();if(t>=i)return r?n.clone():e.clone();var o=(r?t:i-t)/i;return this.pointAt(o)}},{key:"divideAt",value:function(t){var e=this.pointAt(t);return[new n(this.start,e),new n(e,this.end)]}},{key:"divideAtLength",value:function(t){var e=this.pointAtLength(t);return[new n(this.start,e),new n(e,this.end)]}},{key:"containsPoint",value:function(t){var e=this.start,r=this.end;if(0!==e.cross(t,r))return!1;var i=this.length();return!(new n(e,t).length()>i)&&!(new n(t,r).length()>i)}},{key:"intersect",value:function(t,e){var n=t.intersectsWithLine(this,e);return n?Array.isArray(n)?n:[n]:null}},{key:"intersectsWithLine",value:function(t){var e=new Ol(this.end.x-this.start.x,this.end.y-this.start.y),n=new Ol(t.end.x-t.start.x,t.end.y-t.start.y),r=e.x*n.y-e.y*n.x,i=new Ol(t.start.x-this.start.x,t.start.y-this.start.y),o=i.x*n.y-i.y*n.x,a=i.x*e.y-i.y*e.x;if(0===r||o*r<0||a*r<0)return null;if(r>0){if(o>r||a>r)return null}else if(o<r||a<r)return null;return new Ol(this.start.x+o*e.x/r,this.start.y+o*e.y/r)}},{key:"isDifferentiable",value:function(){return!this.start.equals(this.end)}},{key:"pointOffset",value:function(t){var e=Ol.clone(t),n=this.start,r=this.end;return((r.x-n.x)*(e.y-n.y)-(r.y-n.y)*(e.x-n.x))/this.length()}},{key:"pointSquaredDistance",value:function(t,e){var n=Ol.create(t,e);return this.closestPoint(n).squaredDistance(n)}},{key:"pointDistance",value:function(t,e){var n=Ol.create(t,e);return this.closestPoint(n).distance(n)}},{key:"tangentAt",value:function(t){if(!this.isDifferentiable())return null;var e=this.start,r=this.end,i=this.pointAt(t),o=new n(e,r);return o.translate(i.x-e.x,i.y-e.y),o}},{key:"tangentAtLength",value:function(t){if(!this.isDifferentiable())return null;var e=this.start,r=this.end,i=this.pointAtLength(t),o=new n(e,r);return o.translate(i.x-e.x,i.y-e.y),o}},{key:"relativeCcw",value:function(t,e){var n=Ol.create(t,e),r=n.x-this.start.x,i=n.y-this.start.y,o=this.end.x-this.start.x,a=this.end.y-this.start.y,s=r*a-i*o;return 0===s&&(s=r*o+i*a)>0&&(s=(r-=o)*o+(i-=a)*a)<0&&(s=0),s<0?-1:s>0?1:0}},{key:"equals",value:function(t){return null!=t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y}},{key:"clone",value:function(){return new n(this.start,this.end)}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return[this.start.serialize(),this.end.serialize()].join(" ")}}]),n}(Cl);!function(t){t.isLine=function(e){return null!=e&&e instanceof t}}(Ml||(Ml={}));var Sl=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(t,r,i,o){var a;return(0,m.Z)(this,n),(a=e.call(this)).x=null==t?0:t,a.y=null==r?0:r,a.a=null==i?0:i,a.b=null==o?0:o,a}return(0,b.Z)(n,[{key:"center",get:function(){return new Ol(this.x,this.y)}},{key:"bbox",value:function(){return El.fromEllipse(this)}},{key:"getCenter",value:function(){return this.center}},{key:"inflate",value:function(t,e){var n=t,r=null!=e?e:t;return this.a+=2*n,this.b+=2*r,this}},{key:"normalizedDistance",value:function(t,e){var n=Ol.create(t,e),r=n.x-this.x,i=n.y-this.y,o=this.a,a=this.b;return r*r/(o*o)+i*i/(a*a)}},{key:"containsPoint",value:function(t,e){return this.normalizedDistance(t,e)<=1}},{key:"intersectsWithLine",value:function(t){var e=[],n=this.a,r=this.b,i=t.start,o=t.end,a=t.vector(),s=i.diff(new Ol(this.x,this.y)),u=new Ol(a.x/(n*n),a.y/(r*r)),l=new Ol(s.x/(n*n),s.y/(r*r)),c=a.dot(u),h=a.dot(l),f=h*h-c*(s.dot(l)-1);if(f<0)return null;if(f>0){var g=Math.sqrt(f),d=(-h-g)/c,v=(-h+g)/c;if((d<0||d>1)&&(v<0||v>1))return null;d>=0&&d<=1&&e.push(i.lerp(o,d)),v>=0&&v<=1&&e.push(i.lerp(o,v))}else{var p=-h/c;if(!(p>=0&&p<=1))return null;e.push(i.lerp(o,p))}return e}},{key:"intersectsWithLineFromCenterToPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ol.clone(t);e&&n.rotate(e,this.getCenter());var r,i=n.x-this.x,o=n.y-this.y;if(0===i)return r=this.bbox().getNearestPointToPoint(n),e?r.rotate(-e,this.getCenter()):r;var a=o/i,s=a*a,u=this.a*this.a,l=this.b*this.b,c=Math.sqrt(1/(1/u+s/l)),h=a*(c=i<0?-c:c);return r=new Ol(this.x+c,this.y+h),e?r.rotate(-e,this.getCenter()):r}},{key:"tangentTheta",value:function(t){var e,n,r=Ol.clone(t),i=r.x,o=r.y,a=this.a,s=this.b,u=this.bbox().center,l=u.x,c=u.y,h=i>u.x+a/2,f=i<u.x-a/2;return h||f?e=a*a/(i-l)-a*a*(o-c)*((n=i>u.x?o-30:o+30)-c)/(s*s*(i-l))+l:n=s*s/(o-c)-s*s*(i-l)*((e=o>u.y?i+30:i-30)-l)/(a*a*(o-c))+c,new Ol(e,n).theta(r)}},{key:"scale",value:function(t,e){return this.a*=t,this.b*=e,this}},{key:"rotate",value:function(t,e){var r=El.fromEllipse(this);r.rotate(t,e);var i=n.fromRect(r);return this.a=i.a,this.b=i.b,this.x=i.x,this.y=i.y,this}},{key:"translate",value:function(t,e){var n=Ol.create(t,e);return this.x+=n.x,this.y+=n.y,this}},{key:"equals",value:function(t){return null!=t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b}},{key:"clone",value:function(){return new n(this.x,this.y,this.a,this.b)}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,a:this.a,b:this.b}}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y," ").concat(this.a," ").concat(this.b)}}]),n}(Cl);!function(t){t.isEllipse=function(e){return null!=e&&e instanceof t}}(Sl||(Sl={})),function(t){function e(e){return t.isEllipse(e)?e.clone():Array.isArray(e)?new t(e[0],e[1],e[2],e[3]):new t(e.x,e.y,e.a,e.b)}t.create=function(n,r,i,o){return null==n||"number"===typeof n?new t(n,r,i,o):e(n)},t.parse=e,t.fromRect=function(e){var n=e.center;return new t(n.x,n.y,e.width/2,e.height/2)}}(Sl||(Sl={}));var Tl=new RegExp("^[\\s\\dLMCZz,.]*$");function jl(t){return"string"===typeof t&&Tl.test(t)}function Nl(t,e){return(t%e+e)%e}function Ll(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return t&&t.length&&t.forEach((function(t){Array.isArray(t)?n.push({x:t[0],y:t[1]}):n.push({x:t.x,y:t.y})})),function(t,e,n,r,i){var o=[],a=t[t.length-1],s=null!=e&&e>0,u=e||0;if(r&&s){var l=(t=t.slice())[0],c=new Ol(a.x+(l.x-a.x)/2,a.y+(l.y-a.y)/2);t.splice(0,0,c)}var h=t[0],f=1;for(n?o.push("M",h.x,h.y):o.push("L",h.x,h.y);f<(r?t.length:t.length-1);){var g=t[Nl(f,t.length)],d=h.x-g.x,v=h.y-g.y;if(s&&(0!==d||0!==v)&&(null==i||i.indexOf(f-1)<0)){var p=Math.sqrt(d*d+v*v),y=d*Math.min(u,p/2)/p,m=v*Math.min(u,p/2)/p,b=g.x+y,k=g.y+m;o.push("L",b,k);for(var w=t[Nl(f+1,t.length)];f<t.length-2&&0===Math.round(w.x-g.x)&&0===Math.round(w.y-g.y);)w=t[Nl(f+2,t.length)],f+=1;d=w.x-g.x,v=w.y-g.y,p=Math.max(1,Math.sqrt(d*d+v*v));var x=d*Math.min(u,p/2)/p,P=v*Math.min(u,p/2)/p,A=g.x+x,C=g.y+P;o.push("Q",g.x,g.y,A,C),g=new Ol(A,C)}else o.push("L",g.x,g.y);h=g,f+=1}return r?o.push("Z"):o.push("L",a.x,a.y),o.map((function(t){return"string"===typeof t?t:+t.toFixed(3)})).join(" ")}(n,e.round,null==e.initialMove||e.initialMove,e.close,e.exclude)}function Bl(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0;if(0===n||0===r)return[];s-=t,u-=e,n=Math.abs(n),r=Math.abs(r);var l,c=-s/2,h=-u/2,f=Math.cos(i*Math.PI/180),g=Math.sin(i*Math.PI/180),d=f*c+g*h,v=-1*g*c+f*h,p=d*d,y=v*v,m=n*n,b=r*r,k=p/m+y/b;if(k>1)n=Math.sqrt(k)*n,r=Math.sqrt(k)*r,l=0;else{var w=1;o===a&&(w=-1),l=w*Math.sqrt((m*b-m*y-b*p)/(m*y+b*p))}var x=l*n*v/r,P=-1*l*r*d/n,A=f*x-g*P+s/2,C=g*x+f*P+u/2,O=Math.atan2((v-P)/r,(d-x)/n)-Math.atan2(0,1),E=O>=0?O:2*Math.PI+O,M=(O=Math.atan2((-v-P)/r,(-d-x)/n)-Math.atan2((v-P)/r,(d-x)/n))>=0?O:2*Math.PI+O;0===a&&M>0?M-=2*Math.PI:0!==a&&M<0&&(M+=2*Math.PI);for(var S=2*M/Math.PI,T=Math.ceil(S<0?-1*S:S),j=M/T,N=8/3*Math.sin(j/4)*Math.sin(j/4)/Math.sin(j/2),L=f*n,B=f*r,I=g*n,D=g*r,R=Math.cos(E),V=Math.sin(E),Z=-N*(L*V+D*R),z=-N*(I*V-B*R),F=0,G=0,_=[],q=0;q<T;q+=1){E+=j,F=L*(R=Math.cos(E))-D*(V=Math.sin(E))+A,G=I*R+B*V+C;var H=-N*(L*V+D*R),U=-N*(I*V-B*R),W=6*q;_[W]=Number(Z+t),_[W+1]=Number(z+e),_[W+2]=Number(F-H+t),_[W+3]=Number(G-U+e),_[W+4]=Number(F+t),_[W+5]=Number(G+e),Z=F+H,z=G+U}return _.map((function(t){return+t.toFixed(2)}))}function Il(t,e,n,r){var i=[],o=Bl(t,e,n,r,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,arguments.length>7?arguments[7]:void 0,arguments.length>8?arguments[8]:void 0);if(null!=o)for(var a=0,s=o.length;a<s;a+=6)i.push("C",o[a],o[a+1],o[a+2],o[a+3],o[a+4],o[a+5]);return i.join(" ")}var Dl=n(489),Rl=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(t){var r;if((0,m.Z)(this,n),r=e.call(this),null!=t){if("string"===typeof t)return(0,Dl.Z)(r,n.parse(t));r.points=t.map((function(t){return Ol.create(t)}))}else r.points=[];return r}return(0,b.Z)(n,[{key:"start",get:function(){return this.points[0]||null}},{key:"end",get:function(){return this.points[this.points.length-1]||null}},{key:"scale",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ol;return this.points.forEach((function(r){return r.scale(t,e,n)})),this}},{key:"rotate",value:function(t,e){return this.points.forEach((function(n){return n.rotate(t,e)})),this}},{key:"translate",value:function(t,e){var n=Ol.create(t,e);return this.points.forEach((function(t){return t.translate(n.x,n.y)})),this}},{key:"round",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.points.forEach((function(e){return e.round(t)})),this}},{key:"bbox",value:function(){if(0===this.points.length)return new El;for(var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.points,o=0,a=i.length;o<a;o+=1){var s=i[o],u=s.x,l=s.y;u<t&&(t=u),u>e&&(e=u),l<n&&(n=l),l>r&&(r=l)}return new El(t,n,e-t,r-n)}},{key:"closestPoint",value:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)}},{key:"closestPointLength",value:function(t){var e=this.points,n=e.length;if(0===n||1===n)return 0;for(var r=0,i=0,o=1/0,a=0,s=n-1;a<s;a+=1){var u=new Ml(e[a],e[a+1]),l=u.length(),c=u.closestPointNormalizedLength(t),h=u.pointAt(c).squaredDistance(t);h<o&&(o=h,i=r+c*l),r+=l}return i}},{key:"closestPointNormalizedLength",value:function(t){var e=this.length();return 0===e?0:this.closestPointLength(t)/e}},{key:"closestPointTangent",value:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)}},{key:"containsPoint",value:function(t){if(0===this.points.length)return!1;for(var e=Ol.clone(t),n=e.x,r=e.y,i=this.points,o=i.length,a=o-1,s=0,u=0;u<o;u+=1){var l=i[a],c=i[u];if(e.equals(l))return!0;var h=new Ml(l,c);if(h.containsPoint(t))return!0;if(r<=l.y&&r>c.y||r>l.y&&r<=c.y){var f=l.x-n>c.x-n?l.x-n:c.x-n;if(f>=0){var g=new Ol(n+f,r),d=new Ml(t,g);h.intersectsWithLine(d)&&(s+=1)}}a=u}return s%2===1}},{key:"intersectsWithLine",value:function(t){for(var e=[],n=0,r=this.points.length-1;n<r;n+=1){var i=this.points[n],o=this.points[n+1],a=t.intersectsWithLine(new Ml(i,o));a&&e.push(a)}return e.length>0?e:null}},{key:"isDifferentiable",value:function(){for(var t=0,e=this.points.length-1;t<e;t+=1){var n=this.points[t],r=this.points[t+1];if(new Ml(n,r).isDifferentiable())return!0}return!1}},{key:"length",value:function(){for(var t=0,e=0,n=this.points.length-1;e<n;e+=1){var r=this.points[e],i=this.points[e+1];t+=r.distance(i)}return t}},{key:"pointAt",value:function(t){var e=this.points,n=e.length;if(0===n)return null;if(1===n)return e[0].clone();if(t<=0)return e[0].clone();if(t>=1)return e[n-1].clone();var r=this.length()*t;return this.pointAtLength(r)}},{key:"pointAtLength",value:function(t){var e=this.points,n=e.length;if(0===n)return null;if(1===n)return e[0].clone();var r=!0;t<0&&(r=!1,t=-t);for(var i=0,o=0,a=n-1;o<a;o+=1){var s=r?o:a-1-o,u=e[s],l=e[s+1],c=new Ml(u,l),h=u.distance(l);if(t<=i+h)return c.pointAtLength((r?1:-1)*(t-i));i+=h}return(r?e[n-1]:e[0]).clone()}},{key:"tangentAt",value:function(t){var e=this.points.length;if(0===e||1===e)return null;t<0&&(t=0),t>1&&(t=1);var n=this.length()*t;return this.tangentAtLength(n)}},{key:"tangentAtLength",value:function(t){var e=this.points,n=e.length;if(0===n||1===n)return null;var r,i=!0;t<0&&(i=!1,t=-t);for(var o=0,a=0,s=n-1;a<s;a+=1){var u=i?a:s-1-a,l=e[u],c=e[u+1],h=new Ml(l,c),f=l.distance(c);if(h.isDifferentiable()){if(t<=o+f)return h.tangentAtLength((i?1:-1)*(t-o));r=h}o+=f}if(r){var g=i?1:0;return r.tangentAt(g)}return null}},{key:"simplify",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.points;if(e.length<3)return this;for(var n=t.threshold||0,r=0;e[r+2];){var i=r+1,o=r+2,a=e[r],s=e[i],u=e[o];new Ml(a,u).closestPoint(s).distance(s)<=n?e.splice(i,1):r+=1}return this}},{key:"toHull",value:function(){var t=this.points,e=t.length;if(0===e)return new n;for(var r=t[0],i=1;i<e;i+=1)(t[i].y<r.y||t[i].y===r.y&&t[i].x>r.x)&&(r=t[i]);for(var o=[],a=0;a<e;a+=1){var s=r.theta(t[a]);0===s&&(s=360),o.push([t[a],a,s])}if(o.sort((function(t,e){var n=t[2]-e[2];return 0===n&&(n=e[1]-t[1]),n})),o.length>2){var u=o[o.length-1];o.unshift(u)}for(var l,c={},h=[],f=function(t){return"".concat(t[0].toString(),"@").concat(t[1])};0!==o.length;){var g=o.pop(),d=g[0];if(!c[f(g)])for(var v=!1;!v;)if(h.length<2)h.push(g),v=!0;else{var p=h.pop(),y=p[0],m=h.pop(),b=m[0],k=b.cross(y,d);if(k<0)h.push(m),h.push(p),h.push(g),v=!0;else if(0===k){var w=y.angleBetween(b,d);Math.abs(w-180)<1e-10||y.equals(d)||b.equals(y)?(c[f(p)]=y,h.push(m)):Math.abs((w+1)%360-1)<1e-10&&(h.push(m),o.push(p))}else c[f(p)]=y,h.push(m)}}h.length>2&&h.pop();for(var x=-1,P=0,A=h.length;P<A;P+=1){var C=h[P][1];(void 0===l||C<l)&&(l=C,x=P)}var O=[];if(x>0){var E=h.slice(x),M=h.slice(0,x);O=E.concat(M)}else O=h;for(var S=[],T=0,j=O.length;T<j;T+=1)S.push(O[T][0]);return new n(S)}},{key:"equals",value:function(t){var e=this;return null!=t&&(t.points.length===this.points.length&&t.points.every((function(t,n){return t.equals(e.points[n])})))}},{key:"clone",value:function(){return new n(this.points.map((function(t){return t.clone()})))}},{key:"toJSON",value:function(){return this.points.map((function(t){return t.toJSON()}))}},{key:"serialize",value:function(){return this.points.map((function(t){return"".concat(t.serialize())})).join(" ")}}]),n}(Cl);!function(t){t.isPolyline=function(e){return null!=e&&e instanceof t}}(Rl||(Rl={})),function(t){t.parse=function(e){var n=e.trim();if(""===n)return new t;for(var r=[],i=n.split(/\s*,\s*|\s+/),o=0,a=i.length;o<a;o+=2)r.push({x:+i[o],y:+i[o+1]});return new t(r)}}(Rl||(Rl={}));var Vl=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(t,r,i,o){var a;return(0,m.Z)(this,n),(a=e.call(this)).PRECISION=3,a.start=Ol.create(t),a.controlPoint1=Ol.create(r),a.controlPoint2=Ol.create(i),a.end=Ol.create(o),a}return(0,b.Z)(n,[{key:"bbox",value:function(){for(var t,e,n,r,i,o,a,s,u,l,c,h=this.start,f=this.controlPoint1,g=this.controlPoint2,d=this.end,v=h.x,p=h.y,y=f.x,m=f.y,b=g.x,k=g.y,w=d.x,x=d.y,P=[],A=[],C=[[],[]],O=0;O<2;O+=1)if(0===O?(e=6*v-12*y+6*b,t=-3*v+9*y-9*b+3*w,n=3*y-3*v):(e=6*p-12*m+6*k,t=-3*p+9*m-9*k+3*x,n=3*m-3*p),Math.abs(t)<1e-12){if(Math.abs(e)<1e-12)continue;(r=-n/e)>0&&r<1&&A.push(r)}else a=e*e-4*n*t,s=Math.sqrt(a),a<0||((i=(-e+s)/(2*t))>0&&i<1&&A.push(i),(o=(-e-s)/(2*t))>0&&o<1&&A.push(o));for(var E=A.length,M=E;E;)u=(c=1-(r=A[E-=1]))*c*c*v+3*c*c*r*y+3*c*r*r*b+r*r*r*w,C[0][E]=u,l=c*c*c*p+3*c*c*r*m+3*c*r*r*k+r*r*r*x,C[1][E]=l,P[E]={X:u,Y:l};A[M]=0,A[M+1]=1,P[M]={X:v,Y:p},P[M+1]={X:w,Y:x},C[0][M]=v,C[1][M]=p,C[0][M+1]=w,C[1][M+1]=x,A.length=M+2,C[0].length=M+2,C[1].length=M+2,P.length=M+2;var S=Math.min.apply(null,C[0]),T=Math.min.apply(null,C[1]),j=Math.max.apply(null,C[0]),N=Math.max.apply(null,C[1]);return new El(S,T,j-S,N-T)}},{key:"closestPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.pointAtT(this.closestPointT(t,e))}},{key:"closestPointLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getOptions(e);return this.lengthAtT(this.closestPointT(t,n),n)}},{key:"closestPointNormalizedLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getOptions(e),r=this.closestPointLength(t,n);if(!r)return 0;var i=this.length(n);return 0===i?0:r/i}},{key:"closestPointT",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getPrecision(e),r=this.getDivisions(e),i=Math.pow(10,-n),o=null,a=0,s=0,u=0,l=0,c=0,h=null,f=r.length,g=f>0?1/f:0;for(r.forEach((function(e,n){var r=e.start.distance(t),i=e.end.distance(t),f=r+i;(null==h||f<h)&&(o=e,a=n*g,s=(n+1)*g,u=r,l=i,h=f,c=e.endpointDistance())}));;){var d=u?Math.abs(u-l)/u:0,v=null!=l?Math.abs(u-l)/l:0;if(d<i||v<i||(!u||u<c*i||(!l||l<c*i)))return u<=l?a:s;var p=o.divide(.5);g/=2;var y=p[0].start.distance(t),m=p[0].end.distance(t),b=y+m,k=p[1].start.distance(t),w=p[1].end.distance(t);b<=k+w?(o=p[0],s-=g,u=y,l=m):(o=p[1],a+=g,u=k,l=w)}}},{key:"closestPointTangent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.tangentAtT(this.closestPointT(t,e))}},{key:"containsPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.toPolyline(e).containsPoint(t)}},{key:"divideAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var n=this.tAt(t,e);return this.divideAtT(n)}},{key:"divideAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.tAtLength(t,e);return this.divideAtT(n)}},{key:"divide",value:function(t){return this.divideAtT(t)}},{key:"divideAtT",value:function(t){var e=this.start,r=this.controlPoint1,i=this.controlPoint2,o=this.end;if(t<=0)return[new n(e,e,e,e),new n(e,r,i,o)];if(t>=1)return[new n(e,r,i,o),new n(o,o,o,o)];var a=this.getSkeletonPoints(t),s=a.startControlPoint1,u=a.startControlPoint2,l=a.divider,c=a.dividerControlPoint1,h=a.dividerControlPoint2;return[new n(e,s,u,l),new n(l,c,h,o)]}},{key:"endpointDistance",value:function(){return this.start.distance(this.end)}},{key:"getSkeletonPoints",value:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(t>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var o=new Ml(e,n).pointAt(t),a=new Ml(n,r).pointAt(t),s=new Ml(r,i).pointAt(t),u=new Ml(o,a).pointAt(t),l=new Ml(a,s).pointAt(t);return{startControlPoint1:o,startControlPoint2:u,divider:new Ml(u,l).pointAt(t),dividerControlPoint1:l,dividerControlPoint2:s}}},{key:"getSubdivisions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getPrecision(t),r=[new n(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===e)return r;for(var i,o=this.endpointDistance(),a=Math.pow(10,-e),s=0,u=function(){s+=1;var t=[];r.forEach((function(e){var n=e.divide(.5);t.push(n[0],n[1])}));var e=t.reduce((function(t,e){return t+e.endpointDistance()}),0);if(s>1&&(0!==e?(e-o)/e:0)<a)return{v:t};r=t,o=e};;)if(i=u())return i.v}},{key:"length",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getDivisions(t).reduce((function(t,e){return t+e.endpointDistance()}),0)}},{key:"lengthAtT",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t<=0)return 0;var n=void 0===e.precision?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:n})}},{key:"pointAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var n=this.tAt(t,e);return this.pointAtT(n)}},{key:"pointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.tAtLength(t,e);return this.pointAtT(n)}},{key:"pointAtT",value:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider}},{key:"isDifferentiable",value:function(){var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))}},{key:"tangentAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var n=this.tAt(t,e);return this.tangentAtT(n)}},{key:"tangentAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isDifferentiable())return null;var n=this.tAtLength(t,e);return this.tangentAtT(n)}},{key:"tangentAtT",value:function(t){if(!this.isDifferentiable())return null;t<0&&(t=0),t>1&&(t=1);var e=this.getSkeletonPoints(t),n=e.startControlPoint2,r=e.dividerControlPoint1,i=e.divider,o=new Ml(n,r);return o.translate(i.x-n.x,i.y-n.y),o}},{key:"getPrecision",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null==t.precision?this.PRECISION:t.precision}},{key:"getDivisions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null!=t.subdivisions)return t.subdivisions;var e=this.getPrecision(t);return this.getSubdivisions({precision:e})}},{key:"getOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{precision:this.getPrecision(t),subdivisions:this.getDivisions(t)}}},{key:"tAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t<=0)return 0;if(t>=1)return 1;var n=this.getOptions(e),r=this.length(n)*t;return this.tAtLength(r,n)}},{key:"tAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!0;t<0&&(n=!1,t=-t);for(var r,i,o=this.getPrecision(e),a=this.getDivisions(e),s={precision:o,subdivisions:a},u=null,l=0,c=0,h=0,f=a.length,g=f>0?1/f:0,d=0;d<f;d+=1){var v=n?d:f-1-d,p=a[d],y=p.endpointDistance();if(t<=h+y){u=p,r=v*g,i=(v+1)*g,l=n?t-h:y+h-t,c=n?y+h-t:t-h;break}h+=y}if(null==u)return n?1:0;for(var m=this.length(s),b=Math.pow(10,-o);;){if((0!==m?l/m:0)<b)return r;if((0!==m?c/m:0)<b)return i;var k=void 0,w=void 0,x=u.divide(.5);g/=2;var P=x[0].endpointDistance(),A=x[1].endpointDistance();l<=P?(u=x[0],i-=g,w=P-(k=l)):(u=x[1],r+=g,w=A-(k=l-P)),l=k,c=w}}},{key:"toPoints",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getDivisions(t),n=[e[0].start.clone()];return e.forEach((function(t){return n.push(t.end.clone())})),n}},{key:"toPolyline",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Rl(this.toPoints(t))}},{key:"scale",value:function(t,e,n){return this.start.scale(t,e,n),this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this}},{key:"rotate",value:function(t,e){return this.start.rotate(t,e),this.controlPoint1.rotate(t,e),this.controlPoint2.rotate(t,e),this.end.rotate(t,e),this}},{key:"translate",value:function(t,e){return"number"===typeof t?(this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}},{key:"equals",value:function(t){return null!=t&&this.start.equals(t.start)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)&&this.end.equals(t.end)}},{key:"clone",value:function(){return new n(this.start,this.controlPoint1,this.controlPoint2,this.end)}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}]),n}(Cl);!function(t){t.isCurve=function(e){return null!=e&&e instanceof t}}(Vl||(Vl={})),function(t){function e(t){var e=t.length,n=[],r=[],i=2;n[0]=t[0]/i;for(var o=1;o<e;o+=1)r[o]=1/i,i=(o<e-1?4:3.5)-r[o],n[o]=(t[o]-n[o-1])/i;for(var a=1;a<e;a+=1)n[e-a-1]-=r[e-a]*n[e-a];return n}t.throughPoints=function(n){if(null==n||Array.isArray(n)&&n.length<2)throw new Error("At least 2 points are required");for(var r=function(t){var n=t.map((function(t){return Ol.clone(t)})),r=[],i=[],o=n.length-1;if(1===o)return r[0]=new Ol((2*n[0].x+n[1].x)/3,(2*n[0].y+n[1].y)/3),i[0]=new Ol(2*r[0].x-n[0].x,2*r[0].y-n[0].y),[r,i];for(var a=[],s=1;s<o-1;s+=1)a[s]=4*n[s].x+2*n[s+1].x;a[0]=n[0].x+2*n[1].x,a[o-1]=(8*n[o-1].x+n[o].x)/2;for(var u=e(a),l=1;l<o-1;l+=1)a[l]=4*n[l].y+2*n[l+1].y;a[0]=n[0].y+2*n[1].y,a[o-1]=(8*n[o-1].y+n[o].y)/2;for(var c=e(a),h=0;h<o;h+=1)r.push(new Ol(u[h],c[h])),h<o-1?i.push(new Ol(2*n[h+1].x-u[h+1],2*n[h+1].y-c[h+1])):i.push(new Ol((n[o].x+u[o-1])/2,(n[o].y+c[o-1])/2));return[r,i]}(n),i=[],o=0,a=r[0].length;o<a;o+=1){var s=new Ol(r[0][o].x,r[0][o].y),u=new Ol(r[1][o].x,r[1][o].y);i.push(new t(n[o],s,u,n[o+1]))}return i}}(Vl||(Vl={}));var Zl=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){var t;return(0,m.Z)(this,n),(t=e.apply(this,arguments)).isVisible=!0,t.isSegment=!0,t.isSubpathStart=!1,t}return(0,b.Z)(n,[{key:"end",get:function(){return this.endPoint}},{key:"start",get:function(){if(null==this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}},{key:"closestPointT",value:function(t,e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}},{key:"lengthAtT",value:function(t,e){if(t<=0)return 0;var n=this.length();return t>=1?n:n*t}},{key:"divideAtT",value:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}},{key:"pointAtT",value:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}},{key:"tangentAtT",value:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}]),n}(Cl),zl=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(t,r){var i;return(0,m.Z)(this,n),i=e.call(this),Ml.isLine(t)?i.endPoint=t.end.clone().round(2):i.endPoint=Ol.create(t,r).round(2),i}return(0,b.Z)(n,[{key:"type",get:function(){return"L"}},{key:"line",get:function(){return new Ml(this.start,this.end)}},{key:"bbox",value:function(){return this.line.bbox()}},{key:"closestPoint",value:function(t){return this.line.closestPoint(t)}},{key:"closestPointLength",value:function(t){return this.line.closestPointLength(t)}},{key:"closestPointNormalizedLength",value:function(t){return this.line.closestPointNormalizedLength(t)}},{key:"closestPointTangent",value:function(t){return this.line.closestPointTangent(t)}},{key:"length",value:function(){return this.line.length()}},{key:"divideAt",value:function(t){var e=this.line.divideAt(t);return[new n(e[0]),new n(e[1])]}},{key:"divideAtLength",value:function(t){var e=this.line.divideAtLength(t);return[new n(e[0]),new n(e[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(t){return this.line.pointAt(t)}},{key:"pointAtLength",value:function(t){return this.line.pointAtLength(t)}},{key:"tangentAt",value:function(t){return this.line.tangentAt(t)}},{key:"tangentAtLength",value:function(t){return this.line.tangentAtLength(t)}},{key:"isDifferentiable",value:function(){return null!=this.previousSegment&&!this.start.equals(this.end)}},{key:"clone",value:function(){return new n(this.end)}},{key:"scale",value:function(t,e,n){return this.end.scale(t,e,n),this}},{key:"rotate",value:function(t,e){return this.end.rotate(t,e),this}},{key:"translate",value:function(t,e){return"number"===typeof t?this.end.translate(t,e):this.end.translate(t),this}},{key:"equals",value:function(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){var t=this.end;return"".concat(this.type," ").concat(t.x," ").concat(t.y)}}]),n}(Zl);!function(t){t.create=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.length,o=n[0];if(Ml.isLine(o))return new t(o);if(Ol.isPointLike(o))return 1===i?new t(o):n.map((function(e){return new t(e)}));if(2===i)return new t(+n[0],+n[1]);for(var a=[],s=0;s<i;s+=2){var u=+n[s],l=+n[s+1];a.push(new t(u,l))}return a}}(zl||(zl={}));var Fl=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"end",get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}},{key:"type",get:function(){return"Z"}},{key:"line",get:function(){return new Ml(this.start,this.end)}},{key:"bbox",value:function(){return this.line.bbox()}},{key:"closestPoint",value:function(t){return this.line.closestPoint(t)}},{key:"closestPointLength",value:function(t){return this.line.closestPointLength(t)}},{key:"closestPointNormalizedLength",value:function(t){return this.line.closestPointNormalizedLength(t)}},{key:"closestPointTangent",value:function(t){return this.line.closestPointTangent(t)}},{key:"length",value:function(){return this.line.length()}},{key:"divideAt",value:function(t){var e=this.line.divideAt(t);return[e[1].isDifferentiable()?new zl(e[0]):this.clone(),new zl(e[1])]}},{key:"divideAtLength",value:function(t){var e=this.line.divideAtLength(t);return[e[1].isDifferentiable()?new zl(e[0]):this.clone(),new zl(e[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(t){return this.line.pointAt(t)}},{key:"pointAtLength",value:function(t){return this.line.pointAtLength(t)}},{key:"tangentAt",value:function(t){return this.line.tangentAt(t)}},{key:"tangentAtLength",value:function(t){return this.line.tangentAtLength(t)}},{key:"isDifferentiable",value:function(){return!(!this.previousSegment||!this.subpathStartSegment)&&!this.start.equals(this.end)}},{key:"scale",value:function(){return this}},{key:"rotate",value:function(){return this}},{key:"translate",value:function(){return this}},{key:"equals",value:function(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)}},{key:"clone",value:function(){return new n}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return this.type}}]),n}(Zl);!function(t){t.create=function(){return new t}}(Fl||(Fl={}));var Gl=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(t,r){var i;return(0,m.Z)(this,n),(i=e.call(this)).isVisible=!1,i.isSubpathStart=!0,Ml.isLine(t)||Vl.isCurve(t)?i.endPoint=t.end.clone().round(2):i.endPoint=Ol.create(t,r).round(2),i}return(0,b.Z)(n,[{key:"start",get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}},{key:"type",get:function(){return"M"}},{key:"bbox",value:function(){return null}},{key:"closestPoint",value:function(){return this.end.clone()}},{key:"closestPointLength",value:function(){return 0}},{key:"closestPointNormalizedLength",value:function(){return 0}},{key:"closestPointT",value:function(){return 1}},{key:"closestPointTangent",value:function(){return null}},{key:"length",value:function(){return 0}},{key:"lengthAtT",value:function(){return 0}},{key:"divideAt",value:function(){return[this.clone(),this.clone()]}},{key:"divideAtLength",value:function(){return[this.clone(),this.clone()]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(){return this.end.clone()}},{key:"pointAtLength",value:function(){return this.end.clone()}},{key:"pointAtT",value:function(){return this.end.clone()}},{key:"tangentAt",value:function(){return null}},{key:"tangentAtLength",value:function(){return null}},{key:"tangentAtT",value:function(){return null}},{key:"isDifferentiable",value:function(){return!1}},{key:"scale",value:function(t,e,n){return this.end.scale(t,e,n),this}},{key:"rotate",value:function(t,e){return this.end.rotate(t,e),this}},{key:"translate",value:function(t,e){return"number"===typeof t?this.end.translate(t,e):this.end.translate(t),this}},{key:"clone",value:function(){return new n(this.end)}},{key:"equals",value:function(t){return this.type===t.type&&this.end.equals(t.end)}},{key:"toJSON",value:function(){return{type:this.type,end:this.end.toJSON()}}},{key:"serialize",value:function(){var t=this.end;return"".concat(this.type," ").concat(t.x," ").concat(t.y)}}]),n}(Zl);!function(t){t.create=function(){var e=arguments.length,n=arguments.length<=0?void 0:arguments[0];if(Ml.isLine(n))return new t(n);if(Vl.isCurve(n))return new t(n);if(Ol.isPointLike(n)){if(1===e)return new t(n);for(var r=[],i=0;i<e;i+=1)0===i?r.push(new t(i<0||arguments.length<=i?void 0:arguments[i])):r.push(new zl(i<0||arguments.length<=i?void 0:arguments[i]));return r}if(2===e)return new t(+(arguments.length<=0?void 0:arguments[0]),+(arguments.length<=1?void 0:arguments[1]));for(var o=[],a=0;a<e;a+=2){var s=+(a<0||arguments.length<=a?void 0:arguments[a]),u=+(a+1<0||arguments.length<=a+1?void 0:arguments[a+1]);0===a?o.push(new t(s,u)):o.push(new zl(s,u))}return o}}(Gl||(Gl={}));var _l=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(t,r,i,o,a,s){var u;return(0,m.Z)(this,n),u=e.call(this),Vl.isCurve(t)?(u.controlPoint1=t.controlPoint1.clone().round(2),u.controlPoint2=t.controlPoint2.clone().round(2),u.endPoint=t.end.clone().round(2)):"number"===typeof t?(u.controlPoint1=new Ol(t,r).round(2),u.controlPoint2=new Ol(i,o).round(2),u.endPoint=new Ol(a,s).round(2)):(u.controlPoint1=Ol.create(t).round(2),u.controlPoint2=Ol.create(r).round(2),u.endPoint=Ol.create(i).round(2)),u}return(0,b.Z)(n,[{key:"type",get:function(){return"C"}},{key:"curve",get:function(){return new Vl(this.start,this.controlPoint1,this.controlPoint2,this.end)}},{key:"bbox",value:function(){return this.curve.bbox()}},{key:"closestPoint",value:function(t){return this.curve.closestPoint(t)}},{key:"closestPointLength",value:function(t){return this.curve.closestPointLength(t)}},{key:"closestPointNormalizedLength",value:function(t){return this.curve.closestPointNormalizedLength(t)}},{key:"closestPointTangent",value:function(t){return this.curve.closestPointTangent(t)}},{key:"length",value:function(){return this.curve.length()}},{key:"divideAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.curve.divideAt(t,e);return[new n(r[0]),new n(r[1])]}},{key:"divideAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.curve.divideAtLength(t,e);return[new n(r[0]),new n(r[1])]}},{key:"divideAtT",value:function(t){var e=this.curve.divideAtT(t);return[new n(e[0]),new n(e[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(t){return this.curve.pointAt(t)}},{key:"pointAtLength",value:function(t){return this.curve.pointAtLength(t)}},{key:"tangentAt",value:function(t){return this.curve.tangentAt(t)}},{key:"tangentAtLength",value:function(t){return this.curve.tangentAtLength(t)}},{key:"isDifferentiable",value:function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))}},{key:"scale",value:function(t,e,n){return this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this}},{key:"rotate",value:function(t,e){return this.controlPoint1.rotate(t,e),this.controlPoint2.rotate(t,e),this.end.rotate(t,e),this}},{key:"translate",value:function(t,e){return"number"===typeof t?(this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}},{key:"equals",value:function(t){return this.start.equals(t.start)&&this.end.equals(t.end)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)}},{key:"clone",value:function(){return new n(this.controlPoint1,this.controlPoint2,this.end)}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){var t=this.controlPoint1,e=this.controlPoint2,n=this.end;return[this.type,t.x,t.y,e.x,e.y,n.x,n.y].join(" ")}}]),n}(Zl);function ql(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}function Hl(t,e,n,r,i,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]}function Ul(t,e,n,r,i,o,a,s,u,l){var c,h,f,g,d,v=120*Math.PI/180,p=Math.PI/180*(+i||0),y=[];if(l)h=l[0],f=l[1],g=l[2],d=l[3];else{t=(c=ql(t,e,-p)).x,e=c.y;var m=(t-(s=(c=ql(s,u,-p)).x))/2,b=(e-(u=c.y))/2,k=m*m/(n*n)+b*b/(r*r);k>1&&(n*=k=Math.sqrt(k),r*=k);var w=n*n,x=r*r,P=(o===a?-1:1)*Math.sqrt(Math.abs((w*x-w*b*b-x*m*m)/(w*b*b+x*m*m)));g=P*n*b/r+(t+s)/2,d=P*-r*m/n+(e+u)/2,h=Math.asin((e-d)/r),f=Math.asin((u-d)/r),h=t<g?Math.PI-h:h,f=s<g?Math.PI-f:f,h<0&&(h=2*Math.PI+h),f<0&&(f=2*Math.PI+f),a&&h>f&&(h-=2*Math.PI),!a&&f>h&&(f-=2*Math.PI)}var A=f-h;if(Math.abs(A)>v){var C=f,O=s,E=u;f=h+v*(a&&f>h?1:-1),y=Ul(s=g+n*Math.cos(f),u=d+r*Math.sin(f),n,r,i,0,a,O,E,[f,C,g,d])}A=f-h;var M=Math.cos(h),S=Math.sin(h),T=Math.cos(f),j=Math.sin(f),N=Math.tan(A/4),L=4/3*(n*N),B=4/3*(r*N),I=[t,e],D=[t+L*S,e-B*M],R=[s+L*j,u-B*T],V=[s,u];if(D[0]=2*I[0]-D[0],D[1]=2*I[1]-D[1],l)return[D,R,V].concat(y);for(var Z=[],z=(y=[D,R,V].concat(y).join().split(",")).length,F=0;F<z;F+=1)Z[F]=F%2?ql(+y[F-1],+y[F],p).y:ql(+y[F],+y[F+1],p).x;return Z}function Wl(t){var e=function(t){if(!t)return null;var e="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",n=new RegExp("([a-z])[".concat(e,",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[").concat(e,"]*,?[").concat(e,"]*)+)"),"ig"),r=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[".concat(e,"]*,?[").concat(e,"]*"),"ig"),i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=[];return t.replace(n,(function(t,e,n){var a=[],s=e.toLowerCase();n.replace(r,(function(t,e){return e&&a.push(+e),t})),"m"===s&&a.length>2&&(o.push([e].concat((0,A.Z)(a.splice(0,2)))),s="l",e="m"===e?"l":"L");for(var u=i[s];a.length>=u&&(o.push([e].concat((0,A.Z)(a.splice(0,u)))),u););return t})),o}(t);if(!e||!e.length)return[["M",0,0]];for(var n=0,r=0,i=0,o=0,a=[],s=0,u=e.length;s<u;s+=1){var l=[];a.push(l);var c=e[s],h=c[0];if(h!==h.toUpperCase())switch(l[0]=h.toUpperCase(),l[0]){case"A":l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=+c[6]+n,l[7]=+c[7]+r;break;case"V":l[1]=+c[1]+r;break;case"H":l[1]=+c[1]+n;break;case"M":i=+c[1]+n,o=+c[2]+r;for(var f=1,g=c.length;f<g;f+=1)l[f]=+c[f]+(f%2?n:r);break;default:for(var d=1,v=c.length;d<v;d+=1)l[d]=+c[d]+(d%2?n:r)}else for(var p=0,y=c.length;p<y;p+=1)l[p]=c[p];switch(l[0]){case"Z":n=+i,r=+o;break;case"H":n=l[1];break;case"V":r=l[1];break;case"M":i=l[l.length-2],o=l[l.length-1],n=l[l.length-2],r=l[l.length-1];break;default:n=l[l.length-2],r=l[l.length-1]}}return a}function Jl(t){var e=Wl(t),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function r(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(t[0]in{T:1,Q:1}||(e.qx=null,e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":return 0===parseFloat(t[1])||0===parseFloat(t[2])?["L",t[6],t[7]]:["C"].concat(Ul.apply(0,[e.x,e.y].concat(t.slice(1))));case"S":return"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),["C",r,i].concat(t.slice(1));case"T":return"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),["C"].concat(Hl(e.x,e.y,e.qx,e.qy,t[1],t[2]));case"Q":return e.qx=t[1],e.qy=t[2],["C"].concat(Hl(e.x,e.y,t[1],t[2],t[3],t[4]));case"H":return["L"].concat(t[1],e.y);case"V":return["L"].concat(e.x,t[1])}return t}function i(t,n){if(t[n].length>7){t[n].shift();for(var r=t[n];r.length;)o[n]="A",n+=1,t.splice(n,0,["C"].concat(r.splice(0,6)));t.splice(n,1),s=e.length}}for(var o=[],a="",s=e.length,u=0;u<s;u+=1){var l="";e[u]&&(l=e[u][0]),"C"!==l&&(o[u]=l,u>0&&(a=o[u-1])),e[u]=r(e[u],n,a),"A"!==o[u]&&"C"===l&&(o[u]="C"),i(e,u);var c=e[u],h=c.length;n.x=c[h-2],n.y=c[h-1],n.bx=parseFloat(c[h-4])||n.x,n.by=parseFloat(c[h-3])||n.y}return e[0][0]&&"M"===e[0][0]||e.unshift(["M",0,0]),e}function Xl(t){return Jl(t).map((function(t){return t.map((function(t){return"string"===typeof t?t:Pl.round(t,2)}))})).join(",").split(",").join(" ")}!function(t){t.create=function(){var e=arguments.length,n=arguments.length<=0?void 0:arguments[0];if(Vl.isCurve(n))return new t(n);if(Ol.isPointLike(n)){if(3===e)return new t(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]);for(var r=[],i=0;i<e;i+=3)r.push(new t(i<0||arguments.length<=i?void 0:arguments[i],i+1<0||arguments.length<=i+1?void 0:arguments[i+1],i+2<0||arguments.length<=i+2?void 0:arguments[i+2]));return r}if(6===e)return new t(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]);for(var o=[],a=0;a<e;a+=6)o.push(new t(a<0||arguments.length<=a?void 0:arguments[a],a+1<0||arguments.length<=a+1?void 0:arguments[a+1],a+2<0||arguments.length<=a+2?void 0:arguments[a+2],a+3<0||arguments.length<=a+3?void 0:arguments[a+3],a+4<0||arguments.length<=a+4?void 0:arguments[a+4],a+5<0||arguments.length<=a+5?void 0:arguments[a+5]));return o}}(_l||(_l={}));var Yl=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(t){var r;if((0,m.Z)(this,n),(r=e.call(this)).PRECISION=3,r.segments=[],Array.isArray(t))if(Ml.isLine(t[0])||Vl.isCurve(t[0])){var i=null;t.forEach((function(t,e){0===e&&r.appendSegment(n.createSegment("M",t.start)),null==i||i.end.equals(t.start)||r.appendSegment(n.createSegment("M",t.start)),Ml.isLine(t)?r.appendSegment(n.createSegment("L",t.end)):Vl.isCurve(t)&&r.appendSegment(n.createSegment("C",t.controlPoint1,t.controlPoint2,t.end)),i=t}))}else{t.forEach((function(t){t.isSegment&&r.appendSegment(t)}))}else null!=t&&(Ml.isLine(t)?(r.appendSegment(n.createSegment("M",t.start)),r.appendSegment(n.createSegment("L",t.end))):Vl.isCurve(t)?(r.appendSegment(n.createSegment("M",t.start)),r.appendSegment(n.createSegment("C",t.controlPoint1,t.controlPoint2,t.end))):Rl.isPolyline(t)?t.points&&t.points.length&&t.points.forEach((function(t,e){var i=0===e?n.createSegment("M",t):n.createSegment("L",t);r.appendSegment(i)})):t.isSegment&&r.appendSegment(t));return r}return(0,b.Z)(n,[{key:"start",get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=0;n<e;n+=1){var r=t[n];if(r.isVisible)return r.start}return t[e-1].end}},{key:"end",get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=e-1;n>=0;n-=1){var r=t[n];if(r.isVisible)return r.end}return t[e-1].end}},{key:"moveTo",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.appendSegment((t=Gl.create).call.apply(t,[null].concat(n)))}},{key:"lineTo",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.appendSegment((t=zl.create).call.apply(t,[null].concat(n)))}},{key:"curveTo",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.appendSegment((t=_l.create).call.apply(t,[null].concat(n)))}},{key:"arcTo",value:function(t,e,n,r,i,o,a){var s=this.end||new Ol,u="number"===typeof o?Bl(s.x,s.y,t,e,n,r,i,o,a):Bl(s.x,s.y,t,e,n,r,i,o.x,o.y);if(null!=u)for(var l=0,c=u.length;l<c;l+=6)this.curveTo(u[l],u[l+1],u[l+2],u[l+3],u[l+4],u[l+5]);return this}},{key:"quadTo",value:function(t,e,r,i){var o=this.end||new Ol,a=["M",o.x,o.y];if("number"===typeof t)a.push("Q",t,e,r,i);else{var s=e;a.push("Q",t.x,t.y,s.x,s.y)}var u=n.parse(a.join(" "));return this.appendSegment(u.segments.slice(1)),this}},{key:"close",value:function(){return this.appendSegment(Fl.create())}},{key:"drawPoints",value:function(t){var e=Ll(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),r=n.parse(e);r&&r.segments&&this.appendSegment(r.segments)}},{key:"bbox",value:function(){var t,e=this.segments,n=e.length;if(0===n)return null;for(var r=0;r<n;r+=1){var i=e[r];if(i.isVisible){var o=i.bbox();null!=o&&(t=t?t.union(o):o)}}if(null!=t)return t;var a=e[n-1];return new El(a.end.x,a.end.y,0,0)}},{key:"appendSegment",value:function(t){var e,n=this.segments.length,r=0!==n?this.segments[n-1]:null;if(Array.isArray(t))for(var i=0,o=t.length;i<o;i+=1){var a=t[i];e=this.prepareSegment(a,r,null),this.segments.push(e),r=e}else null!=t&&t.isSegment&&(e=this.prepareSegment(t,r,null),this.segments.push(e));return this}},{key:"insertSegment",value:function(t,e){var n,r=this.segments.length;if(t<0&&(t=r+t+1),t>r||t<0)throw new Error("Index out of range.");var i=null,o=null;if(0!==r&&(t>=1?o=(i=this.segments[t-1]).nextSegment:(i=null,o=this.segments[0])),Array.isArray(e))for(var a=0,s=e.length;a<s;a+=1){var u=e[a];n=this.prepareSegment(u,i,o),this.segments.splice(t+a,0,n),i=n}else n=this.prepareSegment(e,i,o),this.segments.splice(t,0,n);return this}},{key:"removeSegment",value:function(t){var e=this.fixIndex(t),n=this.segments.splice(e,1)[0],r=n.previousSegment,i=n.nextSegment;return r&&(r.nextSegment=i),i&&(i.previousSegment=r),n.isSubpathStart&&i&&this.updateSubpathStartSegment(i),n}},{key:"replaceSegment",value:function(t,e){var n,r=this.fixIndex(t),i=this.segments[r],o=i.previousSegment,a=i.nextSegment,s=i.isSubpathStart;if(Array.isArray(e)){this.segments.splice(t,1);for(var u=0,l=e.length;u<l;u+=1){var c=e[u];n=this.prepareSegment(c,o,a),this.segments.splice(t+u,0,n),o=n,s&&n.isSubpathStart&&(s=!1)}}else n=this.prepareSegment(e,o,a),this.segments.splice(r,1,n),s&&n.isSubpathStart&&(s=!1);s&&a&&this.updateSubpathStartSegment(a)}},{key:"getSegment",value:function(t){var e=this.fixIndex(t);return this.segments[e]}},{key:"fixIndex",value:function(t){var e=this.segments.length;if(0===e)throw new Error("Path has no segments.");for(var n=t;n<0;)n=e+n;if(n>=e||n<0)throw new Error("Index out of range.");return n}},{key:"segmentAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.segmentIndexAt(t,e);return n?this.getSegment(n):null}},{key:"segmentAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.segmentIndexAtLength(t,e);return n?this.getSegment(n):null}},{key:"segmentIndexAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;var n=Pl.clamp(t,0,1),r=this.getOptions(e),i=this.length(r)*n;return this.segmentIndexAtLength(i,r)}},{key:"segmentIndexAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.segments.length;if(0===n)return null;var r=!0;t<0&&(r=!1,t=-t);for(var i=this.getPrecision(e),o=this.getSubdivisions(e),a=0,s=null,u=0;u<n;u+=1){var l=r?u:n-1-u,c=this.segments[l],h=o[l],f=c.length({precision:i,subdivisions:h});if(c.isVisible){if(t<=a+f)return l;s=l}a+=f}return s}},{key:"getSegmentSubdivisions",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getPrecision(t),n=[],r=0,i=this.segments.length;r<i;r+=1){var o=this.segments[r].getSubdivisions({precision:e});n.push(o)}return n}},{key:"updateSubpathStartSegment",value:function(t){for(var e=t.previousSegment,n=t;n&&!n.isSubpathStart;)n.subpathStartSegment=null!=e?e.subpathStartSegment:null,e=n,n=n.nextSegment}},{key:"prepareSegment",value:function(t,e,n){t.previousSegment=e,t.nextSegment=n,null!=e&&(e.nextSegment=t),null!=n&&(n.previousSegment=t);var r=t;return t.isSubpathStart&&(t.subpathStartSegment=t,r=n),null!=r&&this.updateSubpathStartSegment(r),t}},{key:"closestPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.closestPointT(t,e);return n?this.pointAtT(n):null}},{key:"closestPointLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getOptions(e),r=this.closestPointT(t,n);return r?this.lengthAtT(r,n):0}},{key:"closestPointNormalizedLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getOptions(e),r=this.closestPointLength(t,n);if(0===r)return 0;var i=this.length(n);return 0===i?0:r/i}},{key:"closestPointT",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;for(var n,r=this.getPrecision(e),i=this.getSubdivisions(e),o=1/0,a=0,s=this.segments.length;a<s;a+=1){var u=this.segments[a],l=i[a];if(u.isVisible){var c=u.closestPointT(t,{precision:r,subdivisions:l}),h=u.pointAtT(c),f=Pl.squaredLength(h,t);f<o&&(n={segmentIndex:a,value:c},o=f)}}return n||{segmentIndex:this.segments.length-1,value:1}}},{key:"closestPointTangent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;for(var n,r=this.getPrecision(e),i=this.getSubdivisions(e),o=1/0,a=0,s=this.segments.length;a<s;a+=1){var u=this.segments[a],l=i[a];if(u.isDifferentiable()){var c=u.closestPointT(t,{precision:r,subdivisions:l}),h=u.pointAtT(c),f=Pl.squaredLength(h,t);f<o&&(n=u.tangentAtT(c),o=f)}}return n||null}},{key:"containsPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.toPolylines(e);if(!n)return!1;for(var r=0,i=0,o=n.length;i<o;i+=1){n[i].containsPoint(t)&&(r+=1)}return r%2===1}},{key:"pointAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var n=this.getOptions(e),r=this.length(n)*t;return this.pointAtLength(r,n)}},{key:"pointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;if(0===t)return this.start.clone();var n=!0;t<0&&(n=!1,t=-t);for(var r,i=this.getPrecision(e),o=this.getSubdivisions(e),a=0,s=0,u=this.segments.length;s<u;s+=1){var l=n?s:u-1-s,c=this.segments[l],h=o[l],f=c.length({precision:i,subdivisions:h});if(c.isVisible){if(t<=a+f)return c.pointAtLength((n?1:-1)*(t-a),{precision:i,subdivisions:h});r=c}a+=f}return r?n?r.end:r.start:this.segments[this.segments.length-1].end.clone()}},{key:"pointAtT",value:function(t){var e=this.segments,n=e.length;if(0===n)return null;var r=t.segmentIndex;if(r<0)return e[0].pointAtT(0);if(r>=n)return e[n-1].pointAtT(1);var i=Pl.clamp(t.value,0,1);return e[r].pointAtT(i)}},{key:"divideAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;var n=Pl.clamp(t,0,1),r=this.getOptions(e),i=this.length(r)*n;return this.divideAtLength(i,r)}},{key:"divideAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;var r=!0;t<0&&(r=!1,t=-t);for(var i,o,a,s,u,l=this.getPrecision(e),c=this.getSubdivisions(e),h=0,f=0,g=this.segments.length;f<g;f+=1){var d=r?f:g-1-f,v=this.getSegment(d),p={precision:l,subdivisions:c[d]},y=v.length(p);if(v.isDifferentiable()&&(a=v,s=d,t<=h+y)){o=d,i=v.divideAtLength((r?1:-1)*(t-h),p);break}h+=y}if(!a)return null;i||(o=s,u=r?1:0,i=a.divideAtT(u));var m=this.clone(),b=o;m.replaceSegment(b,i);var k=b,w=b+1,x=b+2;i[0].isDifferentiable()||(m.removeSegment(k),w-=1,x-=1);var P=m.getSegment(w).start;m.insertSegment(w,n.createSegment("M",P)),x+=1,i[1].isDifferentiable()||(m.removeSegment(x-1),x-=1);for(var A=x-k-1,C=x,O=m.segments.length;C<O;C+=1){var E=this.getSegment(C-A),M=m.getSegment(C);if("Z"===M.type&&!E.subpathStartSegment.end.equals(M.subpathStartSegment.end)){var S=n.createSegment("L",E.end);m.replaceSegment(C,S)}}return[new n(m.segments.slice(0,w)),new n(m.segments.slice(w))]}},{key:"intersectsWithLine",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.toPolylines(e);if(null==n)return null;for(var r=null,i=0,o=n.length;i<o;i+=1){var a,s=n[i],u=t.intersect(s);if(u)if(null==r&&(r=[]),Array.isArray(u))(a=r).push.apply(a,(0,A.Z)(u));else r.push(u)}return r}},{key:"isDifferentiable",value:function(){for(var t=0,e=this.segments.length;t<e;t+=1){if(this.segments[t].isDifferentiable())return!0}return!1}},{key:"isValid",value:function(){var t=this.segments,e=0===t.length||"M"===t[0].type;return e}},{key:"length",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(0===this.segments.length)return 0;for(var e=this.getSubdivisions(t),n=0,r=0,i=this.segments.length;r<i;r+=1){var o=this.segments[r],a=e[r];n+=o.length({subdivisions:a})}return n}},{key:"lengthAtT",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.segments.length;if(0===n)return 0;var r=t.segmentIndex;if(r<0)return 0;var i=Pl.clamp(t.value,0,1);r>=n&&(r=n-1,i=1);for(var o=this.getPrecision(e),a=this.getSubdivisions(e),s=0,u=0;u<r;u+=1){var l=this.segments[u],c=a[u];s+=l.length({precision:o,subdivisions:c})}var h=this.segments[r],f=a[r];return s+=h.lengthAtT(i,{precision:o,subdivisions:f})}},{key:"tangentAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;var n=Pl.clamp(t,0,1),r=this.getOptions(e),i=this.length(r)*n;return this.tangentAtLength(i,r)}},{key:"tangentAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.segments.length)return null;var n=!0;t<0&&(n=!1,t=-t);for(var r,i=this.getPrecision(e),o=this.getSubdivisions(e),a=0,s=0,u=this.segments.length;s<u;s+=1){var l=n?s:u-1-s,c=this.segments[l],h=o[l],f=c.length({precision:i,subdivisions:h});if(c.isDifferentiable()){if(t<=a+f)return c.tangentAtLength((n?1:-1)*(t-a),{precision:i,subdivisions:h});r=c}a+=f}if(r){var g=n?1:0;return r.tangentAtT(g)}return null}},{key:"tangentAtT",value:function(t){var e=this.segments.length;if(0===e)return null;var n=t.segmentIndex;if(n<0)return this.segments[0].tangentAtT(0);if(n>=e)return this.segments[e-1].tangentAtT(1);var r=Pl.clamp(t.value,0,1);return this.segments[n].tangentAtT(r)}},{key:"getPrecision",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null==t.precision?this.PRECISION:t.precision}},{key:"getSubdivisions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==t.segmentSubdivisions){var e=this.getPrecision(t);return this.getSegmentSubdivisions({precision:e})}return t.segmentSubdivisions}},{key:"getOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{precision:this.getPrecision(t),segmentSubdivisions:this.getSubdivisions(t)}}},{key:"toPoints",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.segments,n=e.length;if(0===n)return null;for(var r=this.getSubdivisions(t),i=[],o=[],a=0;a<n;a+=1){var s=e[a];if(s.isVisible){var u=r[a];u.length>0?u.forEach((function(t){return o.push(t.start)})):o.push(s.start)}else o.length>0&&(o.push(e[a-1].end),i.push(o),o=[])}return o.length>0&&(o.push(this.end),i.push(o)),i}},{key:"toPolylines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.toPoints(t);return e?e.map((function(t){return new Rl(t)})):null}},{key:"scale",value:function(t,e,n){return this.segments.forEach((function(r){return r.scale(t,e,n)})),this}},{key:"rotate",value:function(t,e){return this.segments.forEach((function(n){return n.rotate(t,e)})),this}},{key:"translate",value:function(t,e){return"number"===typeof t?this.segments.forEach((function(n){return n.translate(t,e)})):this.segments.forEach((function(e){return e.translate(t)})),this}},{key:"clone",value:function(){var t=new n;return this.segments.forEach((function(e){return t.appendSegment(e.clone())})),t}},{key:"equals",value:function(t){if(null==t)return!1;var e=this.segments,n=t.segments,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i+=1){var o=e[i],a=n[i];if(o.type!==a.type||!o.equals(a))return!1}return!0}},{key:"toJSON",value:function(){return this.segments.map((function(t){return t.toJSON()}))}},{key:"serialize",value:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map((function(t){return t.serialize()})).join(" ")}},{key:"toString",value:function(){return this.serialize()}}]),n}(Cl);!function(t){t.isPath=function(e){return null!=e&&e instanceof t}}(Yl||(Yl={})),function(t){function e(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i,o,a;if("M"===t)return(i=Gl.create).call.apply(i,[null].concat(n));if("L"===t)return(o=zl.create).call.apply(o,[null].concat(n));if("C"===t)return(a=_l.create).call.apply(a,[null].concat(n));if("z"===t||"Z"===t)return Fl.create();throw new Error('Invalid path segment type "'.concat(t,'"'))}t.parse=function(n){if(!n)return new t;var r=new t,i=t.normalize(n).match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g);if(null!=i)for(var o=0,a=i.length;o<a;o+=1){var s=i[o].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g);if(null!=s){var u=s[0],l=s.slice(1).map((function(t){return+t})),c=e.call.apply(e,[null,u].concat((0,A.Z)(l)));r.appendSegment(c)}}return r},t.createSegment=e}(Yl||(Yl={})),function(t){t.normalize=Xl,t.isValid=jl,t.drawArc=Il,t.drawPoints=Ll,t.arcToCurves=Bl}(Yl||(Yl={}));var $l=function(){function t(e){(0,m.Z)(this,t),this.options=Object.assign({},e),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}return(0,b.Z)(t,[{key:"names",get:function(){return Object.keys(this.data)}},{key:"register",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("object"!==typeof t){!this.exist(t)||r||ss.isApplyingHMR()||this.onDuplicated(t);var i=this.options.process,o=i?nt(i,this,t,e):e;return this.data[t]=o,o}Object.entries(t).forEach((function(t){var r=(0,Pu.Z)(t,2),i=r[0],o=r[1];n.register(i,o,e)}))}},{key:"unregister",value:function(t){var e=t?this.data[t]:null;return delete this.data[t],e}},{key:"get",value:function(t){return t?this.data[t]:null}},{key:"exist",value:function(t){return!!t&&null!=this.data[t]}},{key:"onDuplicated",value:function(t){try{throw this.options.onConflict&&nt(this.options.onConflict,this,t),new Error("".concat(Fa(this.options.type)," with name '").concat(t,"' already registered."))}catch(rp){throw rp}}},{key:"onNotFound",value:function(t,e){throw new Error(this.getSpellingSuggestion(t,e))}},{key:"getSpellingSuggestion",value:function(t,e){var n=this.getSpellingSuggestionForName(t),r=e?"".concat(e," ").concat(Wa(this.options.type)):this.options.type;return"".concat(Fa(r)," with name '").concat(t,"' does not exist.").concat(n?" Did you mean '".concat(n,"'?"):"")}},{key:"getSpellingSuggestionForName",value:function(t){return function(t,e,n){var r,i,o=Math.min(2,Math.floor(.34*t.length)),a=Math.floor(.4*t.length)+1,s=!1,u=t.toLowerCase(),l=(0,Ka.Z)(e);try{for(l.s();!(i=l.n()).done;){var c=i.value,h=n(c);if(void 0!==h&&Math.abs(h.length-u.length)<=o){var f=h.toLowerCase();if(f===u){if(h===t)continue;return c}if(s)continue;if(h.length<3)continue;var g=ts(u,f,a-1);if(void 0===g)continue;g<3?(s=!0,r=c):(a=g,r=c)}}}catch(rp){l.e(rp)}finally{l.f()}return r}(t,Object.keys(this.data),(function(t){return t}))}}]),t}();!function(t){t.create=function(e){return new t(e)}}($l||($l={}));var Ql={color:"#aaaaaa",thickness:1,markup:"rect",update:function(t,e){var n=e.thickness*e.sx,r=e.thickness*e.sy;ru(t,{width:n,height:r,rx:n,ry:r,fill:e.color})}},Kl={color:"#aaaaaa",thickness:1,markup:"rect",update:function(t,e){var n=e.sx<=1?e.thickness*e.sx:e.thickness;ru(t,{width:n,height:n,rx:n,ry:n,fill:e.color})}},tc={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(t,e){var n=e.width,r=e.height,i=e.thickness;ru(t,{d:n-i>=0&&r-i>=0?["M",n,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",stroke:e.color,"stroke-width":e.thickness})}},ec=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(t,e){var n=e.width,r=e.height,i=e.thickness;ru(t,{d:n-i>=0&&r-i>=0?["M",n,0,"H0 M0 0 V0",r].join(" "):"M 0 0 0 0",stroke:e.color,"stroke-width":e.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update:function(t,e){var n,r=e.factor||1,i=e.width*r,o=e.height*r,a=e.thickness;n=i-a>=0&&o-a>=0?["M",i,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",e.width=i,e.height=o,ru(t,{d:n,stroke:e.color,"stroke-width":e.thickness})}}],nc=function(){function t(){(0,m.Z)(this,t),this.patterns={},this.root=Au.create(Gs(),{width:"100%",height:"100%"},[Fs("defs")]).node}return(0,b.Z)(t,[{key:"add",value:function(t,e){var n=this.root.childNodes[0];n&&n.appendChild(e),this.patterns[t]=e,Au.create("rect",{width:"100%",height:"100%",fill:"url(#".concat(t,")")}).appendTo(this.root)}},{key:"get",value:function(t){return this.patterns[t]}},{key:"has",value:function(t){return null!=this.patterns[t]}}]),t}();!function(t){t.presets=r,t.registry=$l.create({type:"grid"}),t.registry.register(t.presets,!0)}(nc||(nc={}));var rc,ic,oc=function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(2*n,0),i.scale(-1,1),i.drawImage(t,0,0,n,r),e},ac=function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(t,0,0,n,r),e},sc=function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(t,0,0,n,r),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(t,0,0,n,r),e},uc=function(t,e){var n=t.width,r=t.height,i=document.createElement("canvas");i.width=3*n,i.height=3*r;for(var o=i.getContext("2d"),a=null!=e.angle?-e.angle:-20,s=xl.toRad(a),u=i.width/4,l=i.height/4,c=0;c<4;c+=1)for(var h=0;h<4;h+=1)(c+h)%2>0&&(o.setTransform(1,0,0,1,(2*c-1)*u,(2*h-1)*l),o.rotate(s),o.drawImage(t,-n/2,-r/2,n,r));return i};function lc(t,e){return null!=t?t:e}function cc(t,e){return null!=t&&Number.isFinite(t)?t:e}function hc(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=lc(t.color,"blue"),n=cc(t.width,1),r=cc(t.margin,2),i=cc(t.opacity,1),o=r,a=r+n;return'\n    <filter>\n      <feFlood flood-color="'.concat(e,'" flood-opacity="').concat(i,'" result="colored"/>\n      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="').concat(a,'" />\n      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="').concat(o,'" />\n      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>\n      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>\n      <feMerge>\n        <feMergeNode in="outline"/>\n        <feMergeNode in="SourceGraphic"/>\n      </feMerge>\n    </filter>\n  ').trim()}function fc(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=lc(t.color,"red"),n=cc(t.blur,0),r=cc(t.width,1),i=cc(t.opacity,1);return'\n      <filter>\n        <feFlood flood-color="'.concat(e,'" flood-opacity="').concat(i,'" result="colored"/>\n        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="').concat(r,'"/>\n        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>\n        <feGaussianBlur result="blured" in="composed" stdDeviation="').concat(n,'"/>\n        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>\n      </filter>\n    ').trim()}function gc(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=cc(t.x,2),n=null!=t.y&&Number.isFinite(t.y)?[e,t.y]:e;return'\n    <filter>\n      <feGaussianBlur stdDeviation="'.concat(n,'"/>\n    </filter>\n  ').trim()}function dc(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=cc(t.dx,0),n=cc(t.dy,0),r=lc(t.color,"black"),i=cc(t.blur,4),o=cc(t.opacity,1);return"SVGFEDropShadowElement"in window?'<filter>\n         <feDropShadow stdDeviation="'.concat(i,'" dx="').concat(e,'" dy="').concat(n,'" flood-color="').concat(r,'" flood-opacity="').concat(o,'" />\n       </filter>').trim():'<filter>\n         <feGaussianBlur in="SourceAlpha" stdDeviation="'.concat(i,'" />\n         <feOffset dx="').concat(e,'" dy="').concat(n,'" result="offsetblur" />\n         <feFlood flood-color="').concat(r,'" />\n         <feComposite in2="offsetblur" operator="in" />\n         <feComponentTransfer>\n           <feFuncA type="linear" slope="').concat(o,'" />\n         </feComponentTransfer>\n         <feMerge>\n           <feMergeNode/>\n           <feMergeNode in="SourceGraphic"/>\n         </feMerge>\n       </filter>').trim()}function vc(){var t=cc((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).amount,1),e=.7152-.7152*(1-t),n=.0722-.0722*(1-t),r=.2126-.2126*(1-t),i=.7152+.2848*(1-t),o=.0722-.0722*(1-t),a=.2126-.2126*(1-t),s=.0722+.9278*(1-t);return'\n    <filter>\n      <feColorMatrix type="matrix" values="'.concat(.2126+.7874*(1-t)," ").concat(e," ").concat(n," 0 0 ").concat(r," ").concat(i," ").concat(o," 0 0 ").concat(a," ").concat(e," ").concat(s,' 0 0 0 0 0 1 0"/>\n    </filter>\n  ').trim()}function pc(){var t=cc((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).amount,1),e=.769-.769*(1-t),n=.189-.189*(1-t),r=.349-.349*(1-t),i=.686+.314*(1-t),o=.168-.168*(1-t),a=.272-.272*(1-t),s=.534-.534*(1-t),u=.131+.869*(1-t);return'\n      <filter>\n        <feColorMatrix type="matrix" values="'.concat(.393+.607*(1-t)," ").concat(e," ").concat(n," 0 0 ").concat(r," ").concat(i," ").concat(o," 0 0 ").concat(a," ").concat(s," ").concat(u,' 0 0 0 0 0 1 0"/>\n      </filter>\n    ').trim()}function yc(){var t=cc((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).amount,1);return'\n      <filter>\n        <feColorMatrix type="saturate" values="'.concat(1-t,'"/>\n      </filter>\n    ').trim()}function mc(){var t=cc((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).angle,0);return'\n      <filter>\n        <feColorMatrix type="hueRotate" values="'.concat(t,'"/>\n      </filter>\n    ').trim()}function bc(){var t=cc((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).amount,1),e=1-t;return'\n      <filter>\n        <feComponentTransfer>\n          <feFuncR type="table" tableValues="'.concat(t," ").concat(e,'"/>\n          <feFuncG type="table" tableValues="').concat(t," ").concat(e,'"/>\n          <feFuncB type="table" tableValues="').concat(t," ").concat(e,'"/>\n        </feComponentTransfer>\n      </filter>\n    ').trim()}function kc(){var t=cc((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).amount,1);return'\n    <filter>\n      <feComponentTransfer>\n        <feFuncR type="linear" slope="'.concat(t,'"/>\n        <feFuncG type="linear" slope="').concat(t,'"/>\n        <feFuncB type="linear" slope="').concat(t,'"/>\n      </feComponentTransfer>\n    </filter>\n  ').trim()}function wc(){var t=cc((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).amount,1),e=.5-t/2;return'\n    <filter>\n     <feComponentTransfer>\n        <feFuncR type="linear" slope="'.concat(t,'" intercept="').concat(e,'"/>\n        <feFuncG type="linear" slope="').concat(t,'" intercept="').concat(e,'"/>\n        <feFuncB type="linear" slope="').concat(t,'" intercept="').concat(e,'"/>\n      </feComponentTransfer>\n    </filter>\n  ').trim()}!function(t){t.presets=Object.assign({},i),t.presets["flip-x"]=oc,t.presets["flip-y"]=ac,t.presets["flip-xy"]=sc,t.registry=$l.create({type:"background pattern"}),t.registry.register(t.presets,!0)}(rc||(rc={})),function(t){t.presets=o,t.registry=$l.create({type:"filter"}),t.registry.register(t.presets,!0)}(ic||(ic={}));var xc={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},Pc={},Ac={position:Wc("x","width","origin")},Cc={position:Wc("y","height","origin")},Oc={position:Wc("x","width","corner")},Ec={position:Wc("y","height","corner")},Mc={set:Jc("width","width")},Sc={set:Jc("height","height")},Tc={set:Jc("rx","width")},jc={set:Jc("ry","height")},Nc={set:function(t){var e=Jc("r","width"),n=Jc("r","height");return function(t,r){var i=r.refBBox;return nt(i.height>i.width?e:n,this,t,r)}}()},Lc={set:function(t,e){var n=e.refBBox,r=parseFloat(t),i=is(t);i&&(r/=100);var o,a=Math.sqrt(n.height*n.height+n.width*n.width);return Number.isFinite(r)&&(o=i||r>=0&&r<=1?r*a:Math.max(r+a,0)),{r:o}}},Bc={set:Jc("cx","width")},Ic={set:Jc("cy","height")},Dc={set:Yc({resetOffset:!0})},Rc={set:Yc({resetOffset:!1})},Vc={set:$c({resetOffset:!0})},Zc={set:$c({resetOffset:!1})},zc=Nc,Fc=Dc,Gc=Vc,_c=Ac,qc=Cc,Hc=Mc,Uc=Sc;function Wc(t,e,n){return function(r,i){var o=i.refBBox;if(null==r)return null;var a,s=parseFloat(r),u=is(r);if(u&&(s/=100),Number.isFinite(s)){var l=o[n];a=u||s>0&&s<1?l[t]+o[e]*s:l[t]+s}var c=new Ol;return c[t]=a||0,c}}function Jc(t,e){return function(n,r){var i=r.refBBox,o=parseFloat(n),a=is(n);a&&(o/=100);var s={};if(Number.isFinite(o)){var u=a||o>=0&&o<=1?o*i[e]:Math.max(o+i[e],0);s[t]=u}return s}}function Xc(t,e){var n="x6-shape",r=e&&e.resetOffset;return function(e,i){var o=i.elem,a=i.refBBox,s=xu(o,n);if(!s||s.value!==e){var u=t(e);s={value:e,shape:u,shapeBBox:u.bbox()},xu(o,n,s)}var l=s.shape.clone(),c=s.shapeBBox.clone(),h=c.getOrigin(),f=a.getOrigin();c.x=f.x,c.y=f.y;var g=a.getMaxScaleToFit(c,f),d=0===c.width||0===a.width?1:g.sx,v=0===c.height||0===a.height?1:g.sy;return l.scale(d,v,h),r&&l.translate(-h.x,-h.y),l}}function Yc(t){var e=Xc((function(t){return Yl.parse(t)}),t);return function(t,n){return{d:e(t,n).serialize()}}}function $c(t){var e=Xc((function(t){return new Rl(t)}),t);return function(t,n){return{points:e(t,n).serialize()}}}var Qc={qualify:Dn,set:function(t,e){var n=e.view;return"url(#".concat(n.graph.defineGradient(t),")")}},Kc={qualify:Dn,set:function(t,e){var n=e.view,r=n.cell,i=Object.assign({},t);if(r.isEdge()&&"linearGradient"===i.type){var o=n,a=o.sourcePoint,s=o.targetPoint;i.id="gradient-".concat(i.type,"-").concat(r.id),i.attrs=Object.assign(Object.assign({},i.attrs),{x1:a.x,y1:a.y,x2:s.x,y2:s.y,gradientUnits:"userSpaceOnUse"}),n.graph.defs.remove(i.id)}return"url(#".concat(n.graph.defineGradient(i),")")}},th={qualify:function(t,e){var n=e.attrs;return null==n.textWrap||!Dn(n.textWrap)},set:function(t,e){var n=e.view,r=e.elem,i=e.attrs,o="x6-text",a=xu(r,o),s=function(t){try{return JSON.parse(t)}catch(e){return t}},u={x:i.x,eol:i.eol,annotations:s(i.annotations),textPath:s(i["text-path"]||i.textPath),textVerticalAnchor:i["text-vertical-anchor"]||i.textVerticalAnchor,displayEmpty:"true"===(i["display-empty"]||i.displayEmpty),lineHeight:i["line-height"]||i.lineHeight},l=i["font-size"]||i.fontSize,c=JSON.stringify([t,u]);if(l&&r.setAttribute("font-size",l),null==a||a!==c){var h=u.textPath;if(null!=h&&"object"===typeof h){var f=h.selector;if("string"===typeof f){var g=n.find(f)[0];g instanceof SVGPathElement&&(Ds(g),u.textPath=Object.assign({"xlink:href":"#".concat(g.id)},h))}}Su(r,"".concat(t),u),xu(r,o,c)}}},eh={qualify:Dn,set:function(t,e){var n=e.view,r=e.elem,i=e.attrs,o=e.refBBox,a=t,s=a.width||0;is(s)?o.width*=parseFloat(s)/100:s<=0?o.width+=s:o.width=s;var u,l=a.height||0;is(l)?o.height*=parseFloat(l)/100:l<=0?o.height+=l:o.height=l;var c=a.text;null==c&&(c=i.text||(null===r||void 0===r?void 0:r.textContent)),u=null!=c?Nu("".concat(c),o,{"font-weight":i["font-weight"]||i.fontWeight,"font-size":i["font-size"]||i.fontSize,"font-family":i["font-family"]||i.fontFamily,lineHeight:i.lineHeight},{ellipsis:a.ellipsis}):"",nt(th.set,this,u,{view:n,elem:r,attrs:i,refBBox:o,cell:n.cell})}},nh=function(t,e){return void 0!==e.attrs.text},rh={qualify:nh},ih={qualify:nh},oh={qualify:nh},ah={qualify:nh},sh={qualify:nh},uh={qualify:nh},lh={qualify:function(t,e){return e.elem instanceof SVGElement},set:function(t,e){var n=e.elem,r="x6-title",i="".concat(t),o=xu(n,r);if(null==o||o!==i){xu(n,r,i);var a=n.firstChild;if(a&&"TITLE"===a.tagName.toUpperCase()){a.textContent=i}else{var s=document.createElementNS(n.namespaceURI,"title");s.textContent=i,n.insertBefore(s,a)}}}},ch={offset:gh("x","width","right")},hh={offset:gh("y","height","bottom")},fh={offset:function(t,e){var n=e.refBBox;return t?{x:-n.x,y:-n.y}:{x:0,y:0}}};function gh(t,e,n){return function(r,i){var o,a=i.refBBox,s=new Ol;return o="middle"===r?a[e]/2:r===n?a[e]:"number"===typeof r&&Number.isFinite(r)?r>-1&&r<1?-a[e]*r:-r:is(r)?a[e]*parseFloat(r)/100:0,s[t]=-(a[t]+o),s}}var dh={qualify:Dn,set:function(t,e){bu(e.elem,t)}},vh={set:function(t,e){e.elem.innerHTML="".concat(t)}},ph={qualify:Dn,set:function(t,e){var n=e.view;return"url(#".concat(n.graph.defineFilter(t),")")}},yh={set:function(t){return null!=t&&"object"===typeof t&&t.id?t.id:t}};function mh(t,e,n){var r,i;"object"===typeof e?(r=e.x,i=e.y):(r=e,i=n);var o=Yl.parse(t),a=o.bbox();if(a){var s=-a.height/2-a.y,u=-a.width/2-a.x;"number"===typeof r&&(u-=r),"number"===typeof i&&(s-=i),o.translate(u,s)}return o.serialize()}var bh=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},kh=function(t){return xh({size:t.size,width:t.width,height:t.height,offset:t.offset},!0===t.open,!0,void 0,bh(t,["size","width","height","offset","open"]))},wh=function(t){return xh({size:t.size,width:t.width,height:t.height,offset:t.offset},!1,!1,t.factor,bh(t,["size","width","height","offset","factor"]))};function xh(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3/4,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=t.size||10,a=t.width||o,s=t.height||o,u=new Yl,l={};if(e)u.moveTo(a,0).lineTo(0,s/2).lineTo(a,s),l.fill="none";else{if(u.moveTo(0,s/2),u.lineTo(a,0),!n){var c=rs(r,0,1);u.lineTo(a*c,s/2)}u.lineTo(a,s),u.close()}return Object.assign(Object.assign(Object.assign({},l),i),{tagName:"path",d:mh(u.serialize(),{x:null!=t.offset?t.offset:-a/2})})}var Ph,Ah=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Ch=function(t){var e=t.size,n=t.width,r=t.height,i=t.offset,o=Ah(t,["size","width","height","offset"]),a=e||10,s=n||a,u=r||a,l=new Yl;return l.moveTo(0,u/2).lineTo(s/2,0).lineTo(s,u/2).lineTo(s/2,u).close(),Object.assign(Object.assign({},o),{tagName:"path",d:mh(l.serialize(),null==i?-s/2:i)})},Oh=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Eh=function(t){var e=t.d,n=t.offsetX,r=t.offsetY,i=Oh(t,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},i),{tagName:"path",d:mh(e,n,r)})},Mh=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Sh=function(t){var e=t.size,n=t.width,r=t.height,i=t.offset,o=Mh(t,["size","width","height","offset"]),a=e||10,s=n||a,u=r||a,l=new Yl;return l.moveTo(0,0).lineTo(s,u).moveTo(0,u).lineTo(s,0),Object.assign(Object.assign({},o),{tagName:"path",fill:"none",d:mh(l.serialize(),i||-s/2)})},Th=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},jh=function(t){var e=t.width,n=t.height,r=t.offset,i=t.open,o=t.flip,a=Th(t,["width","height","offset","open","flip"]),s=n||6,u=e||10,l=!0===i,c=!0===o,h=Object.assign(Object.assign({},a),{tagName:"path"});c&&(s=-s);var f=new Yl;return f.moveTo(0,s).lineTo(u,0),l?h.fill="none":(f.lineTo(u,s),f.close()),h.d=mh(f.serialize(),{x:r||-u/2,y:s/2}),h},Nh=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Lh=function(t){var e=t.r,n=Nh(t,["r"]),r=e||5;return Object.assign(Object.assign({cx:r},n),{tagName:"circle",r:r})},Bh=function(t){var e=t.r,n=Nh(t,["r"]),r=e||5,i=new Yl;return i.moveTo(r,0).lineTo(r,2*r),i.moveTo(0,r).lineTo(2*r,r),{children:[Object.assign(Object.assign({},Lh({r:r})),{fill:"none"}),Object.assign(Object.assign({},n),{tagName:"path",d:mh(i.serialize(),-r)})]}},Ih=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Dh=function(t){var e=t.rx,n=t.ry,r=Ih(t,["rx","ry"]),i=e||5,o=n||5;return Object.assign(Object.assign({cx:i},r),{tagName:"ellipse",rx:i,ry:o})};!function(t){t.presets=a,t.registry=$l.create({type:"marker"}),t.registry.register(t.presets,!0)}(Ph||(Ph={})),function(t){t.normalize=mh}(Ph||(Ph={}));var Rh=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Vh(t){return"string"===typeof t||Dn(t)}var Zh={qualify:Vh,set:function(t,e){return Gh("marker-start",t,e.view,e.attrs)}},zh={qualify:Vh,set:function(t,e){return Gh("marker-end",t,e.view,e.attrs,{transform:"rotate(180)"})}},Fh={qualify:Vh,set:function(t,e){return Gh("marker-mid",t,e.view,e.attrs)}};function Gh(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o="string"===typeof e?{name:e}:e,a=o.name,s=o.args,u=Rh(o,["name","args"]),l=u;if(a&&"string"===typeof a){var c=Ph.registry.get(a);if(!c)return Ph.registry.onNotFound(a);l=c(Object.assign(Object.assign({},u),s))}var h=Object.assign(Object.assign(Object.assign({},function(t,e){var n={},r=t.stroke;"string"===typeof r&&(n.stroke=r,n.fill=r);var i=t.strokeOpacity;null==i&&(i=t["stroke-opacity"]);null==i&&(i=t.opacity);null!=i&&(n["stroke-opacity"]=i,n["fill-opacity"]=i);if("marker-mid"!==e){var o=parseFloat(t.strokeWidth||t["stroke-width"]);if(Number.isFinite(o)&&o>1){var a=Math.ceil(o/2);n.refX="marker-start"===e?a:-a}}return n}(r,t)),i),l);return(0,y.Z)({},t,"url(#".concat(n.graph.defineMarker(h),")"))}var _h,qh=function(t,e){return e.view.cell.isEdge()},Hh={qualify:qh,set:function(t,e){var n,r,i,o,a,s=e.view,u=t.reverse||!1,l=t.stubs||0;if(Number.isFinite(l)&&0!==l)if(u){var c,h,f=s.getConnectionLength()||0;l<0?(c=(f+l)/2,h=-l):(c=l,h=f-2*l);var g=s.getConnection();a=null===(o=null===(i=null===(r=null===(n=null===g||void 0===g?void 0:g.divideAtLength(c))||void 0===n?void 0:n[1])||void 0===r?void 0:r.divideAtLength(h))||void 0===i?void 0:i[0])||void 0===o?void 0:o.serialize()}else{var d;if(l<0)d=((s.getConnectionLength()||0)+l)/2;else d=l;var v=s.getConnection();if(v){var p=v.divideAtLength(d),y=v.divideAtLength(-d);p&&y&&(a="".concat(p[0].serialize()," ").concat(y[1].serialize()))}}return{d:a||s.getConnectionPathData()}}},Uh={qualify:qh,set:Qh("getTangentAtLength",{rotate:!0})},Wh={qualify:qh,set:Qh("getTangentAtLength",{rotate:!1})},Jh={qualify:qh,set:Qh("getTangentAtRatio",{rotate:!0})},Xh={qualify:qh,set:Qh("getTangentAtRatio",{rotate:!1})},Yh=Uh,$h=Jh;function Qh(t,e){var n={x:1,y:0};return function(r,i){var o,a,s=i.view,u=s[t](Number(r));return u?(a=e.rotate?u.vector().vectorAngle(n):0,o=u.start):(o=s.path.start,a=0),0===a?{transform:"translate(".concat(o.x,",").concat(o.y,"')")}:{transform:"translate(".concat(o.x,",").concat(o.y,"') rotate(").concat(a,")")}}}!function(t){t.isValidDefinition=function(t,e,n){if(null!=t){if("string"===typeof t)return!0;if("function"!==typeof t.qualify||nt(t.qualify,this,e,n))return!0}return!1}}(_h||(_h={})),function(t){t.presets=Object.assign(Object.assign({},xc),s),t.registry=$l.create({type:"attribute definition"}),t.registry.register(t.presets,!0)}(_h||(_h={}));var Kh,tf={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,prefix:function(t){return"".concat(tf.prefixCls,"-").concat(t)}},ef=tf.prefix("highlighted"),nf={highlight:function(t,e,n){Ns(e,n&&n.className||ef)},unhighlight:function(t,e,n){Ls(e,n&&n.className||ef)}},rf=tf.prefix("highlight-opacity"),of={highlight:function(t,e){Ns(e,rf)},unhighlight:function(t,e){Ls(e,rf)}};!function(t){var e=Fs("svg");function n(t,e){var n=Uu(t.x,t.y).matrixTransform(e);return new Ol(n.x,n.y)}function r(t,n){var r=e.createSVGPoint();r.x=t.x,r.y=t.y;var i=r.matrixTransform(n);r.x=t.x+t.width,r.y=t.y;var o=r.matrixTransform(n);r.x=t.x+t.width,r.y=t.y+t.height;var a=r.matrixTransform(n);r.x=t.x,r.y=t.y+t.height;var s=r.matrixTransform(n),u=Math.min(i.x,o.x,a.x,s.x),l=Math.max(i.x,o.x,a.x,s.x),c=Math.min(i.y,o.y,a.y,s.y),h=Math.max(i.y,o.y,a.y,s.y);return new El(u,c,l-u,h-c)}function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.ownerSVGElement||!Rs(t)){if(Ys(t)){var a=o(t),s=a.left,u=a.top,l=a.width,c=a.height;return new El(s,u,l,c)}return new El(0,0,0,0)}var h=n.target;if(!n.recursive){try{e=t.getBBox()}catch(y){e={x:t.clientLeft,y:t.clientTop,width:t.clientWidth,height:t.clientHeight}}return h?r(e,rl(t,h)):El.create(e)}var f=t.childNodes,g=f.length;if(0===g)return i(t,{target:h});h||(h=t);for(var d=0;d<g;d+=1){var v=f[d],p=void 0;p=0===v.childNodes.length?i(v,{target:h}):i(v,{target:h,recursive:!0}),e=e?e.union(p):p}return e}function o(t){var e=0,n=0,r=0,i=0;if(t){for(var o=t;o;)e+=o.offsetLeft,n+=o.offsetTop,(o=o.offsetParent)&&(e+=parseInt(pu(o,"borderLeft"),10),n+=parseInt(pu(o,"borderTop"),10));r=t.offsetWidth,i=t.offsetHeight}return{left:e,top:n,width:r,height:i}}function a(t){var e=function(e){var n=t.getAttribute(e),r=n?parseFloat(n):0;return Number.isNaN(r)?0:r};switch(t instanceof SVGElement&&t.nodeName.toLowerCase()){case"rect":return new El(e("x"),e("y"),e("width"),e("height"));case"circle":return new Sl(e("cx"),e("cy"),e("r"),e("r"));case"ellipse":return new Sl(e("cx"),e("cy"),e("rx"),e("ry"));case"polyline":var n=Du(t);return new Rl(n);case"polygon":var r=Du(t);return r.length>1&&r.push(r[0]),new Rl(r);case"path":var o=t.getAttribute("d");return Yl.isValid(o)||(o=Yl.normalize(o)),Yl.parse(o);case"line":return new Ml(e("x1"),e("y1"),e("x2"),e("y2"))}return i(t)}function s(t){if(null==t)return null;var e=t;do{var n=e.tagName;if("string"!==typeof n)return null;if(n=n.toUpperCase(),js(e,"x6-port"))e=e.nextElementSibling;else if("G"===n)e=e.firstElementChild;else{if("TITLE"!==n)break;e=e.nextElementSibling}}while(e);return e}t.normalizeMarker=mh,t.transformPoint=n,t.transformLine=function(t,e){return new Ml(n(t.start,e),n(t.end,e))},t.transformPolyline=function(t,e){var r=t instanceof Rl?t.points:t;return Array.isArray(r)||(r=[]),new Rl(r.map((function(t){return n(t,e)})))},t.transformRectangle=r,t.bbox=function(t,e,n){var i,o=t.ownerSVGElement;if(!o)return new El(0,0,0,0);try{i=t.getBBox()}catch(a){i={x:t.clientLeft,y:t.clientTop,width:t.clientWidth,height:t.clientHeight}}return e?El.create(i):r(i,rl(t,n||o))},t.getBBox=i,t.getBoundingOffsetRect=o,t.toGeometryShape=a,t.translateAndAutoOrient=function(t,e,n,r){var o=Ol.create(e),a=Ol.create(n);r||(r=t instanceof SVGSVGElement?t:t.ownerSVGElement);var s=nl(t);t.setAttribute("transform","");var u=i(t,{target:r}).scale(s.sx,s.sy),l=Ju();l.setTranslate(-u.x-u.width/2,-u.y-u.height/2);var c=Ju(),h=o.angleBetween(a,o.clone().translate(1,0));h&&c.setRotate(h,0,0);var f=Ju(),g=o.clone().move(a,u.width/2);f.setTranslate(2*o.x-g.x,2*o.y-g.y);var d=rl(t,r),v=Ju();v.setMatrix(f.matrix.multiply(c.matrix.multiply(l.matrix.multiply(d.scale(s.sx,s.sy))))),t.setAttribute("transform",Yu(v.matrix))},t.findShapeNode=s,t.getBBoxV2=function(t){var e=s(t);if(!Rs(e)){if(Ys(t)){var n=o(t),r=n.left,i=n.top,u=n.width,l=n.height;return new El(r,i,u,l)}return new El(0,0,0,0)}return a(e).bbox()||El.create()}}(Kh||(Kh={}));var af,sf,uf={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},lf={highlight:function(t,e,n){var r=af.getHighlighterId(e,n);if(!af.hasCache(r)){n=Vi({},n,uf);var i,o,a=Au.create(e);try{i=a.toPathData()}catch(b){o=Kh.bbox(a.node,!0),i=Ru(Object.assign(Object.assign({},n),o))}var s=Fs("path");if(ru(s,Object.assign({d:i,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},n.attrs?ou(n.attrs):null)),t.isEdgeElement(e))ru(s,"d",t.getConnectionPathData());else{var u=a.getTransformToElement(t.container),l=n.padding;if(l){null==o&&(o=Kh.bbox(a.node,!0));var c=o.x+o.width/2,h=o.y+o.height/2;o=Kh.transformRectangle(o,u);var f=Math.max(o.width,1),g=Math.max(o.height,1),d=(f+l)/f,v=(g+l)/g,p=Wu({a:d,b:0,c:0,d:v,e:c-d*c,f:h-v*h});u=u.multiply(p)}Ku(s,u)}Ns(s,tf.prefix("highlight-stroke"));var y=t.cell,m=function(){return af.removeHighlighter(r)};y.on("removed",m),y.model&&y.model.on("reseted",m),t.container.appendChild(s),af.setCache(r,s)}},unhighlight:function(t,e,n){af.removeHighlighter(af.getHighlighterId(e,n))}};function cf(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Ol(os(e.x,t.width),os(e.y,t.height))}function hf(t,e,n){return Object.assign({angle:e,position:t.toJSON()},n)}!function(t){t.getHighlighterId=function(t,e){return Ds(t),t.id+JSON.stringify(e)};var e={};t.setCache=function(t,n){e[t]=n},t.hasCache=function(t){return null!=e[t]},t.removeHighlighter=function(t){var n=e[t];n&&(Us(n),delete e[t])}}(af||(af={})),function(t){t.check=function(t,e){if("function"!==typeof e.highlight)throw new Error("Highlighter '".concat(t,"' is missing required `highlight()` method"));if("function"!==typeof e.unhighlight)throw new Error("Highlighter '".concat(t,"' is missing required `unhighlight()` method"))}}(sf||(sf={})),function(t){t.presets=u,t.registry=$l.create({type:"highlighter"}),t.registry.register(t.presets,!0)}(sf||(sf={}));var ff=function(t,e){return t.map((function(t){var n=t.x,r=t.y,i=t.angle;return hf(cf(e,{x:n,y:r}),i||0)}))},gf=function(t,e,n){var r=n.start||0,i=n.step||20;return vf(t,e,r,(function(t,e){return(t+.5-e/2)*i}))},df=function(t,e,n){var r=n.start||0,i=n.step||360/t.length;return vf(t,e,r,(function(t){return t*i}))};function vf(t,e,n,r){var i=e.getCenter(),o=e.getTopCenter(),a=e.width/e.height,s=Sl.fromRect(e),u=t.length;return t.map((function(t,e){var l=n+r(e,u),c=o.clone().rotate(-l,i).scale(a,1,i),h=t.compensateRotate?-s.tangentTheta(c):0;return(t.dx||t.dy)&&c.translate(t.dx||0,t.dy||0),t.dr&&c.move(i,t.dr),hf(c.round(),h,t)}))}var pf,yf=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},mf=function(t,e,n){return Pf(t,cf(e,n.start||e.getOrigin()),cf(e,n.end||e.getCorner()),n)},bf=function(t,e,n){return Pf(t,e.getTopLeft(),e.getBottomLeft(),n)},kf=function(t,e,n){return Pf(t,e.getTopRight(),e.getBottomRight(),n)},wf=function(t,e,n){return Pf(t,e.getTopLeft(),e.getTopRight(),n)},xf=function(t,e,n){return Pf(t,e.getBottomLeft(),e.getBottomRight(),n)};function Pf(t,e,n,r){var i=new Ml(e,n),o=t.length;return t.map((function(t,e){var n=t.strict,a=yf(t,["strict"]),s=n||r.strict?(e+1)/(o+1):(e+.5)/o,u=i.pointAt(s);return(a.dx||a.dy)&&u.translate(a.dx||0,a.dy||0),hf(u.round(),0,a)}))}!function(t){t.presets=l,t.registry=$l.create({type:"port layout"}),t.registry.register(t.presets,!0)}(pf||(pf={}));var Af={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function Cf(t,e){var n=e||{},r=n.x,i=n.y,o=n.angle,a=n.attrs;return Vi({},{angle:o,attrs:a,position:{x:r,y:i}},t,Af)}var Of=function(t,e,n){return Cf({position:e.getTopLeft()},n)},Ef=function(t,e,n){return Cf({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},n)},Mf=function(t,e,n){return Cf({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},n)},Sf=function(t,e,n){return Cf({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},n)},Tf=function(t,e,n){return Cf({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},n)},jf=function(t,e,n){return If(t,e,!1,n)},Nf=function(t,e,n){return If(t,e,!0,n)},Lf=function(t,e,n){return Df(t,e,!1,n)},Bf=function(t,e,n){return Df(t,e,!0,n)};function If(t,e,n,r){var i,o,a,s,u=null!=r.offset?r.offset:15,l=e.getCenter().theta(t),c=Rf(e),h=0;return l<c[1]||l>c[2]?(i=".3em",o=u,a=0,s="start"):l<c[0]?(i="0",o=0,a=-u,n?(h=-90,s="start"):s="middle"):l<c[3]?(i=".3em",o=-u,a=0,s="end"):(i=".6em",o=0,a=u,n?(h=90,s="start"):s="middle"),Cf({position:{x:Math.round(o),y:Math.round(a)},angle:h,attrs:{".":{y:i,"text-anchor":s}}},r)}function Df(t,e,n,r){var i,o,a,s,u=null!=r.offset?r.offset:15,l=e.getCenter().theta(t),c=Rf(e),h=0;return l<c[1]||l>c[2]?(i=".3em",o=-u,a=0,s="end"):l<c[0]?(i=".6em",o=0,a=u,n?(h=90,s="start"):s="middle"):l<c[3]?(i=".3em",o=u,a=0,s="start"):(i="0em",o=0,a=-u,n?(h=-90,s="start"):s="middle"),Cf({position:{x:Math.round(o),y:Math.round(a)},angle:h,attrs:{".":{y:i,"text-anchor":s}}},r)}function Rf(t){var e=t.getCenter(),n=e.theta(t.getTopLeft()),r=e.theta(t.getBottomLeft()),i=e.theta(t.getBottomRight());return[n,e.theta(t.getTopRight()),i,r]}var Vf,Zf=function(t,e,n){return Ff(t.diff(e.getCenter()),!1,n)},zf=function(t,e,n){return Ff(t.diff(e.getCenter()),!0,n)};function Ff(t,e,n){var r,i=null!=n.offset?n.offset:20,o=new Ol(0,0),a=-t.theta(o),s=".3em",u=a;return(a+90)%180===0?(r=e?"end":"middle",e||-270!==a||(s="0em")):a>-270&&a<-90?(r="start",u=a-180):r="end",Cf({position:t.clone().move(o,i).diff(t).round().round().toJSON(),angle:e?u:0,attrs:{".":{y:s,"text-anchor":r}}},n)}!function(t){t.presets=c,t.registry=$l.create({type:"port label layout"}),t.registry.register(t.presets,!0)}(Vf||(Vf={}));var Gf=n(6626);function _f(){return _f="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=(0,Gf.Z)(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},_f.apply(this,arguments)}var qf,Hf=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){var t;return(0,m.Z)(this,n),(t=e.call(this)).cid=qf.uniqueId(),n.views[t.cid]=(0,Al.Z)(t),t}return(0,b.Z)(n,[{key:"priority",get:function(){return 2}},{key:"confirmUpdate",value:function(t,e){return 0}},{key:"empty",value:function(){return Ws(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container),this}},{key:"unmount",value:function(){return Us(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container),this}},{key:"remove",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container;return t===this.container&&(this.removeEventListeners(document),this.onRemove(),delete n.views[this.cid]),this.unmount(t),this}},{key:"onRemove",value:function(){}},{key:"setClass",value:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container).classList.value=Array.isArray(t)?t.join(" "):t}},{key:"addClass",value:function(t){return Ns(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container,Array.isArray(t)?t.join(" "):t),this}},{key:"removeClass",value:function(t){return Ls(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container,Array.isArray(t)?t.join(" "):t),this}},{key:"setStyle",value:function(t){return bu(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container,t),this}},{key:"setAttrs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;return null!=t&&null!=e&&ru(e,t),this}},{key:"findAttr",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;e&&1===e.nodeType;){var n=e.getAttribute(t);if(null!=n)return n;if(e===this.container)return null;e=e.parentNode}return null}},{key:"find",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.selectors;return n.find(t,e,r).elems}},{key:"findOne",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.selectors,r=this.find(t,e,n);return r.length>0?r[0]:null}},{key:"findByAttr",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;e&&e.getAttribute;){var n=e.getAttribute(t);if((null!=n||e===this.container)&&"false"!==n)return e;e=e.parentNode}return null}},{key:"getSelector",value:function(t,e){var n;if(t===this.container)return"string"===typeof e&&(n="> ".concat(e)),n;if(t){var r=_s(t)+1;n="".concat(t.tagName.toLowerCase(),":nth-child(").concat(r,")"),e&&(n+=" > ".concat(e)),n=this.getSelector(t.parentNode,n)}return n}},{key:"prefixClassName",value:function(t){return tf.prefix(t)}},{key:"delegateEvents",value:function(t,e){var n=this;if(null==t)return this;e||this.undelegateEvents();var r=/^(\S+)\s*(.*)$/;return Object.keys(t).forEach((function(e){var i=e.match(r);if(null!=i){var o=n.getEventHandler(t[e]);"function"===typeof o&&n.delegateEvent(i[1],i[2],o)}})),this}},{key:"undelegateEvents",value:function(){return sl.off(this.container,this.getEventNamespace()),this}},{key:"delegateDocumentEvents",value:function(t,e){return this.addEventListeners(document,t,e),this}},{key:"undelegateDocumentEvents",value:function(){return this.removeEventListeners(document),this}},{key:"delegateEvent",value:function(t,e,n){return sl.on(this.container,t+this.getEventNamespace(),e,n),this}},{key:"undelegateEvent",value:function(t,e,n){var r=t+this.getEventNamespace();return null==e?sl.off(this.container,r):"string"===typeof e?sl.off(this.container,r,e,n):sl.off(this.container,r,e),this}},{key:"addEventListeners",value:function(t,e,n){var r=this;if(null==e)return this;var i=this.getEventNamespace();return Object.keys(e).forEach((function(o){var a=r.getEventHandler(e[o]);"function"===typeof a&&sl.on(t,o+i,n,a)})),this}},{key:"removeEventListeners",value:function(t){return null!=t&&sl.off(t,this.getEventNamespace()),this}},{key:"getEventNamespace",value:function(){return".".concat(tf.prefixCls,"-event-").concat(this.cid)}},{key:"getEventHandler",value:function(t){var e,n=this;if("string"===typeof t){var r=this[t];"function"===typeof r&&(e=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return r.call.apply(r,[n].concat(e))})}else e=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t.call.apply(t,[n].concat(r))};return e}},{key:"getEventTarget",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.target,r=t.type,i=t.clientX,o=void 0===i?0:i,a=t.clientY,s=void 0===a?0:a;return e.fromPoint||"touchmove"===r||"touchend"===r?document.elementFromPoint(o,s):n}},{key:"stopPropagation",value:function(t){return this.setEventData(t,{propagationStopped:!0}),this}},{key:"isPropagationStopped",value:function(t){return!0===this.getEventData(t).propagationStopped}},{key:"getEventData",value:function(t){return this.eventData(t)}},{key:"setEventData",value:function(t,e){return this.eventData(t,e)}},{key:"eventData",value:function(t,e){if(null==t)throw new TypeError("Event object required");var n=t.data,r="__".concat(this.cid,"__");return null==e?null==n?{}:n[r]||{}:(null==n&&(n=t.data={}),null==n[r]?n[r]=Object.assign({},e):n[r]=Object.assign(Object.assign({},n[r]),e),n[r])}},{key:"normalizeEvent",value:function(t){return n.normalizeEvent(t)}}]),n}(Wi);!function(t){t.createElement=function(t,e){return e?Fs(t||"g"):zs(t||"div")},t.find=function(t,e,n){if(!t||"."===t)return{elems:[e]};if(n){var r=n[t];if(r)return{elems:Array.isArray(r)?r:[r]}}if(tf.useCSSSelector){var i=t.includes(">")?":scope ".concat(t):t;return{isCSSSelector:!0,elems:Array.prototype.slice.call(e.querySelectorAll(i))}}return{elems:[]}},t.normalizeEvent=function(t){var e=t,n=t.originalEvent,r=n&&n.changedTouches&&n.changedTouches[0];if(r){for(var i in t)void 0===r[i]&&(r[i]=t[i]);e=r}return e}}(Hf||(Hf={})),function(t){t.views={},t.getView=function(e){return t.views[e]||null}}(Hf||(Hf={})),function(t){var e=0;t.uniqueId=function(){var t="v".concat(e);return e+=1,t}}(qf||(qf={}));var Uf,Wf=function(){function t(e){(0,m.Z)(this,t),this.view=e,this.clean()}return(0,b.Z)(t,[{key:"clean",value:function(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new kl,this.pathCache={}}},{key:"get",value:function(t){return this.elemCache.has(t)||this.elemCache.set(t,{}),this.elemCache.get(t)}},{key:"getData",value:function(t){var e=this.get(t);return e.data||(e.data={}),e.data}},{key:"getMatrix",value:function(t){var e=this.get(t);if(null==e.matrix){var n=this.view.container;e.matrix=function(t,e){var n=Wu();if(Rs(e)&&Rs(t)){for(var r=t,i=[];r&&r!==e;){var o=Xu(r.getAttribute("transform")||null);i.push(o),r=r.parentNode}i.reverse().forEach((function(t){n=n.multiply(t)}))}return n}(t,n)}return Wu(e.matrix)}},{key:"getShape",value:function(t){var e=this.get(t);return null==e.shape&&(e.shape=Kh.toGeometryShape(t)),e.shape.clone()}},{key:"getBoundingRect",value:function(t){var e=this.get(t);return null==e.boundingRect&&(e.boundingRect=Kh.getBBoxV2(t)),e.boundingRect.clone()}}]),t}();!function(t){function e(t){return null!=t&&"string"===typeof t}function n(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:Vs.svg},n=document.createDocumentFragment(),r={},i={},o=[{markup:Array.isArray(t)?t:[t],parent:n,ns:e.ns}],a=function(){var t=o.pop(),e=t.ns||Vs.svg,n=t.markup,a=t.parent;n.forEach((function(t){var n=t.tagName;if(!n)throw new TypeError("Invalid tagName");t.ns&&(e=t.ns);var s=e?zs(n,e):Zs(n),u=t.attrs;u&&ru(s,ou(u));var l=t.style;l&&bu(s,l);var c=t.className;null!=c&&s.setAttribute("class",Array.isArray(c)?c.join(" "):c),t.textContent&&(s.textContent=t.textContent);var h=t.selector;if(null!=h){if(i[h])throw new TypeError("Selector must be unique");i[h]=s}if(t.groupSelector){var f=t.groupSelector;Array.isArray(f)||(f=[f]),f.forEach((function(t){r[t]||(r[t]=[]),r[t].push(s)}))}a.appendChild(s);var g=t.children;Array.isArray(g)&&o.push({ns:e,markup:g,parent:s})}))};o.length>0;)a();return Object.keys(r).forEach((function(t){if(i[t])throw new Error("Ambiguous group selector");i[t]=r[t]})),{fragment:n,selectors:i,groups:r}}function r(t){return t instanceof SVGElement?Fs("g"):Zs("div")}t.isJSONMarkup=function(t){return null!=t&&!e(t)},t.isStringMarkup=e,t.clone=function(t){return null==t||e(t)?t:Ni(t)},t.sanitize=function(t){return"".concat(t).trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")},t.parseJSONMarkup=n,t.renderMarkup=function(t){if(e(t)){var i=Au.createVectors(t),o=i.length;if(1===o)return{elem:i[0].node};if(o>1){var a=r(i[0].node);return i.forEach((function(t){a.appendChild(t.node)})),{elem:a}}return{}}var s=n(t),u=s.fragment,l=null;return u.childNodes.length>1?(l=r(u.firstChild)).appendChild(u):l=u.firstChild,{elem:l,selectors:s.selectors}},t.parseLabelStringMarkup=function(t){for(var e=Au.createVectors(t),n=document.createDocumentFragment(),r=0,i=e.length;r<i;r+=1){var o=e[r].node;n.appendChild(o)}return{fragment:n,selectors:{}}}}(Uf||(Uf={})),function(t){t.getSelector=function t(e,n,r){if(null!=e){var i,o=e.tagName.toLowerCase();if(e===n)return i="string"===typeof r?"> ".concat(o," > ").concat(r):"> ".concat(o);var a=e.parentNode;if(a&&a.childNodes.length>1){var s=_s(e)+1;i="".concat(o,":nth-child(").concat(s,")")}else i=o;return r&&(i+=" > ".concat(r)),t(e.parentNode,n,i)}return r}}(Uf||(Uf={})),function(t){t.getPortContainerMarkup=function(){return"g"},t.getPortMarkup=function(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}},t.getPortLabelMarkup=function(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}}(Uf||(Uf={})),function(t){t.getEdgeMarkup=function(){return[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}]}}(Uf||(Uf={})),function(t){t.getForeignObjectMarkup=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{tagName:"foreignObject",selector:"fo",children:[{ns:Vs.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:Vs.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:t?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}}(Uf||(Uf={}));var Jf=function(){function t(e){(0,m.Z)(this,t),this.view=e}return(0,b.Z)(t,[{key:"cell",get:function(){return this.view.cell}},{key:"getDefinition",value:function(t){return this.cell.getAttrDefinition(t)}},{key:"processAttrs",value:function(t,e){var n,r,i,o,a=this,s=[];return Object.keys(e).forEach((function(r){var i=e[r],o=a.getDefinition(r),u=nt(_h.isValidDefinition,a.view,o,i,{elem:t,attrs:e,cell:a.cell,view:a.view});if(o&&u)"string"===typeof o?(null==n&&(n={}),n[o]=i):null!==i&&s.push({name:r,definition:o});else{null==n&&(n={});var l=Ks.includes(r)?r:Xa(r);n[l]=i}})),s.forEach((function(t){var n=t.name,a=t.definition,s=e[n];"function"===typeof a.set&&(null==r&&(r={}),r[n]=s),"function"===typeof a.offset&&(null==i&&(i={}),i[n]=s),"function"===typeof a.position&&(null==o&&(o={}),o[n]=s)})),{raw:e,normal:n,set:r,offset:i,position:o}}},{key:"mergeProcessedAttrs",value:function(t,e){t.set=Object.assign(Object.assign({},t.set),e.set),t.position=Object.assign(Object.assign({},t.position),e.position),t.offset=Object.assign(Object.assign({},t.offset),e.offset);var n=t.normal&&t.normal.transform;null!=n&&e.normal&&(e.normal.transform=n),t.normal=e.normal}},{key:"findAttrs",value:function(t,e,n,r){var i=[],o=new kl;return Object.keys(t).forEach((function(a){var s=t[a];if(Dn(s)){var u=Hf.find(a,e,r),l=u.isCSSSelector,c=u.elems;n[a]=c;for(var h=0,f=c.length;h<f;h+=1){var g=c[h],d=r&&r[a]===g,v=o.get(g);if(v){v.array||(i.push(g),v.array=!0,v.attrs=[v.attrs],v.priority=[v.priority]);var p=v.attrs,y=v.priority;if(d)p.unshift(s),y.unshift(-1);else{var m=lo(y,l?-1:f);p.splice(m,0,s),y.splice(m,0,f)}}else o.set(g,{elem:g,attrs:s,priority:d?-1:f,array:!1})}}})),i.forEach((function(t){var e=o.get(t),n=e.attrs;e.attrs=n.reduceRight((function(t,e){return sr(t,e)}),{})})),o}},{key:"updateRelativeAttrs",value:function(t,e,n){var r=this,i=e.raw||{},o=e.normal||{},a=e.set,s=e.position,u=e.offset,l=function(){return{elem:t,cell:r.cell,view:r.view,attrs:i,refBBox:n.clone()}};if(null!=a&&Object.keys(a).forEach((function(t){var e=a[t],n=r.getDefinition(t);if(null!=n){var i=nt(n.set,r.view,e,l());"object"===typeof i?o=Object.assign(Object.assign({},o),i):null!=i&&(o[t]=i)}})),t instanceof HTMLElement)this.view.setAttrs(o,t);else{var c=o.transform,h=Xu(c?"".concat(c):null),f=new Ol(h.e,h.f);c&&(delete o.transform,h.e=0,h.f=0);var g=!1;null!=s&&Object.keys(s).forEach((function(t){var e=s[t],n=r.getDefinition(t);if(null!=n){var i=nt(n.position,r.view,e,l());null!=i&&(g=!0,f.translate(Ol.create(i)))}})),this.view.setAttrs(o,t);var d=!1;if(null!=u){var v=this.view.getBoundingRectOfElement(t);if(v.width>0&&v.height>0){var p=Kh.transformRectangle(v,h);Object.keys(u).forEach((function(e){var n=u[e],o=r.getDefinition(e);if(null!=o){var a=nt(o.offset,r.view,n,{elem:t,cell:r.cell,view:r.view,attrs:i,refBBox:p});null!=a&&(d=!0,f.translate(Ol.create(a)))}}))}}(null!=c||g||d)&&(f.round(1),h.e=f.x,h.f=f.y,t.setAttribute("transform",Yu(h)))}}},{key:"update",value:function(t,e,n){var r=this,i={},o=this.findAttrs(n.attrs||e,t,i,n.selectors),a=n.attrs?this.findAttrs(e,t,i,n.selectors):o,s=[];o.each((function(e){var o=e.elem,u=e.attrs,l=r.processAttrs(o,u);if(null==l.set&&null==l.position&&null==l.offset)r.view.setAttrs(l.normal,o);else{var c,h=a.get(o),f=h?h.attrs:null,g=f&&null==u.ref?f.ref:u.ref;if(g){if(!(c=(i[g]||r.view.find(g,t,n.selectors))[0]))throw new Error('"'.concat(g,'" reference does not exist.'))}else c=null;var d={node:o,refNode:c,attributes:f,processedAttributes:l},v=s.findIndex((function(t){return t.refNode===o}));v>-1?s.splice(v,0,d):s.push(d)}}));var u,l=new kl;s.forEach((function(e){var i,o,a=e.node,s=e.refNode,c=null!=s&&null!=n.rotatableNode&&Hs(n.rotatableNode,s);if(s&&(i=l.get(s)),!i){var h=c?n.rotatableNode:t;i=s?Kh.getBBox(s,{target:h}):n.rootBBox,s&&l.set(s,i)}n.attrs&&e.attributes?(o=r.processAttrs(a,e.attributes),r.mergeProcessedAttrs(o,e.processedAttributes)):o=e.processedAttributes;var f=i;c&&null!=n.rotatableNode&&!n.rotatableNode.contains(a)&&(u||(u=Xu(ru(n.rotatableNode,"transform"))),f=Kh.transformRectangle(i,u)),r.updateRelativeAttrs(a,o,f)}))}}]),t}(),Xf=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];(0,m.Z)(this,t),this.view=e;var i={},o={},a=0;Object.keys(n).forEach((function(t){var e=n[t];Array.isArray(e)||(e=[e]),e.forEach((function(e){var n=i[e];n||(a+=1,n=i[e]=1<<a),o[t]|=n}))}));var s=r;if(Array.isArray(s)||(s=[s]),s.forEach((function(t){i[t]||(a+=1,i[t]=1<<a)})),a>25)throw new Error("Maximum number of flags exceeded.");this.flags=i,this.attrs=o,this.bootstrap=r}return(0,b.Z)(t,[{key:"cell",get:function(){return this.view.cell}},{key:"getFlag",value:function(t){var e=this.flags;return null==e?0:Array.isArray(t)?t.reduce((function(t,n){return t|e[n]}),0):0|e[t]}},{key:"hasAction",value:function(t,e){return t&this.getFlag(e)}},{key:"removeAction",value:function(t,e){return t^t&this.getFlag(e)}},{key:"getBootstrapFlag",value:function(){return this.getFlag(this.bootstrap)}},{key:"getChangedFlag",value:function(){var t=this,e=0;return this.attrs?(Object.keys(this.attrs).forEach((function(n){t.cell.hasChanged(n)&&(e|=t.attrs[n])})),e):e}}]),t}(),Yf=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},$f=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Qf=function(t,e){(0,x.Z)(r,t);var n=(0,P.Z)(r);function r(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,m.Z)(this,r),(e=n.call(this)).cell=t,e.options=e.ensureOptions(i),e.graph=e.options.graph,e.attr=new Jf((0,Al.Z)(e)),e.flag=new Xf((0,Al.Z)(e),e.options.actions,e.options.bootstrap),e.cache=new Wf((0,Al.Z)(e)),e.setContainer(e.ensureContainer()),e.setup(),e.init(),e}return(0,b.Z)(r,[{key:e,get:function(){return r.toStringTag}},{key:"init",value:function(){}},{key:"onRemove",value:function(){this.removeTools()}},{key:"priority",get:function(){return this.options.priority}},{key:"rootSelector",get:function(){return this.options.rootSelector}},{key:"getConstructor",value:function(){return this.constructor}},{key:"ensureOptions",value:function(t){return this.getConstructor().getOptions(t)}},{key:"getContainerTagName",value:function(){return this.options.isSvgElement?"g":"div"}},{key:"getContainerStyle",value:function(){}},{key:"getContainerAttrs",value:function(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}},{key:"getContainerClassName",value:function(){return this.prefixClassName("cell")}},{key:"ensureContainer",value:function(){return Hf.createElement(this.getContainerTagName(),this.options.isSvgElement)}},{key:"setContainer",value:function(t){if(this.container!==t){this.undelegateEvents(),this.container=t,null!=this.options.events&&this.delegateEvents(this.options.events);var e=this.getContainerAttrs();null!=e&&this.setAttrs(e,t);var n=this.getContainerStyle();null!=n&&this.setStyle(n,t);var r=this.getContainerClassName();null!=r&&this.addClass(r,t)}return this}},{key:"isNodeView",value:function(){return!1}},{key:"isEdgeView",value:function(){return!1}},{key:"render",value:function(){return this}},{key:"confirmUpdate",value:function(t){return 0}},{key:"getBootstrapFlag",value:function(){return this.flag.getBootstrapFlag()}},{key:"getFlag",value:function(t){return this.flag.getFlag(t)}},{key:"hasAction",value:function(t,e){return this.flag.hasAction(t,e)}},{key:"removeAction",value:function(t,e){return this.flag.removeAction(t,e)}},{key:"handleAction",value:function(t,e,n,r){if(this.hasAction(t,e)){n();var i=[e];return r&&("string"===typeof r?i.push(r):i.push.apply(i,(0,A.Z)(r))),this.removeAction(t,i)}return t}},{key:"setup",value:function(){this.cell.on("changed",this.onCellChanged,this)}},{key:"onCellChanged",value:function(t){var e=t.options;this.onAttrsChange(e)}},{key:"onAttrsChange",value:function(t){var e=this.flag.getChangedFlag();!t.updated&&e&&(t.dirty&&this.hasAction(e,"update")&&(e|=this.getFlag("render")),t.toolId&&(t.async=!1),null!=this.graph&&this.graph.renderer.requestViewUpdate(this,e,t))}},{key:"parseJSONMarkup",value:function(t,e){var n=Uf.parseJSONMarkup(t),r=n.selectors,i=this.rootSelector;if(e&&i){if(r[i])throw new Error("Invalid root selector");r[i]=e}return n}},{key:"can",value:function(t){var e=this.graph.options.interacting;if("function"===typeof e&&(e=nt(e,this.graph,this)),"object"===typeof e){var n=e[t];return"function"===typeof n&&(n=nt(n,this.graph,this)),!1!==n}return"boolean"===typeof e&&e}},{key:"cleanCache",value:function(){return this.cache.clean(),this}},{key:"getCache",value:function(t){return this.cache.get(t)}},{key:"getDataOfElement",value:function(t){return this.cache.getData(t)}},{key:"getMatrixOfElement",value:function(t){return this.cache.getMatrix(t)}},{key:"getShapeOfElement",value:function(t){return this.cache.getShape(t)}},{key:"getBoundingRectOfElement",value:function(t){return this.cache.getBoundingRect(t)}},{key:"getBBoxOfElement",value:function(t){var e=this.getBoundingRectOfElement(t),n=this.getMatrixOfElement(t),r=this.getRootRotatedMatrix(),i=this.getRootTranslatedMatrix();return Kh.transformRectangle(e,i.multiply(r).multiply(n))}},{key:"getUnrotatedBBoxOfElement",value:function(t){var e=this.getBoundingRectOfElement(t),n=this.getMatrixOfElement(t),r=this.getRootTranslatedMatrix();return Kh.transformRectangle(e,r.multiply(n))}},{key:"getBBox",value:function(){var t;if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).useCellGeometry){var e=this.cell,n=e.isNode()?e.getAngle():0;t=e.getBBox().bbox(n)}else t=this.getBBoxOfElement(this.container);return this.graph.coord.localToGraphRect(t)}},{key:"getRootTranslatedMatrix",value:function(){var t=this.cell,e=t.isNode()?t.getPosition():{x:0,y:0};return Wu().translate(e.x,e.y)}},{key:"getRootRotatedMatrix",value:function(){var t=Wu(),e=this.cell,n=e.isNode()?e.getAngle():0;if(n){var r=e.getBBox(),i=r.width/2,o=r.height/2;t=t.translate(i,o).rotate(n).translate(-i,-o)}return t}},{key:"findMagnet",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container;return this.findByAttr("magnet",t)}},{key:"updateAttrs",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null==n.rootBBox&&(n.rootBBox=new El),null==n.selectors&&(n.selectors=this.selectors),this.attr.update(t,e,n)}},{key:"isEdgeElement",value:function(t){return this.cell.isEdge()&&(null==t||t===this.container)}},{key:"prepareHighlight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t||this.container;return e.partial=n===this.container,n}},{key:"highlight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.prepareHighlight(t,e);return this.notify("cell:highlight",{magnet:n,options:e,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:n,options:e,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:n,options:e,view:this,node:this.cell,cell:this.cell}),this}},{key:"unhighlight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.prepareHighlight(t,e);return this.notify("cell:unhighlight",{magnet:n,options:e,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:n,options:e,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:n,options:e,view:this,edge:this.cell,cell:this.cell}),this}},{key:"notifyUnhighlight",value:function(t,e){}},{key:"getEdgeTerminal",value:function(t,e,n,r,i){var o=this.cell,a=this.findAttr("port",t),s=t.getAttribute("data-selector"),u={cell:o.id};return null!=s&&(u.magnet=s),null!=a?(u.port=a,o.isNode()&&(o.hasPort(a)||null!=s||(u.selector=this.getSelector(t)))):null==s&&this.container!==t&&(u.selector=this.getSelector(t)),u}},{key:"getMagnetFromEdgeTerminal",value:function(t){var e,n=this.cell,r=this.container,i=t.port,o=t.magnet;return null!=i&&n.isNode()&&n.hasPort(i)?e=this.findPortElem(i,o)||r:(o||(o=t.selector),o||null==i||(o='[port="'.concat(i,'"]')),e=this.findOne(o,r,this.selectors)),e}},{key:"hasTools",value:function(t){var e=this.tools;return null!=e&&(null==t||e.name===t)}},{key:"addTools",value:function(t){if(this.removeTools(),t){if(!this.can("toolsAddable"))return this;var e=Kf.isToolsView(t)?t:new Kf(t);this.tools=e,e.config({view:this}),e.mount()}return this}},{key:"updateTools",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.tools&&this.tools.update(t),this}},{key:"removeTools",value:function(){return this.tools&&(this.tools.remove(),this.tools=null),this}},{key:"hideTools",value:function(){return this.tools&&this.tools.hide(),this}},{key:"showTools",value:function(){return this.tools&&this.tools.show(),this}},{key:"renderTools",value:function(){var t=this.cell.getTools();return this.addTools(t),this}},{key:"notify",value:function(t,e){return this.trigger(t,e),this.graph.trigger(t,e),this}},{key:"getEventArgs",value:function(t,e,n){var r=this,i=r.cell;return null==e||null==n?{e:t,view:r,cell:i}:{e:t,x:e,y:n,view:r,cell:i}}},{key:"onClick",value:function(t,e,n){this.notify("cell:click",this.getEventArgs(t,e,n))}},{key:"onDblClick",value:function(t,e,n){this.notify("cell:dblclick",this.getEventArgs(t,e,n))}},{key:"onContextMenu",value:function(t,e,n){this.notify("cell:contextmenu",this.getEventArgs(t,e,n))}},{key:"onMouseDown",value:function(t,e,n){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(t,e,n))}},{key:"onMouseUp",value:function(t,e,n){this.notify("cell:mouseup",this.getEventArgs(t,e,n)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}},{key:"onMouseMove",value:function(t,e,n){this.notify("cell:mousemove",this.getEventArgs(t,e,n))}},{key:"onMouseOver",value:function(t){this.notify("cell:mouseover",this.getEventArgs(t))}},{key:"onMouseOut",value:function(t){this.notify("cell:mouseout",this.getEventArgs(t))}},{key:"onMouseEnter",value:function(t){this.notify("cell:mouseenter",this.getEventArgs(t))}},{key:"onMouseLeave",value:function(t){this.notify("cell:mouseleave",this.getEventArgs(t))}},{key:"onMouseWheel",value:function(t,e,n,r){this.notify("cell:mousewheel",Object.assign({delta:r},this.getEventArgs(t,e,n)))}},{key:"onCustomEvent",value:function(t,e,n,r){this.notify("cell:customevent",Object.assign({name:e},this.getEventArgs(t,n,r))),this.notify(e,Object.assign({},this.getEventArgs(t,n,r)))}},{key:"onMagnetMouseDown",value:function(t,e,n,r){}},{key:"onMagnetDblClick",value:function(t,e,n,r){}},{key:"onMagnetContextMenu",value:function(t,e,n,r){}},{key:"onLabelMouseDown",value:function(t,e,n){}},{key:"checkMouseleave",value:function(t){var e=this.getEventTarget(t,{fromPoint:!0}),n=this.graph.findViewByElem(e);n!==this&&(this.onMouseLeave(t),n&&n.onMouseEnter(t))}},{key:"dispose",value:function(){this.cell.off("changed",this.onCellChanged,this)}}],[{key:"getDefaults",value:function(){return this.defaults}},{key:"config",value:function(t){this.defaults=this.getOptions(t)}},{key:"getOptions",value:function(t){var e=function(t,e){return null!=e?ro([].concat((0,A.Z)(Array.isArray(t)?t:[t]),(0,A.Z)(Array.isArray(e)?e:[e]))):Array.isArray(t)?(0,A.Z)(t):[t]},n=Ni(this.getDefaults()),r=t.bootstrap,i=t.actions,o=t.events,a=t.documentEvents,s=$f(t,["bootstrap","actions","events","documentEvents"]);return r&&(n.bootstrap=e(n.bootstrap,r)),i&&Object.entries(i).forEach((function(t){var r=(0,Pu.Z)(t,2),i=r[0],o=r[1],a=n.actions[i];o&&a?n.actions[i]=e(a,o):o&&(n.actions[i]=e(o))})),o&&(n.events=Object.assign(Object.assign({},n.events),o)),t.documentEvents&&(n.documentEvents=Object.assign(Object.assign({},n.documentEvents),a)),sr(n,s)}}]),r}(Hf,Symbol.toStringTag);Qf.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},Yf([Qf.dispose()],Qf.prototype,"dispose",null),function(t){t.Flag=Xf,t.Attr=Jf}(Qf||(Qf={})),function(t){t.toStringTag="X6.".concat(t.name),t.isCellView=function(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag],r=e;return(null==n||n===t.toStringTag)&&"function"===typeof r.isNodeView&&"function"===typeof r.isEdgeView&&"function"===typeof r.confirmUpdate}}(Qf||(Qf={})),function(t){t.priority=function(t){return function(e){e.config({priority:t})}},t.bootstrap=function(t){return function(e){e.config({bootstrap:t})}}}(Qf||(Qf={})),function(t){t.registry=$l.create({type:"view"})}(Qf||(Qf={}));var Kf=function(t,e){(0,x.Z)(r,t);var n=(0,P.Z)(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.Z)(this,r),(t=n.call(this)).svgContainer=t.createContainer(!0,e),t.htmlContainer=t.createContainer(!1,e),t.config(e),t}return(0,b.Z)(r,[{key:"name",get:function(){return this.options.name}},{key:"graph",get:function(){return this.cellView.graph}},{key:"cell",get:function(){return this.cellView.cell}},{key:e,get:function(){return r.toStringTag}},{key:"createContainer",value:function(t,e){var n=t?Hf.createElement("g",!0):Hf.createElement("div",!1);return Ns(n,this.prefixClassName("cell-tools")),e.className&&Ns(n,e.className),n}},{key:"config",value:function(t){if(this.options=Object.assign(Object.assign({},this.options),t),!Qf.isCellView(t.view)||t.view===this.cellView)return this;this.cellView=t.view,this.cell.isEdge()?(Ns(this.svgContainer,this.prefixClassName("edge-tools")),Ns(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(Ns(this.svgContainer,this.prefixClassName("node-tools")),Ns(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));var e=this.options.items;if(!Array.isArray(e))return this;this.tools=[];var n=[];e.forEach((function(t){r.ToolItem.isToolItem(t)?"vertices"===t.name?n.unshift(t):n.push(t):"vertices"===("object"===typeof t?t.name:t)?n.unshift(t):n.push(t)}));for(var i=0;i<n.length;i+=1){var o=n[i],a=void 0;if(r.ToolItem.isToolItem(o))a=o;else{var s="object"===typeof o?o.name:o,u="object"===typeof o&&o.args||{};if(s)if(this.cell.isNode()){var l=wg.registry.get(s);if(!l)return wg.registry.onNotFound(s);a=new l(u)}else if(this.cell.isEdge()){var c=xg.registry.get(s);if(!c)return xg.registry.onNotFound(s);a=new c(u)}}if(a)a.config(this.cellView,this),a.render(),(!1!==a.options.isSVGElement?this.svgContainer:this.htmlContainer).appendChild(a.container),this.tools.push(a)}return this}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.tools;return e&&e.forEach((function(e){t.toolId!==e.cid&&e.isVisible()&&e.update()})),this}},{key:"focus",value:function(t){var e=this.tools;return e&&e.forEach((function(e){t===e?e.show():e.hide()})),this}},{key:"blur",value:function(t){var e=this.tools;return e&&e.forEach((function(e){e===t||e.isVisible()||(e.show(),e.update())})),this}},{key:"hide",value:function(){return this.focus(null)}},{key:"show",value:function(){return this.blur(null)}},{key:"remove",value:function(){var t=this.tools;return t&&(t.forEach((function(t){return t.remove()})),this.tools=null),Us(this.svgContainer),Us(this.htmlContainer),_f((0,Gf.Z)(r.prototype),"remove",this).call(this)}},{key:"mount",value:function(){var t=this.tools,e=this.cellView;if(e&&t){var n=t.some((function(t){return!1!==t.options.isSVGElement})),r=t.some((function(t){return!1===t.options.isSVGElement}));if(n)(this.options.local?e.container:e.graph.view.decorator).appendChild(this.svgContainer);r&&this.graph.container.appendChild(this.htmlContainer)}return this}}]),r}(Hf,Symbol.toStringTag);!function(t){t.toStringTag="X6.".concat(t.name),t.isToolsView=function(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag],r=e;return(null==n||n===t.toStringTag)&&null!=r.graph&&null!=r.cell&&"function"===typeof r.config&&"function"===typeof r.update&&"function"===typeof r.focus&&"function"===typeof r.blur&&"function"===typeof r.show&&"function"===typeof r.hide}}(Kf||(Kf={})),function(t){var e=function(t,e){(0,x.Z)(r,t);var n=(0,P.Z)(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.Z)(this,r),(t=n.call(this)).visible=!0,t.options=t.getOptions(e),t.container=Hf.createElement(t.options.tagName||"g",!1!==t.options.isSVGElement),Ns(t.container,t.prefixClassName("cell-tool")),"string"===typeof t.options.className&&Ns(t.container,t.options.className),t.init(),t}return(0,b.Z)(r,[{key:"graph",get:function(){return this.cellView.graph}},{key:"cell",get:function(){return this.cellView.cell}},{key:"name",get:function(){return this.options.name}},{key:e,get:function(){return r.toStringTag}},{key:"init",value:function(){}},{key:"getOptions",value:function(t){return this.constructor.getOptions(t)}},{key:"delegateEvents",value:function(){return this.options.events&&_f((0,Gf.Z)(r.prototype),"delegateEvents",this).call(this,this.options.events),this}},{key:"config",value:function(t,e){return this.cellView=t,this.parent=e,this.stamp(this.container),this.cell.isEdge()?Ns(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&Ns(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}},{key:"render",value:function(){this.empty();var t=this.options.markup;if(t){var e=Uf.parseJSONMarkup(t);this.container.appendChild(e.fragment),this.childNodes=e.selectors}return this.onRender(),this}},{key:"onRender",value:function(){}},{key:"update",value:function(){return this}},{key:"stamp",value:function(t){t&&t.setAttribute("data-cell-id",this.cellView.cell.id)}},{key:"show",value:function(){return this.container.style.display="",this.visible=!0,this}},{key:"hide",value:function(){return this.container.style.display="none",this.visible=!1,this}},{key:"isVisible",value:function(){return this.visible}},{key:"focus",value:function(){var t=this.options.focusOpacity;return null!=t&&Number.isFinite(t)&&(this.container.style.opacity="".concat(t)),this.parent.focus(this),this}},{key:"blur",value:function(){return this.container.style.opacity="",this.parent.blur(this),this}},{key:"guard",value:function(t){return null==this.graph||null==this.cellView||this.graph.view.guard(t,this.cellView)}}],[{key:"getDefaults",value:function(){return this.defaults}},{key:"config",value:function(t){this.defaults=this.getOptions(t)}},{key:"getOptions",value:function(t){return sr(Ni(this.getDefaults()),t)}}]),r}(Hf,Symbol.toStringTag);e.defaults={isSVGElement:!0,tagName:"g"},t.ToolItem=e,function(t){var e=0;t.define=function(t){var n,r=Fi((n=t.name)?Ya(n):"CustomTool".concat(e+=1),this);return r.config(t),r}}(e=t.ToolItem||(t.ToolItem={})),function(t){t.toStringTag="X6.".concat(t.name),t.isToolItem=function(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag],r=e;return(null==n||n===t.toStringTag)&&null!=r.graph&&null!=r.cell&&"function"===typeof r.config&&"function"===typeof r.update&&"function"===typeof r.focus&&"function"===typeof r.blur&&"function"===typeof r.show&&"function"===typeof r.hide&&"function"===typeof r.isVisible}}(e=t.ToolItem||(t.ToolItem={}))}(Kf||(Kf={}));var tg=function(t){return t};function eg(t,e){return 0===e?"0%":"".concat(Math.round(t/e*100),"%")}function ng(t){return function(e,n,r,i){return n.isEdgeElement(r)?function(t,e,n,r,i){var o=n.getConnection();if(!o)return e;var a=o.closestPointLength(i);if(t){var s=o.length();e.anchor={name:"ratio",args:{ratio:a/s}}}else e.anchor={name:"length",args:{length:a}};return e}(t,e,n,0,i):function(t,e,n,r,i){var o=n.cell,a=o.getAngle(),s=n.getUnrotatedBBoxOfElement(r),u=o.getBBox().getCenter(),l=Ol.create(i).rotate(a,u),c=l.x-s.x,h=l.y-s.y;t&&(c=eg(c,s.width),h=eg(h,s.height));return e.anchor={name:"topLeft",args:{dx:c,dy:h,rotate:!0}},e}(t,e,n,r,i)}}var rg,ig=ng(!0),og=ng(!1);function ag(t,e,n,r){return nt(rg.presets.pinRelative,this.graph,{},e,n,t,this.cell,r,{}).anchor}function sg(t,e){return e?t.cell.getBBox():t.cell.isEdge()?t.getConnection().bbox():t.getUnrotatedBBoxOfElement(t.container)}!function(t){t.presets=h,t.registry=$l.create({type:"connection strategy"}),t.registry.register(t.presets,!0)}(rg||(rg={}));var ug=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"onRender",value:function(){Ns(this.container,this.prefixClassName("cell-tool-button")),this.update()}},{key:"update",value:function(){return this.updatePosition(),this}},{key:"updatePosition",value:function(){var t=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();Ku(this.container,t,{absolute:!0})}},{key:"getNodeMatrix",value:function(){var t=this.cellView,e=this.options,n=e.x,r=void 0===n?0:n,i=e.y,o=void 0===i?0:i,a=e.offset,s=e.useCellGeometry,u=e.rotate,l=sg(t,s),c=t.cell.getAngle();u||(l=l.bbox(c));var h=0,f=0;"number"===typeof a?(h=a,f=a):"object"===typeof a&&(h=a.x,f=a.y),r=os(r,l.width),o=os(o,l.height);var g=Wu().translate(l.x+l.width/2,l.y+l.height/2);return u&&(g=g.rotate(c)),g=g.translate(r+h-l.width/2,o+f-l.height/2)}},{key:"getEdgeMatrix",value:function(){var t,e,n,r=this.cellView,i=this.options,o=i.offset,a=void 0===o?0:o,s=i.distance,u=void 0===s?0:s,l=i.rotate,c=os(u,1);(t=c>=0&&c<=1?r.getTangentAtRatio(c):r.getTangentAtLength(c))?(e=t.start,n=t.vector().vectorAngle(new Ol(1,0))||0):(e=r.getConnection().start,n=0);var h=Wu().translate(e.x,e.y).rotate(n);return h="object"===typeof a?h.translate(a.x||0,a.y||0):h.translate(0,a),l||(h=h.rotate(-n)),h}},{key:"onMouseDown",value:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.onClick;"function"===typeof e&&nt(e,this.cellView,{e:t,view:this.cellView,cell:this.cellView.cell,btn:this})}}}]),n}(Kf.ToolItem);!function(t){t.config({name:"button",useCellGeometry:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})}(ug||(ug={})),function(t){t.Remove=t.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,useCellGeometry:!0,onClick:function(t){var e=t.view,n=t.btn;n.parent.remove(),e.cell.remove({ui:!0,toolId:n.cid})}})}(ug||(ug={}));var lg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},cg=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"onRender",value:function(){if(Ns(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){var t=this.options.attrs,e=t.class,n=lg(t,["class"]);ru(this.container,ou(n)),e&&Ns(this.container,e)}this.update()}},{key:"update",value:function(){var t=this.cellView,e=this.options,n=e.useCellGeometry,r=e.rotate,i=as(e.padding),o=sg(t,n).moveAndExpand({x:-i.left,y:-i.top,width:i.left+i.right,height:i.top+i.bottom}),a=t.cell;if(a.isNode()){var s=a.getAngle();if(s)if(r){var u=a.getBBox().getCenter();el(this.container,s,u.x,u.y,{absolute:!0})}else o=o.bbox(s)}return ru(this.container,o.toJSON()),this}}]),n}(Kf.ToolItem);!function(t){t.config({name:"boundary",tagName:"rect",padding:10,useCellGeometry:!0,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})}(cg||(cg={}));var hg=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){var t;return(0,m.Z)(this,n),(t=e.apply(this,arguments)).handles=[],t}return(0,b.Z)(n,[{key:"vertices",get:function(){return this.cellView.cell.getVertices()}},{key:"onRender",value:function(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}},{key:"update",value:function(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}},{key:"resetHandles",value:function(){var t=this,e=this.handles;this.handles=[],e&&e.forEach((function(e){t.stopHandleListening(e),e.remove()}))}},{key:"renderHandles",value:function(){for(var t=this,e=this.vertices,n=0,r=e.length;n<r;n+=1){var i=e[n],o=this.options.createHandle,a=this.options.processHandle,s=o({index:n,graph:this.graph,guard:function(e){return t.guard(e)},attrs:this.options.attrs||{}});a&&a(s),s.updatePosition(i.x,i.y),this.stamp(s.container),this.container.appendChild(s.container),this.handles.push(s),this.startHandleListening(s)}}},{key:"updateHandles",value:function(){for(var t=this.vertices,e=0,n=t.length;e<n;e+=1){var r=t[e],i=this.handles[e];i&&i.updatePosition(r.x,r.y)}}},{key:"updatePath",value:function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.cellView.getConnectionPathData())}},{key:"startHandleListening",value:function(t){var e=this.cellView;e.can("vertexMovable")&&(t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.on("remove",this.onHandleRemove,this)}},{key:"stopHandleListening",value:function(t){var e=this.cellView;e.can("vertexMovable")&&(t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.off("remove",this.onHandleRemove,this)}},{key:"getNeighborPoints",value:function(t){var e=this.cellView,n=this.vertices,r=t>0?n[t-1]:e.sourceAnchor,i=t<n.length-1?n[t+1]:e.targetAnchor;return{prev:Ol.create(r),next:Ol.create(i)}}},{key:"getMouseEventArgs",value:function(t){var e=this.normalizeEvent(t),n=this.graph.snapToGrid(e.clientX,e.clientY);return{e:e,x:n.x,y:n.y}}},{key:"onHandleChange",value:function(t){var e=t.e;this.focus();var n=this.cellView;if(n.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){var r=this.getMouseEventArgs(e),i=r.e,o=r.x,a=r.y;this.eventData(i,{start:{x:o,y:a}}),n.notifyMouseDown(i,o,a)}}},{key:"onHandleChanging",value:function(t){var e=t.handle,n=t.e,r=this.cellView,i=e.options.index,o=this.getMouseEventArgs(n),a=o.e,s=o.x,u=o.y,l={x:s,y:u};this.snapVertex(l,i),r.cell.setVertexAt(i,l,{ui:!0,toolId:this.cid}),e.updatePosition(l.x,l.y),this.options.stopPropagation||r.notifyMouseMove(a,s,u)}},{key:"stopBatch",value:function(t){this.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),t&&this.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid})}},{key:"onHandleChanged",value:function(t){var e=t.e,n=this.options,r=this.cellView;if(n.addable&&this.updatePath(),n.removeRedundancies){r.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),this.stopBatch(this.eventData(e).vertexAdded);var i=this.getMouseEventArgs(e),o=i.e,a=i.x,s=i.y;if(!this.options.stopPropagation){r.notifyMouseUp(o,a,s);var u=this.eventData(o).start;if(u){var l=u.x,c=u.y;l===a&&c===s&&r.onClick(o,a,s)}}r.checkMouseleave(o),n.onChanged&&n.onChanged({edge:r.cell,edgeView:r})}else this.stopBatch(this.eventData(e).vertexAdded)}},{key:"snapVertex",value:function(t,e){var n=this.options.snapRadius||0;if(n>0){var r=this.getNeighborPoints(e),i=r.prev,o=r.next;Math.abs(t.x-i.x)<n?t.x=i.x:Math.abs(t.x-o.x)<n&&(t.x=o.x),Math.abs(t.y-i.y)<n?t.y=r.prev.y:Math.abs(t.y-o.y)<n&&(t.y=o.y)}}},{key:"onHandleRemove",value:function(t){var e=t.handle,n=t.e;if(this.options.removable){var r=e.options.index,i=this.cellView;i.cell.removeVertexAt(r,{ui:!0}),this.options.addable&&this.updatePath(),i.checkMouseleave(this.normalizeEvent(n))}}},{key:"allowAddVertex",value:function(t){var e=this.guard(t),n=this.options.addable&&this.cellView.can("vertexAddable"),r=!this.options.modifiers||yl.isMatch(t,this.options.modifiers);return!e&&n&&r}},{key:"onPathMouseDown",value:function(t){var e=this.cellView;if(this.allowAddVertex(t)){t.stopPropagation(),t.preventDefault();var n=this.normalizeEvent(t),r=this.graph.snapToGrid(n.clientX,n.clientY).toJSON();e.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});var i=e.getVertexIndex(r.x,r.y);this.snapVertex(r,i),e.cell.insertVertex(r,i,{ui:!0,toolId:this.cid}),this.render();var o=this.handles[i];this.eventData(n,{vertexAdded:!0}),o.onMouseDown(n)}}},{key:"onRemove",value:function(){this.resetHandles()}}]),n}(Kf.ToolItem);!function(t){var e=function(e){(0,x.Z)(r,e);var n=(0,P.Z)(r);function r(t){var e;return(0,m.Z)(this,r),(e=n.call(this)).options=t,e.render(),e.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"}),e}return(0,b.Z)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"render",value:function(){this.container=Hf.createElement("circle",!0);var e=this.options.attrs;if("function"===typeof e){var n=t.getDefaults();this.setAttrs(Object.assign(Object.assign({},n.attrs),e(this)))}else this.setAttrs(e);this.addClass(this.prefixClassName("edge-tool-vertex"))}},{key:"updatePosition",value:function(t,e){this.setAttrs({cx:t,cy:e})}},{key:"onMouseDown",value:function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},t.data),this.emit("change",{e:t,handle:this}))}},{key:"onMouseMove",value:function(t){this.emit("changing",{e:t,handle:this})}},{key:"onMouseUp",value:function(t){this.emit("changed",{e:t,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}},{key:"onDoubleClick",value:function(t){this.emit("remove",{e:t,handle:this})}}]),r}(Hf);t.Handle=e}(hg||(hg={})),function(t,e){var n=tf.prefix("edge-tool-vertex-path");t.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:function(e){return new t.Handle(e)},markup:[{tagName:"path",selector:"connection",className:n,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:(e={},(0,y.Z)(e,"mousedown .".concat(n),"onPathMouseDown"),(0,y.Z)(e,"touchstart .".concat(n),"onPathMouseDown"),e)})}(hg||(hg={}));var fg=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){var t;return(0,m.Z)(this,n),(t=e.apply(this,arguments)).handles=[],t}return(0,b.Z)(n,[{key:"vertices",get:function(){return this.cellView.cell.getVertices()}},{key:"update",value:function(){return this.render(),this}},{key:"onRender",value:function(){Ns(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();var t=this.cellView,e=(0,A.Z)(this.vertices);e.unshift(t.sourcePoint),e.push(t.targetPoint);for(var n=0,r=e.length;n<r-1;n+=1){var i=e[n],o=e[n+1],a=this.renderHandle(i,o,n);this.stamp(a.container),this.handles.push(a)}return this}},{key:"renderHandle",value:function(t,e,n){var r=this,i=this.options.createHandle({index:n,graph:this.graph,guard:function(t){return r.guard(t)},attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(i),this.updateHandle(i,t,e),this.container.appendChild(i.container),this.startHandleListening(i),i}},{key:"startHandleListening",value:function(t){t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)}},{key:"stopHandleListening",value:function(t){t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)}},{key:"resetHandles",value:function(){var t=this,e=this.handles;this.handles=[],e&&e.forEach((function(e){t.stopHandleListening(e),e.remove()}))}},{key:"shiftHandleIndexes",value:function(t){for(var e=this.handles,n=0,r=e.length;n<r;n+=1)e[n].options.index+=t}},{key:"resetAnchor",value:function(t,e){var n=this.cellView.cell,r={ui:!0,toolId:this.cid};e?n.prop([t,"anchor"],e,r):n.removeProp([t,"anchor"],r)}},{key:"snapHandle",value:function(t,e,n){var r=t.options.axis,i=t.options.index,o=this.cellView.cell.getVertices(),a=o[i-2]||n.sourceAnchor,s=o[i+1]||n.targetAnchor,u=this.options.snapRadius;return Math.abs(e[r]-a[r])<u?e[r]=a[r]:Math.abs(e[r]-s[r])<u&&(e[r]=s[r]),e}},{key:"onHandleChanging",value:function(t){var e=t.handle,n=t.e,r=this.graph,i=this.options,o=this.cellView,a=i.anchor,s=e.options.axis,u=e.options.index-1,l=this.getEventData(n),c=this.normalizeEvent(n),h=r.snapToGrid(c.clientX,c.clientY),f=this.snapHandle(e,h.clone(),l),g=Ni(this.vertices),d=g[u],v=g[u+1],p=o.sourceView,y=o.sourceBBox,m=!1,b=!1;if(d?0===u?y.containsPoint(d)?(g.shift(),this.shiftHandleIndexes(-1),m=!0):(d[s]=f[s],b=!0):d[s]=f[s]:((d=o.sourceAnchor.toJSON())[s]=f[s],y.containsPoint(d)?m=!0:(g.unshift(d),this.shiftHandleIndexes(1),b=!0)),"function"===typeof a&&p){if(m){var k=l.sourceAnchor.clone();k[s]=f[s];var w=nt(a,o,k,p,o.sourceMagnet||p.container,"source",o,this);this.resetAnchor("source",w)}b&&this.resetAnchor("source",l.sourceAnchorDef)}var x=o.targetView,P=o.targetBBox,A=!1,C=!1;if(v?u===g.length-2?P.containsPoint(v)?(g.pop(),A=!0):(v[s]=f[s],C=!0):v[s]=f[s]:((v=o.targetAnchor.toJSON())[s]=f[s],P.containsPoint(v)?A=!0:(g.push(v),C=!0)),"function"===typeof a&&x){if(A){var O=l.targetAnchor.clone();O[s]=f[s];var E=nt(a,o,O,x,o.targetMagnet||x.container,"target",o,this);this.resetAnchor("target",E)}C&&this.resetAnchor("target",l.targetAnchorDef)}Ol.equalPoints(g,this.vertices)||this.cellView.cell.setVertices(g,{ui:!0,toolId:this.cid}),this.updateHandle(e,d,v,0),i.stopPropagation||o.notifyMouseMove(c,h.x,h.y)}},{key:"onHandleChange",value:function(t){var e=t.handle,n=t.e,r=this.options,i=this.handles,o=this.cellView,a=e.options.index;if(Array.isArray(i)){for(var s=0,u=i.length;s<u;s+=1)s!==a&&i[s].hide();if(this.focus(),this.setEventData(n,{sourceAnchor:o.sourceAnchor.clone(),targetAnchor:o.targetAnchor.clone(),sourceAnchorDef:Ni(this.cell.prop(["source","anchor"])),targetAnchorDef:Ni(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!r.stopPropagation){var l=this.normalizeEvent(n),c=this.graph.snapToGrid(l.clientX,l.clientY);o.notifyMouseDown(l,c.x,c.y)}}}},{key:"onHandleChanged",value:function(t){var e=t.e,n=this.options,r=this.cellView;n.removeRedundancies&&r.removeRedundantLinearVertices({ui:!0,toolId:this.cid});var i=this.normalizeEvent(e),o=this.graph.snapToGrid(i.clientX,i.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),n.stopPropagation||r.notifyMouseUp(i,o.x,o.y),r.checkMouseleave(i),n.onChanged&&n.onChanged({edge:r.cell,edgeView:r})}},{key:"updateHandle",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=this.options.precision||0,o=Math.abs(e.x-n.x)<i,a=Math.abs(e.y-n.y)<i;if(o||a){var s=new Ml(e,n);if(s.length()<this.options.threshold)t.hide();else{var u=s.getCenter(),l=o?"x":"y";u[l]+=r||0;var c=s.vector().vectorAngle(new Ol(1,0));t.updatePosition(u.x,u.y,c,this.cellView),t.show(),t.options.axis=l}}else t.hide()}},{key:"onRemove",value:function(){this.resetHandles()}}]),n}(Kf.ToolItem);!function(t){var e=function(e){(0,x.Z)(r,e);var n=(0,P.Z)(r);function r(t){var e;return(0,m.Z)(this,r),(e=n.call(this)).options=t,e.render(),e.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),e}return(0,b.Z)(r,[{key:"render",value:function(){this.container=Hf.createElement("rect",!0);var e=this.options.attrs;if("function"===typeof e){var n=t.getDefaults();this.setAttrs(Object.assign(Object.assign({},n.attrs),e(this)))}else this.setAttrs(e);this.addClass(this.prefixClassName("edge-tool-segment"))}},{key:"updatePosition",value:function(t,e,n,r){var i=r.getClosestPoint(new Ol(t,e))||new Ol(t,e),o=Wu().translate(i.x,i.y);if(i.equals({x:t,y:e}))o=o.rotate(n);else{var a=new Ml(t,e,i.x,i.y).vector().vectorAngle(new Ol(1,0));0!==a&&(a+=90),o=o.rotate(a)}this.setAttrs({transform:Yu(o),cursor:n%180===0?"row-resize":"col-resize"})}},{key:"onMouseDown",value:function(t){this.options.guard(t)||(this.trigger("change",{e:t,handle:this}),t.stopPropagation(),t.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},t.data))}},{key:"onMouseMove",value:function(t){this.emit("changing",{e:t,handle:this})}},{key:"onMouseUp",value:function(t){this.emit("changed",{e:t,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}},{key:"show",value:function(){this.container.style.display=""}},{key:"hide",value:function(){this.container.style.display="none"}}]),r}(Hf);t.Handle=e}(fg||(fg={})),function(t){t.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:function(e){return new t.Handle(e)},anchor:ag})}(fg||(fg={}));var gg=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"type",get:function(){return this.options.type}},{key:"onRender",value:function(){Ns(this.container,this.prefixClassName("edge-tool-".concat(this.type,"-anchor"))),this.toggleArea(!1),this.update()}},{key:"update",value:function(){var t=this.type;return this.cellView.getTerminalView(t)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}},{key:"updateAnchor",value:function(){var t=this.childNodes;if(t){var e=t.anchor;if(e){var n=this.type,r=this.cellView,i=this.options,o=r.getTerminalAnchor(n),a=r.cell.prop([n,"anchor"]);e.setAttribute("transform","translate(".concat(o.x,", ").concat(o.y,")"));var s=a?i.customAnchorAttrs:i.defaultAnchorAttrs;s&&Object.keys(s).forEach((function(t){e.setAttribute(t,s[t])}))}}}},{key:"updateArea",value:function(){var t=this.childNodes;if(t){var e=t.area;if(e){var n=this.type,r=this.cellView,i=r.getTerminalView(n);if(i){var o,a,s,u=i.cell,l=r.getTerminalMagnet(n),c=this.options.areaPadding||0;Number.isFinite(c)||(c=0),i.isEdgeElement(l)?(a=0,s=(o=i.getBBox()).getCenter()):(o=i.getUnrotatedBBoxOfElement(l),a=u.getAngle(),s=o.getCenter(),a&&s.rotate(-a,u.getBBox().getCenter())),o.inflate(c),ru(e,{x:-o.width/2,y:-o.height/2,width:o.width,height:o.height,transform:"translate(".concat(s.x,", ").concat(s.y,") rotate(").concat(a,")")})}}}}},{key:"toggleArea",value:function(t){if(this.childNodes){var e=this.childNodes.area;e&&(e.style.display=t?"":"none")}}},{key:"onMouseDown",value:function(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}},{key:"resetAnchor",value:function(t){var e=this.type,n=this.cell;t?n.prop([e,"anchor"],t,{rewrite:!0,ui:!0,toolId:this.cid}):n.removeProp([e,"anchor"],{ui:!0,toolId:this.cid})}},{key:"onMouseMove",value:function(t){var e=this.type,n=this.cellView,r=n.getTerminalView(e);if(null!=r){var i,o=this.normalizeEvent(t),a=r.cell,s=n.getTerminalMagnet(e),u=this.graph.coord.clientToLocalPoint(o.clientX,o.clientY),l=this.options.snap;if("function"===typeof l){var c=nt(l,n,u,r,s,e,n,this);u=Ol.create(c)}if(this.options.restrictArea)if(r.isEdgeElement(s)){var h=r.getClosestPoint(u);h&&(u=h)}else{var f=r.getUnrotatedBBoxOfElement(s),g=a.getAngle(),d=a.getBBox().getCenter(),v=u.clone().rotate(g,d);f.containsPoint(v)||(u=f.getNearestPointToPoint(v).rotate(-g,d))}var p=this.options.anchor;"function"===typeof p&&(i=nt(p,n,u,r,s,e,n,this)),this.resetAnchor(i),this.update()}}},{key:"onMouseUp",value:function(t){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var e=this.cellView;this.options.removeRedundancies&&e.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}},{key:"onDblClick",value:function(){var t=this.options.resetAnchor;t&&this.resetAnchor(!0===t?void 0:t),this.update()}}]),n}(Kf.ToolItem);!function(t){t.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:ag,snap:function(t,e,n,r,i,o){var a=o.options.snapRadius||0,s="source"===r,u=s?0:-1,l=this.cell.getVertexAt(u)||this.getTerminalAnchor(s?"target":"source");return l&&(Math.abs(l.x-t.x)<a&&(t.x=l.x),Math.abs(l.y-t.y)<a&&(t.y=l.y)),t}})}(gg||(gg={}));var dg=gg.define({name:"source-anchor",type:"source"}),vg=gg.define({name:"target-anchor",type:"target"}),pg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},yg=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"type",get:function(){return this.options.type}},{key:"ratio",get:function(){return this.options.ratio}},{key:"init",value:function(){if(this.options.attrs){var t=this.options.attrs,e=t.class,n=pg(t,["class"]);this.setAttrs(n,this.container),e&&Ns(this.container,e)}}},{key:"onRender",value:function(){Ns(this.container,this.prefixClassName("edge-tool-".concat(this.type,"-arrowhead"))),this.update()}},{key:"update",value:function(){var t=this.ratio,e=this.cellView,n=e.getTangentAtRatio(t),r=n?n.start:e.getPointAtRatio(t),i=n&&n.vector().vectorAngle(new Ol(1,0))||0;if(!r)return this;var o=Wu().translate(r.x,r.y).rotate(i);return Ku(this.container,o,{absolute:!0}),this}},{key:"onMouseDown",value:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.cellView;if(e.can("arrowheadMovable")){e.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});var n=this.graph.snapToGrid(t.clientX,t.clientY),r=e.prepareArrowheadDragging(this.type,{x:n.x,y:n.y,options:Object.assign(Object.assign({},this.options),{toolId:this.cid})});this.cellView.setEventData(t,r),this.delegateDocumentEvents(this.options.documentEvents,t.data),e.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}}},{key:"onMouseMove",value:function(t){var e=this.normalizeEvent(t),n=this.graph.snapToGrid(e.clientX,e.clientY);this.cellView.onMouseMove(e,n.x,n.y),this.update()}},{key:"onMouseUp",value:function(t){this.undelegateDocumentEvents();var e=this.normalizeEvent(t),n=this.cellView,r=this.graph.snapToGrid(e.clientX,e.clientY);n.onMouseUp(e,r.x,r.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",n.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}]),n}(Kf.ToolItem);!function(t){t.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})}(yg||(yg={}));var mg=yg.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),bg=yg.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),kg=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){var t;return(0,m.Z)(this,n),(t=e.apply(this,arguments)).labelIndex=-1,t.distance=.5,t.dblClick=t.onCellDblClick.bind((0,Al.Z)(t)),t}return(0,b.Z)(n,[{key:"onRender",value:function(){var t=this.cellView;t&&t.on("cell:dblclick",this.dblClick)}},{key:"createElement",value:function(){var t=[this.prefixClassName("".concat(this.cell.isEdge()?"edge":"node","-tool-editor")),this.prefixClassName("cell-tool-editor")];this.editor=Kf.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}},{key:"removeElement",value:function(){this.undelegateDocumentEvents(),this.editor&&(this.container.removeChild(this.editor),this.editor=null)}},{key:"updateEditor",value:function(){var t=this.cell,e=this.editor;if(e){var n=e.style;t.isNode()?this.updateNodeEditorTransform():t.isEdge()&&this.updateEdgeEditorTransform();var r=this.options.attrs;n.fontSize="".concat(r.fontSize,"px"),n.fontFamily=r.fontFamily,n.color=r.color,n.backgroundColor=r.backgroundColor;var i=this.getCellText()||"";return e.innerText=i,this.setCellText(""),this}}},{key:"updateNodeEditorTransform",value:function(){var t=this.graph,e=this.cell,n=this.editor;if(n){var r=Ol.create(),i=20,o="",a=this.options,s=a.x,u=a.y,l=this.options,c=l.width,h=l.height;if("undefined"!==typeof s&&"undefined"!==typeof u){var f=e.getBBox();s=os(s,f.width),u=os(u,f.height),r=f.topLeft.translate(s,u),i=f.width-2*s}else{var g=e.getBBox();r=g.center,i=g.width-4,o="translate(-50%, -50%)"}var d=t.scale(),v=n.style;r=t.localToGraph(r),v.left="".concat(r.x,"px"),v.top="".concat(r.y,"px"),v.transform="scale(".concat(d.sx,", ").concat(d.sy,") ").concat(o),v.minWidth="".concat(i,"px"),"number"===typeof c&&(v.width="".concat(c,"px")),"number"===typeof h&&(v.height="".concat(h,"px"))}}},{key:"updateEdgeEditorTransform",value:function(){if(this.event){var t=this.graph,e=this.editor;if(e){var n=Ol.create(),r=20,i=e.style,o=this.event.target,a=o.parentElement;if(a&&js(a,this.prefixClassName("edge-label"))){var s=a.getAttribute("data-index")||"0";this.labelIndex=parseInt(s,10);var u=$u(a.getAttribute("transform")).translation;n=new Ol(u.tx,u.ty),r=Kh.getBBox(o).width}else{if(!this.options.labelAddable)return this;n=t.clientToLocal(Ol.create(this.event.clientX,this.event.clientY));var l=this.cellView.path.closestPointLength(n);this.distance=l,this.labelIndex=-1}n=t.localToGraph(n);var c=t.scale();i.left="".concat(n.x,"px"),i.top="".concat(n.y,"px"),i.minWidth="".concat(r,"px"),i.transform="scale(".concat(c.sx,", ").concat(c.sy,") translate(-50%, -50%)")}}}},{key:"onDocumentMouseUp",value:function(t){if(this.editor&&t.target!==this.editor){var e=this.editor.innerText.replace(/\n$/,"")||"";this.setCellText(""!==e?e:null),this.removeElement()}}},{key:"onCellDblClick",value:function(t){var e=t.e;this.editor||(e.stopPropagation(),this.removeElement(),this.event=e,this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents))}},{key:"onMouseDown",value:function(t){t.stopPropagation()}},{key:"autoFocus",value:function(){var t=this;setTimeout((function(){t.editor&&(t.editor.focus(),t.selectText())}))}},{key:"selectText",value:function(){if(window.getSelection&&this.editor){var t=document.createRange(),e=window.getSelection();t.selectNodeContents(this.editor),e.removeAllRanges(),e.addRange(t)}}},{key:"getCellText",value:function(){var t=this.options.getText;if("function"===typeof t)return nt(t,this.cellView,{cell:this.cell,index:this.labelIndex});if("string"===typeof t){if(this.cell.isNode())return this.cell.attr(t);if(this.cell.isEdge()&&-1!==this.labelIndex)return this.cell.prop("labels/".concat(this.labelIndex,"/attrs/").concat(t))}}},{key:"setCellText",value:function(t){var e=this.options.setText;if("function"!==typeof e){if("string"===typeof e){if(this.cell.isNode())return void(null!==t&&this.cell.attr(e,t));if(this.cell.isEdge()){var n=this.cell;if(-1===this.labelIndex){if(t){var r={position:{distance:this.distance},attrs:{}};qi(r,"attrs/".concat(e),t),n.appendLabel(r)}}else null!==t?n.prop("labels/".concat(this.labelIndex,"/attrs/").concat(e),t):"number"===typeof this.labelIndex&&n.removeLabelAt(this.labelIndex)}}}else nt(e,this.cellView,{cell:this.cell,value:t,index:this.labelIndex,distance:this.distance})}},{key:"onRemove",value:function(){var t=this.cellView;t&&t.off("cell:dblclick",this.dblClick),this.removeElement()}}]),n}(Kf.ToolItem);!function(t){t.config({tagName:"div",isSVGElement:!1,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mouseup:"onDocumentMouseUp",touchend:"onDocumentMouseUp",touchcancel:"onDocumentMouseUp"}})}(kg||(kg={})),function(t){t.NodeEditor=t.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:"text/text",setText:"text/text"}),t.EdgeEditor=t.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:"label/text",setText:"label/text"})}(kg||(kg={}));var wg,xg,Pg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};!function(t){t.presets={boundary:cg,button:ug,"button-remove":ug.Remove,"node-editor":kg.NodeEditor},t.registry=$l.create({type:"node tool",process:function(t,e){if("function"===typeof e)return e;var n=Kf.ToolItem,r=e.inherit,i=Pg(e,["inherit"]);if(r){var o=this.get(r);null==o?this.onNotFound(r,"inherited"):n=o}return null==i.name&&(i.name=t),n.define.call(n,i)}}),t.registry.register(t.presets,!0)}(wg||(wg={})),function(t){t.presets={boundary:cg,vertices:hg,segments:fg,button:ug,"button-remove":ug.Remove,"source-anchor":dg,"target-anchor":vg,"source-arrowhead":mg,"target-arrowhead":bg,"edge-editor":kg.EdgeEditor},t.registry=$l.create({type:"edge tool",process:function(t,e){if("function"===typeof e)return e;var n=Kf.ToolItem,r=e.inherit,i=Pg(e,["inherit"]);if(r){var o=this.get(r);null==o?this.onNotFound(r,"inherited"):n=o}return null==i.name&&(i.name=t),n.define.call(n,i)}}),t.registry.register(t.presets,!0)}(xg||(xg={}));var Ag=Lg("center"),Cg=Lg("topCenter"),Og=Lg("bottomCenter"),Eg=Lg("leftMiddle"),Mg=Lg("rightMiddle"),Sg=Lg("topLeft"),Tg=Lg("topRight"),jg=Lg("bottomLeft"),Ng=Lg("bottomRight");function Lg(t){return function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.rotate?e.getUnrotatedBBoxOfElement(n):e.getBBoxOfElement(n),a=o[t];a.x+=os(i.dx,o.width),a.y+=os(i.dy,o.height);var s=e.cell;return i.rotate?a.rotate(-s.getAngle(),s.getBBox().getCenter()):a}}function Bg(t){return function(e,n,r,i){if(r instanceof Element){var o,a=this.graph.findViewByElem(r);if(a)if(a.isEdgeElement(r))o=Ig(a,null!=i.fixedAt?i.fixedAt:"50%");else o=a.getBBoxOfElement(r).getCenter();else o=new Ol;return t.call(this,e,n,o,i)}return t.apply(this,arguments)}}function Ig(t,e){var n=is(e),r="string"===typeof e?parseFloat(e):e;return n?t.getPointAtRatio(r/100):t.getPointAtLength(r)}var Dg,Rg=Bg((function(t,e,n,r){var i=t.cell.getAngle(),o=t.getBBoxOfElement(e),a=o.getCenter(),s=o.getTopLeft(),u=o.getBottomRight(),l=r.padding;if(Number.isFinite(l)||(l=0),s.y+l<=n.y&&n.y<=u.y-l){var c=n.y-a.y;a.x+=0===i||180===i?0:1*c/Math.tan(xl.toRad(i)),a.y+=c}else if(s.x+l<=n.x&&n.x<=u.x-l){var h=n.x-a.x;a.y+=90===i||270===i?0:h*Math.tan(xl.toRad(i)),a.x+=h}return a})),Vg=function(t,e,n,r,i){var o=t.cell.getConnectionPoint(this.cell,i);return(r.dx||r.dy)&&o.translate(r.dx||0,r.dy||0),o},Zg=Bg((function(t,e,n,r){var i,o,a=0,s=t.cell;r.rotate?(i=t.getUnrotatedBBoxOfElement(e),o=s.getBBox().getCenter(),a=s.getAngle()):i=t.getBBoxOfElement(e);var u=r.padding;null!=u&&Number.isFinite(u)&&i.inflate(u),r.rotate&&n.rotate(a,o);var l,c=i.getNearestSideToPoint(n);switch(c){case"left":l=i.getLeftMiddle();break;case"right":l=i.getRightMiddle();break;case"top":l=i.getTopCenter();break;case"bottom":l=i.getBottomCenter()}var h=r.direction;return"H"===h?"top"!==c&&"bottom"!==c||(l=n.x<=i.x+i.width?i.getLeftMiddle():i.getRightMiddle()):"V"===h&&(l=n.y<=i.y+i.height?i.getTopCenter():i.getBottomCenter()),r.rotate?l.rotate(-a,o):l}));!function(t){t.presets=f,t.registry=$l.create({type:"node endpoint"}),t.registry.register(t.presets,!0)}(Dg||(Dg={}));var zg,Fg=function(t,e,n,r){var i=null!=r.ratio?r.ratio:.5;return i>1&&(i/=100),t.getPointAtRatio(i)},Gg=function(t,e,n,r){var i=null!=r.length?r.length:20;return t.getPointAtLength(i)},_g=function(t,e,n,r){var i=t.getClosestPoint(n);return null!=i?i:new Ol},qg=Bg(_g),Hg=Bg((function(t,e,n,r){var i=1e6,o=t.getConnection(),a=t.getConnectionSubdivisions(),s=new Ml(n.clone().translate(0,i),n.clone().translate(0,-i)),u=new Ml(n.clone().translate(i,0),n.clone().translate(-i,0)),l=s.intersect(o,{segmentSubdivisions:a}),c=u.intersect(o,{segmentSubdivisions:a}),h=[];return l&&h.push.apply(h,(0,A.Z)(l)),c&&h.push.apply(h,(0,A.Z)(c)),h.length>0?n.closest(h):null!=r.fallbackAt?Ig(t,r.fallbackAt):nt(_g,this,t,e,n,r)}));function Ug(t,e,n){var r;if("object"===typeof n){if(Number.isFinite(n.y)){var i=new Ml(e,t).parallel(n.y);e=i.start,t=i.end}r=n.x}else r=n;if(null==r||!Number.isFinite(r))return t;var o=t.distance(e);return 0===r&&o>0?t:t.move(e,-Math.min(r,o-1))}function Wg(t){var e=t.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}!function(t){t.presets=g,t.registry=$l.create({type:"edge endpoint"}),t.registry.register(t.presets,!0)}(zg||(zg={}));var Jg=function(t,e,n,r){var i=e.getBBoxOfElement(n);r.stroked&&i.inflate(Wg(n)/2);var o=t.intersect(i);return Ug(o&&o.length?t.start.closest(o):t.end,t.start,r.offset)},Xg=function(t,e,n,r,i){var o=e.cell,a=o.isNode()?o.getAngle():0;if(0===a)return nt(Jg,this,t,e,n,r,i);var s=e.getUnrotatedBBoxOfElement(n);r.stroked&&s.inflate(Wg(n)/2);var u=s.getCenter(),l=t.clone().rotate(a,u),c=l.setLength(1e6).intersect(s);return Ug(c&&c.length?l.start.closest(c).rotate(-a,u):t.end,t.start,r.offset)},Yg=function(t,e,n,r){var i,o,a=t.end,s=r.selector;if(i="string"===typeof s?e.findOne(s):Array.isArray(s)?_i(n,s):function(t){if(null==t)return null;var e=t;do{var n=e.tagName;if("string"!==typeof n)return null;if("G"===(n=n.toUpperCase()))e=e.firstElementChild;else{if("TITLE"!==n)break;e=e.nextElementSibling}}while(e);return e}(n),!Rs(i)){if(i===n||!Rs(n))return a;i=n}var u,l=e.getShapeOfElement(i),c=e.getMatrixOfElement(i),h=e.getRootTranslatedMatrix(),f=e.getRootRotatedMatrix(),g=h.multiply(f).multiply(c),d=g.inverse(),v=Kh.transformLine(t,d),p=v.start.clone(),y=e.getDataOfElement(i);if(!1===r.insideout){null==y.shapeBBox&&(y.shapeBBox=l.bbox());var m=y.shapeBBox;if(null!=m&&m.containsPoint(p))return a}if(!0===r.extrapolate&&v.setLength(1e6),Yl.isPath(l)){var b=r.precision||2;null==y.segmentSubdivisions&&(y.segmentSubdivisions=l.getSegmentSubdivisions({precision:b})),u={precision:b,segmentSubdivisions:y.segmentSubdivisions},o=v.intersect(l,u)}else o=v.intersect(l);o?Array.isArray(o)&&(o=p.closest(o)):!0===r.sticky&&(o=El.isRectangle(l)?l.getNearestPointToPoint(p):Sl.isEllipse(l)?l.intersectsWithLineFromCenterToPoint(p):l.closestPoint(p,u));var k=o?Kh.transformPoint(o,g):a,w=r.offset||0;return!1!==r.stroked&&("object"===typeof w?(null==(w=Object.assign({},w)).x&&(w.x=0),w.x+=Wg(i)/2):w+=Wg(i)/2),Ug(k,t.start,w)};var $g,Qg=function(t,e,n,r){var i=r.alignOffset,o=r.align;return o&&function(t,e){var n,r,i,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=t.start,u=t.end;switch(e){case"left":o="x",n=u,r=s,i=-1;break;case"right":o="x",n=s,r=u,i=1;break;case"top":o="y",n=u,r=s,i=-1;break;case"bottom":o="y",n=s,r=u,i=1;break;default:return}s[o]<u[o]?n[o]=r[o]:r[o]=n[o],Number.isFinite(a)&&(n[o]+=i*a,r[o]+=i*a)}(t,o,i),Ug(t.end,t.start,r.offset)};!function(t){t.presets=d,t.registry=$l.create({type:"connection point"}),t.registry.register(t.presets,!0)}($g||($g={}));var Kg=function(t){return(0,A.Z)(t)},td=function(t,e,n){var r,i,o,a=e.side||"bottom",s=as(e.padding||40),u=n.sourceBBox,l=n.targetBBox,c=u.getCenter(),h=l.getCenter();switch(a){case"top":o=-1,r="y",i="height";break;case"left":o=-1,r="x",i="width";break;case"right":o=1,r="x",i="width";break;default:o=1,r="y",i="height"}return c[r]+=o*(u[i]/2+s[a]),h[r]+=o*(l[i]/2+s[a]),o*(c[r]-h[r])>0?h[r]=c[r]:c[r]=h[r],[c.toJSON()].concat((0,A.Z)(t),[h.toJSON()])};function ed(t){return new El(t.x,t.y,0,0)}function nd(){var t=as((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).padding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function rd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.sourceBBox.clone().moveAndExpand(nd(e))}function id(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.targetBBox.clone().moveAndExpand(nd(e))}var od,ad=function(t,e,n){var r=rd(n,e),i=id(n,e),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.sourceAnchor?t.sourceAnchor:rd(t,e).getCenter()}(n,e),a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.targetAnchor?t.targetAnchor:id(t,e).getCenter()}(n,e);r=r.union(ed(o)),i=i.union(ed(a));var s=t.map((function(t){return Ol.create(t)}));s.unshift(o),s.push(a);for(var u=null,l=[],c=0,h=s.length-1;c<h;c+=1){var f=null,g=s[c],d=s[c+1],v=null!=od.getBearing(g,d);if(0===c)c+1===h?r.intersectsWithRect(i.clone().inflate(1))?f=od.insideNode(g,d,r,i):v||(f=od.nodeToNode(g,d,r,i)):r.containsPoint(d)?f=od.insideNode(g,d,r,ed(d).moveAndExpand(nd(e))):v||(f=od.nodeToVertex(g,d,r));else if(c+1===h){var p=v&&od.getBearing(d,g)===u;i.containsPoint(g)||p?f=od.insideNode(g,d,ed(g).moveAndExpand(nd(e)),i,u):v||(f=od.vertexToNode(g,d,i,u))}else v||(f=od.vertexToVertex(g,d,u));f?(l.push.apply(l,(0,A.Z)(f.points)),u=f.direction):u=od.getBearing(g,d),c+1<h&&l.push(d)}return l};!function(t){var e={N:"S",S:"N",E:"W",W:"E"},n={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function r(t,e,n){var r=new Ol(t.x,e.y);return n.containsPoint(r)&&(r=new Ol(e.x,t.y)),r}function i(t,e){return t["W"===e||"E"===e?"width":"height"]}function o(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function a(t,n,r){var i=new Ol(t.x,n.y),a=new Ol(n.x,t.y),s=o(t,i),u=o(t,a),l=r?e[r]:null,c=s===r||s!==l&&(u===l||u!==r)?i:a;return{points:[c],direction:o(c,n)}}function s(t,e,n){var i=r(t,e,n);return{points:[i],direction:o(i,e)}}t.getBBoxSize=i,t.getBearing=o,t.vertexToVertex=a,t.nodeToVertex=s,t.vertexToNode=function(t,e,n,a){var s,u=[new Ol(t.x,e.y),new Ol(e.x,t.y)],l=u.filter((function(t){return!n.containsPoint(t)})),c=l.filter((function(e){return o(e,t)!==a}));if(c.length>0)return{points:[s=(s=c.filter((function(e){return o(t,e)===a})).pop())||c[0]],direction:o(s,e)};s=Do(u,l)[0];var h=Ol.create(e).move(s,-i(n,a)/2);return{points:[r(h,t,n),h],direction:o(h,e)}},t.nodeToNode=function(t,e,n,r){var u=s(e,t,r),l=u.points[0];if(n.containsPoint(l)){var c=(u=s(t,e,n)).points[0];if(r.containsPoint(c)){var h=Ol.create(t).move(c,-i(n,o(t,c))/2),f=Ol.create(e).move(l,-i(r,o(e,l))/2),g=new Ml(h,f).getCenter(),d=s(t,g,n),v=a(g,e,d.direction);u.points=[d.points[0],v.points[0]],u.direction=v.direction}}return u},t.insideNode=function(t,e,i,a,s){var u,l,c,h,f=i.union(a).inflate(1),g=f.getCenter(),d=g.distance(e)>g.distance(t),v=d?e:t,p=d?t:e;return s?(u=Ol.fromPolar(f.width+f.height,n[s],v),u=f.getNearestPointToPoint(u).move(u,-1)):u=f.getNearestPointToPoint(v).move(v,1),l=r(u,p,f),u.round().equals(l.round())?(l=Ol.fromPolar(f.width+f.height,xl.toRad(u.theta(v))+Math.PI/2,p),c=r(u,l=f.getNearestPointToPoint(l).move(p,1).round(),f),h=d?[l,c,u]:[u,c,l]):h=d?[l,u]:[u,l],{points:h,direction:o(d?u:l,e)}}}(od||(od={}));var sd={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeNodes:[],excludeShapes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return ud(this.step,this)},directions:function(){var t=ud(this.step,this),e=ud(this.cost,this);return[{cost:e,offsetX:t,offsetY:0},{cost:e,offsetX:-t,offsetY:0},{cost:e,offsetX:0,offsetY:t},{cost:e,offsetX:0,offsetY:-t}]},penalties:function(){var t=ud(this.step,this);return{0:0,45:t/2,90:t/2}},paddingBox:function(){var t=ud(this.step,this);return{x:-t,y:-t,width:2*t,height:2*t}},fallbackRouter:ad,draggingRouter:null,snapToGrid:!0};function ud(t,e){return"function"===typeof t?t.call(e):t}var ld=function(){function t(){(0,m.Z)(this,t),this.items=[],this.hash={},this.values={}}return(0,b.Z)(t,[{key:"add",value:function(t,e){var n=this;this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=1,this.values[t]=e;var r=xo(this.items,t,(function(t){return n.values[t]}));this.items.splice(r,0,t)}},{key:"pop",value:function(){var t=this.items.shift();return t&&(this.hash[t]=2),t}},{key:"isOpen",value:function(t){return 1===this.hash[t]}},{key:"isClose",value:function(t){return 2===this.hash[t]}},{key:"isEmpty",value:function(){return 0===this.items.length}}]),t}(),cd=function(){function t(e){(0,m.Z)(this,t),this.options=e,this.mapGridSize=100,this.map={}}return(0,b.Z)(t,[{key:"build",value:function(t,e){var n=this.options,r=n.excludeTerminals.reduce((function(n,r){var i=e[r];if(i){var o=t.getCell(i.cell);o&&n.push(o)}return n}),[]),i=[],o=t.getCell(e.getSourceCellId());o&&(i=io(i,o.getAncestors().map((function(t){return t.id}))));var a=t.getCell(e.getTargetCellId());a&&(i=io(i,a.getAncestors().map((function(t){return t.id}))));var s=this.mapGridSize;return t.getNodes().reduce((function(t,e){var o=r.some((function(t){return t.id===e.id})),a=!!e.shape&&n.excludeShapes.includes(e.shape),u=n.excludeNodes.some((function(t){return"string"===typeof t?e.id===t:t===e})),l=i.includes(e.id),c=a||o||u||l;if(e.isVisible()&&!c)for(var h=e.getBBox().moveAndExpand(n.paddingBox),f=h.getOrigin().snapToGrid(s),g=h.getCorner().snapToGrid(s),d=f.x;d<=g.x;d+=s)for(var v=f.y;v<=g.y;v+=s){var p=new Ol(d,v).toString();null==t[p]&&(t[p]=[]),t[p].push(h)}return t}),this.map),this}},{key:"isAccessible",value:function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString(),n=this.map[e];return!n||n.every((function(e){return!e.containsPoint(t)}))}}]),t}();function hd(t,e){var n=t.sourceBBox.clone();return e&&e.paddingBox?n.moveAndExpand(e.paddingBox):n}function fd(t,e){var n=t.targetBBox.clone();return e&&e.paddingBox?n.moveAndExpand(e.paddingBox):n}function gd(t,e){return t.sourceAnchor?t.sourceAnchor:hd(t,e).getCenter()}function dd(t,e,n,r,i){var o=360/n,a=t.theta(function(t,e,n,r){var i=r.step,o=e.x-t.x,a=e.y-t.y,s=o/n.x,u=a/n.y,l=s*i,c=u*i;return new Ol(t.x+l,t.y+c)}(t,e,r,i)),s=xl.normalize(a+o/2);return o*Math.floor(s/o)}function vd(t,e){var n=Math.abs(t-e);return n>180?360-n:n}function pd(t,e){if(!t)return e;var n=Math.abs(t),r=Math.round(n/e);return r?e+(n-r*e)/r:n}function yd(t,e){return t.round(e)}function md(t,e,n){return yd(function(t,e){var n=e.source,r=Pl.snapToGrid(t.x-n.x,e.x)+n.x,i=Pl.snapToGrid(t.y-n.y,e.y)+n.y;return new Ol(r,i)}(t.clone(),e),n)}function bd(t){return t.toString()}function kd(t){return new Ol(0===t.x?0:Math.abs(t.x)/t.x,0===t.y?0:Math.abs(t.y)/t.y)}function wd(t,e){for(var n=1/0,r=0,i=e.length;r<i;r+=1){var o=t.manhattanDistance(e[r]);o<n&&(n=o)}return n}function xd(t,e,n,r,i){var o=i.precision,a=i.directionMap,s=t.diff(e.getCenter()),u=Object.keys(a).reduce((function(i,u){if(n.includes(u)){for(var l,c=a[u],h=new Ol(t.x+c.x*(Math.abs(s.x)+e.width),t.y+c.y*(Math.abs(s.y)+e.height)),f=new Ml(t,h).intersect(e)||[],g=null,d=0;d<f.length;d+=1){var v=f[d],p=t.squaredDistance(v);(null==l||p>l)&&(l=p,g=v)}if(g){var y=md(g,r,o);e.containsPoint(y)&&(y=md(y.translate(c.x*r.x,c.y*r.y),r,o)),i.push(y)}}return i}),[]);return e.containsPoint(t)||u.push(md(t,r,o)),u}function Pd(t,e,n,r,i){for(var o,a=[],s=kd(i.diff(n)),u=bd(n),l=t[u];l;){var c=kd((o=e[u]).diff(l));c.equals(s)||(a.unshift(o),s=c),l=t[u=bd(l)]}var h=e[u];return kd(h.diff(r)).equals(s)||a.unshift(h),a}function Ad(t,e,n,r,i){var o,a,s=i.precision;o=El.isRectangle(e)?yd(gd(t,i).clone(),s):yd(e.clone(),s),a=El.isRectangle(n)?yd(function(t,e){return t.targetAnchor?t.targetAnchor:fd(t,e).getCenter()}(t,i).clone(),s):yd(n.clone(),s);var u,l,c,h,f,g=(u=i.step,c=a,{source:(l=o).clone(),x:pd(c.x-l.x,u),y:pd(c.y-l.y,u)}),d=o,v=a;if(h=El.isRectangle(e)?xd(d,e,i.startDirections,g,i):[d],f=El.isRectangle(n)?xd(a,n,i.endDirections,g,i):[v],h=h.filter((function(t){return r.isAccessible(t)})),f=f.filter((function(t){return r.isAccessible(t)})),h.length>0&&f.length>0){for(var p=new ld,y={},m={},b={},k=0,w=h.length;k<w;k+=1){var x=h[k],P=bd(x);p.add(P,wd(x,f)),y[P]=x,b[P]=0}for(var A,C,O=i.previousDirectionAngle,E=void 0===O,M=function(t,e){var n=e.step;return e.directions.forEach((function(e){e.gridOffsetX=e.offsetX/n*t.x,e.gridOffsetY=e.offsetY/n*t.y})),e.directions}(g,i),S=M.length,T=f.reduce((function(t,e){var n=bd(e);return t.push(n),t}),[]),j=Ol.equalPoints(h,f),N=i.maxLoopCount;!p.isEmpty()&&N>0;){var L=p.pop(),B=y[L],I=m[L],D=b[L],R=B.equals(d),V=null==I,Z=void 0;if(Z=V?E?R?null:dd(d,B,S,g,i):O:dd(I,B,S,g,i),!(V&&j)&&T.indexOf(L)>=0)return i.previousDirectionAngle=Z,Pd(m,y,B,d,v);for(var z=0;z<S;z+=1){var F=(A=M[z]).angle;if(C=vd(Z,F),E&&R||!(C>i.maxDirectionChange)){var G=md(B.clone().translate(A.gridOffsetX||0,A.gridOffsetY||0),g,s),_=bd(G);if(!p.isClose(_)&&r.isAccessible(G)){if(T.indexOf(_)>=0)if(!G.equals(v))if(vd(F,dd(G,v,S,g,i))>i.maxDirectionChange)continue;var q=D+A.cost+(R?0:i.penalties[C]);(!p.isOpen(_)||q<b[_])&&(y[_]=G,m[_]=B,b[_]=q,p.add(_,q+wd(G,f)))}}}N-=1}}return i.fallbackRoute?nt(i.fallbackRoute,this,d,v,i):null}var Cd=function(t,e,n){for(var r,i,o=function(t){var e=Object.keys(t).reduce((function(e,n){return e[n]="fallbackRouter"===n||"draggingRouter"===n||"fallbackRoute"===n?t[n]:ud(t[n],t),e}),{});if(e.padding){var n=as(e.padding);e.paddingBox={x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}return e.directions.forEach((function(t){var e=new Ol(0,0),n=new Ol(t.offsetX,t.offsetY);t.angle=xl.normalize(e.theta(n))})),e}(e),a=hd(n,o),s=fd(n,o),u=gd(n,o),l=new cd(o).build(n.graph.model,n.cell),c=t.map((function(t){return Ol.create(t)})),h=[],f=u,g=0,d=c.length;g<=d;g+=1){var v=null;if(r=i||a,null==(i=c[g])){i=s;var p=n.cell;if((null==p.getSourceCellId()||null==p.getTargetCellId())&&"function"===typeof o.draggingRouter){var y=r===a?u:r,m=i.getOrigin();v=nt(o.draggingRouter,n,y,m,o)}}if(null==v&&(v=Ad(n,r,i,l,o)),null===v)return console.warn("Unable to execute manhattan algorithm, use orth instead"),nt(o.fallbackRouter,this,t,o,n);var b=v[0];b&&b.equals(f)&&v.shift(),f=v[v.length-1]||f,h.push.apply(h,(0,A.Z)(v))}return o.snapToGrid?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(t.length<=1)return t;for(var n=0,r=t.length;n<r-1;n+=1){var i=t[n],o=t[n+1];if(i.x===o.x){var a=e*Math.round(i.x/e);i.x!==a&&(i.x=a,o.x=a)}else if(i.y===o.y){var s=e*Math.round(i.y/e);i.y!==s&&(i.y=s,o.y=s)}}return t}(h,n.graph.grid.getGridSize()):h},Od=function(t,e,n){return nt(Cd,this,t,Object.assign(Object.assign({},sd),e),n)},Ed={maxDirectionChange:45,directions:function(){var t=ud(this.step,this),e=ud(this.cost,this),n=Math.ceil(Math.sqrt(t*t<<1));return[{cost:e,offsetX:t,offsetY:0},{cost:n,offsetX:t,offsetY:t},{cost:e,offsetX:0,offsetY:t},{cost:n,offsetX:-t,offsetY:t},{cost:e,offsetX:-t,offsetY:0},{cost:n,offsetX:-t,offsetY:-t},{cost:e,offsetX:0,offsetY:-t},{cost:n,offsetX:t,offsetY:-t}]},fallbackRoute:function(t,e,n){var r=t.theta(e),i=[],o={x:e.x,y:t.y},a={x:t.x,y:e.y};if(r%180>90){var s=o;o=a,a=s}var u=r%90<45?o:a,l=new Ml(t,u),c=90*Math.ceil(r/90),h=Ol.fromPolar(l.squaredLength(),xl.toRad(c+135),u),f=new Ml(e,h),g=l.intersectsWithLine(f),d=g||e,v=g?d:t,p=360/n.directions.length,y=v.theta(e),m=xl.normalize(y+p/2),b=p*Math.floor(m/p);return n.previousDirectionAngle=b,d&&i.push(d.round()),i.push(e),i}},Md=function(t,e,n){return nt(Od,this,t,Object.assign(Object.assign({},Ed),e),n)},Sd=function(t,e,n){var r,i,o,a=e.offset||32,s=null==e.min?16:e.min,u=0,l=e.direction,c=n.sourceBBox,h=n.targetBBox,f=c.getCenter(),g=h.getCenter();if("number"===typeof a&&(u=a),null==l){var d=h.left-c.right,v=h.top-c.bottom;d>=0&&v>=0?l=d>=v?"L":"T":d<=0&&v>=0?l=(d=c.left-h.right)>=0&&d>=v?"R":"T":d>=0&&v<=0?l=(v=c.top-h.bottom)>=0?d>=v?"L":"B":"L":(d=c.left-h.right,v=c.top-h.bottom,l=d>=0&&v>=0?d>=v?"R":"B":d<=0&&v>=0?"B":d>=0&&v<=0||Math.abs(d)>Math.abs(v)?"R":"B")}"H"===l?l=g.x-f.x>=0?"L":"R":"V"===l&&(l=g.y-f.y>=0?"T":"B"),"center"===a&&("L"===l?u=(h.left-c.right)/2:"R"===l?u=(c.left-h.right)/2:"T"===l?u=(h.top-c.bottom)/2:"B"===l&&(u=(c.top-h.bottom)/2));var p="L"===l||"R"===l;if(p){if(g.y===f.y)return(0,A.Z)(t);o="L"===l?1:-1,r="x",i="width"}else{if(g.x===f.x)return(0,A.Z)(t);o="T"===l?1:-1,r="y",i="height"}var y=f.clone(),m=g.clone();if(y[r]+=o*(c[i]/2+u),m[r]-=o*(h[i]/2+u),p){var b=y.x,k=m.x,w=c.width/2+s,x=h.width/2+s;g.x>f.x?k<=b&&(y.x=Math.max(k,f.x+w),m.x=Math.min(b,g.x-x)):k>=b&&(y.x=Math.min(k,f.x-w),m.x=Math.max(b,g.x+x))}else{var P=y.y,C=m.y,O=c.height/2+s,E=h.height/2+s;g.y>f.y?C<=P&&(y.y=Math.max(C,f.y+O),m.y=Math.min(P,g.y-E)):C>=P&&(y.y=Math.min(C,f.y-O),m.y=Math.max(P,g.y+E))}return[y.toJSON()].concat((0,A.Z)(t),[m.toJSON()])};function Td(t,e){if(null!=e&&!1!==e){var n="boolean"===typeof e?0:e;if(n>0){var r=Ol.create(t[1]).move(t[2],n),i=Ol.create(t[1]).move(t[0],n);return[r.toJSON()].concat((0,A.Z)(t),[i.toJSON()])}var o=t[1];return[Object.assign({},o)].concat((0,A.Z)(t),[Object.assign({},o)])}return t}var jd,Nd=function(t,e,n){var r=e.width||50,i=(e.height||80)/2,o=e.angle||"auto",a=n.sourceAnchor,s=n.targetAnchor,u=n.sourceBBox,l=n.targetBBox;if(a.equals(s)){var c=function(t){var e=xl.toRad(t),n=Math.sin(e),o=Math.cos(e),s=new Ol(a.x+o*r,a.y+n*r),u=new Ol(s.x-o*i,s.y-n*i),l=u.clone().rotate(-90,s),c=u.clone().rotate(90,s);return[l.toJSON(),s.toJSON(),c.toJSON()]},h=function(t){var e=a.clone().move(t,-1),n=new Ml(e,t);return!u.containsPoint(t)&&!u.intersectsWithLine(n)},f=[0,90,180,270,45,135,225,315];if("number"===typeof o)return Td(c(o),e.merge);var g=u.getCenter();if(g.equals(a))return Td(c(0),e.merge);var d=g.angleBetween(a,g.clone().translate(1,0)),v=c(d);if(h(v[1]))return Td(v,e.merge);for(var p=1,y=f.length;p<y;p+=1)if(h((v=c(d+f[p]))[1]))return Td(v,e.merge);return Td(v,e.merge)}var m=new Ml(a,s),b=m.parallel(-r),k=b.getCenter(),w=b.start.clone().move(b.end,i),x=b.end.clone().move(b.start,i),P=m.parallel(-1),C=new Ml(P.start,k),O=new Ml(P.end,k);if((u.containsPoint(k)||l.containsPoint(k)||u.intersectsWithLine(C)||u.intersectsWithLine(O)||l.intersectsWithLine(C)||l.intersectsWithLine(O))&&(k=(b=m.parallel(r)).getCenter(),w=b.start.clone().move(b.end,i),x=b.end.clone().move(b.start,i)),e.merge){var E=new Ml(a,s),M=new Ml(k,E.center).setLength(Number.MAX_SAFE_INTEGER),S=u.intersectsWithLine(M),T=l.intersectsWithLine(M),j=S?Array.isArray(S)?S:[S]:[];T&&(Array.isArray(T)?j.push.apply(j,(0,A.Z)(T)):j.push(T));var N=E.center.closest(j);N?(n.sourceAnchor=N.clone(),n.targetAnchor=N.clone()):(n.sourceAnchor=E.center.clone(),n.targetAnchor=E.center.clone())}return Td([w.toJSON(),k.toJSON(),x.toJSON()],e.merge)};!function(t){t.presets=v,t.registry=$l.create({type:"router"}),t.registry.register(t.presets,!0)}(jd||(jd={}));var Ld,Bd,Id=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=[t].concat((0,A.Z)(n),[e]),o=new Rl(i),a=new Yl(o);return r.raw?a:a.serialize()},Dd=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=3===n.length?0:1,o=Ol.create(n[0+i]),a=Ol.create(n[2+i]),s=Ol.create(n[1+i]);if(!Ol.equals(t,e)){var u=new Ol((t.x+e.x)/2,(t.y+e.y)/2),l=u.angleBetween(Ol.create(t).rotate(90,u),s);l>1&&(o.rotate(180-l,u),a.rotate(180-l,u),s.rotate(180-l,u))}var c="\n     M ".concat(t.x," ").concat(t.y,"\n     Q ").concat(o.x," ").concat(o.y," ").concat(s.x," ").concat(s.y,"\n     Q ").concat(a.x," ").concat(a.y," ").concat(e.x," ").concat(e.y,"\n  ");return r.raw?Yl.parse(c):c},Rd=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=new Yl;i.appendSegment(Yl.createSegment("M",t));for(var o,a,s=1/3,u=2/3,l=r.radius||10,c=0,h=n.length;c<h;c+=1){var f=Ol.create(n[c]),g=n[c-1]||t,d=n[c+1]||e;o=a||f.distance(g)/2,a=f.distance(d)/2;var v=-Math.min(l,o),p=-Math.min(l,a),y=f.clone().move(g,v).round(),m=f.clone().move(d,p).round(),b=new Ol(s*y.x+u*f.x,u*f.y+s*y.y),k=new Ol(s*m.x+u*f.x,u*f.y+s*m.y);i.appendSegment(Yl.createSegment("L",y)),i.appendSegment(Yl.createSegment("C",b,k,m))}return i.appendSegment(Yl.createSegment("L",e)),r.raw?i:i.serialize()},Vd=function(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.direction;if(n&&0!==n.length){var a=[t].concat((0,A.Z)(n),[e]),s=Vl.throughPoints(a);r=new Yl(s)}else if((r=new Yl).appendSegment(Yl.createSegment("M",t)),o||(o=Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)?"H":"V"),"H"===o){var u=(t.x+e.x)/2;r.appendSegment(Yl.createSegment("C",u,t.y,u,e.y,e.x,e.y))}else{var l=(t.y+e.y)/2;r.appendSegment(Yl.createSegment("C",t.x,l,e.x,l,e.x,e.y))}return i.raw?r:r.serialize()},Zd=1/3,zd=2/3;function Fd(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=[t].concat((0,A.Z)(n),[e]),i=[];return r.forEach((function(t,e){var n=r[e+1];null!=n&&i.push(new Ml(t,n))})),i}function Gd(t,e){return new Ml(t,e).squaredLength()}function _d(t,e,n,r){var i,o=new Yl;return i=Yl.createSegment("M",t[0].start),o.appendSegment(i),t.forEach((function(a,s){if(Ld.includes(a)){var u,l,c,h;if("arc"===n){u=-90,((l=a.start.diff(a.end)).x<0||0===l.x&&l.y<0)&&(u+=180);var f,g=a.getCenter(),d=new Ml(g,a.end).rotate(u,g);c=(f=new Ml(a.start,g)).pointAt(2/3).rotate(u,a.start),h=d.pointAt(1/3).rotate(-u,d.end),i=Yl.createSegment("C",c,h,d.end),o.appendSegment(i),f=new Ml(g,a.end),c=d.pointAt(1/3).rotate(u,d.end),h=f.pointAt(1/3).rotate(-u,a.end),i=Yl.createSegment("C",c,h,a.end),o.appendSegment(i)}else if("gap"===n)i=Yl.createSegment("M",a.end),o.appendSegment(i);else if("cubic"===n){u=a.start.theta(a.end);var v=.6*e,p=1.35*e;((l=a.start.diff(a.end)).x<0||0===l.x&&l.y<0)&&(p*=-1),c=new Ol(a.start.x+v,a.start.y+p).rotate(u,a.start),h=new Ol(a.end.x-v,a.end.y+p).rotate(u,a.end),i=Yl.createSegment("C",c,h,a.end),o.appendSegment(i)}}else{var y=t[s+1];0===r||!y||Ld.includes(y)?(i=Yl.createSegment("L",a.end),o.appendSegment(i)):function(t,e,n,r,i){var o,a=n.distance(r)/2,s=n.distance(i)/2,u=-Math.min(t,a),l=-Math.min(t,s),c=n.clone().move(r,u).round(),h=n.clone().move(i,l).round(),f=new Ol(Zd*c.x+zd*n.x,zd*n.y+Zd*c.y),g=new Ol(Zd*h.x+zd*n.x,zd*n.y+Zd*h.y);o=Yl.createSegment("L",c),e.appendSegment(o),o=Yl.createSegment("C",f,g,h),e.appendSegment(o)}(r,o,a.end,a.start,y.end)}})),o}var qd,Hd=function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Ld=[],Bd=[],function(t){var e=t.graph._jumpOverUpdateList;if(null==e&&(e=t.graph._jumpOverUpdateList=[],t.graph.on("cell:mouseup",(function(){var e=t.graph._jumpOverUpdateList;setTimeout((function(){for(var t=0;t<e.length;t+=1)e[t].update()}))})),t.graph.on("model:reseted",(function(){e=t.graph._jumpOverUpdateList=[]}))),e.indexOf(t)<0){e.push(t);var n=function(){return e.splice(e.indexOf(t),1)};t.cell.once("change:connector",n),t.cell.once("removed",n)}}(this);var o=i.size||5,a=i.type||"arc",s=i.radius||0,u=i.ignoreConnectors||["smooth"],l=this.graph,c=l.model.getEdges();if(1===c.length)return _d(Fd(t,e,n),o,a,s);var h=this.cell,f=c.indexOf(h),g=l.options.connecting.connector||{},d=c.filter((function(t,e){var n=t.getConnector()||g;return!u.includes(n.name)&&(!(e>f)||"jumpover"!==n.name)})),v=d.map((function(t){return l.findViewByCell(t)})),p=Fd(t,e,n),y=v.map((function(t){return null==t?[]:t===r?p:Fd(t.sourcePoint,t.targetPoint,t.routePoints)})),m=[];p.forEach((function(t){var e=d.reduce((function(e,n,r){if(n!==h){var i=function(t,e){var n=[];return e.forEach((function(e){var r=t.intersectsWithLine(e);r&&n.push(r)})),n}(t,y[r]);e.push.apply(e,(0,A.Z)(i))}return e}),[]).sort((function(e,n){return Gd(t.start,e)-Gd(t.start,n)}));e.length>0?m.push.apply(m,(0,A.Z)(function(t,e,n){return e.reduce((function(r,i,o){if(Bd.includes(i))return r;var a=r.pop()||t,s=Ol.create(i).move(a.start,-n),u=Ol.create(i).move(a.start,+n),l=e[o+1];if(null!=l){var c=u.distance(l);c<=n&&(u=l.move(a.start,c),Bd.push(l))}else if(s.distance(a.end)<2*n+1)return r.push(a),r;if(u.distance(a.start)<2*n+1)return r.push(a),r;var h=new Ml(s,u);return Ld.push(h),r.push(new Ml(a.start,s),h,new Ml(u,a.end)),r}),[])}(t,e,o))):m.push(t)}));var b=_d(m,o,a,s);return Ld=[],Bd=[],i.raw?b:b.serialize()};!function(t){t.presets=p,t.registry=$l.create({type:"connector"}),t.registry.register(t.presets,!0)}(qd||(qd={}));var Ud=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Wd=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.Z)(this,n),(t=e.call(this)).pending=!1,t.changing=!1,t.data={},t.mutate(Ni(r)),t.changed={},t}return(0,b.Z)(n,[{key:"mutate",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!0===n.unset,i=!0===n.silent,o=[],a=this.changing;this.changing=!0,a||(this.previous=Ni(this.data),this.changed={});var s=this.data,u=this.previous,l=this.changed;if(Object.keys(t).forEach((function(e){var n=e,i=t[n];ei(s[n],i)||o.push(n),ei(u[n],i)?delete l[n]:l[n]=i,r?delete s[n]:s[n]=i})),!i&&o.length>0&&(this.pending=!0,this.pendingOptions=n,o.forEach((function(t){e.emit("change:*",{key:t,options:n,store:e,current:s[t],previous:u[t]})}))),a)return this;if(!i)for(;this.pending;)this.pending=!1,this.emit("changed",{current:s,previous:u,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}},{key:"get",value:function(t,e){if(null==t)return this.data;var n=this.data[t];return null==n?e:n}},{key:"getPrevious",value:function(t){if(this.previous){var e=this.previous[t];return null==e?void 0:e}}},{key:"set",value:function(t,e,n){return null!=t&&("object"===typeof t?this.mutate(t,e):this.mutate((0,y.Z)({},t,e),n)),this}},{key:"remove",value:function(t,e){var n,r=void 0,i={};if("string"===typeof t)i[t]=r,n=e;else if(Array.isArray(t))t.forEach((function(t){return i[t]=r})),n=e;else{for(var o in this.data)i[o]=r;n=t}return this.mutate(i,Object.assign(Object.assign({},n),{unset:!0})),this}},{key:"getByPath",value:function(t){return _i(this.data,t,"/")}},{key:"setByPath",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="/",i=Array.isArray(t)?(0,A.Z)(t):t.split(r),o=Array.isArray(t)?t.join(r):t,a=i[0],s=i.length;if(n.propertyPath=o,n.propertyValue=e,n.propertyPathArray=i,1===s)this.set(a,e,n);else{for(var u={},l=u,c=a,h=1;h<s;h+=1){var f=i[h],g=Number.isFinite(Number(f));l=l[c]=g?[]:{},c=f}qi(u,i,e,r);var d=Ni(this.data);n.rewrite&&Hi(d,t,r);var v=sr(d,u);this.set(a,v[a],n)}return this}},{key:"removeByPath",value:function(t,e){var n=Array.isArray(t)?t:t.split("/"),r=n[0];if(1===n.length)this.remove(r,e);else{var i=n.slice(1),o=Ni(this.get(r));o&&Hi(o,i),this.set(r,o,e)}return this}},{key:"hasChanged",value:function(t){return null==t?Object.keys(this.changed).length>0:t in this.changed}},{key:"getChanges",value:function(t){if(null==t)return this.hasChanged()?Ni(this.changed):null;var e,n=this.changing?this.previous:this.data,r={};for(var i in t){var o=t[i];ei(n[i],o)||(r[i]=o,e=!0)}return e?Ni(r):null}},{key:"toJSON",value:function(){return Ni(this.data)}},{key:"clone",value:function(){return new(0,this.constructor)(this.data)}},{key:"dispose",value:function(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}]),n}(Wi);Ud([Wi.dispose()],Wd.prototype,"dispose",null);var Jd=function(){function t(e){(0,m.Z)(this,t),this.cell=e,this.ids={},this.cache={}}return(0,b.Z)(t,[{key:"get",value:function(){return Object.keys(this.ids)}},{key:"start",value:function(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",a=this.cell.getPropByPath(e),s=Ii(i,t.defaultOptions),u=this.getTiming(s.timing),l=this.getInterp(s.interp,a,n),c=0,h=Array.isArray(e)?e.join(o):e,f=Array.isArray(e)?e:e.split(o),g=function t(){var e=(new Date).getTime();0===c&&(c=e);var n=(e-c)/s.duration;n<1?r.ids[h]=requestAnimationFrame(t):n=1;var o=l(u(n));r.cell.setPropByPath(f,o),i.progress&&i.progress(Object.assign({progress:n,currentValue:o},r.getArgs(h))),1===n&&(r.cell.notify("transition:complete",r.getArgs(h)),i.complete&&i.complete(r.getArgs(h)),r.cell.notify("transition:finish",r.getArgs(h)),i.finish&&i.finish(r.getArgs(h)),r.clean(h))};return setTimeout((function(){r.stop(e,void 0,o),r.cache[h]={startValue:a,targetValue:n,options:s},r.ids[h]=requestAnimationFrame(g),r.cell.notify("transition:start",r.getArgs(h)),i.start&&i.start(r.getArgs(h))}),i.delay),this.stop.bind(this,e,o,i)}},{key:"stop",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",i=Array.isArray(t)?t:t.split(r);return Object.keys(this.ids).filter((function(t){return ei(i,t.split(r).slice(0,i.length))})).forEach((function(t){cancelAnimationFrame(e.ids[t]);var r=e.cache[t],i=e.getArgs(t),o=Object.assign(Object.assign({},r.options),n),a=o.jumpedToEnd;a&&null!=r.targetValue&&(e.cell.setPropByPath(t,r.targetValue),e.cell.notify("transition:end",Object.assign({},i)),e.cell.notify("transition:complete",Object.assign({},i)),o.complete&&o.complete(Object.assign({},i)));var s=Object.assign({jumpedToEnd:a},i);e.cell.notify("transition:stop",Object.assign({},s)),o.stop&&o.stop(Object.assign({},s)),e.cell.notify("transition:finish",Object.assign({},i)),o.finish&&o.finish(Object.assign({},i)),e.clean(t)})),this}},{key:"clean",value:function(t){delete this.ids[t],delete this.cache[t]}},{key:"getTiming",value:function(t){return"string"===typeof t?ml[t]:t}},{key:"getInterp",value:function(t,e,n){return t?t(e,n):"number"===typeof n?bl.number(e,n):"string"===typeof n?"#"===n[0]?bl.color(e,n):bl.unit(e,n):bl.object(e,n)}},{key:"getArgs",value:function(t){var e=this.cache[t];return{path:t,startValue:e.startValue,targetValue:e.targetValue,cell:this.cell}}}]),t}();!function(t){t.defaultOptions={delay:10,duration:100,timing:"linear"}}(Jd||(Jd={}));var Xd,Yd=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},$d=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Qd=function(t,e){(0,x.Z)(r,t);var n=(0,P.Z)(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,m.Z)(this,r);var i=(t=n.call(this)).constructor.getDefaults(!0),o=sr({},t.preprocess(i),t.preprocess(e));return t.id=o.id||Qa(),t.store=new Wd(o),t.animation=new Jd((0,Al.Z)(t)),t.setup(),t.init(),t.postprocess(e),t}return(0,b.Z)(r,[{key:e,get:function(){return r.toStringTag}},{key:"init",value:function(){}},{key:"model",get:function(){return this._model}},{key:"model",set:function(t){this._model!==t&&(this._model=t)}},{key:"preprocess",value:function(t,e){var n=t.id,r=this.constructor.applyPropHooks(this,t);return null==n&&!0!==e&&(r.id=Qa()),r}},{key:"postprocess",value:function(t){}},{key:"setup",value:function(){var t=this;this.store.on("change:*",(function(e){var n=e.key,r=e.current,i=e.previous,o=e.options;t.notify("change:*",{key:n,options:o,current:r,previous:i,cell:t}),t.notify("change:".concat(n),{options:o,current:r,previous:i,cell:t});var a=n;"source"!==a&&"target"!==a||t.notify("change:terminal",{type:a,current:r,previous:i,options:o,cell:t})})),this.store.on("changed",(function(e){var n=e.options;return t.notify("changed",{options:n,cell:t})}))}},{key:"notify",value:function(t,e){this.trigger(t,e);var n=this.model;return n&&(n.notify("cell:".concat(t),e),this.isNode()?n.notify("node:".concat(t),Object.assign(Object.assign({},e),{node:this})):this.isEdge()&&n.notify("edge:".concat(t),Object.assign(Object.assign({},e),{edge:this}))),this}},{key:"isNode",value:function(){return!1}},{key:"isEdge",value:function(){return!1}},{key:"isSameStore",value:function(t){return this.store===t.store}},{key:"view",get:function(){return this.store.get("view")}},{key:"shape",get:function(){return this.store.get("shape","")}},{key:"getProp",value:function(t,e){return null==t?this.store.get():this.store.get(t,e)}},{key:"setProp",value:function(t,e,n){if("string"===typeof t)this.store.set(t,e,n);else{var r=this.preprocess(t,!0);this.store.set(sr({},this.getProp(),r),e),this.postprocess(t)}return this}},{key:"removeProp",value:function(t,e){return"string"===typeof t||Array.isArray(t)?this.store.removeByPath(t,e):this.store.remove(e),this}},{key:"hasChanged",value:function(t){return null==t?this.store.hasChanged():this.store.hasChanged(t)}},{key:"getPropByPath",value:function(t){return this.store.getByPath(t)}},{key:"setPropByPath",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.model&&("children"===t?this._children=e?e.map((function(t){return n.model.getCell(t)})).filter((function(t){return null!=t})):null:"parent"===t&&(this._parent=e?this.model.getCell(e):null)),this.store.setByPath(t,e,r),this}},{key:"removePropByPath",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(t)?t:t.split("/");return"attrs"===n[0]&&(e.dirty=!0),this.store.removeByPath(n,e),this}},{key:"prop",value:function(t,e,n){return null==t?this.getProp():"string"===typeof t||Array.isArray(t)?1===arguments.length?this.getPropByPath(t):null==e?this.removePropByPath(t,n||{}):this.setPropByPath(t,e,n||{}):this.setProp(t,e||{})}},{key:"previous",value:function(t){return this.store.getPrevious(t)}},{key:"zIndex",get:function(){return this.getZIndex()}},{key:"zIndex",set:function(t){null==t?this.removeZIndex():this.setZIndex(t)}},{key:"getZIndex",value:function(){return this.store.get("zIndex")}},{key:"setZIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("zIndex",t,e),this}},{key:"removeZIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("zIndex",t),this}},{key:"toFront",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.model;if(e){var n,r=e.getMaxZIndex();t.deep?(n=this.getDescendants({deep:!0,breadthFirst:!0})).unshift(this):n=[this],r=r-n.length+1;var i=e.total(),o=e.indexOf(this)!==i-n.length;o||(o=n.some((function(t,e){return t.getZIndex()!==r+e}))),o&&this.batchUpdate("to-front",(function(){r+=n.length,n.forEach((function(e,n){e.setZIndex(r+n,t)}))}))}return this}},{key:"toBack",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.model;if(e){var n,r=e.getMinZIndex();t.deep?(n=this.getDescendants({deep:!0,breadthFirst:!0})).unshift(this):n=[this];var i=0!==e.indexOf(this);i||(i=n.some((function(t,e){return t.getZIndex()!==r+e}))),i&&this.batchUpdate("to-back",(function(){r-=n.length,n.forEach((function(e,n){e.setZIndex(r+n,t)}))}))}return this}},{key:"markup",get:function(){return this.getMarkup()}},{key:"markup",set:function(t){null==t?this.removeMarkup():this.setMarkup(t)}},{key:"getMarkup",value:function(){var t=this.store.get("markup");null==t&&(t=this.constructor.getMarkup());return t}},{key:"setMarkup",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("markup",t,e),this}},{key:"removeMarkup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("markup",t),this}},{key:"attrs",get:function(){return this.getAttrs()}},{key:"attrs",set:function(t){null==t?this.removeAttrs():this.setAttrs(t)}},{key:"getAttrs",value:function(){var t=this.store.get("attrs");return t?Object.assign({},t):{}}},{key:"setAttrs",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==t)this.removeAttrs(n);else{var r=function(t){return e.store.set("attrs",t,n)};if(!0===n.overwrite)r(t);else{var i=this.getAttrs();!1===n.deep?r(Object.assign(Object.assign({},i),t)):r(sr({},i,t))}}return this}},{key:"replaceAttrs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setAttrs(t,Object.assign(Object.assign({},e),{overwrite:!0}))}},{key:"updateAttrs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setAttrs(t,Object.assign(Object.assign({},e),{deep:!1}))}},{key:"removeAttrs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("attrs",t),this}},{key:"getAttrDefinition",value:function(t){if(!t)return null;var e=this.constructor.getAttrHooks()||{},n=e[t]||_h.registry.get(t);if(!n){var r=qa(t);n=e[r]||_h.registry.get(r)}return n||null}},{key:"getAttrByPath",value:function(t){return null==t||""===t?this.getAttrs():this.getPropByPath(this.prefixAttrPath(t))}},{key:"setAttrByPath",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.setPropByPath(this.prefixAttrPath(t),e,n),this}},{key:"removeAttrByPath",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.removePropByPath(this.prefixAttrPath(t),e),this}},{key:"prefixAttrPath",value:function(t){return Array.isArray(t)?["attrs"].concat(t):"attrs/".concat(t)}},{key:"attr",value:function(t,e,n){return null==t?this.getAttrByPath():"string"===typeof t||Array.isArray(t)?1===arguments.length?this.getAttrByPath(t):null==e?this.removeAttrByPath(t,n||{}):this.setAttrByPath(t,e,n||{}):this.setAttrs(t,e||{})}},{key:"visible",get:function(){return this.isVisible()}},{key:"visible",set:function(t){this.setVisible(t)}},{key:"setVisible",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("visible",t,e),this}},{key:"isVisible",value:function(){return!1!==this.store.get("visible")}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isVisible()||this.setVisible(!0,t),this}},{key:"hide",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isVisible()&&this.setVisible(!1,t),this}},{key:"toggleVisible",value:function(t){var e="boolean"===typeof t?arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}:t;return("boolean"===typeof t?t:!this.isVisible())?this.show(e):this.hide(e),this}},{key:"data",get:function(){return this.getData()}},{key:"data",set:function(t){this.setData(t)}},{key:"getData",value:function(){return this.store.get("data")}},{key:"setData",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==t)this.removeData(n);else{var r=function(t){return e.store.set("data",t,n)};if(!0===n.overwrite)r(t);else{var i=this.getData();!1===n.deep?r("object"===typeof t?Object.assign(Object.assign({},i),t):t):r(sr({},i,t))}}return this}},{key:"replaceData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setData(t,Object.assign(Object.assign({},e),{overwrite:!0}))}},{key:"updateData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setData(t,Object.assign(Object.assign({},e),{deep:!1}))}},{key:"removeData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("data",t),this}},{key:"parent",get:function(){return this.getParent()}},{key:"children",get:function(){return this.getChildren()}},{key:"getParentId",value:function(){return this.store.get("parent")}},{key:"getParent",value:function(){var t=this.getParentId();if(t&&this.model){var e=this.model.getCell(t);return this._parent=e,e}return null}},{key:"getChildren",value:function(){var t=this,e=this.store.get("children");if(e&&e.length&&this.model){var n=e.map((function(e){var n;return null===(n=t.model)||void 0===n?void 0:n.getCell(e)})).filter((function(t){return null!=t}));return this._children=n,(0,A.Z)(n)}return null}},{key:"hasParent",value:function(){return null!=this.parent}},{key:"isParentOf",value:function(t){return null!=t&&t.getParent()===this}},{key:"isChildOf",value:function(t){return null!=t&&this.getParent()===t}},{key:"eachChild",value:function(t,e){return this.children&&this.children.forEach(t,e),this}},{key:"filterChild",value:function(t,e){return this.children?this.children.filter(t,e):[]}},{key:"getChildCount",value:function(){return null==this.children?0:this.children.length}},{key:"getChildIndex",value:function(t){return null==this.children?-1:this.children.indexOf(t)}},{key:"getChildAt",value:function(t){return null!=this.children&&t>=0?this.children[t]:null}},{key:"getAncestors",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[],n=this.getParent();n;)e.push(n),n=!1!==t.deep?n.getParent():null;return e}},{key:"getDescendants",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!1!==t.deep){if(t.breadthFirst){for(var e=[],n=this.getChildren()||[];n.length>0;){var r=n.shift(),i=r.getChildren();e.push(r),i&&n.push.apply(n,(0,A.Z)(i))}return e}var o=this.getChildren()||[];return o.forEach((function(e){o.push.apply(o,(0,A.Z)(e.getDescendants(t)))})),o}return this.getChildren()||[]}},{key:"isDescendantOf",value:function(t){if(null==t)return!1;if(!1!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).deep){for(var e=this.getParent();e;){if(e===t)return!0;e=e.getParent()}return!1}return this.isChildOf(t)}},{key:"isAncestorOf",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!=t&&t.isDescendantOf(this,e)}},{key:"contains",value:function(t){return this.isAncestorOf(t)}},{key:"getCommonAncestor",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.getCommonAncestor.apply(r,[this].concat(e))}},{key:"setParent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._parent=t,t?this.store.set("parent",t.id,e):this.store.remove("parent",e),this}},{key:"setChildren",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._children=t,null!=t?this.store.set("children",t.map((function(t){return t.id})),e):this.store.remove("children",e),this}},{key:"unembed",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.children;if(null!=n&&null!=t){var r=this.getChildIndex(t);-1!==r&&(n.splice(r,1),t.setParent(null,e),this.setChildren(n,e))}return this}},{key:"embed",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.addTo(this,e),this}},{key:"addTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.isCell(t)?t.addChild(this,e):t.addCell(this,e),this}},{key:"insertTo",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.insertChild(this,e,n),this}},{key:"addChild",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.insertChild(t,void 0,e)}},{key:"insertChild",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&t!==this){var r=t.getParent(),i=this!==r,o=e;if(null==o&&(o=this.getChildCount(),i||(o-=1)),r){var a=r.getChildren();if(a){var s=a.indexOf(t);s>=0&&(t.setParent(null,n),a.splice(s,1),r.setChildren(a,n))}}var u=this.children;if(null==u?(u=[]).push(t):u.splice(o,0,t),t.setParent(this,n),this.setChildren(u,n),i&&this.model){var l=this.model.getIncomingEdges(this),c=this.model.getOutgoingEdges(this);l&&l.forEach((function(t){return t.updateParent(n)})),c&&c.forEach((function(t){return t.updateParent(n)}))}this.model&&this.model.addCell(t,n)}return this}},{key:"removeFromParent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getParent();if(null!=e){var n=e.getChildIndex(this);e.removeChildAt(n,t)}return this}},{key:"removeChild",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getChildIndex(t);return this.removeChildAt(n,e)}},{key:"removeChildAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getChildAt(t);return null!=this.children&&null!=n&&(this.unembed(n,e),n.remove(e)),n}},{key:"remove",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.batchUpdate("remove",(function(){var n=t.getParent();n&&n.removeChild(t,e),!1!==e.deep&&t.eachChild((function(t){return t.remove(e)})),t.model&&t.model.removeCell(t,e)})),this}},{key:"transition",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/";return this.animation.start(t,e,n,r)}},{key:"stopTransition",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/";return this.animation.stop(t,e,n),this}},{key:"getTransitions",value:function(){return this.animation.get()}},{key:"translate",value:function(t,e,n){return this}},{key:"scale",value:function(t,e,n,r){return this}},{key:"addTools",value:function(t,e,n){var r=Array.isArray(t)?t:[t],i="string"===typeof e?e:null,o="object"===typeof e?e:"object"===typeof n?n:{};if(o.reset)return this.setTools({name:i,items:r,local:o.local},o);var a=Ni(this.getTools());return null==a||null==i||a.name===i?(null==a&&(a={}),a.items||(a.items=[]),a.name=i,a.items=[].concat((0,A.Z)(a.items),(0,A.Z)(r)),this.setTools(Object.assign({},a),o)):void 0}},{key:"setTools",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==t?this.removeTools():this.store.set("tools",r.normalizeTools(t),e),this}},{key:"getTools",value:function(){return this.store.get("tools")}},{key:"removeTools",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("tools",t),this}},{key:"hasTools",value:function(t){var e=this.getTools();return null!=e&&(null==t||e.name===t)}},{key:"hasTool",value:function(t){var e=this.getTools();return null!=e&&e.items.some((function(e){return"string"===typeof e?e===t:e.name===t}))}},{key:"removeTool",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ni(this.getTools());if(n){var r=!1,i=n.items.slice(),o=function(t){i.splice(t,1),r=!0};if("number"===typeof t)o(t);else for(var a=i.length-1;a>=0;a-=1){var s=i[a];("string"===typeof s?s===t:s.name===t)&&o(a)}r&&(n.items=i,this.setTools(n,e))}return this}},{key:"getBBox",value:function(t){return new El}},{key:"getConnectionPoint",value:function(t,e){return new Ol}},{key:"toJSON",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},this.store.get()),r=Object.prototype.toString,i=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!n.shape){var o=this.constructor;throw new Error("Unable to serialize ".concat(i,' missing "shape" prop, check the ').concat(i,' "').concat(o.name||r.call(o),'"'))}var a=this.constructor,s=!0===e.diff,u=n.attrs||{},l=a.getDefaults(!0),c=s?this.preprocess(l,!0):l,h=c.attrs||{},f={};Object.entries(n).forEach((function(e){var o=(0,Pu.Z)(e,2),a=o[0],u=o[1];if(null!=u&&!Array.isArray(u)&&"object"===typeof u&&!Dn(u))throw new Error("Can only serialize ".concat(i,' with plain-object props, but got a "').concat(r.call(u),'" type of key "').concat(a,'" on ').concat(i,' "').concat(t.id,'"'));if("attrs"!==a&&"shape"!==a&&s){var l=c[a];ei(u,l)&&delete n[a]}})),Object.keys(u).forEach((function(t){var e=u[t],n=h[t];Object.keys(e).forEach((function(r){var i=e[r],o=n?n[r]:null;null==i||"object"!==typeof i||Array.isArray(i)?null!=n&&ei(o,i)||(null==f[t]&&(f[t]={}),f[t][r]=i):Object.keys(i).forEach((function(e){var a=i[e];null!=n&&null!=o&&C(o)&&ei(o[e],a)||(null==f[t]&&(f[t]={}),null==f[t][r]&&(f[t][r]={}),f[t][r][e]=a)}))}))}));var g=Object.assign(Object.assign({},n),{attrs:ri(f)?void 0:f});null==g.attrs&&delete g.attrs;var d=g;return 0===d.angle&&delete d.angle,Ni(d)}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.deep){var e=Object.assign({},this.store.get());return t.keepId||delete e.id,delete e.parent,delete e.children,new(0,this.constructor)(e)}return r.deepClone(this)[this.id]}},{key:"findView",value:function(t){return t.findViewByCell(this)}},{key:"startBatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.model;return this.notify("batch:start",{name:t,data:e,cell:this}),n&&n.startBatch(t,Object.assign(Object.assign({},e),{cell:this})),this}},{key:"stopBatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.model;return n&&n.stopBatch(t,Object.assign(Object.assign({},e),{cell:this})),this.notify("batch:stop",{name:t,data:e,cell:this}),this}},{key:"batchUpdate",value:function(t,e,n){var r=this.model;this.startBatch(t,n,r);var i=e();return this.stopBatch(t,n,r),i}},{key:"dispose",value:function(){this.removeFromParent(),this.store.dispose()}}],[{key:"config",value:function(t){var e,n=this,r=t.markup,i=t.propHooks,o=t.attrHooks,a=$d(t,["markup","propHooks","attrHooks"]);(null!=r&&(this.markup=r),i)&&(this.propHooks=this.propHooks.slice(),Array.isArray(i)?(e=this.propHooks).push.apply(e,(0,A.Z)(i)):"function"===typeof i?this.propHooks.push(i):Object.values(i).forEach((function(t){"function"===typeof t&&n.propHooks.push(t)})));o&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),o)),this.defaults=sr({},this.defaults,a)}},{key:"getMarkup",value:function(){return this.markup}},{key:"getDefaults",value:function(t){return t?this.defaults:Ni(this.defaults)}},{key:"getAttrHooks",value:function(){return this.attrHooks}},{key:"applyPropHooks",value:function(t,e){return this.propHooks.reduce((function(e,n){return n?nt(n,t,e):e}),e)}}]),r}(Wi,Symbol.toStringTag);Qd.defaults={},Qd.attrHooks={},Qd.propHooks=[],Yd([Wi.dispose()],Qd.prototype,"dispose",null),function(t){t.normalizeTools=function(t){return"string"===typeof t?{items:[t]}:Array.isArray(t)?{items:t}:t.items?t:{items:[t]}}}(Qd||(Qd={})),function(t){t.toStringTag="X6.".concat(t.name),t.isCell=function(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag],r=e;return(null==n||n===t.toStringTag)&&"function"===typeof r.isNode&&"function"===typeof r.isEdge&&"function"===typeof r.prop&&"function"===typeof r.attr}}(Qd||(Qd={})),function(t){t.getCommonAncestor=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.filter((function(t){return null!=t})).map((function(t){return t.getAncestors()})).sort((function(t,e){return t.length-e.length}));return r.shift().find((function(t){return r.every((function(e){return e.includes(t)}))}))||null},t.getCellsBBox=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=0,i=t.length;r<i;r+=1){var o=t[r],a=o.getBBox(e);if(a){if(o.isNode()){var s=o.getAngle();null!=s&&0!==s&&(a=a.bbox(s))}n=null==n?a:n.union(a)}}return n},t.deepClone=function(e){var n=[e].concat((0,A.Z)(e.getDescendants({deep:!0})));return t.cloneCells(n)},t.cloneCells=function(t){var e=ro(t),n=e.reduce((function(t,e){return t[e.id]=e.clone(),t}),{});return e.forEach((function(t){var e=n[t.id];if(e.isEdge()){var r=e.getSourceCellId(),i=e.getTargetCellId();r&&n[r]&&e.setSource(Object.assign(Object.assign({},e.getSource()),{cell:n[r].id})),i&&n[i]&&e.setTarget(Object.assign(Object.assign({},e.getTarget()),{cell:n[i].id}))}var o=t.getParent();o&&n[o.id]&&e.setParent(n[o.id]);var a=t.getChildren();if(a&&a.length){var s=a.reduce((function(t,e){return n[e.id]&&t.push(n[e.id]),t}),[]);s.length>0&&e.setChildren(s)}})),n}}(Qd||(Qd={})),function(t){t.config({propHooks:function(e){var n=e.tools,r=$d(e,["tools"]);return n&&(r.tools=t.normalizeTools(n)),r}})}(Qd||(Qd={})),function(t){var e,n;t.exist=function(t,r){return r?null!=e&&e.exist(t):null!=n&&n.exist(t)},t.setEdgeRegistry=function(t){e=t},t.setNodeRegistry=function(t){n=t}}(Xd||(Xd={}));var Kd=function(){function t(e){(0,m.Z)(this,t),this.ports=[],this.groups={},this.init(Ni(e))}return(0,b.Z)(t,[{key:"getPorts",value:function(){return this.ports}},{key:"getGroup",value:function(t){return null!=t?this.groups[t]:null}},{key:"getPortsByGroup",value:function(t){return this.ports.filter((function(e){return e.group===t||null==e.group&&null==t}))}},{key:"getPortsLayoutByGroup",value:function(t,e){var n,r=this,i=this.getPortsByGroup(t),o=t?this.getGroup(t):null,a=o?o.position:null,s=a?a.name:null;if(null!=s){var u=pf.registry.get(s);if(null==u)return pf.registry.onNotFound(s);n=u}else n=pf.presets.left;var l=i.map((function(t){return t&&t.position&&t.position.args||{}})),c=a&&a.args||{};return n(l,e,c).map((function(t,n){var o=i[n];return{portLayout:t,portId:o.id,portSize:o.size,portAttrs:o.attrs,labelSize:o.label.size,labelLayout:r.getPortLabelLayout(o,Ol.create(t.position),e)}}))}},{key:"init",value:function(t){var e=this,n=t.groups,r=t.items;null!=n&&Object.keys(n).forEach((function(t){e.groups[t]=e.parseGroup(n[t])})),Array.isArray(r)&&r.forEach((function(t){e.ports.push(e.parsePort(t))}))}},{key:"parseGroup",value:function(t){return Object.assign(Object.assign({},t),{label:this.getLabel(t,!0),position:this.getPortPosition(t.position,!0)})}},{key:"parsePort",value:function(t){var e=Object.assign({},t),n=this.getGroup(t.group)||{};return e.markup=e.markup||n.markup,e.attrs=sr({},n.attrs,e.attrs),e.position=this.createPosition(n,e),e.label=sr({},n.label,this.getLabel(e)),e.zIndex=this.getZIndex(n,e),e.size=Object.assign(Object.assign({},n.size),e.size),e}},{key:"getZIndex",value:function(t,e){return"number"===typeof e.zIndex?e.zIndex:"number"===typeof t.zIndex||"auto"===t.zIndex?t.zIndex:"auto"}},{key:"createPosition",value:function(t,e){return sr({name:"left",args:{}},t.position,{args:e.args})}},{key:"getPortPosition",value:function(t){if(null==t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return{name:"left",args:{}}}else{if("string"===typeof t)return{name:t,args:{}};if(Array.isArray(t))return{name:"absolute",args:{x:t[0],y:t[1]}};if("object"===typeof t)return t}return{args:{}}}},{key:"getPortLabelPosition",value:function(t){if(null==t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return{name:"left",args:{}}}else{if("string"===typeof t)return{name:t,args:{}};if("object"===typeof t)return t}return{args:{}}}},{key:"getLabel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.label||{};return n.position=this.getPortLabelPosition(n.position,e),n}},{key:"getPortLabelLayout",value:function(t,e,n){var r=t.label.position.name||"left",i=t.label.position.args||{},o=Vf.registry.get(r)||Vf.presets.left;return o?o(e,n,i):null}}]),t}(),tv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},ev=function(t,e){(0,x.Z)(r,t);var n=(0,P.Z)(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.Z)(this,r),(t=n.call(this,e)).initPorts(),t}return(0,b.Z)(r,[{key:e,get:function(){return r.toStringTag}},{key:"preprocess",value:function(t,e){var n=t.x,i=t.y,o=t.width,a=t.height,s=tv(t,["x","y","width","height"]);if(null!=n||null!=i){var u=s.position;s.position=Object.assign(Object.assign({},u),{x:null!=n?n:u?u.x:0,y:null!=i?i:u?u.y:0})}if(null!=o||null!=a){var l=s.size;s.size=Object.assign(Object.assign({},l),{width:null!=o?o:l?l.width:0,height:null!=a?a:l?l.height:0})}return _f((0,Gf.Z)(r.prototype),"preprocess",this).call(this,s,e)}},{key:"isNode",value:function(){return!0}},{key:"size",value:function(t,e,n){return void 0===t?this.getSize():"number"===typeof t?this.setSize(t,e,n):this.setSize(t,e)}},{key:"getSize",value:function(){var t=this.store.get("size");return t?Object.assign({},t):{width:1,height:1}}},{key:"setSize",value:function(t,e,n){return"object"===typeof t?this.resize(t.width,t.height,e):this.resize(t,e,n),this}},{key:"resize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.startBatch("resize",n);var r=n.direction;if(r){var i=this.getSize();switch(r){case"left":case"right":e=i.height;break;case"top":case"bottom":t=i.width}var o={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[r],a=xl.normalize(this.getAngle()||0);n.absolute&&(o+=Math.floor((a+45)/90),o%=4);var s=this.getBBox(),u=(0===o?s.getBottomLeft():1===o?s.getCorner():2===o?s.getTopRight():s.getOrigin()).clone().rotate(-a,s.getCenter()),l=Math.sqrt(t*t+e*e)/2,c=o*Math.PI/2;c+=Math.atan(o%2===0?e/t:t/e),c-=xl.toRad(a);var h=Ol.fromPolar(l,c,u).clone().translate(t/-2,e/-2);this.store.set("size",{width:t,height:e},n),this.setPosition(h.x,h.y,n)}else this.store.set("size",{width:t,height:e},n);return this.stopBatch("resize",n),this}},{key:"scale",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.getBBox().scale(t,e,null==n?void 0:n);return this.startBatch("scale",r),this.setPosition(i.x,i.y,r),this.resize(i.width,i.height,r),this.stopBatch("scale"),this}},{key:"position",value:function(t,e,n){return"number"===typeof t?this.setPosition(t,e,n):this.getPosition(t)}},{key:"getPosition",value:function(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).relative){var t=this.getParent();if(null!=t&&t.isNode()){var e=this.getPosition(),n=t.getPosition();return{x:e.x-n.x,y:e.y-n.y}}}var r=this.store.get("position");return r?Object.assign({},r):{x:0,y:0}}},{key:"setPosition",value:function(t,e){var n,r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"===typeof t?(n=t.x,r=t.y,i=e||{}):(n=t,r=e,i=o||{}),i.relative){var a=this.getParent();if(null!=a&&a.isNode()){var s=a.getPosition();n+=s.x,r+=s.y}}if(i.deep){var u=this.getPosition();this.translate(n-u.x,r-u.y,i)}else this.store.set("position",{x:n,y:r},i);return this}},{key:"translate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0===t&&0===e)return this;n.translateBy=n.translateBy||this.id;var r=this.getPosition();if(null!=n.restrict&&n.translateBy===this.id){var i=this.getBBox({deep:!0}),o=n.restrict,a=r.x-i.x,s=r.y-i.y,u=Math.max(o.x+a,Math.min(o.x+o.width+a-i.width,r.x+t)),l=Math.max(o.y+s,Math.min(o.y+o.height+s-i.height,r.y+e));t=u-r.x,e=l-r.y}var c={x:r.x+t,y:r.y+e};return n.tx=t,n.ty=e,n.transition?("object"!==typeof n.transition&&(n.transition={}),this.transition("position",c,Object.assign(Object.assign({},n.transition),{interp:bl.object})),this.eachChild((function(r){var i;(null===(i=n.exclude)||void 0===i?void 0:i.includes(r))||r.translate(t,e,n)}))):(this.startBatch("translate",n),this.store.set("position",c,n),this.eachChild((function(r){var i;(null===(i=n.exclude)||void 0===i?void 0:i.includes(r))||r.translate(t,e,n)})),this.stopBatch("translate",n)),this}},{key:"angle",value:function(t,e){return null==t?this.getAngle():this.rotate(t,e)}},{key:"getAngle",value:function(){return this.store.get("angle",0)}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getAngle();if(e.center){var r=this.getSize(),i=this.getPosition(),o=this.getBBox().getCenter();o.rotate(n-t,e.center);var a=o.x-r.width/2-i.x,s=o.y-r.height/2-i.y;this.startBatch("rotate",{angle:t,options:e}),this.setPosition(i.x+a,i.y+s,e),this.rotate(t,Object.assign(Object.assign({},e),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",e.absolute?t:(n+t)%360,e);return this}},{key:"getBBox",value:function(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).deep){var t=this.getDescendants({deep:!0,breadthFirst:!0});return t.push(this),Qd.getCellsBBox(t)}return El.fromPositionAndSize(this.getPosition(),this.getSize())}},{key:"getConnectionPoint",value:function(t,e){var n=this.getBBox(),r=n.getCenter(),i=t.getTerminal(e);if(null==i)return r;var o=i.port;if(!o||!this.hasPort(o))return r;var a=this.getPort(o);if(!a||!a.group)return r;var s=this.getPortsPosition(a.group)[o].position,u=Ol.create(s).translate(n.getOrigin()),l=this.getAngle();return l&&u.rotate(-l,r),u}},{key:"fit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(this.getChildren()||[]).filter((function(t){return t.isNode()}));if(0===e.length)return this;this.startBatch("fit-embeds",t),t.deep&&e.forEach((function(e){return e.fit(t)}));var n=Qd.getCellsBBox(e),r=n.x,i=n.y,o=n.width,a=n.height,s=as(t.padding);return r-=s.left,i-=s.top,o+=s.left+s.right,a+=s.bottom+s.top,this.store.set({position:{x:r,y:i},size:{width:o,height:a}},t),this.stopBatch("fit-embeds"),this}},{key:"portContainerMarkup",get:function(){return this.getPortContainerMarkup()}},{key:"portContainerMarkup",set:function(t){this.setPortContainerMarkup(t)}},{key:"getDefaultPortContainerMarkup",value:function(){return this.store.get("defaultPortContainerMarkup")||Uf.getPortContainerMarkup()}},{key:"getPortContainerMarkup",value:function(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}},{key:"setPortContainerMarkup",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("portContainerMarkup",Uf.clone(t),e),this}},{key:"portMarkup",get:function(){return this.getPortMarkup()}},{key:"portMarkup",set:function(t){this.setPortMarkup(t)}},{key:"getDefaultPortMarkup",value:function(){return this.store.get("defaultPortMarkup")||Uf.getPortMarkup()}},{key:"getPortMarkup",value:function(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}},{key:"setPortMarkup",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("portMarkup",Uf.clone(t),e),this}},{key:"portLabelMarkup",get:function(){return this.getPortLabelMarkup()}},{key:"portLabelMarkup",set:function(t){this.setPortLabelMarkup(t)}},{key:"getDefaultPortLabelMarkup",value:function(){return this.store.get("defaultPortLabelMarkup")||Uf.getPortLabelMarkup()}},{key:"getPortLabelMarkup",value:function(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}},{key:"setPortLabelMarkup",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("portLabelMarkup",Uf.clone(t),e),this}},{key:"ports",get:function(){var t=this.store.get("ports",{items:[]});return null==t.items&&(t.items=[]),t}},{key:"getPorts",value:function(){return Ni(this.ports.items)}},{key:"getPortsByGroup",value:function(t){return this.getPorts().filter((function(e){return e.group===t}))}},{key:"getPort",value:function(t){return Ni(this.ports.items.find((function(e){return e.id&&e.id===t})))}},{key:"getPortAt",value:function(t){return this.ports.items[t]||null}},{key:"hasPorts",value:function(){return this.ports.items.length>0}},{key:"hasPort",value:function(t){return-1!==this.getPortIndex(t)}},{key:"getPortIndex",value:function(t){var e="string"===typeof t?t:t.id;return null!=e?this.ports.items.findIndex((function(t){return t.id===e})):-1}},{key:"getPortsPosition",value:function(t){var e=this.getSize();return this.port.getPortsLayoutByGroup(t,new El(0,0,e.width,e.height)).reduce((function(t,e){var n=e.portLayout;return t[e.portId]={position:Object.assign({},n.position),angle:n.angle||0},t}),{})}},{key:"getPortProp",value:function(t,e){return this.getPropByPath(this.prefixPortPath(t,e))}},{key:"setPortProp",value:function(t,e,n,r){if("string"===typeof e||Array.isArray(e)){var i=this.prefixPortPath(t,e),o=n;return this.setPropByPath(i,o,r)}var a=this.prefixPortPath(t),s=e;return this.setPropByPath(a,s,n)}},{key:"removePortProp",value:function(t,e,n){return"string"===typeof e||Array.isArray(e)?this.removePropByPath(this.prefixPortPath(t,e),n):this.removePropByPath(this.prefixPortPath(t),e)}},{key:"portProp",value:function(t,e,n,r){return null==e?this.getPortProp(t):"string"===typeof e||Array.isArray(e)?2===arguments.length?this.getPortProp(t,e):null==n?this.removePortProp(t,e,r):this.setPortProp(t,e,n,r):this.setPortProp(t,e,n)}},{key:"prefixPortPath",value:function(t,e){var n=this.getPortIndex(t);if(-1===n)throw new Error('Unable to find port with id: "'.concat(t,'"'));return null==e||""===e?["ports","items","".concat(n)]:Array.isArray(e)?["ports","items","".concat(n)].concat((0,A.Z)(e)):"ports/items/".concat(n,"/").concat(e)}},{key:"addPort",value:function(t,e){var n=(0,A.Z)(this.ports.items);return n.push(t),this.setPropByPath("ports/items",n,e),this}},{key:"addPorts",value:function(t,e){return this.setPropByPath("ports/items",[].concat((0,A.Z)(this.ports.items),(0,A.Z)(t)),e),this}},{key:"insertPort",value:function(t,e,n){var r=(0,A.Z)(this.ports.items);return r.splice(t,0,e),this.setPropByPath("ports/items",r,n),this}},{key:"removePort",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.removePortAt(this.getPortIndex(t),e)}},{key:"removePortAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t>=0){var n=(0,A.Z)(this.ports.items);n.splice(t,1),e.rewrite=!0,this.setPropByPath("ports/items",n,e)}return this}},{key:"removePorts",value:function(t,e){var n;if(Array.isArray(t)){if(n=e||{},t.length){n.rewrite=!0;var r=(0,A.Z)(this.ports.items).filter((function(e){return!t.some((function(t){var n="string"===typeof t?t:t.id;return e.id===n}))}));this.setPropByPath("ports/items",r,n)}}else(n=t||{}).rewrite=!0,this.setPropByPath("ports/items",[],n);return this}},{key:"getParsedPorts",value:function(){return this.port.getPorts()}},{key:"getParsedGroups",value:function(){return this.port.groups}},{key:"getPortsLayoutByGroup",value:function(t,e){return this.port.getPortsLayoutByGroup(t,e)}},{key:"initPorts",value:function(){var t=this;this.updatePortData(),this.on("change:ports",(function(){t.processRemovedPort(),t.updatePortData()}))}},{key:"processRemovedPort",value:function(){var t=this.ports,e={};t.items.forEach((function(t){t.id&&(e[t.id]=!0)}));var n={};(this.store.getPrevious("ports")||{items:[]}).items.forEach((function(t){t.id&&!e[t.id]&&(n[t.id]=!0)}));var r=this.model;r&&!ri(n)&&(r.getConnectedEdges(this,{incoming:!0}).forEach((function(t){var e=t.getTargetPortId();e&&n[e]&&t.remove()})),r.getConnectedEdges(this,{outgoing:!0}).forEach((function(t){var e=t.getSourcePortId();e&&n[e]&&t.remove()})))}},{key:"validatePorts",value:function(){var t=this,e={},n=[];return this.ports.items.forEach((function(r){"object"!==typeof r&&n.push("Invalid port ".concat(r,".")),null==r.id&&(r.id=t.generatePortId()),e[r.id]&&n.push("Duplicitied port id."),e[r.id]=!0})),n}},{key:"generatePortId",value:function(){return Qa()}},{key:"updatePortData",value:function(){var t=this.validatePorts();if(t.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(t.join(" "));var e=this.port?this.port.getPorts():null;this.port=new Kd(this.ports);var n=this.port.getPorts(),r=e?n.filter((function(t){return e.find((function(e){return e.id===t.id}))?null:t})):(0,A.Z)(n),i=e?e.filter((function(t){return n.find((function(e){return e.id===t.id}))?null:t})):[];r.length>0&&this.notify("ports:added",{added:r,cell:this,node:this}),i.length>0&&this.notify("ports:removed",{removed:i,cell:this,node:this})}}]),r}(Qd,Symbol.toStringTag);ev.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},function(t){t.toStringTag="X6.".concat(t.name),t.isNode=function(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag],r=e;return(null==n||n===t.toStringTag)&&"function"===typeof r.isNode&&"function"===typeof r.isEdge&&"function"===typeof r.prop&&"function"===typeof r.attr&&"function"===typeof r.size&&"function"===typeof r.position}}(ev||(ev={})),function(t){t.config({propHooks:function(t){var e=t.ports,n=tv(t,["ports"]);return e&&(n.ports=Array.isArray(e)?{items:e}:e),n}})}(ev||(ev={})),function(t){t.registry=$l.create({type:"node",process:function(e,n){if(Xd.exist(e,!0))throw new Error("Node with name '".concat(e,"' was registered by anthor Edge"));if("function"===typeof n)return n.config({shape:e}),n;var r=t,i=n.inherit,o=tv(n,["inherit"]);if(i)if("string"===typeof i){var a=this.get(i);null==a?this.onNotFound(i,"inherited"):r=a}else r=i;null==o.constructorName&&(o.constructorName=e);var s=r.define.call(r,o);return s.config({shape:e}),s}}),Xd.setNodeRegistry(t.registry)}(ev||(ev={})),function(t){var e=0;t.define=function(n){var r,i=n.constructorName,o=n.overwrite,a=tv(n,["constructorName","overwrite"]),s=Fi((r=i||a.shape)?Ya(r):"CustomNode".concat(e+=1),this);return s.config(a),a.shape&&t.registry.register(a.shape,s,o),s},t.create=function(e){var n=e.shape||"rect",r=t.registry.get(n);return r?new r(e):t.registry.onNotFound(n)}}(ev||(ev={}));var nv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},rv=function(t,e){(0,x.Z)(r,t);var n=(0,P.Z)(r);function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.Z)(this,r),n.call(this,t)}return(0,b.Z)(r,[{key:e,get:function(){return r.toStringTag}},{key:"preprocess",value:function(t,e){var n=t.source,i=t.sourceCell,o=t.sourcePort,a=t.sourcePoint,s=t.target,u=t.targetCell,l=t.targetPort,c=t.targetPoint,h=nv(t,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),f=function(t){return"string"===typeof t||"number"===typeof t};if(null!=n)if(Qd.isCell(n))h.source={cell:n.id};else if(f(n))h.source={cell:n};else if(Ol.isPoint(n))h.source=n.toJSON();else if(Array.isArray(n))h.source={x:n[0],y:n[1]};else{var g=n.cell;Qd.isCell(g)?h.source=Object.assign(Object.assign({},n),{cell:g.id}):h.source=n}if(null!=i||null!=o){var d=h.source;if(null!=i){var v=f(i)?i:i.id;d?d.cell=v:d=h.source={cell:v}}null!=o&&d&&(d.port=o)}else null!=a&&(h.source=Ol.create(a).toJSON());if(null!=s)if(Qd.isCell(s))h.target={cell:s.id};else if(f(s))h.target={cell:s};else if(Ol.isPoint(s))h.target=s.toJSON();else if(Array.isArray(s))h.target={x:s[0],y:s[1]};else{var p=s.cell;Qd.isCell(p)?h.target=Object.assign(Object.assign({},s),{cell:p.id}):h.target=s}if(null!=u||null!=l){var y=h.target;if(null!=u){var m=f(u)?u:u.id;y?y.cell=m:y=h.target={cell:m}}null!=l&&y&&(y.port=l)}else null!=c&&(h.target=Ol.create(c).toJSON());return _f((0,Gf.Z)(r.prototype),"preprocess",this).call(this,h,e)}},{key:"setup",value:function(){var t=this;_f((0,Gf.Z)(r.prototype),"setup",this).call(this),this.on("change:labels",(function(e){return t.onLabelsChanged(e)})),this.on("change:vertices",(function(e){return t.onVertexsChanged(e)}))}},{key:"isEdge",value:function(){return!0}},{key:"disconnect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},t),this}},{key:"source",get:function(){return this.getSource()}},{key:"source",set:function(t){this.setSource(t)}},{key:"getSource",value:function(){return this.getTerminal("source")}},{key:"getSourceCellId",value:function(){return this.source.cell}},{key:"getSourcePortId",value:function(){return this.source.port}},{key:"setSource",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.setTerminal("source",t,e,n)}},{key:"target",get:function(){return this.getTarget()}},{key:"target",set:function(t){this.setTarget(t)}},{key:"getTarget",value:function(){return this.getTerminal("target")}},{key:"getTargetCellId",value:function(){return this.target.cell}},{key:"getTargetPortId",value:function(){return this.target.port}},{key:"setTarget",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.setTerminal("target",t,e,n)}},{key:"getTerminal",value:function(t){return Object.assign({},this.store.get(t))}},{key:"setTerminal",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(Qd.isCell(e))return this.store.set(t,sr({},n,{cell:e.id}),r),this;var i=e;return Ol.isPoint(e)||null!=i.x&&null!=i.y?(this.store.set(t,sr({},n,{x:i.x,y:i.y}),r),this):(this.store.set(t,Ni(e),r),this)}},{key:"getSourcePoint",value:function(){return this.getTerminalPoint("source")}},{key:"getTargetPoint",value:function(){return this.getTerminalPoint("target")}},{key:"getTerminalPoint",value:function(t){var e=this[t];if(Ol.isPointLike(e))return Ol.create(e);var n=this.getTerminalCell(t);return n?n.getConnectionPoint(this,t):new Ol}},{key:"getSourceCell",value:function(){return this.getTerminalCell("source")}},{key:"getTargetCell",value:function(){return this.getTerminalCell("target")}},{key:"getTerminalCell",value:function(t){if(this.model){var e="source"===t?this.getSourceCellId():this.getTargetCellId();if(e)return this.model.getCell(e)}return null}},{key:"getSourceNode",value:function(){return this.getTerminalNode("source")}},{key:"getTargetNode",value:function(){return this.getTerminalNode("target")}},{key:"getTerminalNode",value:function(t){for(var e=this,n={};e&&e.isEdge();){if(n[e.id])return null;n[e.id]=!0,e=e.getTerminalCell(t)}return e&&e.isNode()?e:null}},{key:"router",get:function(){return this.getRouter()}},{key:"router",set:function(t){null==t?this.removeRouter():this.setRouter(t)}},{key:"getRouter",value:function(){return this.store.get("router")}},{key:"setRouter",value:function(t,e,n){return"object"===typeof t?this.store.set("router",t,e):this.store.set("router",{name:t,args:e},n),this}},{key:"removeRouter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("router",t),this}},{key:"connector",get:function(){return this.getConnector()}},{key:"connector",set:function(t){null==t?this.removeConnector():this.setConnector(t)}},{key:"getConnector",value:function(){return this.store.get("connector")}},{key:"setConnector",value:function(t,e,n){return"object"===typeof t?this.store.set("connector",t,e):this.store.set("connector",{name:t,args:e},n),this}},{key:"removeConnector",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.remove("connector",t)}},{key:"getDefaultLabel",value:function(){var t=this.constructor,e=this.store.get("defaultLabel")||t.defaultLabel||{};return Ni(e)}},{key:"labels",get:function(){return this.getLabels()}},{key:"labels",set:function(t){this.setLabels(t)}},{key:"getLabels",value:function(){var t=this;return(0,A.Z)(this.store.get("labels",[])).map((function(e){return t.parseLabel(e)}))}},{key:"setLabels",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.store.set("labels",Array.isArray(t)?t:[t],e),this}},{key:"insertLabel",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getLabels(),i=r.length,o=null!=e&&Number.isFinite(e)?e:i;return o<0&&(o=i+o+1),r.splice(o,0,this.parseLabel(t)),this.setLabels(r,n)}},{key:"appendLabel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.insertLabel(t,-1,e)}},{key:"getLabelAt",value:function(t){var e=this.getLabels();return null!=t&&Number.isFinite(t)?this.parseLabel(e[t]):null}},{key:"setLabelAt",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&Number.isFinite(t)){var r=this.getLabels();r[t]=this.parseLabel(e),this.setLabels(r,n)}return this}},{key:"removeLabelAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getLabels(),r=null!=t&&Number.isFinite(t)?t:-1,i=n.splice(r,1);return this.setLabels(n,e),i.length?i[0]:null}},{key:"parseLabel",value:function(t){return"string"===typeof t?this.constructor.parseStringLabel(t):t}},{key:"onLabelsChanged",value:function(t){var e=t.previous,n=t.current,r=e&&n?n.filter((function(t){return e.find((function(e){return t===e||ei(t,e)}))?null:t})):n?(0,A.Z)(n):[],i=e&&n?e.filter((function(t){return n.find((function(e){return t===e||ei(t,e)}))?null:t})):e?(0,A.Z)(e):[];r.length>0&&this.notify("labels:added",{added:r,cell:this,edge:this}),i.length>0&&this.notify("labels:removed",{removed:i,cell:this,edge:this})}},{key:"vertices",get:function(){return this.getVertices()}},{key:"vertices",set:function(t){this.setVertices(t)}},{key:"getVertices",value:function(){return(0,A.Z)(this.store.get("vertices",[]))}},{key:"setVertices",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(t)?t:[t];return this.store.set("vertices",n.map((function(t){return Ol.toJSON(t)})),e),this}},{key:"insertVertex",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getVertices(),i=r.length,o=null!=e&&Number.isFinite(e)?e:i;return o<0&&(o=i+o+1),r.splice(o,0,Ol.toJSON(t)),this.setVertices(r,n)}},{key:"appendVertex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.insertVertex(t,-1,e)}},{key:"getVertexAt",value:function(t){return null!=t&&Number.isFinite(t)?this.getVertices()[t]:null}},{key:"setVertexAt",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&Number.isFinite(t)){var r=this.getVertices();r[t]=e,this.setVertices(r,n)}return this}},{key:"removeVertexAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getVertices(),r=null!=t&&Number.isFinite(t)?t:-1;return n.splice(r,1),this.setVertices(n,e)}},{key:"onVertexsChanged",value:function(t){var e=t.previous,n=t.current,r=e&&n?n.filter((function(t){return e.find((function(e){return Ol.equals(t,e)}))?null:t})):n?(0,A.Z)(n):[],i=e&&n?e.filter((function(t){return n.find((function(e){return Ol.equals(t,e)}))?null:t})):e?(0,A.Z)(e):[];r.length>0&&this.notify("vertexs:added",{added:r,cell:this,edge:this}),i.length>0&&this.notify("vertexs:removed",{removed:i,cell:this,edge:this})}},{key:"getDefaultMarkup",value:function(){return this.store.get("defaultMarkup")||Uf.getEdgeMarkup()}},{key:"getMarkup",value:function(){return _f((0,Gf.Z)(r.prototype),"getMarkup",this).call(this)||this.getDefaultMarkup()}},{key:"translate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.translateBy=n.translateBy||this.id,n.tx=t,n.ty=e,this.applyToPoints((function(n){return{x:(n.x||0)+t,y:(n.y||0)+e}}),n)}},{key:"scale",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.applyToPoints((function(r){return Ol.create(r).scale(t,e,n).toJSON()}),r)}},{key:"applyToPoints",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=this.getSource(),i=this.getTarget();Ol.isPointLike(r)&&(n.source=t(r)),Ol.isPointLike(i)&&(n.target=t(i));var o=this.getVertices();return o.length>0&&(n.vertices=o.map(t)),this.store.set(n,e),this}},{key:"getBBox",value:function(){return this.getPolyline().bbox()}},{key:"getConnectionPoint",value:function(){return this.getPolyline().pointAt(.5)}},{key:"getPolyline",value:function(){var t=[this.getSourcePoint()].concat((0,A.Z)(this.getVertices().map((function(t){return Ol.create(t)}))),[this.getTargetPoint()]);return new Rl(t)}},{key:"updateParent",value:function(t){var e=null,n=this.getSourceCell(),r=this.getTargetCell(),i=this.getParent();return n&&r&&(e=n===r||n.isDescendantOf(r)?r:r.isDescendantOf(n)?n:Qd.getCommonAncestor(n,r)),i&&e&&e.id!==i.id&&i.unembed(this,t),!e||i&&i.id===e.id||e.embed(this,t),e}},{key:"hasLoop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getSource(),n=this.getTarget(),r=e.cell,i=n.cell;if(!r||!i)return!1;var o=r===i;if(!o&&t.deep&&this._model){var a=this.getSourceCell(),s=this.getTargetCell();a&&s&&(o=a.isAncestorOf(s,t)||s.isAncestorOf(a,t))}return o}},{key:"getFragmentAncestor",value:function(){var t=[this,this.getSourceNode(),this.getTargetNode()].filter((function(t){return null!=t}));return this.getCommonAncestor.apply(this,(0,A.Z)(t))}},{key:"isFragmentDescendantOf",value:function(t){var e=this.getFragmentAncestor();return!!e&&(e.id===t.id||e.isDescendantOf(t))}}]),r}(Qd,Symbol.toStringTag);rv.defaults={},function(t){t.equalTerminals=function(t,e){var n=t,r=e;return n.cell===r.cell&&(n.port===r.port||null==n.port&&null==r.port)}}(rv||(rv={})),function(t){t.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}},t.parseStringLabel=function(t){return{attrs:{label:{text:t}}}}}(rv||(rv={})),function(t){t.toStringTag="X6.".concat(t.name),t.isEdge=function(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag],r=e;return(null==n||n===t.toStringTag)&&"function"===typeof r.isNode&&"function"===typeof r.isEdge&&"function"===typeof r.prop&&"function"===typeof r.attr&&"function"===typeof r.disconnect&&"function"===typeof r.getSource&&"function"===typeof r.getTarget}}(rv||(rv={})),function(t){t.registry=$l.create({type:"edge",process:function(e,n){if(Xd.exist(e,!1))throw new Error("Edge with name '".concat(e,"' was registered by anthor Node"));if("function"===typeof n)return n.config({shape:e}),n;var r=t,i=n.inherit,o=void 0===i?"edge":i,a=nv(n,["inherit"]);if("string"===typeof o){var s=this.get(o||"edge");null==s&&o?this.onNotFound(o,"inherited"):r=s}else r=o;null==a.constructorName&&(a.constructorName=e);var u=r.define.call(r,a);return u.config({shape:e}),u}}),Xd.setEdgeRegistry(t.registry)}(rv||(rv={})),function(t){var e=0;t.define=function(n){var r,i=n.constructorName,o=n.overwrite,a=nv(n,["constructorName","overwrite"]),s=Fi((r=i||a.shape)?Ya(r):"CustomEdge".concat(e+=1),this);return s.config(a),a.shape&&t.registry.register(a.shape,s,o),s},t.create=function(e){var n=e.shape||"edge",r=t.registry.get(n);return r?new r(e):t.registry.onNotFound(n)}}(rv||(rv={})),function(t){var e="basic.edge";t.config({shape:e,propHooks:function(e){var n=e.label,r=e.vertices,i=nv(e,["label","vertices"]);if(n){null==i.labels&&(i.labels=[]);var o="string"===typeof n?t.parseStringLabel(n):n;i.labels.push(o)}return r&&Array.isArray(r)&&(i.vertices=r.map((function(t){return Ol.create(t).toJSON()}))),i}}),t.registry.register(e,t)}(rv||(rv={}));var iv=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},ov=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,m.Z)(this,n),(r=e.call(this)).length=0,r.comparator=i.comparator||"zIndex",r.clean(),t&&r.reset(t,{silent:!0}),r}return(0,b.Z)(n,[{key:"toJSON",value:function(){return this.cells.map((function(t){return t.toJSON()}))}},{key:"add",value:function(t,e,n){var r,i,o=this;"number"===typeof e?(r=e,i=Object.assign({merge:!1},n)):(r=this.length,i=Object.assign({merge:!1},e)),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var a,s=Array.isArray(t)?t:[t],u=this.comparator&&"number"!==typeof e&&!1!==i.sort,l=this.comparator||null,c=!1,h=[],f=[];(s.forEach((function(t){var e=o.get(t);e?i.merge&&!t.isSameStore(e)&&(e.setProp(t.getProp(),n),f.push(e),u&&!c&&(c=null==l||"function"===typeof l?e.hasChanged():"string"===typeof l?e.hasChanged(l):l.some((function(t){return e.hasChanged(t)})))):(h.push(t),o.reference(t))})),h.length)&&(u&&(c=!0),(a=this.cells).splice.apply(a,[r,0].concat(h)),this.length=this.cells.length);return c&&this.sort({silent:!0}),i.silent||(h.forEach((function(t,e){var n={cell:t,index:r+e,options:i};o.trigger("added",n),i.dryrun||t.notify("added",Object.assign({},n))})),c&&this.trigger("sorted"),(h.length||f.length)&&this.trigger("updated",{added:h,merged:f,removed:[],options:i})),this}},{key:"remove",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(t)?t:[t],r=this.removeCells(n,e);return!e.silent&&r.length>0&&this.trigger("updated",{options:e,removed:r,added:[],merged:[]}),Array.isArray(t)?r:r[0]}},{key:"removeCells",value:function(t,e){for(var n=[],r=0;r<t.length;r+=1){var i=this.get(t[r]);if(null!=i){var o=this.cells.indexOf(i);this.cells.splice(o,1),this.length-=1,delete this.map[i.id],n.push(i),this.unreference(i),e.dryrun||i.remove(),e.silent||(this.trigger("removed",{cell:i,index:o,options:e}),e.dryrun||i.notify("removed",{cell:i,index:o,options:e}))}}return n}},{key:"reset",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.cells.slice();if(r.forEach((function(t){return e.unreference(t)})),this.clean(),this.add(t,Object.assign({silent:!0},n)),!n.silent){var i=this.cells.slice();this.trigger("reseted",{options:n,previous:r,current:i});var o=[],a=[];i.forEach((function(t){r.some((function(e){return e.id===t.id}))||o.push(t)})),r.forEach((function(t){i.some((function(e){return e.id===t.id}))||a.push(t)})),this.trigger("updated",{options:n,added:o,removed:a,merged:[]})}return this}},{key:"push",value:function(t,e){return this.add(t,this.length,e)}},{key:"pop",value:function(t){var e=this.at(this.length-1);return this.remove(e,t)}},{key:"unshift",value:function(t,e){return this.add(t,0,e)}},{key:"shift",value:function(t){var e=this.at(0);return this.remove(e,t)}},{key:"get",value:function(t){if(null==t)return null;var e="string"===typeof t||"number"===typeof t?t:t.id;return this.map[e]||null}},{key:"has",value:function(t){return null!=this.get(t)}},{key:"at",value:function(t){return t<0&&(t+=this.length),this.cells[t]||null}},{key:"first",value:function(){return this.at(0)}},{key:"last",value:function(){return this.at(-1)}},{key:"indexOf",value:function(t){return this.cells.indexOf(t)}},{key:"toArray",value:function(){return this.cells.slice()}},{key:"sort",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!=this.comparator&&(this.cells=So(this.cells,this.comparator),t.silent||this.trigger("sorted")),this}},{key:"clone",value:function(){return new(0,this.constructor)(this.cells.slice(),{comparator:this.comparator})}},{key:"reference",value:function(t){this.map[t.id]=t,t.on("*",this.notifyCellEvent,this)}},{key:"unreference",value:function(t){t.off("*",this.notifyCellEvent,this),delete this.map[t.id]}},{key:"notifyCellEvent",value:function(t,e){var n=e.cell;this.trigger("cell:".concat(t),e),n&&(n.isNode()?this.trigger("node:".concat(t),Object.assign(Object.assign({},e),{node:n})):n.isEdge()&&this.trigger("edge:".concat(t),Object.assign(Object.assign({},e),{edge:n})))}},{key:"clean",value:function(){this.length=0,this.cells=[],this.map={}}},{key:"dispose",value:function(){this.reset([])}}]),n}(Wi);iv([ov.dispose()],ov.prototype,"dispose",null);var av=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},sv=function(t,e){(0,x.Z)(r,t);var n=(0,P.Z)(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,m.Z)(this,r),(t=n.call(this)).batches={},t.addings=new WeakMap,t.nodes={},t.edges={},t.outgoings={},t.incomings={},t.collection=new ov(e),t.setup(),t}return(0,b.Z)(r,[{key:e,get:function(){return r.toStringTag}},{key:"notify",value:function(t,e){this.trigger(t,e);var n=this.graph;return n&&("sorted"===t||"reseted"===t||"updated"===t?n.trigger("model:".concat(t),e):n.trigger(t,e)),this}},{key:"setup",value:function(){var t=this,e=this.collection;e.on("sorted",(function(){return t.notify("sorted",null)})),e.on("updated",(function(e){return t.notify("updated",e)})),e.on("cell:change:zIndex",(function(){return t.sortOnChangeZ()})),e.on("added",(function(e){var n=e.cell;t.onCellAdded(n)})),e.on("removed",(function(e){var n=e.cell;t.onCellRemoved(n,e.options),t.notify("cell:removed",e),n.isNode()?t.notify("node:removed",Object.assign(Object.assign({},e),{node:n})):n.isEdge()&&t.notify("edge:removed",Object.assign(Object.assign({},e),{edge:n}))})),e.on("reseted",(function(e){t.onReset(e.current),t.notify("reseted",e)})),e.on("edge:change:source",(function(e){var n=e.edge;return t.onEdgeTerminalChanged(n,"source")})),e.on("edge:change:target",(function(e){var n=e.edge;t.onEdgeTerminalChanged(n,"target")}))}},{key:"sortOnChangeZ",value:function(){this.collection.sort()}},{key:"onCellAdded",value:function(t){var e=t.id;t.isEdge()?(t.updateParent(),this.edges[e]=!0,this.onEdgeTerminalChanged(t,"source"),this.onEdgeTerminalChanged(t,"target")):this.nodes[e]=!0}},{key:"onCellRemoved",value:function(t,e){var n=t.id;if(t.isEdge()){delete this.edges[n];var r=t.getSource(),i=t.getTarget();if(r&&r.cell){var o=this.outgoings[r.cell],a=o?o.indexOf(n):-1;a>=0&&(o.splice(a,1),0===o.length&&delete this.outgoings[r.cell])}if(i&&i.cell){var s=this.incomings[i.cell],u=s?s.indexOf(n):-1;u>=0&&(s.splice(u,1),0===s.length&&delete this.incomings[i.cell])}}else delete this.nodes[n];e.clear||(e.disconnectEdges?this.disconnectConnectedEdges(t,e):this.removeConnectedEdges(t,e)),t.model===this&&(t.model=null)}},{key:"onReset",value:function(t){var e=this;this.nodes={},this.edges={},this.outgoings={},this.incomings={},t.forEach((function(t){return e.onCellAdded(t)}))}},{key:"onEdgeTerminalChanged",value:function(t,e){var n="source"===e?this.outgoings:this.incomings,r=t.previous(e);if(r&&r.cell){var i=Qd.isCell(r.cell)?r.cell.id:r.cell,o=n[i],a=o?o.indexOf(t.id):-1;a>=0&&(o.splice(a,1),0===o.length&&delete n[i])}var s=t.getTerminal(e);if(s&&s.cell){var u=Qd.isCell(s.cell)?s.cell.id:s.cell,l=n[u]||[];-1===l.indexOf(t.id)&&l.push(t.id),n[u]=l}}},{key:"prepareCell",value:function(t,e){return t.model||e&&e.dryrun||(t.model=this),null==t.zIndex&&t.setZIndex(this.getMaxZIndex()+1,{silent:!0}),t}},{key:"resetCells",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.map((function(t){return e.prepareCell(t,Object.assign(Object.assign({},n),{dryrun:!0}))})),this.collection.reset(t,n),t.map((function(t){return e.prepareCell(t,{options:n})})),this}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getCells();if(0===e.length)return this;var n=Object.assign(Object.assign({},t),{clear:!0});return this.batchUpdate("clear",(function(){for(var t=e.sort((function(t,e){return(t.isEdge()?1:2)-(e.isEdge()?1:2)}));t.length>0;){var r=t.shift();r&&r.remove(n)}}),n),this}},{key:"addNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ev.isNode(t)?t:this.createNode(t);return this.addCell(n,e),n}},{key:"updateNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.createNode(t),r=n.getProp();return n.dispose(),this.updateCell(r,e)}},{key:"createNode",value:function(t){return ev.create(t)}},{key:"addEdge",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=rv.isEdge(t)?t:this.createEdge(t);return this.addCell(n,e),n}},{key:"createEdge",value:function(t){return rv.create(t)}},{key:"updateEdge",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.createEdge(t),r=n.getProp();return n.dispose(),this.updateCell(r,e)}},{key:"addCell",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(t)?this.addCells(t,n):(this.collection.has(t)||this.addings.has(t)||(this.addings.set(t,!0),this.collection.add(this.prepareCell(t,n),n),t.eachChild((function(t){return e.addCell(t,n)})),this.addings.delete(t)),this)}},{key:"addCells",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.length;if(0===r)return this;var i=Object.assign(Object.assign({},n),{position:r-1,maxPosition:r-1});return this.startBatch("add",Object.assign(Object.assign({},i),{cells:t})),t.forEach((function(t){e.addCell(t,i),i.position-=1})),this.stopBatch("add",Object.assign(Object.assign({},i),{cells:t})),this}},{key:"updateCell",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.id&&this.getCell(t.id);return!!n&&this.batchUpdate("update",(function(){return Object.entries(t).forEach((function(t){var r=(0,Pu.Z)(t,2),i=r[0],o=r[1];return n.setProp(i,o,e)})),!0}),t)}},{key:"removeCell",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="string"===typeof t?this.getCell(t):t;return n&&this.has(n)?this.collection.remove(n,e):null}},{key:"updateCellId",value:function(t,e){if(t.id!==e){this.startBatch("update",{id:e}),t.prop("id",e);var n=t.clone({keepId:!0});return this.addCell(n),this.getConnectedEdges(t).forEach((function(n){var r=n.getSourceCell(),i=n.getTargetCell();r===t&&n.setSource(Object.assign(Object.assign({},n.getSource()),{cell:e})),i===t&&n.setTarget(Object.assign(Object.assign({},n.getTarget()),{cell:e}))})),this.removeCell(t),this.stopBatch("update",{id:e}),n}}},{key:"removeCells",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.length?this.batchUpdate("remove",(function(){return t.map((function(t){return e.removeCell(t,n)}))})):[]}},{key:"removeConnectedEdges",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getConnectedEdges(t);return n.forEach((function(t){t.remove(e)})),n}},{key:"disconnectConnectedEdges",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="string"===typeof t?t:t.id;this.getConnectedEdges(t).forEach((function(t){var r=t.getSourceCellId(),i=t.getTargetCellId();r===n&&t.setSource({x:0,y:0},e),i===n&&t.setTarget({x:0,y:0},e)}))}},{key:"has",value:function(t){return this.collection.has(t)}},{key:"total",value:function(){return this.collection.length}},{key:"indexOf",value:function(t){return this.collection.indexOf(t)}},{key:"getCell",value:function(t){return this.collection.get(t)}},{key:"getCells",value:function(){return this.collection.toArray()}},{key:"getFirstCell",value:function(){return this.collection.first()}},{key:"getLastCell",value:function(){return this.collection.last()}},{key:"getMinZIndex",value:function(){var t=this.collection.first();return t&&t.getZIndex()||0}},{key:"getMaxZIndex",value:function(){var t=this.collection.last();return t&&t.getZIndex()||0}},{key:"getCellsFromCache",value:function(t){var e=this;return t?Object.keys(t).map((function(t){return e.getCell(t)})).filter((function(t){return null!=t})):[]}},{key:"getNodes",value:function(){return this.getCellsFromCache(this.nodes)}},{key:"getEdges",value:function(){return this.getCellsFromCache(this.edges)}},{key:"getOutgoingEdges",value:function(t){var e=this,n="string"===typeof t?t:t.id,r=this.outgoings[n];return r?r.map((function(t){return e.getCell(t)})).filter((function(t){return t&&t.isEdge()})):null}},{key:"getIncomingEdges",value:function(t){var e=this,n="string"===typeof t?t:t.id,r=this.incomings[n];return r?r.map((function(t){return e.getCell(t)})).filter((function(t){return t&&t.isEdge()})):null}},{key:"getConnectedEdges",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],i="string"===typeof t?this.getCell(t):t;if(null==i)return r;var o={},a=n.indirect,s=n.incoming,u=n.outgoing;null==s&&null==u&&(s=u=!0);var l=function t(n,i){var l=i?e.getOutgoingEdges(n):e.getIncomingEdges(n);if(null!=l&&l.forEach((function(e){o[e.id]||(r.push(e),o[e.id]=!0,a&&(s&&t(e,!1),u&&t(e,!0)))})),a&&n.isEdge()){var c=i?n.getTargetCell():n.getSourceCell();c&&c.isEdge()&&(o[c.id]||(r.push(c),t(c,i)))}};if(u&&l(i,!0),s&&l(i,!1),n.deep){var c=i.getDescendants({deep:!0}),h={};c.forEach((function(t){t.isNode()&&(h[t.id]=!0)}));var f=function(t,i){var a=i?e.getOutgoingEdges(t.id):e.getIncomingEdges(t.id);null!=a&&a.forEach((function(t){if(!o[t.id]){var e=t.getSourceCell(),i=t.getTargetCell();if(!n.enclosed&&e&&h[e.id]&&i&&h[i.id])return;r.push(t),o[t.id]=!0}}))};c.forEach((function(t){t.isEdge()||(u&&f(t,!0),s&&f(t,!1))}))}return r}},{key:"isBoundary",value:function(t,e){var n="string"===typeof t?this.getCell(t):t,r=e?this.getIncomingEdges(n):this.getOutgoingEdges(n);return null==r||0===r.length}},{key:"getBoundaryNodes",value:function(t){var e=this,n=[];return Object.keys(this.nodes).forEach((function(r){if(e.isBoundary(r,t)){var i=e.getCell(r);i&&n.push(i)}})),n}},{key:"getRoots",value:function(){return this.getBoundaryNodes(!0)}},{key:"getLeafs",value:function(){return this.getBoundaryNodes(!1)}},{key:"isRoot",value:function(t){return this.isBoundary(t,!0)}},{key:"isLeaf",value:function(t){return this.isBoundary(t,!1)}},{key:"getNeighbors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.incoming,r=e.outgoing;null==n&&null==r&&(n=r=!0);var i=this.getConnectedEdges(t,e).reduce((function(i,o){var a=o.hasLoop(e),s=o.getSourceCell(),u=o.getTargetCell();return n&&s&&s.isNode()&&!i[s.id]&&(!a&&(s===t||e.deep&&s.isDescendantOf(t))||(i[s.id]=s)),r&&u&&u.isNode()&&!i[u.id]&&(!a&&(u===t||e.deep&&u.isDescendantOf(t))||(i[u.id]=u)),i}),{});if(t.isEdge()){if(n){var o=t.getSourceCell();o&&o.isNode()&&!i[o.id]&&(i[o.id]=o)}if(r){var a=t.getTargetCell();a&&a.isNode()&&!i[a.id]&&(i[a.id]=a)}}return Object.keys(i).map((function(t){return i[t]}))}},{key:"isNeighbor",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.incoming,i=n.outgoing;return null==r&&null==i&&(r=i=!0),this.getConnectedEdges(t,n).some((function(t){var n=t.getSourceCell(),o=t.getTargetCell();return!(!r||!n||n.id!==e.id)||!(!i||!o||o.id!==e.id)}))}},{key:"getSuccessors",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];return this.search(t,(function(i,o){i!==t&&e.matchDistance(o,n.distance)&&r.push(i)}),Object.assign(Object.assign({},n),{outgoing:!0})),r}},{key:"isSuccessor",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=!1;return this.search(t,(function(o,a){if(o===e&&o!==t&&n.matchDistance(a,r.distance))return i=!0,!1}),Object.assign(Object.assign({},r),{outgoing:!0})),i}},{key:"getPredecessors",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];return this.search(t,(function(i,o){i!==t&&e.matchDistance(o,n.distance)&&r.push(i)}),Object.assign(Object.assign({},n),{incoming:!0})),r}},{key:"isPredecessor",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=!1;return this.search(t,(function(o,a){if(o===e&&o!==t&&n.matchDistance(a,r.distance))return i=!0,!1}),Object.assign(Object.assign({},r),{incoming:!0})),i}},{key:"matchDistance",value:function(t,e){return null==e||("function"===typeof e?e(t):!(!Array.isArray(e)||!e.includes(t))||t===e)}},{key:"getCommonAncestor",value:function(){for(var t=[],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){e&&(Array.isArray(e)?t.push.apply(t,(0,A.Z)(e)):t.push(e))})),Qd.getCommonAncestor.apply(Qd,t)}},{key:"getSubGraph",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],i={},o=[],a=[],s=function(t){i[t.id]||(r.push(t),i[t.id]=t,t.isEdge()&&a.push(t),t.isNode()&&o.push(t))};return t.forEach((function(t){(s(t),n.deep)&&t.getDescendants({deep:!0}).forEach((function(t){return s(t)}))})),a.forEach((function(t){var e=t.getSourceCell(),n=t.getTargetCell();e&&!i[e.id]&&(r.push(e),i[e.id]=e,e.isNode()&&o.push(e)),n&&!i[n.id]&&(r.push(n),i[n.id]=n,n.isNode()&&o.push(n))})),o.forEach((function(t){e.getConnectedEdges(t,n).forEach((function(t){var e=t.getSourceCell(),n=t.getTargetCell();!i[t.id]&&e&&i[e.id]&&n&&i[n.id]&&(r.push(t),i[t.id]=t)}))})),r}},{key:"cloneSubGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getSubGraph(t,e);return this.cloneCells(n)}},{key:"cloneCells",value:function(t){return Qd.cloneCells(t)}},{key:"getNodesFromPoint",value:function(t,e){var n="number"===typeof t?{x:t,y:e||0}:t;return this.getNodes().filter((function(t){return t.getBBox().containsPoint(n)}))}},{key:"getNodesInArea",value:function(t,e,n,r,i){var o="number"===typeof t?new El(t,e,n,r):El.create(t),a="number"===typeof t?i:e,s=a&&a.strict;return this.getNodes().filter((function(t){var e=t.getBBox();return s?o.containsRect(e):o.isIntersectWithRect(e)}))}},{key:"getEdgesInArea",value:function(t,e,n,r,i){var o="number"===typeof t?new El(t,e,n,r):El.create(t),a="number"===typeof t?i:e,s=a&&a.strict;return this.getEdges().filter((function(t){var e=t.getBBox();return 0===e.width?e.inflate(1,0):0===e.height&&e.inflate(0,1),s?o.containsRect(e):o.isIntersectWithRect(e)}))}},{key:"getNodesUnderNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getBBox();return(null==e.by||"bbox"===e.by?this.getNodesInArea(n):this.getNodesFromPoint(n[e.by])).filter((function(e){return t.id!==e.id&&!e.isDescendantOf(t)}))}},{key:"getAllCellsBBox",value:function(){return this.getCellsBBox(this.getCells())}},{key:"getCellsBBox",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qd.getCellsBBox(t,e)}},{key:"search",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.breadthFirst?this.breadthFirstSearch(t,e,n):this.depthFirstSearch(t,e,n)}},{key:"breadthFirstSearch",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=[],o={},a={};i.push(t),a[t.id]=0;for(var s=function(){var t=i.shift();return null==t||o[t.id]?0:(o[t.id]=!0,!1===nt(e,n,t,a[t.id])?0:void n.getNeighbors(t,r).forEach((function(e){a[e.id]=a[t.id]+1,i.push(e)})))};i.length>0;)s()}},{key:"depthFirstSearch",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=[],o={},a={};i.push(t),a[t.id]=0;for(var s=function(){var t=i.pop();if(null==t||o[t.id])return 0;if(o[t.id]=!0,!1===nt(e,n,t,a[t.id]))return 0;var s=n.getNeighbors(t,r),u=i.length;s.forEach((function(e){a[e.id]=a[t.id]+1,i.splice(u,0,e)}))};i.length>0;)s()}},{key:"getShortestPath",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};this.getEdges().forEach((function(t){var e=t.getSourceCellId(),i=t.getTargetCellId();e&&i&&(r[e]||(r[e]=[]),r[i]||(r[i]=[]),r[e].push(i),n.directed||r[i].push(e))}));var i="string"===typeof t?t:t.id,o=dl.run(r,i,n.weight),a=[],s="string"===typeof e?e:e.id;for(o[s]&&a.push(s);s=o[s];)a.unshift(s);return a}},{key:"translate",value:function(t,e,n){return this.getCells().filter((function(t){return!t.hasParent()})).forEach((function(r){return r.translate(t,e,n)})),this}},{key:"resize",value:function(t,e,n){return this.resizeCells(t,e,this.getCells(),n)}},{key:"resizeCells",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.getCellsBBox(n);if(i){var o=Math.max(t/i.width,0),a=Math.max(e/i.height,0),s=i.getOrigin();n.forEach((function(t){return t.scale(o,a,s,r)}))}return this}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.toJSON(this.getCells(),t)}},{key:"parseJSON",value:function(t){return r.fromJSON(t)}},{key:"fromJSON",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.parseJSON(t);return this.resetCells(n,e),this}},{key:"startBatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.batches[t]=(this.batches[t]||0)+1,this.notify("batch:start",{name:t,data:e}),this}},{key:"stopBatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.batches[t]=(this.batches[t]||0)-1,this.notify("batch:stop",{name:t,data:e}),this}},{key:"batchUpdate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.startBatch(t,n);var r=e();return this.stopBatch(t,n),r}},{key:"hasActiveBatch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(this.batches);return(Array.isArray(e)?e:[e]).some((function(e){return t.batches[e]>0}))}},{key:"dispose",value:function(){this.collection.dispose()}}]),r}(Wi,Symbol.toStringTag);av([sv.dispose()],sv.prototype,"dispose",null),function(t){t.toStringTag="X6.".concat(t.name),t.isModel=function(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag],r=e;return(null==n||n===t.toStringTag)&&"function"===typeof r.addNode&&"function"===typeof r.addEdge&&null!=r.collection}}(sv||(sv={})),function(t){t.toJSON=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{cells:t.map((function(t){return t.toJSON(e)}))}},t.fromJSON=function(t){var e=[];return Array.isArray(t)?e.push.apply(e,(0,A.Z)(t)):(t.cells&&e.push.apply(e,(0,A.Z)(t.cells)),t.nodes&&t.nodes.forEach((function(t){null==t.shape&&(t.shape="rect"),e.push(t)})),t.edges&&t.edges.forEach((function(t){null==t.shape&&(t.shape="edge"),e.push(t)}))),e.map((function(t){var e=t.shape;if(e){if(ev.registry.exist(e))return ev.create(t);if(rv.registry.exist(e))return rv.create(t)}throw new Error("The `shape` should be specified when creating a node/edge instance")}))}}(sv||(sv={}));var uv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},lv=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"label",get:function(){return this.getLabel()},set:function(t){this.setLabel(t)}},{key:"getLabel",value:function(){return this.getAttrByPath("text/text")}},{key:"setLabel",value:function(t,e){return null==t?this.removeLabel():this.setAttrByPath("text/text",t,e),this}},{key:"removeLabel",value:function(){return this.removeAttrByPath("text/text"),this}}]),n}(ev);!function(t){t.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},t.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},t.config({attrs:{text:Object.assign({},t.labelAttr)},propHooks:function(t){var e=t.label,n=uv(t,["label"]);return e&&qi(n,"attrs/text/text",e),n},visible:!0})}(lv||(lv={}));var cv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function hv(t){return[{tagName:t,selector:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body"},{tagName:"text",selector:"label"}]}function fv(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={constructorName:t,markup:hv(t,n.selector),attrs:(0,y.Z)({},t,Object.assign({},lv.bodyAttr))};return(n.parent||lv).define(sr(r,e,{shape:t}))}fv("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}});var gv=rv.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}}),dv=(fv("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}}),function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}),vv=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"points",get:function(){return this.getPoints()},set:function(t){this.setPoints(t)}},{key:"getPoints",value:function(){return this.getAttrByPath("body/refPoints")}},{key:"setPoints",value:function(t,e){return null==t?this.removePoints():this.setAttrByPath("body/refPoints",n.pointsToString(t),e),this}},{key:"removePoints",value:function(){return this.removeAttrByPath("body/refPoints"),this}}]),n}(lv);!function(t){function e(t){return"string"===typeof t?t:t.map((function(t){return Array.isArray(t)?t.join(","):Ol.isPointLike(t)?"".concat(t.x,", ").concat(t.y):""})).join(" ")}t.pointsToString=e,t.config({propHooks:function(t){var n=t.points,r=dv(t,["points"]);if(n){var i=e(n);i&&qi(r,"attrs/body/refPoints",i)}return r}})}(vv||(vv={}));fv("polygon",{},{parent:vv}),fv("polyline",{},{parent:vv});var pv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},yv=(lv.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks:function(t){var e=t.path,n=pv(t,["path"]);return e&&qi(n,"attrs/body/refD",e),n}}),function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}),mv=(lv.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},ss.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:Vs.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},lv.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks:function(t){var e=t.text,n=yv(t,["text"]);return e&&qi(n,"attrs/label/text",e),n},attrHooks:{text:{set:function(t,e){var n=e.cell,r=e.view,i=e.refBBox,o=e.elem,a=e.attrs;if(!(o instanceof HTMLElement)){var s=a.style||{},u={text:t,width:-5,height:"100%"},l=Object.assign({textVerticalAnchor:"middle"},s);return nt(_h.presets.textWrap.set,this,u,{cell:n,view:r,elem:o,refBBox:i,attrs:l}),{fill:s.color||null}}o.textContent=t},position:function(t,e){var n=e.refBBox;if(e.elem instanceof SVGElement)return n.getCenter()}}}}),fv("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xlink:href";return function(e){var n=e.imageUrl,r=e.imageWidth,i=e.imageHeight,o=cv(e,["imageUrl","imageWidth","imageHeight"]);if(null!=n||null!=r||null!=i){var a=function(){if(o.attrs){var e=o.attrs.image;null!=n&&(e[t]=n),null!=r&&(e.width=r),null!=i&&(e.height=i),o.attrs.image=e}};o.attrs?(null==o.attrs.image&&(o.attrs.image={}),a()):(o.attrs={image:{}},a())}return o}}()},{selector:"image"}),fv("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}}),function(t,e){(0,x.Z)(r,t);var n=(0,P.Z)(r);function r(){var t;return(0,m.Z)(this,r),(t=n.apply(this,arguments)).portsCache={},t}return(0,b.Z)(r,[{key:e,get:function(){return r.toStringTag}},{key:"getContainerClassName",value:function(){var t=[_f((0,Gf.Z)(r.prototype),"getContainerClassName",this).call(this),this.prefixClassName("node")];return this.can("nodeMovable")||t.push(this.prefixClassName("node-immovable")),t.join(" ")}},{key:"updateClassName",value:function(t){var e=t.target;if(e.hasAttribute("magnet")){var n=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?Ls(e,n):Ns(e,n)}else{var r=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(r):this.addClass(r)}}},{key:"isNodeView",value:function(){return!0}},{key:"confirmUpdate",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t;return this.hasAction(r,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(r,"render")?(this.render(),r=this.removeAction(r,["render","update","resize","translate","rotate","ports","tools"])):(r=this.handleAction(r,"resize",(function(){return e.resize()}),"update"),r=this.handleAction(r,"update",(function(){return e.update()}),tf.useCSSSelector?"ports":null),r=this.handleAction(r,"translate",(function(){return e.translate()})),r=this.handleAction(r,"rotate",(function(){return e.rotate()})),r=this.handleAction(r,"ports",(function(){return e.renderPorts()})),r=this.handleAction(r,"tools",(function(){e.getFlag("tools")===t?e.renderTools():e.updateTools(n)}))),r}},{key:"update",value:function(t){this.cleanCache(),tf.useCSSSelector&&this.removePorts();var e=this.cell,n=e.getSize(),r=e.getAttrs();this.updateAttrs(this.container,r,{attrs:t===r?null:t,rootBBox:new El(0,0,n.width,n.height),selectors:this.selectors}),tf.useCSSSelector&&this.renderPorts()}},{key:"renderMarkup",value:function(){var t=this.cell.markup;if(t){if("string"===typeof t)throw new TypeError("Not support string markup.");return this.renderJSONMarkup(t)}throw new TypeError("Invalid node markup.")}},{key:"renderJSONMarkup",value:function(t){var e=this.parseJSONMarkup(t,this.container);this.selectors=e.selectors,this.container.appendChild(e.fragment)}},{key:"render",value:function(){return this.empty(),this.renderMarkup(),this.resize(),this.updateTransform(),tf.useCSSSelector||this.renderPorts(),this.renderTools(),this}},{key:"resize",value:function(){this.cell.getAngle()&&this.rotate(),this.update()}},{key:"translate",value:function(){this.updateTransform()}},{key:"rotate",value:function(){this.updateTransform()}},{key:"getTranslationString",value:function(){var t=this.cell.getPosition();return"translate(".concat(t.x,",").concat(t.y,")")}},{key:"getRotationString",value:function(){var t=this.cell.getAngle();if(t){var e=this.cell.getSize();return"rotate(".concat(t,",").concat(e.width/2,",").concat(e.height/2,")")}}},{key:"updateTransform",value:function(){var t=this.getTranslationString(),e=this.getRotationString();e&&(t+=" ".concat(e)),this.container.setAttribute("transform",t)}},{key:"findPortElem",value:function(t,e){var n=t?this.portsCache[t]:null;if(!n)return null;var r=n.portContentElement,i=n.portContentSelectors||{};return this.findOne(e,r,i)}},{key:"cleanPortsCache",value:function(){this.portsCache={}}},{key:"removePorts",value:function(){Object.values(this.portsCache).forEach((function(t){Us(t.portElement)}))}},{key:"renderPorts",value:function(){var t=this,e=this.container,n=[];e.childNodes.forEach((function(t){n.push(t)}));var r=this.cell.getParsedPorts(),i=Bo(r,"zIndex"),o="auto";i[o]&&i[o].forEach((function(r){var i=t.getPortElement(r);e.append(i),n.push(i)})),Object.keys(i).forEach((function(e){if(e!==o){var r=parseInt(e,10);t.appendPorts(i[e],r,n)}})),this.updatePorts()}},{key:"appendPorts",value:function(t,e,n){var r=this,i=t.map((function(t){return r.getPortElement(t)}));n[e]||e<0?Xs(n[Math.max(e,0)],i):Js(this.container,i)}},{key:"getPortElement",value:function(t){var e=this.portsCache[t.id];return e?e.portElement:this.createPortElement(t)}},{key:"createPortElement",value:function(t){var e=Uf.renderMarkup(this.cell.getPortContainerMarkup()),n=e.elem;if(null==n)throw new Error("Invalid port container markup.");var r=(e=Uf.renderMarkup(this.getPortMarkup(t))).elem,i=e.selectors;if(null==r)throw new Error("Invalid port markup.");this.setAttrs({port:t.id,"port-group":t.group},r);var o="x6-port";t.group&&(o+=" x6-port-".concat(t.group)),Ns(n,o),Ns(n,"x6-port"),Ns(r,"x6-port-body"),n.appendChild(r);var a,s,u=i;if(this.existPortLabel(t)){if(a=(e=Uf.renderMarkup(this.getPortLabelMarkup(t.label))).elem,s=e.selectors,null==a)throw new Error("Invalid port label markup.");if(i&&s){for(var l in s)if(i[l]&&l!==this.rootSelector)throw new Error("Selectors within port must be unique.");u=Object.assign(Object.assign({},i),s)}Ns(a,"x6-port-label"),n.appendChild(a)}return this.portsCache[t.id]={portElement:n,portSelectors:u,portLabelElement:a,portLabelSelectors:s,portContentElement:r,portContentSelectors:i},this.graph.options.onPortRendered&&this.graph.options.onPortRendered({port:t,node:this.cell,container:n,selectors:u,labelContainer:a,labelSelectors:s,contentContainer:r,contentSelectors:i}),n}},{key:"updatePorts",value:function(){var t=this,e=this.cell.getParsedGroups(),n=Object.keys(e);0===n.length?this.updatePortGroup():n.forEach((function(e){return t.updatePortGroup(e)}))}},{key:"updatePortGroup",value:function(t){for(var e=El.fromSize(this.cell.getSize()),n=this.cell.getPortsLayoutByGroup(t,e),r=0,i=n.length;r<i;r+=1){var o=n[r],a=o.portId,s=this.portsCache[a]||{},u=o.portLayout;if(this.applyPortTransform(s.portElement,u),null!=o.portAttrs){var l={selectors:s.portSelectors||{}};o.portSize&&(l.rootBBox=El.fromSize(o.portSize)),this.updateAttrs(s.portElement,o.portAttrs,l)}var c=o.labelLayout;if(c&&s.portLabelElement&&(this.applyPortTransform(s.portLabelElement,c,-(u.angle||0)),c.attrs)){var h={selectors:s.portLabelSelectors||{}};o.labelSize&&(h.rootBBox=El.fromSize(o.labelSize)),this.updateAttrs(s.portLabelElement,c.attrs,h)}}}},{key:"applyPortTransform",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.angle,i=e.position;Ku(t,Wu().rotate(n).translate(i.x||0,i.y||0).rotate(r||0),{absolute:!0})}},{key:"getPortMarkup",value:function(t){return t.markup||this.cell.portMarkup}},{key:"getPortLabelMarkup",value:function(t){return t.markup||this.cell.portLabelMarkup}},{key:"existPortLabel",value:function(t){return t.attrs&&t.attrs.text}},{key:"getEventArgs",value:function(t,e,n){var r=this,i=r.cell;return null==e||null==n?{e:t,view:r,node:i,cell:i}:{e:t,x:e,y:n,view:r,node:i,cell:i}}},{key:"getPortEventArgs",value:function(t,e,n){var r=this,i=r.cell,o=i;return n?{e:t,x:n.x,y:n.y,view:r,node:i,cell:o,port:e}:{e:t,view:r,node:i,cell:o,port:e}}},{key:"notifyMouseDown",value:function(t,e,n){_f((0,Gf.Z)(r.prototype),"onMouseDown",this).call(this,t,e,n),this.notify("node:mousedown",this.getEventArgs(t,e,n))}},{key:"notifyMouseMove",value:function(t,e,n){_f((0,Gf.Z)(r.prototype),"onMouseMove",this).call(this,t,e,n),this.notify("node:mousemove",this.getEventArgs(t,e,n))}},{key:"notifyMouseUp",value:function(t,e,n){_f((0,Gf.Z)(r.prototype),"onMouseUp",this).call(this,t,e,n),this.notify("node:mouseup",this.getEventArgs(t,e,n))}},{key:"notifyPortEvent",value:function(t,e,n){var r=this.findAttr("port",e.target);if(r){var i=e.type;"node:port:mouseenter"===t?e.type="mouseenter":"node:port:mouseleave"===t&&(e.type="mouseleave"),this.notify(t,this.getPortEventArgs(e,r,n)),e.type=i}}},{key:"onClick",value:function(t,e,n){_f((0,Gf.Z)(r.prototype),"onClick",this).call(this,t,e,n),this.notify("node:click",this.getEventArgs(t,e,n)),this.notifyPortEvent("node:port:click",t,{x:e,y:n})}},{key:"onDblClick",value:function(t,e,n){_f((0,Gf.Z)(r.prototype),"onDblClick",this).call(this,t,e,n),this.notify("node:dblclick",this.getEventArgs(t,e,n)),this.notifyPortEvent("node:port:dblclick",t,{x:e,y:n})}},{key:"onContextMenu",value:function(t,e,n){_f((0,Gf.Z)(r.prototype),"onContextMenu",this).call(this,t,e,n),this.notify("node:contextmenu",this.getEventArgs(t,e,n)),this.notifyPortEvent("node:port:contextmenu",t,{x:e,y:n})}},{key:"onMouseDown",value:function(t,e,n){this.isPropagationStopped(t)||(this.notifyMouseDown(t,e,n),this.notifyPortEvent("node:port:mousedown",t,{x:e,y:n}),this.startNodeDragging(t,e,n))}},{key:"onMouseMove",value:function(t,e,n){var r=this.getEventData(t),i=r.action;if("magnet"===i)this.dragMagnet(t,e,n);else{if("move"===i){var o=r.targetView||this;o.dragNode(t,e,n),o.notify("node:moving",{e:t,x:e,y:n,view:o,cell:o.cell,node:o.cell})}this.notifyMouseMove(t,e,n),this.notifyPortEvent("node:port:mousemove",t,{x:e,y:n})}this.setEventData(t,r)}},{key:"onMouseUp",value:function(t,e,n){var r=this.getEventData(t),i=r.action;"magnet"===i?this.stopMagnetDragging(t,e,n):(this.notifyMouseUp(t,e,n),this.notifyPortEvent("node:port:mouseup",t,{x:e,y:n}),"move"===i&&(r.targetView||this).stopNodeDragging(t,e,n));var o=r.targetMagnet;o&&this.onMagnetClick(t,o,e,n),this.checkMouseleave(t)}},{key:"onMouseOver",value:function(t){_f((0,Gf.Z)(r.prototype),"onMouseOver",this).call(this,t),this.notify("node:mouseover",this.getEventArgs(t)),this.notifyPortEvent("node:port:mouseenter",t),this.notifyPortEvent("node:port:mouseover",t)}},{key:"onMouseOut",value:function(t){_f((0,Gf.Z)(r.prototype),"onMouseOut",this).call(this,t),this.notify("node:mouseout",this.getEventArgs(t)),this.notifyPortEvent("node:port:mouseleave",t),this.notifyPortEvent("node:port:mouseout",t)}},{key:"onMouseEnter",value:function(t){this.updateClassName(t),_f((0,Gf.Z)(r.prototype),"onMouseEnter",this).call(this,t),this.notify("node:mouseenter",this.getEventArgs(t))}},{key:"onMouseLeave",value:function(t){_f((0,Gf.Z)(r.prototype),"onMouseLeave",this).call(this,t),this.notify("node:mouseleave",this.getEventArgs(t))}},{key:"onMouseWheel",value:function(t,e,n,i){_f((0,Gf.Z)(r.prototype),"onMouseWheel",this).call(this,t,e,n,i),this.notify("node:mousewheel",Object.assign({delta:i},this.getEventArgs(t,e,n)))}},{key:"onMagnetClick",value:function(t,e,n,r){var i=this.graph;i.view.getMouseMovedCount(t)>i.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:e},this.getEventArgs(t,n,r)))}},{key:"onMagnetDblClick",value:function(t,e,n,r){this.notify("node:magnet:dblclick",Object.assign({magnet:e},this.getEventArgs(t,n,r)))}},{key:"onMagnetContextMenu",value:function(t,e,n,r){this.notify("node:magnet:contextmenu",Object.assign({magnet:e},this.getEventArgs(t,n,r)))}},{key:"onMagnetMouseDown",value:function(t,e,n,r){this.startMagnetDragging(t,n,r)}},{key:"onCustomEvent",value:function(t,e,n,i){this.notify("node:customevent",Object.assign({name:e},this.getEventArgs(t,n,i))),_f((0,Gf.Z)(r.prototype),"onCustomEvent",this).call(this,t,e,n,i)}},{key:"prepareEmbedding",value:function(t){var e=this.graph,n=this.getEventData(t).cell||this.cell,r=e.findViewByCell(n),i=e.snapToGrid(t.clientX,t.clientY);this.notify("node:embed",{e:t,node:n,view:r,cell:n,x:i.x,y:i.y,currentParent:n.getParent()})}},{key:"processEmbedding",value:function(t,e){var n=this,r=e.cell||this.cell,i=e.graph||this.graph,o=i.options.embedding,a=o.findParent,s="function"===typeof a?nt(a,i,{view:this,node:this.cell}).filter((function(t){return Qd.isCell(t)&&n.cell.id!==t.id&&!t.isDescendantOf(n.cell)})):i.model.getNodesUnderNode(r,{by:a});if(o.frontOnly&&s.length>0){var u=Bo(s,"zIndex"),l=Zo(Object.keys(u).map((function(t){return parseInt(t,10)})));l&&(s=u[l])}s=s.filter((function(t){return t.visible}));for(var c=null,h=e.candidateEmbedView,f=o.validate,g=s.length-1;g>=0;g-=1){var d=s[g];if(h&&h.cell.id===d.id){c=h;break}var v=d.findView(i);if(f&&nt(f,i,{child:this.cell,parent:v.cell,childView:this,parentView:v})){c=v;break}}this.clearEmbedding(e),c&&c.highlight(null,{type:"embedding"}),e.candidateEmbedView=c;var p=i.snapToGrid(t.clientX,t.clientY);this.notify("node:embedding",{e:t,cell:r,node:r,view:i.findViewByCell(r),x:p.x,y:p.y,currentParent:r.getParent(),candidateParent:c?c.cell:null})}},{key:"clearEmbedding",value:function(t){var e=t.candidateEmbedView;e&&(e.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null)}},{key:"finalizeEmbedding",value:function(t,e){this.graph.startBatch("embedding");var n=e.cell||this.cell,r=e.graph||this.graph,i=r.findViewByCell(n),o=n.getParent(),a=e.candidateEmbedView;if(a?(a.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null,null!=o&&o.id===a.cell.id||a.cell.insertChild(n,void 0,{ui:!0})):o&&o.unembed(n,{ui:!0}),r.model.getConnectedEdges(n,{deep:!0}).forEach((function(t){t.updateParent({ui:!0})})),i&&a){var s=r.snapToGrid(t.clientX,t.clientY);i.notify("node:embedded",{e:t,cell:n,x:s.x,y:s.y,node:n,view:r.findViewByCell(n),previousParent:o,currentParent:n.getParent()})}this.graph.stopBatch("embedding")}},{key:"getDelegatedView",value:function(){for(var t=this.cell,e=this;e&&!t.isEdge();){if(!t.hasParent()||e.can("stopDelegateOnDragging"))return e;t=t.getParent(),e=this.graph.findViewByCell(t)}return null}},{key:"validateMagnet",value:function(t,e,n){if("passive"!==e.getAttribute("magnet")){var r=this.graph.options.connecting.validateMagnet;return!r||nt(r,this.graph,{e:n,magnet:e,view:t,cell:t.cell})}return!1}},{key:"startMagnetDragging",value:function(t,e,n){if(this.can("magnetConnectable")){t.stopPropagation();var r=t.currentTarget,i=this.graph;this.setEventData(t,{targetMagnet:r}),this.validateMagnet(this,r,t)?(i.options.magnetThreshold<=0&&this.startConnectting(t,r,e,n),this.setEventData(t,{action:"magnet"}),this.stopPropagation(t)):this.onMouseDown(t,e,n),i.view.delegateDragEvents(t,this)}}},{key:"startConnectting",value:function(t,e,n,r){this.graph.model.startBatch("add-edge");var i=this.createEdgeFromMagnet(e,n,r);i.setEventData(t,i.prepareArrowheadDragging("target",{x:n,y:r,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(t,{edgeView:i}),i.notifyMouseDown(t,n,r)}},{key:"getDefaultEdge",value:function(t,e){var n,r=this.graph.options.connecting.createEdge;return r&&(n=nt(r,this.graph,{sourceMagnet:e,sourceView:t,sourceCell:t.cell})),n}},{key:"createEdgeFromMagnet",value:function(t,e,n){var r=this.graph,i=r.model,o=this.getDefaultEdge(this,t);return o.setSource(Object.assign(Object.assign({},o.getSource()),this.getEdgeTerminal(t,e,n,o,"source"))),o.setTarget(Object.assign(Object.assign({},o.getTarget()),{x:e,y:n})),o.addTo(i,{async:!1,ui:!0}),o.findView(r)}},{key:"dragMagnet",value:function(t,e,n){var r=this.getEventData(t),i=r.edgeView;if(i)i.onMouseMove(t,e,n),this.autoScrollGraph(t.clientX,t.clientY);else{var o=this.graph,a=o.options.magnetThreshold,s=this.getEventTarget(t),u=r.targetMagnet;if("onleave"===a){if(u===s||u.contains(s))return}else if(o.view.getMouseMovedCount(t)<=a)return;this.startConnectting(t,u,e,n)}}},{key:"stopMagnetDragging",value:function(t,e,n){var r=this.eventData(t).edgeView;r&&(r.onMouseUp(t,e,n),this.graph.model.stopBatch("add-edge"))}},{key:"notifyUnhandledMouseDown",value:function(t,e,n){this.notify("node:unhandled:mousedown",{e:t,x:e,y:n,view:this,cell:this.cell,node:this.cell})}},{key:"notifyNodeMove",value:function(t,e,n,r,i){var o=this,a=[i],s=this.graph.getPlugin("selection");if(s&&s.isSelectionMovable()){var u=s.getSelectedCells();u.includes(i)&&(a=u.filter((function(t){return t.isNode()})))}a.forEach((function(i){o.notify(t,{e:e,x:n,y:r,cell:i,node:i,view:i.findView(o.graph)})}))}},{key:"getRestrictArea",value:function(t){var e=this.graph.options.translating.restrict,n="function"===typeof e?nt(e,this.graph,t):e;return"number"===typeof n?this.graph.transform.getGraphArea().inflate(n):!0===n?this.graph.transform.getGraphArea():n||null}},{key:"startNodeDragging",value:function(t,e,n){var r=this.getDelegatedView();if(null==r||!r.can("nodeMovable"))return this.notifyUnhandledMouseDown(t,e,n);this.setEventData(t,{targetView:r,action:"move"});var i=Ol.create(r.cell.getPosition());r.setEventData(t,{moving:!1,offset:i.diff(e,n),restrict:this.getRestrictArea(r)})}},{key:"dragNode",value:function(t,e,n){var r=this.cell,i=this.graph,o=i.getGridSize(),a=this.getEventData(t),s=a.offset,u=a.restrict;a.moving||(a.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",t,e,n,this.cell)),this.autoScrollGraph(t.clientX,t.clientY);var l=Pl.snapToGrid(e+s.x,o),c=Pl.snapToGrid(n+s.y,o);r.setPosition(l,c,{restrict:u,deep:!0,ui:!0}),i.options.embedding.enabled&&(a.embedding||(this.prepareEmbedding(t),a.embedding=!0),this.processEmbedding(t,a))}},{key:"stopNodeDragging",value:function(t,e,n){var r=this.getEventData(t);r.embedding&&this.finalizeEmbedding(t,r),r.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",t,e,n,this.cell)),r.moving=!1,r.embedding=!1}},{key:"autoScrollGraph",value:function(t,e){var n=this.graph.getPlugin("scroller");n&&n.autoScroll(t,e)}}]),r}(Qf,Symbol.toStringTag));!function(t){t.toStringTag="X6.".concat(t.name),t.isNodeView=function(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag],r=e;return(null==n||n===t.toStringTag)&&"function"===typeof r.isNodeView&&"function"===typeof r.isEdgeView&&"function"===typeof r.confirmUpdate&&"function"===typeof r.update&&"function"===typeof r.findPortElem&&"function"===typeof r.resize&&"function"===typeof r.rotate&&"function"===typeof r.translate}}(mv||(mv={})),mv.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),mv.registry.register("node",mv,!0);var bv=function(t,e){(0,x.Z)(r,t);var n=(0,P.Z)(r);function r(){var t;return(0,m.Z)(this,r),(t=n.apply(this,arguments)).POINT_ROUNDING=2,t}return(0,b.Z)(r,[{key:e,get:function(){return r.toStringTag}},{key:"getContainerClassName",value:function(){return[_f((0,Gf.Z)(r.prototype),"getContainerClassName",this).call(this),this.prefixClassName("edge")].join(" ")}},{key:"sourceBBox",get:function(){var t=this.sourceView;if(!t){var e=this.cell.getSource();return new El(e.x,e.y)}var n=this.sourceMagnet;return t.isEdgeElement(n)?new El(this.sourceAnchor.x,this.sourceAnchor.y):t.getBBoxOfElement(n||t.container)}},{key:"targetBBox",get:function(){var t=this.targetView;if(!t){var e=this.cell.getTarget();return new El(e.x,e.y)}var n=this.targetMagnet;return t.isEdgeElement(n)?new El(this.targetAnchor.x,this.targetAnchor.y):t.getBBoxOfElement(n||t.container)}},{key:"isEdgeView",value:function(){return!0}},{key:"confirmUpdate",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t;if(this.hasAction(r,"source")){if(!this.updateTerminalProperties("source"))return r;r=this.removeAction(r,"source")}if(this.hasAction(r,"target")){if(!this.updateTerminalProperties("target"))return r;r=this.removeAction(r,"target")}return this.hasAction(r,"render")?(this.render(),r=this.removeAction(r,["render","update","labels","tools"])):(r=this.handleAction(r,"update",(function(){return e.update(n)})),r=this.handleAction(r,"labels",(function(){return e.onLabelsChange(n)})),r=this.handleAction(r,"tools",(function(){return e.renderTools()})))}},{key:"render",value:function(){return this.empty(),this.renderMarkup(),this.labelContainer=null,this.renderLabels(),this.update(),this.renderTools(),this}},{key:"renderMarkup",value:function(){var t=this.cell.markup;if(t){if("string"===typeof t)throw new TypeError("Not support string markup.");return this.renderJSONMarkup(t)}throw new TypeError("Invalid edge markup.")}},{key:"renderJSONMarkup",value:function(t){var e=this.parseJSONMarkup(t,this.container);this.selectors=e.selectors,this.container.append(e.fragment)}},{key:"customizeLabels",value:function(){if(this.labelContainer)for(var t=this.cell,e=t.labels,n=0,r=e.length;n<r;n+=1){var i=e[n],o=this.labelCache[n],a=this.labelSelectors[n],s=this.graph.options.onEdgeLabelRendered;s&&s({edge:t,label:i,container:o,selectors:a})}}},{key:"renderLabels",value:function(){var t=this.cell,e=t.getLabels(),n=e.length,r=this.labelContainer;if(this.labelCache={},this.labelSelectors={},n<=0)return r&&r.parentNode&&r.parentNode.removeChild(r),this;r?this.empty(r):(r=Fs("g"),this.addClass(this.prefixClassName("edge-labels"),r),this.labelContainer=r);for(var i=0,o=e.length;i<o;i+=1){var a=e[i],s=this.normalizeLabelMarkup(this.parseLabelMarkup(a.markup)),u=void 0,l=void 0;if(s)u=s.node,l=s.selectors;else{var c=t.getDefaultLabel(),h=this.normalizeLabelMarkup(this.parseLabelMarkup(c.markup));u=h.node,l=h.selectors}u.setAttribute("data-index","".concat(i)),r.appendChild(u);var f=this.rootSelector;if(l[f])throw new Error("Ambiguous label root selector.");l[f]=u,this.labelCache[i]=u,this.labelSelectors[i]=l}return null==r.parentNode&&this.container.appendChild(r),this.updateLabels(),this.customizeLabels(),this}},{key:"onLabelsChange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.shouldRerenderLabels(t)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}},{key:"shouldRerenderLabels",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.cell.previous("labels");if(null==e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var n=t.propertyPathArray||[],r=n.length;if(r>1)if(e[n[1]]){if(2===r)return"object"===typeof t.propertyValue&&Oe(t.propertyValue,"markup");if("markup"!==n[2])return!1}}return!0}},{key:"parseLabelMarkup",value:function(t){return t?"string"===typeof t?this.parseLabelStringMarkup(t):this.parseJSONMarkup(t):null}},{key:"parseLabelStringMarkup",value:function(t){for(var e=Au.createVectors(t),n=document.createDocumentFragment(),r=0,i=e.length;r<i;r+=1){var o=e[r].node;n.appendChild(o)}return{fragment:n,selectors:{}}}},{key:"normalizeLabelMarkup",value:function(t){if(null!=t){var e,n=t.fragment;if(!(n instanceof DocumentFragment)||!n.hasChildNodes())throw new Error("Invalid label markup.");var r=n.childNodes;return(e=r.length>1||"G"!==r[0].nodeName.toUpperCase()?Au.create("g").append(n):Au.create(r[0])).addClass(this.prefixClassName("edge-label")),{node:e.node,selectors:t.selectors}}}},{key:"updateLabels",value:function(){if(this.labelContainer)for(var t=this.cell,e=t.labels,n=this.can("edgeLabelMovable"),r=t.getDefaultLabel(),i=0,o=e.length;i<o;i+=1){var a=this.labelCache[i],s=this.labelSelectors[i];a.setAttribute("cursor",n?"move":"default");var u=e[i],l=sr({},r.attrs,u.attrs);this.updateAttrs(a,l,{selectors:s,rootBBox:u.size?El.fromSize(u.size):void 0})}}},{key:"renderTools",value:function(){var t=this.cell.getTools();return this.addTools(t),this}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.cleanCache(),this.updateConnection(t);var e=this.cell.getAttrs();return null!=e&&this.updateAttrs(this.container,e,{selectors:this.selectors}),this.updateLabelPositions(),this.updateTools(t),this}},{key:"removeRedundantLinearVertices",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.cell,n=e.getVertices(),r=[this.sourceAnchor].concat((0,A.Z)(n),[this.targetAnchor]),i=r.length,o=new Rl(r);o.simplify({threshold:.01});var a=o.points.map((function(t){return t.toJSON()})),s=a.length;return i===s?0:(e.setVertices(a.slice(1,s-1),t),i-s)}},{key:"getTerminalView",value:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("Unknown terminal type '".concat(t,"'"))}}},{key:"getTerminalAnchor",value:function(t){switch(t){case"source":return Ol.create(this.sourceAnchor);case"target":return Ol.create(this.targetAnchor);default:throw new Error("Unknown terminal type '".concat(t,"'"))}}},{key:"getTerminalConnectionPoint",value:function(t){switch(t){case"source":return Ol.create(this.sourcePoint);case"target":return Ol.create(this.targetPoint);default:throw new Error("Unknown terminal type '".concat(t,"'"))}}},{key:"getTerminalMagnet",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case"source":if(e.raw)return this.sourceMagnet;var n=this.sourceView;return n?this.sourceMagnet||n.container:null;case"target":if(e.raw)return this.targetMagnet;var r=this.targetView;return r?this.targetMagnet||r.container:null;default:throw new Error("Unknown terminal type '".concat(t,"'"))}}},{key:"updateConnection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.cell;if(t.translateBy&&e.isFragmentDescendantOf(t.translateBy)){var n=t.tx||0,r=t.ty||0;this.routePoints=new Rl(this.routePoints).translate(n,r).points,this.translateConnectionPoints(n,r),this.path.translate(n,r)}else{var i=e.getVertices(),o=this.findAnchors(i);this.sourceAnchor=o.source,this.targetAnchor=o.target,this.routePoints=this.findRoutePoints(i);var a=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=a.source,this.targetPoint=a.target;var s=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,s.source||this.sourcePoint,s.target||this.targetPoint)}this.cleanCache()}},{key:"findAnchors",value:function(t){var e=this.cell,n=e.source,r=e.target,i=t[0],o=t[t.length-1];return r.priority&&!n.priority?this.findAnchorsOrdered("target",o,"source",i):this.findAnchorsOrdered("source",i,"target",o)}},{key:"findAnchorsOrdered",value:function(t,e,n,r){var i,o,a,s,u=this.cell,l=u[t],c=u[n],h=this.getTerminalView(t),f=this.getTerminalView(n),g=this.getTerminalMagnet(t),d=this.getTerminalMagnet(n);h?(s=e?Ol.create(e):f?d:Ol.create(c),o=this.getAnchor(l.anchor,h,g,s,t)):o=Ol.create(l);if(f){var v=Ol.create(r||o);a=this.getAnchor(c.anchor,f,d,v,n)}else a=Ol.isPointLike(c)?Ol.create(c):new Ol;return i={},(0,y.Z)(i,t,o),(0,y.Z)(i,n,a),i}},{key:"getAnchor",value:function(t,e,n,r,i){var o,a=e.isEdgeElement(n),s=this.graph.options.connecting,u="string"===typeof t?{name:t}:t;if(!u){var l=a?("source"===i?s.sourceEdgeAnchor:s.targetEdgeAnchor)||s.edgeAnchor:("source"===i?s.sourceAnchor:s.targetAnchor)||s.anchor;u="string"===typeof l?{name:l}:l}if(!u)throw new Error("Anchor should be specified.");var c=u.name;if(a){var h=zg.registry.get(c);if("function"!==typeof h)return zg.registry.onNotFound(c);o=nt(h,this,e,n,r,u.args||{},i)}else{var f=Dg.registry.get(c);if("function"!==typeof f)return Dg.registry.onNotFound(c);o=nt(f,this,e,n,r,u.args||{},i)}return o?o.round(this.POINT_ROUNDING):new Ol}},{key:"findRoutePoints",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.graph.options.connecting.router||jd.presets.normal,r=this.cell.getRouter()||n;if("function"===typeof r)t=nt(r,this,e,{},this);else{var i="string"===typeof r?r:r.name,o="string"===typeof r?{}:r.args||{},a=i?jd.registry.get(i):jd.presets.normal;if("function"!==typeof a)return jd.registry.onNotFound(i);t=nt(a,this,e,o,this)}return null==t?e.map((function(t){return Ol.create(t)})):t.map((function(t){return Ol.create(t)}))}},{key:"findConnectionPoints",value:function(t,e,n){var r,i,o=this.cell,a=this.graph.options.connecting,s=o.getSource(),u=o.getTarget(),l=this.sourceView,c=this.targetView,h=t[0],f=t[t.length-1];if(l&&!l.isEdgeElement(this.sourceMagnet)){var g=this.sourceMagnet||l.container,d=new Ml(h||n,e),v=s.connectionPoint||a.sourceConnectionPoint||a.connectionPoint;r=this.getConnectionPoint(v,l,g,d,"source")}else r=e;if(c&&!c.isEdgeElement(this.targetMagnet)){var p=this.targetMagnet||c.container,y=u.connectionPoint||a.targetConnectionPoint||a.connectionPoint,m=new Ml(f||e,n);i=this.getConnectionPoint(y,c,p,m,"target")}else i=n;return{source:r,target:i}}},{key:"getConnectionPoint",value:function(t,e,n,r,i){var o=r.end;if(null==t)return o;var a="string"===typeof t?t:t.name,s="string"===typeof t?{}:t.args,u=$g.registry.get(a);if("function"!==typeof u)return $g.registry.onNotFound(a);var l=nt(u,this,r,e,n,s||{},i);return l?l.round(this.POINT_ROUNDING):o}},{key:"findMarkerPoints",value:function(t,e,n){var r,i,o=this,a=function(t){for(var e=o.cell.getAttrs(),n=Object.keys(e),r=0,i=n.length;r<i;r+=1){var a=e[n[r]];if(a["".concat(t,"Marker")]||a["".concat(t,"-marker")]){var s=a.strokeWidth||a["stroke-width"];if(s)return parseFloat(s);break}}return null},s=t[0],u=t[t.length-1],l=a("source");l&&(r=e.clone().move(s||n,-l));var c=a("target");return c&&(i=n.clone().move(u||e,-c)),this.sourceMarkerPoint=r||e.clone(),this.targetMarkerPoint=i||n.clone(),{source:r,target:i}}},{key:"findPath",value:function(t,e,n){var r,i,o,a=this.cell.getConnector()||this.graph.options.connecting.connector;if("string"===typeof a?r=a:(r=a.name,i=a.args),r){var s=qd.registry.get(r);if("function"!==typeof s)return qd.registry.onNotFound(r);o=s}else o=qd.presets.normal;var u=nt(o,this,e,n,t,Object.assign(Object.assign({},i),{raw:!0}),this);return"string"===typeof u?Yl.parse(u):u}},{key:"translateConnectionPoints",value:function(t,e){this.sourcePoint.translate(t,e),this.targetPoint.translate(t,e),this.sourceAnchor.translate(t,e),this.targetAnchor.translate(t,e),this.sourceMarkerPoint.translate(t,e),this.targetMarkerPoint.translate(t,e)}},{key:"updateLabelPositions",value:function(){if(null==this.labelContainer)return this;if(!this.path)return this;var t=this.cell,e=t.getLabels();if(0===e.length)return this;for(var n=t.getDefaultLabel(),r=this.normalizeLabelPosition(n.position),i=0,o=e.length;i<o;i+=1){var a=e[i],s=this.labelCache[i];if(s){var u=this.normalizeLabelPosition(a.position),l=sr({},r,u),c=this.getLabelTransformationMatrix(l);s.setAttribute("transform",Yu(c))}}return this}},{key:"updateTerminalProperties",value:function(t){var e=this.cell,n=this.graph,r=e[t],i=r&&r.cell,o="".concat(t,"View");if(!i)return this[o]=null,this.updateTerminalMagnet(t),!0;var a=n.getCellById(i);if(!a)throw new Error("Edge's ".concat(t,' node with id "').concat(i,'" not exists'));var s=a.findView(n);return!!s&&(this[o]=s,this.updateTerminalMagnet(t),!0)}},{key:"updateTerminalMagnet",value:function(t){var e="".concat(t,"Magnet"),n=this.getTerminalView(t);if(n){var r=n.getMagnetFromEdgeTerminal(this.cell[t]);r===n.container&&(r=null),this[e]=r}else this[e]=null}},{key:"getLabelPositionAngle",value:function(t){var e=this.cell.getLabelAt(t);return e&&e.position&&"object"===typeof e.position&&e.position.angle||0}},{key:"getLabelPositionArgs",value:function(t){var e=this.cell.getLabelAt(t);if(e&&e.position&&"object"===typeof e.position)return e.position.options}},{key:"getDefaultLabelPositionArgs",value:function(){var t=this.cell.getDefaultLabel();if(t&&t.position&&"object"===typeof t.position)return t.position.options}},{key:"mergeLabelPositionArgs",value:function(t,e){return null===t?null:void 0===t?null===e?null:e:sr({},e,t)}},{key:"getConnection",value:function(){return null!=this.path?this.path.clone():null}},{key:"getConnectionPathData",value:function(){if(null==this.path)return"";var t=this.cache.pathCache;return Oe(t,"data")||(t.data=this.path.serialize()),t.data||""}},{key:"getConnectionSubdivisions",value:function(){if(null==this.path)return null;var t=this.cache.pathCache;return Oe(t,"segmentSubdivisions")||(t.segmentSubdivisions=this.path.getSegmentSubdivisions()),t.segmentSubdivisions}},{key:"getConnectionLength",value:function(){if(null==this.path)return 0;var t=this.cache.pathCache;return Oe(t,"length")||(t.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),t.length}},{key:"getPointAtLength",value:function(t){return null==this.path?null:this.path.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getPointAtRatio",value:function(t){return null==this.path?null:(is(t)&&(t=parseFloat(t)/100),this.path.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}))}},{key:"getTangentAtLength",value:function(t){return null==this.path?null:this.path.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getTangentAtRatio",value:function(t){return null==this.path?null:this.path.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPoint",value:function(t){return null==this.path?null:this.path.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPointLength",value:function(t){return null==this.path?null:this.path.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPointRatio",value:function(t){return null==this.path?null:this.path.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getLabelPosition",value:function(t,e,n,r){var i,o={distance:0},a=0;"number"===typeof n?(a=n,i=r):i=n,null!=i&&(o.options=i);var s,u,l=i&&i.absoluteOffset,c=!(i&&i.absoluteDistance),h=i&&i.absoluteDistance&&i.reverseDistance,f=this.path,g={segmentSubdivisions:this.getConnectionSubdivisions()},d=new Ol(t,e),v=f.closestPointT(d,g),p=this.getConnectionLength()||0,y=f.lengthAtT(v,g);if(c&&(y=p>0?y/p:0),h&&(y=-1*(p-y)||1),o.distance=y,l||(s=f.tangentAtT(v)),s)u=s.pointOffset(d);else{var m=f.pointAtT(v),b=d.diff(m);u={x:b.x,y:b.y}}return o.offset=u,o.angle=a,o}},{key:"normalizeLabelPosition",value:function(t){return"number"===typeof t?{distance:t}:t}},{key:"getLabelTransformationMatrix",value:function(t){var e=this.normalizeLabelPosition(t),n=e.options||{},r=e.angle||0,i=e.distance,o=i>0&&i<=1,a=0,s={x:0,y:0},u=e.offset;u&&("number"===typeof u?a=u:(null!=u.x&&(s.x=u.x),null!=u.y&&(s.y=u.y)));var l,c=0!==s.x||0!==s.y||0===a,h=n.keepGradient,f=n.ensureLegibility,g=this.path,d={segmentSubdivisions:this.getConnectionSubdivisions()},v=o?i*this.getConnectionLength():i,p=g.tangentAtLength(v,d),y=r;if(p){if(c)(l=p.start).translate(s);else{var m=p.clone();m.rotate(-90,p.start),m.setLength(a),l=m.end}h&&(y=p.angle()+r,f&&(y=xl.normalize((y+90)%180-90)))}else l=g.start,c&&l.translate(s);return Wu().translate(l.x,l.y).rotate(y)}},{key:"getVertexIndex",value:function(t,e){var n=this.cell.getVertices(),r=this.getClosestPointLength(new Ol(t,e)),i=0;if(null!=r)for(var o=n.length;i<o;i+=1){var a=n[i],s=this.getClosestPointLength(a);if(null!=s&&r<s)break}return i}},{key:"getEventArgs",value:function(t,e,n){var r=this,i=r.cell;return null==e||null==n?{e:t,view:r,edge:i,cell:i}:{e:t,x:e,y:n,view:r,edge:i,cell:i}}},{key:"notifyUnhandledMouseDown",value:function(t,e,n){this.notify("edge:unhandled:mousedown",{e:t,x:e,y:n,view:this,cell:this.cell,edge:this.cell})}},{key:"notifyMouseDown",value:function(t,e,n){_f((0,Gf.Z)(r.prototype),"onMouseDown",this).call(this,t,e,n),this.notify("edge:mousedown",this.getEventArgs(t,e,n))}},{key:"notifyMouseMove",value:function(t,e,n){_f((0,Gf.Z)(r.prototype),"onMouseMove",this).call(this,t,e,n),this.notify("edge:mousemove",this.getEventArgs(t,e,n))}},{key:"notifyMouseUp",value:function(t,e,n){_f((0,Gf.Z)(r.prototype),"onMouseUp",this).call(this,t,e,n),this.notify("edge:mouseup",this.getEventArgs(t,e,n))}},{key:"onClick",value:function(t,e,n){_f((0,Gf.Z)(r.prototype),"onClick",this).call(this,t,e,n),this.notify("edge:click",this.getEventArgs(t,e,n))}},{key:"onDblClick",value:function(t,e,n){_f((0,Gf.Z)(r.prototype),"onDblClick",this).call(this,t,e,n),this.notify("edge:dblclick",this.getEventArgs(t,e,n))}},{key:"onContextMenu",value:function(t,e,n){_f((0,Gf.Z)(r.prototype),"onContextMenu",this).call(this,t,e,n),this.notify("edge:contextmenu",this.getEventArgs(t,e,n))}},{key:"onMouseDown",value:function(t,e,n){this.notifyMouseDown(t,e,n),this.startEdgeDragging(t,e,n)}},{key:"onMouseMove",value:function(t,e,n){var r=this.getEventData(t);switch(r.action){case"drag-label":this.dragLabel(t,e,n);break;case"drag-arrowhead":this.dragArrowhead(t,e,n);break;case"drag-edge":this.dragEdge(t,e,n)}return this.notifyMouseMove(t,e,n),r}},{key:"onMouseUp",value:function(t,e,n){var r=this.getEventData(t);switch(r.action){case"drag-label":this.stopLabelDragging(t,e,n);break;case"drag-arrowhead":this.stopArrowheadDragging(t,e,n);break;case"drag-edge":this.stopEdgeDragging(t,e,n)}return this.notifyMouseUp(t,e,n),this.checkMouseleave(t),r}},{key:"onMouseOver",value:function(t){_f((0,Gf.Z)(r.prototype),"onMouseOver",this).call(this,t),this.notify("edge:mouseover",this.getEventArgs(t))}},{key:"onMouseOut",value:function(t){_f((0,Gf.Z)(r.prototype),"onMouseOut",this).call(this,t),this.notify("edge:mouseout",this.getEventArgs(t))}},{key:"onMouseEnter",value:function(t){_f((0,Gf.Z)(r.prototype),"onMouseEnter",this).call(this,t),this.notify("edge:mouseenter",this.getEventArgs(t))}},{key:"onMouseLeave",value:function(t){_f((0,Gf.Z)(r.prototype),"onMouseLeave",this).call(this,t),this.notify("edge:mouseleave",this.getEventArgs(t))}},{key:"onMouseWheel",value:function(t,e,n,i){_f((0,Gf.Z)(r.prototype),"onMouseWheel",this).call(this,t,e,n,i),this.notify("edge:mousewheel",Object.assign({delta:i},this.getEventArgs(t,e,n)))}},{key:"onCustomEvent",value:function(t,e,n,i){if(qs(t.target,"edge-tool",this.container)){if(t.stopPropagation(),this.can("useEdgeTools")){if("edge:remove"===e)return void this.cell.remove({ui:!0});this.notify("edge:customevent",Object.assign({name:e},this.getEventArgs(t,n,i)))}this.notifyMouseDown(t,n,i)}else this.notify("edge:customevent",Object.assign({name:e},this.getEventArgs(t,n,i))),_f((0,Gf.Z)(r.prototype),"onCustomEvent",this).call(this,t,e,n,i)}},{key:"onLabelMouseDown",value:function(t,e,n){this.notifyMouseDown(t,e,n),this.startLabelDragging(t,e,n),this.getEventData(t).stopPropagation&&t.stopPropagation()}},{key:"startEdgeDragging",value:function(t,e,n){this.can("edgeMovable")?this.setEventData(t,{x:e,y:n,moving:!1,action:"drag-edge"}):this.notifyUnhandledMouseDown(t,e,n)}},{key:"dragEdge",value:function(t,e,n){var r=this.getEventData(t);r.moving||(r.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e:t,x:e,y:n,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(e-r.x,n-r.y,{ui:!0}),this.setEventData(t,{x:e,y:n}),this.notify("edge:moving",{e:t,x:e,y:n,view:this,cell:this.cell,edge:this.cell})}},{key:"stopEdgeDragging",value:function(t,e,n){var r=this.getEventData(t);r.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e:t,x:e,y:n,view:this,cell:this.cell,edge:this.cell})),r.moving=!1}},{key:"prepareArrowheadDragging",value:function(t,e){var n=this.getTerminalMagnet(t),r={action:"drag-arrowhead",x:e.x,y:e.y,isNewEdge:!0===e.isNewEdge,terminalType:t,initialMagnet:n,initialTerminal:ji(this.cell[t]),fallbackAction:e.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(t),options:e.options};return this.beforeArrowheadDragging(r),r}},{key:"createValidateConnectionArgs",value:function(t){var e,n=[];n[4]=t,n[5]=this;var r=0,i=0;"source"===t?(r=2,e="target"):(i=2,e="source");var o=this.cell[e],a=o.cell;if(a){var s,u=n[r]=this.graph.findViewByCell(a);u&&(s=u.getMagnetFromEdgeTerminal(o))===u.container&&(s=void 0),n[r+1]=s}return function(t,e){return n[i]=t,n[i+1]=t.container===e?void 0:e,n}}},{key:"beforeArrowheadDragging",value:function(t){t.zIndex=this.cell.zIndex,this.cell.toFront();var e=this.container.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(t)}},{key:"afterArrowheadDragging",value:function(t){null!=t.zIndex&&(this.cell.setZIndex(t.zIndex,{ui:!0}),t.zIndex=null),this.container.style.pointerEvents=t.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(t)}},{key:"validateConnection",value:function(t,e,n,i,o,a,s){var u=this,l=this.graph.options.connecting,c=l.allowLoop,h=l.allowNode,f=l.allowEdge,g=l.allowPort,d=l.allowMulti,v=l.validateConnection,p=a?a.cell:null,y="target"===o?n:t,m="target"===o?i:e,b=!0,k=function(r){var l="source"===o?s?s.port:null:p?p.getSourcePortId():null,c="target"===o?s?s.port:null:p?p.getTargetPortId():null;return nt(r,u.graph,{edge:p,edgeView:a,sourceView:t,targetView:n,sourcePort:l,targetPort:c,sourceMagnet:e,targetMagnet:i,sourceCell:t?t.cell:null,targetCell:n?n.cell:null,type:o})};if(null!=c&&("boolean"===typeof c?c||t!==n||(b=!1):b=k(c)),b&&null!=g&&("boolean"===typeof g?!g&&m&&(b=!1):b=k(g)),b&&null!=f&&("boolean"===typeof f?!f&&r.isEdgeView(y)&&(b=!1):b=k(f)),b&&null!=h&&null==m&&("boolean"===typeof h?!h&&mv.isNodeView(y)&&(b=!1):b=k(h)),b&&null!=d&&a){var w=a.cell,x="source"===o?s:w.getSource(),P="target"===o?s:w.getTarget(),A=s?this.graph.getCellById(s.cell):null;if(x&&P&&x.cell&&P.cell&&A)if("function"===typeof d)b=k(d);else{var C=this.graph.model.getConnectedEdges(A,{outgoing:"source"===o,incoming:"target"===o});if(C.length)if("withPort"===d)C.some((function(t){var e=t.getSource(),n=t.getTarget();return e&&n&&e.cell===x.cell&&n.cell===P.cell&&null!=e.port&&e.port===x.port&&null!=n.port&&n.port===P.port}))&&(b=!1);else if(!d){C.some((function(t){var e=t.getSource(),n=t.getTarget();return e&&n&&e.cell===x.cell&&n.cell===P.cell}))&&(b=!1)}}}return b&&null!=v&&(b=k(v)),b}},{key:"allowConnectToBlank",value:function(t){var e=this.graph,n=e.options.connecting.allowBlank;if("function"!==typeof n)return!!n;var r=e.findViewByCell(t),i=t.getSourceCell(),o=t.getTargetCell(),a=e.findViewByCell(i),s=e.findViewByCell(o);return nt(n,e,{edge:t,edgeView:r,sourceCell:i,targetCell:o,sourceView:a,targetView:s,sourcePort:t.getSourcePortId(),targetPort:t.getTargetPortId(),sourceMagnet:r.sourceMagnet,targetMagnet:r.targetMagnet})}},{key:"validateEdge",value:function(t,e,n){var r=this.graph;if(!this.allowConnectToBlank(t)){var i=t.getSourceCellId(),o=t.getTargetCellId();if(!i||!o)return!1}var a=r.options.connecting.validateEdge;return!a||nt(a,r,{edge:t,type:e,previous:n})}},{key:"arrowheadDragging",value:function(t,e,n,r){r.x=e,r.y=n,r.currentTarget!==t&&(r.currentMagnet&&r.currentView&&r.currentView.unhighlight(r.currentMagnet,{type:"magnetAdsorbed"}),r.currentView=this.graph.findViewByElem(t),r.currentView?(r.currentMagnet=r.currentView.findMagnet(t),r.currentMagnet&&this.validateConnection.apply(this,(0,A.Z)(r.getValidateConnectionArgs(r.currentView,r.currentMagnet)).concat([r.currentView.getEdgeTerminal(r.currentMagnet,e,n,this.cell,r.terminalType)]))?r.currentView.highlight(r.currentMagnet,{type:"magnetAdsorbed"}):r.currentMagnet=null):r.currentMagnet=null),r.currentTarget=t,this.cell.prop(r.terminalType,{x:e,y:n},Object.assign(Object.assign({},r.options),{ui:!0}))}},{key:"arrowheadDragged",value:function(t,e,n){var r=t.currentView,i=t.currentMagnet;if(i&&r){r.unhighlight(i,{type:"magnetAdsorbed"});var o=t.terminalType,a=r.getEdgeTerminal(i,e,n,this.cell,o);this.cell.setTerminal(o,a,{ui:!0})}}},{key:"snapArrowhead",value:function(t,e,n){var r=this,i=this.graph,o=i.options.connecting,a=o.snap,s=o.allowEdge,u="object"===typeof a&&a.radius||50,l=i.renderer.findViewsInArea({x:t-u,y:e-u,width:2*u,height:2*u},{nodeOnly:!0});if(s){var c=i.renderer.findEdgeViewsFromPoint({x:t,y:e},u).filter((function(t){return t!==r}));l.push.apply(l,(0,A.Z)(c))}var h,f=n.closestView||null,g=n.closestMagnet||null;n.closestView=null,n.closestMagnet=null;var d,v=Number.MAX_SAFE_INTEGER,p=new Ol(t,e);l.forEach((function(i){if("false"!==i.container.getAttribute("magnet")){if(i.isNodeView())h=i.cell.getBBox().getCenter().distance(p);else if(i.isEdgeView()){var o=i.getClosestPoint(p);h=o?o.distance(p):Number.MAX_SAFE_INTEGER}h<u&&h<v&&(g===i.container||r.validateConnection.apply(r,(0,A.Z)(n.getValidateConnectionArgs(i,null)).concat([i.getEdgeTerminal(i.container,t,e,r.cell,n.terminalType)])))&&(v=h,n.closestView=i,n.closestMagnet=i.container)}i.container.querySelectorAll("[magnet]").forEach((function(o){if("false"!==o.getAttribute("magnet")){var a=i.getBBoxOfElement(o);(h=p.distance(a.getCenter()))<u&&h<v&&(g===o||r.validateConnection.apply(r,(0,A.Z)(n.getValidateConnectionArgs(i,o)).concat([i.getEdgeTerminal(o,t,e,r.cell,n.terminalType)])))&&(v=h,n.closestView=i,n.closestMagnet=o)}}))}));var y=n.terminalType,m=n.closestView,b=n.closestMagnet,k=g!==b;if(f&&k&&f.unhighlight(g,{type:"magnetAdsorbed"}),m){if(!k)return;m.highlight(b,{type:"magnetAdsorbed"}),d=m.getEdgeTerminal(b,t,e,this.cell,y)}else d={x:t,y:e};this.cell.setTerminal(y,d,{},Object.assign(Object.assign({},n.options),{ui:!0}))}},{key:"snapArrowheadEnd",value:function(t){var e=t.closestView,n=t.closestMagnet;e&&n&&(e.unhighlight(n,{type:"magnetAdsorbed"}),t.currentMagnet=e.findMagnet(n)),t.closestView=null,t.closestMagnet=null}},{key:"finishEmbedding",value:function(t){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(t.zIndex=null)}},{key:"fallbackConnection",value:function(t){if("remove"===t.fallbackAction)this.cell.remove({ui:!0});else this.cell.prop(t.terminalType,t.initialTerminal,{ui:!0})}},{key:"notifyConnectionEvent",value:function(t,e){var n=t.terminalType,r=t.initialTerminal,i=this.cell[n];if(i&&!rv.equalTerminals(r,i)){var o=this.graph,a=r,s=a.cell?o.getCellById(a.cell):null,u=a.port,l=s?o.findViewByCell(s):null,c=s||t.isNewEdge?null:Ol.create(r).toJSON(),h=i,f=h.cell?o.getCellById(h.cell):null,g=h.port,d=f?o.findViewByCell(f):null,v=f?null:Ol.create(i).toJSON();this.notify("edge:connected",{e:e,previousCell:s,previousPort:u,previousView:l,previousPoint:c,currentCell:f,currentView:d,currentPort:g,currentPoint:v,previousMagnet:t.initialMagnet,currentMagnet:t.currentMagnet,edge:this.cell,view:this,type:n,isNew:t.isNewEdge})}}},{key:"highlightAvailableMagnets",value:function(t){var e=this,n=this.graph,r=n.model.getCells();t.marked={};for(var i=function(){var i=n.findViewByCell(r[o]);if(!i||i.cell.id===e.cell.id)return 1;var a=Array.prototype.slice.call(i.container.querySelectorAll("[magnet]"));"false"!==i.container.getAttribute("magnet")&&a.push(i.container);var s=a.filter((function(n){return e.validateConnection.apply(e,(0,A.Z)(t.getValidateConnectionArgs(i,n)).concat([i.getEdgeTerminal(n,t.x,t.y,e.cell,t.terminalType)]))}));if(s.length>0){for(var u=0,l=s.length;u<l;u+=1)i.highlight(s[u],{type:"magnetAvailable"});i.highlight(null,{type:"nodeAvailable"}),t.marked[i.cell.id]=s}},o=0,a=r.length;o<a;o+=1)i()}},{key:"unhighlightAvailableMagnets",value:function(t){var e=this,n=t.marked||{};Object.keys(n).forEach((function(t){var r=e.graph.findViewByCell(t);r&&(n[t].forEach((function(t){r.unhighlight(t,{type:"magnetAvailable"})})),r.unhighlight(null,{type:"nodeAvailable"}))})),t.marked=null}},{key:"startArrowheadDragging",value:function(t,e,n){if(this.can("arrowheadMovable")){var r=t.target.getAttribute("data-terminal"),i=this.prepareArrowheadDragging(r,{x:e,y:n});this.setEventData(t,i)}else this.notifyUnhandledMouseDown(t,e,n)}},{key:"dragArrowhead",value:function(t,e,n){var r=this.getEventData(t);this.graph.options.connecting.snap?this.snapArrowhead(e,n,r):this.arrowheadDragging(this.getEventTarget(t),e,n,r)}},{key:"stopArrowheadDragging",value:function(t,e,n){var r=this.graph,i=this.getEventData(t);r.options.connecting.snap?this.snapArrowheadEnd(i):this.arrowheadDragged(i,e,n),this.validateEdge(this.cell,i.terminalType,i.initialTerminal)?(this.finishEmbedding(i),this.notifyConnectionEvent(i,t)):this.fallbackConnection(i),this.afterArrowheadDragging(i)}},{key:"startLabelDragging",value:function(t,e,n){if(this.can("edgeLabelMovable")){var r=t.currentTarget,i=parseInt(r.getAttribute("data-index"),10),o=this.getLabelPositionAngle(i),a=this.getLabelPositionArgs(i),s=this.getDefaultLabelPositionArgs(),u=this.mergeLabelPositionArgs(a,s);this.setEventData(t,{index:i,positionAngle:o,positionArgs:u,stopPropagation:!0,action:"drag-label"})}else this.setEventData(t,{stopPropagation:!0});this.graph.view.delegateDragEvents(t,this)}},{key:"dragLabel",value:function(t,e,n){var r=this.getEventData(t),i=this.cell.getLabelAt(r.index),o=sr({},i,{position:this.getLabelPosition(e,n,r.positionAngle,r.positionArgs)});this.cell.setLabelAt(r.index,o)}},{key:"stopLabelDragging",value:function(t,e,n){}}]),r}(Qf,Symbol.toStringTag);!function(t){t.toStringTag="X6.".concat(t.name),t.isEdgeView=function(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag],r=e;return(null==n||n===t.toStringTag)&&"function"===typeof r.isNodeView&&"function"===typeof r.isEdgeView&&"function"===typeof r.confirmUpdate&&"function"===typeof r.update&&"function"===typeof r.getConnection}}(bv||(bv={})),bv.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],tools:["tools"],vertices:["vertices","update"]}}),bv.registry.register("edge",bv,!0);var kv=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},wv=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(t){var r;(0,m.Z)(this,n),(r=e.call(this)).graph=t;var i=Uf.parseJSONMarkup(n.markup),o=i.selectors,a=i.fragment;return r.background=o.background,r.grid=o.grid,r.svg=o.svg,r.defs=o.defs,r.viewport=o.viewport,r.primer=o.primer,r.stage=o.stage,r.decorator=o.decorator,r.overlay=o.overlay,r.container=r.options.container,r.restore=n.snapshoot(r.container),Ns(r.container,r.prefixClassName("graph")),Js(r.container,a),r.delegateEvents(),r}return(0,b.Z)(n,[{key:"options",get:function(){return this.graph.options}},{key:"delegateEvents",value:function(){var t=this.constructor;return _f((0,Gf.Z)(n.prototype),"delegateEvents",this).call(this,t.events),this}},{key:"guard",value:function(t,e){return"mousedown"===t.type&&2===t.button||(!(!this.options.guard||!this.options.guard(t,e))||(t.data&&void 0!==t.data.guarded?t.data.guarded:!(e&&e.cell&&Qd.isCell(e.cell))&&(this.svg!==t.target&&this.container!==t.target&&!this.svg.contains(t.target))))}},{key:"findView",value:function(t){return this.graph.findViewByElem(t)}},{key:"onDblClick",value:function(t){this.options.preventDefaultDblClick&&t.preventDefault();var e=this.normalizeEvent(t),n=this.findView(e.target);if(!this.guard(e,n)){var r=this.graph.snapToGrid(e.clientX,e.clientY);n?n.onDblClick(e,r.x,r.y):this.graph.trigger("blank:dblclick",{e:e,x:r.x,y:r.y})}}},{key:"onClick",value:function(t){if(this.getMouseMovedCount(t)<=this.options.clickThreshold){var e=this.normalizeEvent(t),n=this.findView(e.target);if(this.guard(e,n))return;var r=this.graph.snapToGrid(e.clientX,e.clientY);n?n.onClick(e,r.x,r.y):this.graph.trigger("blank:click",{e:e,x:r.x,y:r.y})}}},{key:"isPreventDefaultContextMenu",value:function(t){var e=this.options.preventDefaultContextMenu;return"function"===typeof e&&(e=nt(e,this.graph,{view:t})),e}},{key:"onContextMenu",value:function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);if(this.isPreventDefaultContextMenu(n)&&t.preventDefault(),!this.guard(e,n)){var r=this.graph.snapToGrid(e.clientX,e.clientY);n?n.onContextMenu(e,r.x,r.y):this.graph.trigger("blank:contextmenu",{e:e,x:r.x,y:r.y})}}},{key:"delegateDragEvents",value:function(t,e){null==t.data&&(t.data={}),this.setEventData(t,{currentView:e||null,mouseMovedCount:0,startPosition:{x:t.clientX,y:t.clientY}});var n=this.constructor;this.delegateDocumentEvents(n.documentEvents,t.data),this.undelegateEvents()}},{key:"getMouseMovedCount",value:function(t){return this.getEventData(t).mouseMovedCount||0}},{key:"onMouseDown",value:function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);if(!this.guard(e,n)){this.options.preventDefaultMouseDown&&t.preventDefault();var r=this.graph.snapToGrid(e.clientX,e.clientY);n?n.onMouseDown(e,r.x,r.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(e.type)&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e:e,x:r.x,y:r.y})),this.delegateDragEvents(e,n)}}},{key:"onMouseMove",value:function(t){var e=this.getEventData(t),n=e.startPosition;if((!n||n.x!==t.clientX||n.y!==t.clientY)&&(null==e.mouseMovedCount&&(e.mouseMovedCount=0),e.mouseMovedCount+=1,!(e.mouseMovedCount<=this.options.moveThreshold))){var r=this.normalizeEvent(t),i=this.graph.snapToGrid(r.clientX,r.clientY),o=e.currentView;o?o.onMouseMove(r,i.x,i.y):this.graph.trigger("blank:mousemove",{e:r,x:i.x,y:i.y}),this.setEventData(r,e)}}},{key:"onMouseUp",value:function(t){this.undelegateDocumentEvents();var e=this.normalizeEvent(t),n=this.graph.snapToGrid(e.clientX,e.clientY),r=this.getEventData(t).currentView;if(r?r.onMouseUp(e,n.x,n.y):this.graph.trigger("blank:mouseup",{e:e,x:n.x,y:n.y}),!t.isPropagationStopped()){var i=new ol(t,{type:"click",data:t.data});this.onClick(i)}t.stopImmediatePropagation(),this.delegateEvents()}},{key:"onMouseOver",value:function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);if(!this.guard(e,n))if(n)n.onMouseOver(e);else{if(this.container===e.target)return;this.graph.trigger("blank:mouseover",{e:e})}}},{key:"onMouseOut",value:function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);if(!this.guard(e,n))if(n)n.onMouseOut(e);else{if(this.container===e.target)return;this.graph.trigger("blank:mouseout",{e:e})}}},{key:"onMouseEnter",value:function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);if(!this.guard(e,n)){var r=this.graph.findViewByElem(e.relatedTarget);if(n){if(r===n)return;n.onMouseEnter(e)}else{if(r)return;this.graph.trigger("graph:mouseenter",{e:e})}}}},{key:"onMouseLeave",value:function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);if(!this.guard(e,n)){var r=this.graph.findViewByElem(e.relatedTarget);if(n){if(r===n)return;n.onMouseLeave(e)}else{if(r)return;this.graph.trigger("graph:mouseleave",{e:e})}}}},{key:"onMouseWheel",value:function(t){var e=this.normalizeEvent(t),n=this.findView(e.target);if(!this.guard(e,n)){var r=e.originalEvent,i=this.graph.snapToGrid(r.clientX,r.clientY),o=Math.max(-1,Math.min(1,r.wheelDelta||-r.detail));n?n.onMouseWheel(e,i.x,i.y,o):this.graph.trigger("blank:mousewheel",{e:e,delta:o,x:i.x,y:i.y})}}},{key:"onCustomEvent",value:function(t){var e=t.currentTarget,n=e.getAttribute("event")||e.getAttribute("data-event");if(n){var r=this.findView(e);if(r){var i=this.normalizeEvent(t);if(this.guard(i,r))return;var o=this.graph.snapToGrid(i.clientX,i.clientY);r.onCustomEvent(i,n,o.x,o.y)}}}},{key:"handleMagnetEvent",value:function(t,e){var n=t.currentTarget,r=n.getAttribute("magnet");if(r&&"false"!==r.toLowerCase()){var i=this.findView(n);if(i){var o=this.normalizeEvent(t);if(this.guard(o,i))return;var a=this.graph.snapToGrid(o.clientX,o.clientY);nt(e,this.graph,i,o,n,a.x,a.y)}}}},{key:"onMagnetMouseDown",value:function(t){this.handleMagnetEvent(t,(function(t,e,n,r,i){t.onMagnetMouseDown(e,n,r,i)}))}},{key:"onMagnetDblClick",value:function(t){this.handleMagnetEvent(t,(function(t,e,n,r,i){t.onMagnetDblClick(e,n,r,i)}))}},{key:"onMagnetContextMenu",value:function(t){var e=this.findView(t.target);this.isPreventDefaultContextMenu(e)&&t.preventDefault(),this.handleMagnetEvent(t,(function(t,e,n,r,i){t.onMagnetContextMenu(e,n,r,i)}))}},{key:"onLabelMouseDown",value:function(t){var e=t.currentTarget,n=this.findView(e);if(n){var r=this.normalizeEvent(t);if(this.guard(r,n))return;var i=this.graph.snapToGrid(r.clientX,r.clientY);n.onLabelMouseDown(r,i.x,i.y)}}},{key:"onImageDragStart",value:function(){return!1}},{key:"dispose",value:function(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=function(){}}}]),n}(Hf);kv([Hf.dispose()],wv.prototype,"dispose",null),function(t){var e="".concat(tf.prefixCls,"-graph");t.markup=[{ns:Vs.xhtml,tagName:"div",selector:"background",className:"".concat(e,"-background")},{ns:Vs.xhtml,tagName:"div",selector:"grid",className:"".concat(e,"-grid")},{ns:Vs.svg,tagName:"svg",selector:"svg",className:"".concat(e,"-svg"),attrs:{width:"100%",height:"100%","xmlns:xlink":Vs.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:"".concat(e,"-svg-viewport"),children:[{tagName:"g",selector:"primer",className:"".concat(e,"-svg-primer")},{tagName:"g",selector:"stage",className:"".concat(e,"-svg-stage")},{tagName:"g",selector:"decorator",className:"".concat(e,"-svg-decorator")},{tagName:"g",selector:"overlay",className:"".concat(e,"-svg-overlay")}]}]}],t.snapshoot=function(t){var e=t.cloneNode();return t.childNodes.forEach((function(t){return e.appendChild(t)})),function(){for(Ws(t);t.attributes.length>0;)t.removeAttribute(t.attributes[0].name);for(var n=0,r=e.attributes.length;n<r;n+=1){var i=e.attributes[n];t.setAttribute(i.name,i.value)}e.childNodes.forEach((function(e){return t.appendChild(e)}))}}}(wv||(wv={})),function(t,e){var n=tf.prefixCls;t.events=(e={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel"},(0,y.Z)(e,"mouseenter  .".concat(n,"-cell"),"onMouseEnter"),(0,y.Z)(e,"mouseleave  .".concat(n,"-cell"),"onMouseLeave"),(0,y.Z)(e,"mouseenter  .".concat(n,"-cell-tools"),"onMouseEnter"),(0,y.Z)(e,"mouseleave  .".concat(n,"-cell-tools"),"onMouseLeave"),(0,y.Z)(e,"mousedown   .".concat(n,"-cell [event]"),"onCustomEvent"),(0,y.Z)(e,"touchstart  .".concat(n,"-cell [event]"),"onCustomEvent"),(0,y.Z)(e,"mousedown   .".concat(n,"-cell [data-event]"),"onCustomEvent"),(0,y.Z)(e,"touchstart  .".concat(n,"-cell [data-event]"),"onCustomEvent"),(0,y.Z)(e,"dblclick    .".concat(n,"-cell [magnet]"),"onMagnetDblClick"),(0,y.Z)(e,"contextmenu .".concat(n,"-cell [magnet]"),"onMagnetContextMenu"),(0,y.Z)(e,"mousedown   .".concat(n,"-cell [magnet]"),"onMagnetMouseDown"),(0,y.Z)(e,"touchstart  .".concat(n,"-cell [magnet]"),"onMagnetMouseDown"),(0,y.Z)(e,"dblclick    .".concat(n,"-cell [data-magnet]"),"onMagnetDblClick"),(0,y.Z)(e,"contextmenu .".concat(n,"-cell [data-magnet]"),"onMagnetContextMenu"),(0,y.Z)(e,"mousedown   .".concat(n,"-cell [data-magnet]"),"onMagnetMouseDown"),(0,y.Z)(e,"touchstart  .".concat(n,"-cell [data-magnet]"),"onMagnetMouseDown"),(0,y.Z)(e,"dragstart   .".concat(n,"-cell image"),"onImageDragStart"),(0,y.Z)(e,"mousedown   .".concat(n,"-edge .").concat(n,"-edge-label"),"onLabelMouseDown"),(0,y.Z)(e,"touchstart  .".concat(n,"-edge .").concat(n,"-edge-label"),"onLabelMouseDown"),e),t.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(wv||(wv={}));var xv=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(t){var r;return(0,m.Z)(this,n),(r=e.call(this)).graph=t,r.init(),r}return(0,b.Z)(n,[{key:"options",get:function(){return this.graph.options}},{key:"model",get:function(){return this.graph.model}},{key:"view",get:function(){return this.graph.view}},{key:"init",value:function(){}}]),n}(k),Pv=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Av=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"init",value:function(){tf.autoInsertCSS&&function(t,e){var n=wl.find((function(e){return e.name===t}));if(!(n&&(n.loadTimes+=1,n.loadTimes>1))&&!ss.isApplyingHMR()){var r=document.createElement("style");r.setAttribute("type","text/css"),r.textContent=e;var i=document.querySelector("head");i&&i.insertBefore(r,i.firstChild),wl.push({name:t,loadTimes:1,styleElement:r})}}("core",".x6-graph {\n  position: relative;\n  overflow: hidden;\n  outline: none;\n  touch-action: none;\n}\n.x6-graph-background,\n.x6-graph-grid,\n.x6-graph-svg {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-background-stage,\n.x6-graph-grid-stage,\n.x6-graph-svg-stage {\n  user-select: none;\n}\n.x6-graph.x6-graph-pannable {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph.x6-graph-panning {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-node {\n  cursor: move;\n  /* stylelint-disable-next-line */\n}\n.x6-node.x6-node-immovable {\n  cursor: default;\n}\n.x6-node * {\n  -webkit-user-drag: none;\n}\n.x6-node .scalable * {\n  vector-effect: non-scaling-stroke;\n}\n.x6-node [magnet='true'] {\n  cursor: crosshair;\n  transition: opacity 0.3s;\n}\n.x6-node [magnet='true']:hover {\n  opacity: 0.7;\n}\n.x6-node foreignObject {\n  display: block;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-node foreignObject > body {\n  position: static;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-edge .source-marker,\n.x6-edge .target-marker {\n  vector-effect: non-scaling-stroke;\n}\n.x6-edge .connection {\n  stroke-linejoin: round;\n  fill: none;\n}\n.x6-edge .connection-wrap {\n  cursor: move;\n  opacity: 0;\n  fill: none;\n  stroke: #000;\n  stroke-width: 15;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n.x6-edge .connection-wrap:hover {\n  opacity: 0.4;\n  stroke-opacity: 0.4;\n}\n.x6-edge .vertices {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .vertices .vertex {\n  fill: #1abc9c;\n}\n.x6-edge .vertices .vertex :hover {\n  fill: #34495e;\n  stroke: none;\n}\n.x6-edge .vertices .vertex-remove {\n  cursor: pointer;\n  fill: #fff;\n}\n.x6-edge .vertices .vertex-remove-area {\n  cursor: pointer;\n  opacity: 0.1;\n}\n.x6-edge .vertices .vertex-group:hover .vertex-remove-area {\n  opacity: 1;\n}\n.x6-edge .arrowheads {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .arrowheads .arrowhead {\n  fill: #1abc9c;\n}\n.x6-edge .arrowheads .arrowhead :hover {\n  fill: #f39c12;\n  stroke: none;\n}\n.x6-edge .tools {\n  cursor: pointer;\n  opacity: 0;\n}\n.x6-edge .tools .tool-options {\n  display: none;\n}\n.x6-edge .tools .tool-remove circle {\n  fill: #f00;\n}\n.x6-edge .tools .tool-remove path {\n  fill: #fff;\n}\n.x6-edge:hover .vertices,\n.x6-edge:hover .arrowheads,\n.x6-edge:hover .tools {\n  opacity: 1;\n}\n.x6-highlight-opacity {\n  opacity: 0.3;\n}\n.x6-cell-tool-editor {\n  position: relative;\n  display: inline-block;\n  min-height: 1em;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n  white-space: normal;\n  text-align: center;\n  vertical-align: top;\n  overflow-wrap: normal;\n  outline: none;\n  transform-origin: 0 0;\n  -webkit-user-drag: none;\n}\n.x6-edge-tool-editor {\n  border: 1px solid #275fc5;\n  border-radius: 2px;\n}\n")}},{key:"dispose",value:function(){!function(t){var e=wl.findIndex((function(e){return e.name===t}));if(e>-1){var n=wl[e];if(n.loadTimes-=1,n.loadTimes>0)return;var r=n.styleElement;r&&r.parentNode&&r.parentNode.removeChild(r),r=null,wl.splice(e,1)}}("core")}}]),n}(xv);Pv([Av.dispose()],Av.prototype,"dispose",null);var Cv,Ov=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};!function(t){t.get=function(e){var n=e.grid,r=(e.panning,e.mousewheel,e.embedding,Ov(e,["grid","panning","mousewheel","embedding"])),i=e.container;if(null==i)throw new Error("Ensure the container of the graph is specified and valid");null==r.width&&(r.width=i.clientWidth),null==r.height&&(r.height=i.clientHeight);var o=sr({},t.defaults,r),a={size:10,visible:!1};return o.grid="number"===typeof n?{size:n,visible:!1}:"boolean"===typeof n?Object.assign(Object.assign({},a),{visible:n}):Object.assign(Object.assign({},a),n),["panning","mousewheel","embedding"].forEach((function(t){var n=e[t];"boolean"===typeof n?o[t].enabled=n:o[t]=Object.assign(Object.assign({},o[t]),n)})),o}}(Cv||(Cv={})),function(t){t.defaults={x:0,y:0,scaling:{min:.01,max:16},grid:{size:10,visible:!1},background:!1,panning:{enabled:!1,eventTypes:["leftMouseDown"]},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:tf.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:tf.prefix("available-magnet")}}},connecting:{snap:!1,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,allowBlank:!0,allowMulti:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",router:"normal",connector:"normal",validateConnection:function(t){var e=t.type,n=t.sourceView,r=t.targetView;return null!=("target"===e?r:n)},createEdge:function(){return new gv}},translating:{restrict:!1},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:function(){return!0}},moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},async:!0,virtual:!1,guard:function(){return!1}}}(Cv||(Cv={}));var Ev=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Mv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Sv=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"elem",get:function(){return this.view.grid}},{key:"grid",get:function(){return this.options.grid}},{key:"init",value:function(){this.startListening(),this.draw(this.grid)}},{key:"startListening",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"stopListening",value:function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}},{key:"setVisible",value:function(t){this.grid.visible!==t&&(this.grid.visible=t,this.update())}},{key:"getGridSize",value:function(){return this.grid.size}},{key:"setGridSize",value:function(t){this.grid.size=Math.max(t,1),this.update()}},{key:"show",value:function(){this.setVisible(!0),this.update()}},{key:"hide",value:function(){this.setVisible(!1),this.update()}},{key:"clear",value:function(){this.elem.style.backgroundImage=""}},{key:"draw",value:function(t){this.clear(),this.instance=null,Object.assign(this.grid,t),this.patterns=this.resolveGrid(t),this.update()}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.grid.size;if(e<=1||!this.grid.visible)return this.clear();var n=this.graph.matrix(),r=this.getInstance(),i=Array.isArray(t)?t:[t];this.patterns.forEach((function(t,o){var a="pattern_".concat(o),s=n.a||1,u=n.d||1,l=t.update,c=t.markup,h=Mv(t,["update","markup"]),f=Object.assign(Object.assign(Object.assign({},h),i[o]),{sx:s,sy:u,ox:n.e||0,oy:n.f||0,width:e*s,height:e*u});r.has(a)||r.add(a,Au.create("pattern",{id:a,patternUnits:"userSpaceOnUse"},Au.createVectors(c)).node);var g=r.get(a);"function"===typeof l&&l(g.childNodes[0],f);var d=f.ox%f.width;d<0&&(d+=f.width);var v=f.oy%f.height;v<0&&(v+=f.height),ru(g,{x:d,y:v,width:f.width,height:f.height})}));var o=(new XMLSerializer).serializeToString(r.root),a="url(data:image/svg+xml;base64,".concat(btoa(o),")");this.elem.style.backgroundImage=a}},{key:"getInstance",value:function(){return this.instance||(this.instance=new nc),this.instance}},{key:"resolveGrid",value:function(t){if(!t)return[];var e=t.type;if(null==e)return[Object.assign(Object.assign({},nc.presets.dot),t.args)];var n=nc.registry.get(e);if(n){var r=t.args||[];return Array.isArray(r)||(r=[r]),Array.isArray(n)?n.map((function(t,e){return Object.assign(Object.assign({},t),r[e])})):[Object.assign(Object.assign({},n),r[0])]}return nc.registry.onNotFound(e)}},{key:"dispose",value:function(){this.stopListening(),this.clear()}}]),n}(xv);Ev([xv.dispose()],Sv.prototype,"dispose",null);var Tv=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"container",get:function(){return this.graph.view.container}},{key:"viewport",get:function(){return this.graph.view.viewport}},{key:"stage",get:function(){return this.graph.view.stage}},{key:"init",value:function(){this.resize()}},{key:"getMatrix",value:function(){var t=this.viewport.getAttribute("transform");return t!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=t),Wu(this.viewportMatrix)}},{key:"setMatrix",value:function(t){var e=Wu(t),n=Yu(e);this.viewport.setAttribute("transform",n),this.viewportMatrix=e,this.viewportTransformString=n}},{key:"resize",value:function(t,e){var n=void 0===t?this.options.width:t,r=void 0===e?this.options.height:e;this.options.width=n,this.options.height=r,"number"===typeof n&&(n=Math.round(n)),"number"===typeof r&&(r=Math.round(r)),this.container.style.width=null==n?"":"".concat(n,"px"),this.container.style.height=null==r?"":"".concat(r,"px");var i=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},i)),this}},{key:"getComputedSize",value:function(){var t=this.options.width,e=this.options.height;return es(t)||(t=this.container.clientWidth),es(e)||(e=this.container.clientHeight),{width:t,height:e}}},{key:"getScale",value:function(){return function(t){var e,n,r,i;return t?(e=null==t.a?1:t.a,i=null==t.d?1:t.d,n=t.b,r=t.c):e=i=1,{sx:n?Math.sqrt(e*e+n*n):e,sy:r?Math.sqrt(r*r+i*i):i}}(this.getMatrix())}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t=this.clampScale(t),e=this.clampScale(e),n||r){var i=this.getTranslation(),o=i.tx-n*(t-1),a=i.ty-r*(e-1);o===i.tx&&a===i.ty||this.translate(o,a)}var s=this.getMatrix();return s.a=t,s.d=e,this.setMatrix(s),this.graph.trigger("scale",{sx:t,sy:e,ox:n,oy:r}),this}},{key:"clampScale",value:function(t){var e=this.graph.options.scaling;return rs(t,e.min||.01,e.max||16)}},{key:"getZoom",value:function(){return this.getScale().sx}},{key:"zoom",value:function(t,e){e=e||{};var n=t,r=t,i=this.getScale(),o=this.getComputedSize(),a=o.width/2,s=o.height/2;if(e.absolute||(n+=i.sx,r+=i.sy),e.scaleGrid&&(n=Math.round(n/e.scaleGrid)*e.scaleGrid,r=Math.round(r/e.scaleGrid)*e.scaleGrid),e.maxScale&&(n=Math.min(e.maxScale,n),r=Math.min(e.maxScale,r)),e.minScale&&(n=Math.max(e.minScale,n),r=Math.max(e.minScale,r)),e.center&&(a=e.center.x,s=e.center.y),n=this.clampScale(n),r=this.clampScale(r),a||s){var u=this.getTranslation(),l=a-(a-u.tx)*(n/i.sx),c=s-(s-u.ty)*(r/i.sy);l===u.tx&&c===u.ty||this.translate(l,c)}return this.scale(n,r),this}},{key:"getRotation",value:function(){return function(t){var e={x:0,y:1};t&&(e=Qu(t,e));var n=180*Math.atan2(e.y,e.x)/Math.PI%360-90;return{angle:n%360+(n<0?360:0)}}(this.getMatrix())}},{key:"rotate",value:function(t,e,n){if(null==e||null==n){var r=Kh.getBBox(this.stage);e=r.width/2,n=r.height/2}var i=this.getMatrix().translate(e,n).rotate(t).translate(-e,-n);return this.setMatrix(i),this}},{key:"getTranslation",value:function(){return{tx:(t=this.getMatrix())&&t.e||0,ty:t&&t.f||0};var t}},{key:"translate",value:function(t,e){var n=this.getMatrix();n.e=t||0,n.f=e||0,this.setMatrix(n);var r=this.getTranslation();return this.options.x=r.tx,this.options.y=r.ty,this.graph.trigger("translate",Object.assign({},r)),this}},{key:"setOrigin",value:function(t,e){return this.translate(t||0,e||0)}},{key:"fitToContent",value:function(t,e,n,r){if("object"===typeof t){var i=t;t=i.gridWidth||1,e=i.gridHeight||1,n=i.padding||0,r=i}else t=t||1,e=e||1,n=n||0,null==r&&(r={});var o=as(n),a=r.border||0,s=r.contentArea?El.create(r.contentArea):this.getContentArea(r);a>0&&s.inflate(a);var u=this.getScale(),l=this.getTranslation(),c=u.sx,h=u.sy;s.x*=c,s.y*=h,s.width*=c,s.height*=h;var f=Math.max(Math.ceil((s.width+s.x)/t),1)*t,g=Math.max(Math.ceil((s.height+s.y)/e),1)*e,d=0,v=0;("negative"===r.allowNewOrigin&&s.x<0||"positive"===r.allowNewOrigin&&s.x>=0||"any"===r.allowNewOrigin)&&(d=Math.ceil(-s.x/t)*t,f+=d+=o.left),("negative"===r.allowNewOrigin&&s.y<0||"positive"===r.allowNewOrigin&&s.y>=0||"any"===r.allowNewOrigin)&&(v=Math.ceil(-s.y/e)*e,g+=v+=o.top),f+=o.right,g+=o.bottom,f=Math.max(f,r.minWidth||0),g=Math.max(g,r.minHeight||0),f=Math.min(f,r.maxWidth||Number.MAX_SAFE_INTEGER),g=Math.min(g,r.maxHeight||Number.MAX_SAFE_INTEGER);var p=this.getComputedSize(),y=f!==p.width||g!==p.height;return(d!==l.tx||v!==l.ty)&&this.translate(d,v),y&&this.resize(f,g),new El(-d/c,-v/h,f/c,g/h)}},{key:"scaleContentToFit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.scaleContentToFitImpl(t)}},{key:"scaleContentToFitImpl",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(n.contentArea){var i=n.contentArea;t=this.graph.localToGraph(i),e=Ol.create(i)}else t=this.getContentBBox(n),e=this.graph.graphToLocal(t);if(t.width&&t.height){var o,a=as(n.padding),s=n.minScale||0,u=n.maxScale||Number.MAX_SAFE_INTEGER,l=n.minScaleX||s,c=n.maxScaleX||u,h=n.minScaleY||s,f=n.maxScaleY||u;if(n.viewportArea)o=n.viewportArea;else{var g=this.getComputedSize(),d=this.getTranslation();o={x:d.tx,y:d.ty,width:g.width,height:g.height}}o=El.create(o).moveAndExpand({x:a.left,y:a.top,width:-a.left-a.right,height:-a.top-a.bottom});var v=this.getScale(),p=o.width/t.width*v.sx,y=o.height/t.height*v.sy;!1!==n.preserveAspectRatio&&(p=y=Math.min(p,y));var m=n.scaleGrid;if(m&&(p=m*Math.floor(p/m),y=m*Math.floor(y/m)),p=rs(p,l,c),y=rs(y,h,f),this.scale(p,y),r){var b=this.options,k=o.x-e.x*p-b.x,w=o.y-e.y*y-b.y;this.translate(k,w)}}}},{key:"getContentArea",value:function(){return!1!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).useCellGeometry?this.model.getAllCellsBBox()||new El:Kh.getBBox(this.stage)}},{key:"getContentBBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.graph.localToGraph(this.getContentArea(t))}},{key:"getGraphArea",value:function(){var t=El.fromSize(this.getComputedSize());return this.graph.graphToLocal(t)}},{key:"zoomToRect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=El.create(t),r=this.graph;e.contentArea=n,null==e.viewportArea&&(e.viewportArea={x:r.options.x,y:r.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(e,!1);var i=n.getCenter();return this.centerPoint(i.x,i.y),this}},{key:"zoomToFit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.zoomToRect(this.getContentArea(t),t)}},{key:"centerPoint",value:function(t,e){var n=this.getComputedSize(),r=this.getScale(),i=this.getTranslation(),o=n.width/2,a=n.height/2;e="number"===typeof e?e:a,t=o-(t="number"===typeof t?t:o)*r.sx,e=a-e*r.sy,i.tx===t&&i.ty===e||this.translate(t,e)}},{key:"centerContent",value:function(t){var e=this.graph.getContentArea(t).getCenter();this.centerPoint(e.x,e.y)}},{key:"centerCell",value:function(t){return this.positionCell(t,"center")}},{key:"positionPoint",value:function(t,e,n){var r=this.getComputedSize();(e=os(e,Math.max(0,r.width)))<0&&(e=r.width+e),(n=os(n,Math.max(0,r.height)))<0&&(n=r.height+n);var i=this.getTranslation(),o=this.getScale(),a=e-t.x*o.sx,s=n-t.y*o.sy;i.tx===a&&i.ty===s||this.translate(a,s)}},{key:"positionRect",value:function(t,e){var n=El.create(t);switch(e){case"center":return this.positionPoint(n.getCenter(),"50%","50%");case"top":return this.positionPoint(n.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(n.getTopRight(),"100%",0);case"right":return this.positionPoint(n.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(n.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(n.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(n.getBottomLeft(),0,"100%");case"left":return this.positionPoint(n.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(n.getTopLeft(),0,0);default:return this}}},{key:"positionCell",value:function(t,e){var n=t.getBBox();return this.positionRect(n,e)}},{key:"positionContent",value:function(t,e){var n=this.graph.getContentArea(e);return this.positionRect(n,t)}}]),n}(xv),jv=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Nv=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"elem",get:function(){return this.view.background}},{key:"init",value:function(){this.startListening(),this.options.background&&this.draw(this.options.background)}},{key:"startListening",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"stopListening",value:function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}},{key:"updateBackgroundImage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.size||"auto auto",n=t.position||"center",r=this.graph.transform.getScale(),i=this.graph.translate();if("object"===typeof n){var o=i.tx+r.sx*(n.x||0),a=i.ty+r.sy*(n.y||0);n="".concat(o,"px ").concat(a,"px")}"object"===typeof e&&(e=El.fromSize(e).scale(r.sx,r.sy),e="".concat(e.width,"px ").concat(e.height,"px")),this.elem.style.backgroundSize=e,this.elem.style.backgroundPosition=n}},{key:"drawBackgroundImage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t instanceof HTMLImageElement){var n=this.optionsCache;if(!n||n.image===e.image){var r,i=e.opacity,o=e.size,a=e.repeat||"no-repeat",s=rc.registry.get(a);if("function"===typeof s){var u=e.quality||1;t.width*=u,t.height*=u;var l=s(t,e);if(!(l instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");r=l.toDataURL("image/png"),a=e.repeat&&a!==e.repeat?e.repeat:"repeat","object"===typeof o?(o.width*=l.width/t.width,o.height*=l.height/t.height):void 0===o&&(e.size={width:l.width/u,height:l.height/u})}else r=t.src,void 0===o&&(e.size={width:t.width,height:t.height});null!=n&&"object"===typeof e.size&&e.image===n.image&&e.repeat===n.repeat&&e.quality===n.quality&&(n.size=ji(e.size));var c=this.elem.style;c.backgroundImage="url(".concat(r,")"),c.backgroundRepeat=a,c.opacity=null==i||i>=1?"":"".concat(i),this.updateBackgroundImage(e)}}else this.elem.style.backgroundImage=""}},{key:"updateBackgroundColor",value:function(t){this.elem.style.backgroundColor=t||""}},{key:"updateBackgroundOptions",value:function(t){this.graph.options.background=t}},{key:"update",value:function(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}},{key:"draw",value:function(t){var e=this,n=t||{};if(this.updateBackgroundOptions(t),this.updateBackgroundColor(n.color),n.image){this.optionsCache=ji(n);var r=document.createElement("img");r.onload=function(){return e.drawBackgroundImage(r,t)},r.setAttribute("crossorigin","anonymous"),r.src=n.image}else this.drawBackgroundImage(null),this.optionsCache=null}},{key:"clear",value:function(){this.draw()}},{key:"dispose",value:function(){this.clear(),this.stopListening()}}]),n}(xv);jv([xv.dispose()],Nv.prototype,"dispose",null);var Lv=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Bv=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"widgetOptions",get:function(){return this.options.panning}},{key:"pannable",get:function(){return this.widgetOptions&&!0===this.widgetOptions.enabled}},{key:"init",value:function(){this.onRightMouseDown=this.onRightMouseDown.bind(this),this.startListening(),this.updateClassName()}},{key:"startListening",value:function(){this.graph.on("blank:mousedown",this.onMouseDown,this),this.graph.on("node:unhandled:mousedown",this.onMouseDown,this),this.graph.on("edge:unhandled:mousedown",this.onMouseDown,this),sl.on(this.graph.container,"mousedown",this.onRightMouseDown),this.mousewheelHandle=new cl(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()}},{key:"stopListening",value:function(){this.graph.off("blank:mousedown",this.onMouseDown,this),this.graph.off("node:unhandled:mousedown",this.onMouseDown,this),this.graph.off("edge:unhandled:mousedown",this.onMouseDown,this),sl.off(this.graph.container,"mousedown",this.onRightMouseDown),this.mousewheelHandle&&this.mousewheelHandle.disable()}},{key:"allowPanning",value:function(t,e){return this.pannable&&yl.isMatch(t,this.widgetOptions.modifiers,e)}},{key:"startPanning",value:function(t){var e=this.view.normalizeEvent(t);this.clientX=e.clientX,this.clientY=e.clientY,this.panning=!0,this.updateClassName(),sl.on(document.body,{"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),sl.on(window,"mouseup.panning",this.stopPanning.bind(this))}},{key:"pan",value:function(t){var e=this.view.normalizeEvent(t),n=e.clientX-this.clientX,r=e.clientY-this.clientY;this.clientX=e.clientX,this.clientY=e.clientY,this.graph.translateBy(n,r)}},{key:"stopPanning",value:function(t){this.panning=!1,this.updateClassName(),sl.off(document.body,".panning"),sl.off(window,".panning")}},{key:"updateClassName",value:function(){var t=this.view.container,e=this.view.prefixClassName("graph-panning"),n=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(Ns(t,e),Ls(t,n)):(Ls(t,e),Ns(t,n)):(Ls(t,e),Ls(t,n))}},{key:"onMouseDown",value:function(t){var e=t.e;if(this.allowBlankMouseDown(e)){var n=this.graph.getPlugin("selection"),r=n&&n.allowRubberband(e,!0);(this.allowPanning(e,!0)||this.allowPanning(e)&&!r)&&this.startPanning(e)}}},{key:"onRightMouseDown",value:function(t){var e=this.widgetOptions.eventTypes;(null===e||void 0===e?void 0:e.includes("rightMouseDown"))&&2===t.button&&this.allowPanning(t,!0)&&this.startPanning(t)}},{key:"onMouseWheel",value:function(t,e,n){this.graph.translateBy(-e,-n)}},{key:"allowBlankMouseDown",value:function(t){var e=this.widgetOptions.eventTypes;return(null===e||void 0===e?void 0:e.includes("leftMouseDown"))&&0===t.button||(null===e||void 0===e?void 0:e.includes("mouseWheelDown"))&&1===t.button}},{key:"allowMouseWheel",value:function(t){var e;return this.pannable&&!t.ctrlKey&&(null===(e=this.widgetOptions.eventTypes)||void 0===e?void 0:e.includes("mouseWheel"))}},{key:"autoPanning",value:function(t,e){var n=10,r=this.graph.getGraphArea(),i=0,o=0;t<=r.left+n&&(i=-10),e<=r.top+n&&(o=-10),t>=r.right-n&&(i=n),e>=r.bottom-n&&(o=n),0===i&&0===o||this.graph.translateBy(-i,-o)}},{key:"enablePanning",value:function(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}},{key:"disablePanning",value:function(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}},{key:"dispose",value:function(){this.stopListening()}}]),n}(xv);Lv([xv.dispose()],Bv.prototype,"dispose",null);var Iv=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Dv=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){var t;return(0,m.Z)(this,n),(t=e.apply(this,arguments)).cumulatedFactor=1,t}return(0,b.Z)(n,[{key:"widgetOptions",get:function(){return this.options.mousewheel}},{key:"init",value:function(){this.container=this.graph.container,this.target=this.widgetOptions.global?document:this.container,this.mousewheelHandle=new cl(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.widgetOptions.enabled&&this.enable(!0)}},{key:"disabled",get:function(){return!0!==this.widgetOptions.enabled}},{key:"enable",value:function(t){(this.disabled||t)&&(this.widgetOptions.enabled=!0,this.mousewheelHandle.enable())}},{key:"disable",value:function(){this.disabled||(this.widgetOptions.enabled=!1,this.mousewheelHandle.disable())}},{key:"allowMouseWheel",value:function(t){var e=this.widgetOptions.guard;return(null==e||e(t))&&yl.isMatch(t,this.widgetOptions.modifiers)}},{key:"onMouseWheel",value:function(t){var e=this.widgetOptions.guard;if((null==e||e(t))&&yl.isMatch(t,this.widgetOptions.modifiers)){var n=this.widgetOptions.factor||1.2;null==this.currentScale&&(this.startPos={x:t.clientX,y:t.clientY},this.currentScale=this.graph.transform.getScale().sx),t.deltaY<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:(this.cumulatedFactor=Math.round(this.currentScale*n*20)/20/this.currentScale,1===this.cumulatedFactor&&(this.cumulatedFactor=1.05)):this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:(this.cumulatedFactor=Math.round(this.currentScale*(1/n)*20)/20/this.currentScale,1===this.cumulatedFactor&&(this.cumulatedFactor=.95)),this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);var r=this.currentScale,i=this.graph.transform.clampScale(r*this.cumulatedFactor),o=this.widgetOptions.minScale||Number.MIN_SAFE_INTEGER,a=this.widgetOptions.maxScale||Number.MAX_SAFE_INTEGER;if((i=rs(i,o,a))!==r)if(this.widgetOptions.zoomAtMousePosition){var s=!!this.graph.getPlugin("scroller")?this.graph.clientToLocal(this.startPos):this.graph.clientToGraph(this.startPos);this.graph.zoom(i,{absolute:!0,center:s.clone()})}else this.graph.zoom(i,{absolute:!0});this.currentScale=null,this.cumulatedFactor=1}}},{key:"dispose",value:function(){this.disable()}}]),n}(xv);Iv([k.dispose()],Dv.prototype,"dispose",null);var Rv=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Vv=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"init",value:function(){this.resetRenderArea=tt(this.resetRenderArea,200,{leading:!0}),this.resetRenderArea(),this.startListening()}},{key:"startListening",value:function(){this.graph.on("translate",this.resetRenderArea,this),this.graph.on("scale",this.resetRenderArea,this),this.graph.on("resize",this.resetRenderArea,this)}},{key:"stopListening",value:function(){this.graph.off("translate",this.resetRenderArea,this),this.graph.off("scale",this.resetRenderArea,this),this.graph.off("resize",this.resetRenderArea,this)}},{key:"enableVirtualRender",value:function(){this.options.virtual=!0,this.resetRenderArea()}},{key:"disableVirtualRender",value:function(){this.options.virtual=!1,this.graph.renderer.setRenderArea(void 0)}},{key:"resetRenderArea",value:function(){if(this.options.virtual){var t=this.graph.getGraphArea();this.graph.renderer.setRenderArea(t)}}},{key:"dispose",value:function(){this.stopListening()}}]),n}(xv);Rv([xv.dispose()],Vv.prototype,"dispose",null);var Zv,zv=function(){function t(){(0,m.Z)(this,t),this.isFlushing=!1,this.isFlushPending=!1,this.scheduleId=0,this.queue=[],this.frameInterval=33,this.initialTime=Date.now()}return(0,b.Z)(t,[{key:"queueJob",value:function(t){if(t.priority&Zv.PRIOR)t.cb();else{var e=this.findInsertionIndex(t);e>=0&&this.queue.splice(e,0,t)}}},{key:"queueFlush",value:function(){this.isFlushing||this.isFlushPending||(this.isFlushPending=!0,this.scheduleJob())}},{key:"queueFlushSync",value:function(){this.isFlushing||this.isFlushPending||(this.isFlushPending=!0,this.flushJobsSync())}},{key:"clearJobs",value:function(){this.queue.length=0,this.isFlushing=!1,this.isFlushPending=!1,this.cancelScheduleJob()}},{key:"flushJobs",value:function(){this.isFlushPending=!1,this.isFlushing=!0;for(var t,e=this.getCurrentTime();(t=this.queue.shift())&&(t.cb(),!(this.getCurrentTime()-e>=this.frameInterval)););this.isFlushing=!1,this.queue.length&&this.queueFlush()}},{key:"flushJobsSync",value:function(){var t;for(this.isFlushPending=!1,this.isFlushing=!0;t=this.queue.shift();)try{t.cb()}catch(e){console.log(e)}this.isFlushing=!1}},{key:"findInsertionIndex",value:function(t){for(var e=0,n=this.queue.length,r=n-1,i=t.priority;e<=r;){var o=(r-e>>1)+e;i<=this.queue[o].priority?e=o+1:(n=o,r=o-1)}return n}},{key:"scheduleJob",value:function(){"requestIdleCallback"in window?(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.requestIdleCallback(this.flushJobs.bind(this),{timeout:100})):(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.setTimeout(this.flushJobs.bind(this)))}},{key:"cancelScheduleJob",value:function(){"cancelIdleCallback"in window?(this.scheduleId&&window.cancelIdleCallback(this.scheduleId),this.scheduleId=0):(this.scheduleId&&clearTimeout(this.scheduleId),this.scheduleId=0)}},{key:"getCurrentTime",value:function(){return"object"===typeof performance&&"function"===typeof performance.now?performance.now():Date.now()-this.initialTime}}]),t}();!function(t){t[t.Update=2]="Update",t[t.RenderEdge=4]="RenderEdge",t[t.RenderNode=8]="RenderNode",t[t.PRIOR=1048576]="PRIOR"}(Zv||(Zv={}));var Fv=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Gv=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(t){var r;return(0,m.Z)(this,n),(r=e.call(this)).views={},r.willRemoveViews={},r.queue=new zv,r.graph=t,r.init(),r}return(0,b.Z)(n,[{key:"model",get:function(){return this.graph.model}},{key:"container",get:function(){return this.graph.view.stage}},{key:"init",value:function(){this.startListening(),this.renderViews(this.model.getCells())}},{key:"startListening",value:function(){this.model.on("reseted",this.onModelReseted,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}},{key:"stopListening",value:function(){this.model.off("reseted",this.onModelReseted,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}},{key:"onModelReseted",value:function(t){var e=t.options;this.queue.clearJobs(),this.removeZPivots(),this.resetViews();var n=this.model.getCells();this.renderViews(n,Object.assign(Object.assign({},e),{queue:n.map((function(t){return t.id}))}))}},{key:"onCellAdded",value:function(t){var e=t.cell,n=t.options;this.renderViews([e],n)}},{key:"onCellRemoved",value:function(t){var e=t.cell;this.removeViews([e])}},{key:"onCellZIndexChanged",value:function(t){var e=t.cell,r=t.options,i=this.views[e.id];i&&this.requestViewUpdate(i.view,n.FLAG_INSERT,r,Zv.Update,!0)}},{key:"onCellVisibleChanged",value:function(t){var e=t.cell,n=t.current;this.toggleVisible(e,!!n)}},{key:"requestViewUpdate",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zv.Update,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=t.cell.id,s=this.views[a];s&&(s.flag=e,s.options=r,(t.hasAction(e,["translate","resize","rotate"])||!1===r.async)&&(i=Zv.PRIOR,o=!1),this.queue.queueJob({id:a,priority:i,cb:function(){n.renderViewInArea(t,e,r);var i=r.queue;if(i){var o=i.indexOf(t.cell.id);o>=0&&i.splice(o,1),0===i.length&&n.graph.trigger("render:done")}}}),this.getEffectedEdges(t).forEach((function(t){n.requestViewUpdate(t.view,t.flag,r,i,!1)})),o&&this.flush())}},{key:"setRenderArea",value:function(t){this.renderArea=t,this.flushWaitingViews()}},{key:"isViewMounted",value:function(t){if(null==t)return!1;var e=this.views[t.cell.id];return!!e&&e.state===n.ViewState.MOUNTED}},{key:"renderViews",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.sort((function(t,e){return t.isNode()&&e.isEdge()?-1:0})),t.forEach((function(t){var i=t.id,o=0,a=e.views[i];if(a)o=n.FLAG_INSERT;else{var s=e.createCellView(t);s&&(s.graph=e.graph,o=n.FLAG_INSERT|s.getBootstrapFlag(),a={view:s,flag:o,options:r,state:n.ViewState.CREATED},e.views[i]=a)}a&&e.requestViewUpdate(a.view,o,r,e.getRenderPriority(a.view),!1)})),this.flush()}},{key:"renderViewInArea",value:function(t,e){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.cell,a=o.id,s=this.views[a];if(s){var u=0;this.isUpdatable(t)||s.state===n.ViewState.MOUNTED?(u=this.updateView(t,e,i),s.flag=u):s.state=n.ViewState.WAITING,u&&o.isEdge()&&0===(u&t.getFlag(["source","target"]))&&this.queue.queueJob({id:a,priority:Zv.RenderEdge,cb:function(){r.updateView(t,e,i)}})}}},{key:"removeViews",value:function(t){var e=this;t.forEach((function(t){var n=t.id,r=e.views[n];r&&(e.willRemoveViews[n]=r,delete e.views[n],e.queue.queueJob({id:n,priority:e.getRenderPriority(r.view),cb:function(){e.removeView(r.view)}}))})),this.flush()}},{key:"flush",value:function(){this.graph.options.async?this.queue.queueFlush():this.queue.queueFlushSync()}},{key:"flushWaitingViews",value:function(){var t=this;Object.values(this.views).forEach((function(e){if(e&&e.state===n.ViewState.WAITING){var r=e.view,i=e.flag,o=e.options;t.requestViewUpdate(r,i,o,t.getRenderPriority(r),!1)}})),this.flush()}},{key:"updateView",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==t)return 0;if(Qf.isCellView(t)){if(e&n.FLAG_REMOVE)return this.removeView(t.cell),0;e&n.FLAG_INSERT&&(this.insertView(t),e^=n.FLAG_INSERT)}return e?t.confirmUpdate(e,r):0}},{key:"insertView",value:function(t){var e=this.views[t.cell.id];if(e){var r=t.cell.getZIndex(),i=this.addZPivot(r);this.container.insertBefore(t.container,i),t.cell.isVisible()||this.toggleVisible(t.cell,!1),e.state=n.ViewState.MOUNTED,this.graph.trigger("view:mounted",{view:t})}}},{key:"resetViews",value:function(){var t=this;this.willRemoveViews=Object.assign(Object.assign({},this.views),this.willRemoveViews),Object.values(this.willRemoveViews).forEach((function(e){e&&t.removeView(e.view)})),this.views={},this.willRemoveViews={}}},{key:"removeView",value:function(t){var e=t.cell,n=this.willRemoveViews[e.id];n&&t&&(n.view.remove(),delete this.willRemoveViews[e.id],this.graph.trigger("view:unmounted",{view:t}))}},{key:"toggleVisible",value:function(t,e){for(var n=this.model.getConnectedEdges(t),r=0,i=n.length;r<i;r+=1){var o=n[r];if(e){var a=o.getSourceCell(),s=o.getTargetCell();if(a&&!a.isVisible()||s&&!s.isVisible())continue;this.toggleVisible(o,!0)}else this.toggleVisible(o,!1)}var u=this.views[t.id];u&&bu(u.view.container,{display:e?"unset":"none"})}},{key:"addZPivot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null==this.zPivots&&(this.zPivots={});var e=this.zPivots,n=e[t];if(n)return n;n=e[t]=document.createComment("z-index:".concat(t+1));var r=-1/0;for(var i in e){var o=+i;o<t&&o>r&&(r=o)}var a=this.container;if(r!==-1/0){var s=e[r];a.insertBefore(n,s.nextSibling)}else a.insertBefore(n,a.firstChild);return n}},{key:"removeZPivots",value:function(){this.zPivots&&Object.values(this.zPivots).forEach((function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})),this.zPivots={}}},{key:"createCellView",value:function(t){var e={graph:this.graph},n=this.graph.options.createCellView;if(n){var r=nt(n,this.graph,t);if(r)return new r(t,e);if(null===r)return null}var i=t.view;if(null!=i&&"string"===typeof i){var o=Qf.registry.get(i);return o?new o(t,e):Qf.registry.onNotFound(i)}return t.isNode()?new mv(t,e):t.isEdge()?new bv(t,e):null}},{key:"getEffectedEdges",value:function(t){for(var e=[],n=t.cell,r=this.model.getConnectedEdges(n),i=0,o=r.length;i<o;i+=1){var a=r[i],s=this.views[a.id];if(s){var u=s.view;if(this.isViewMounted(u)){var l=["update"];a.getTargetCell()===n&&l.push("target"),a.getSourceCell()===n&&l.push("source"),e.push({id:a.id,view:u,flag:u.getFlag(l)})}}}return e}},{key:"isUpdatable",value:function(t){if(t.isNodeView())return!this.renderArea||this.renderArea.isIntersectWithRect(t.cell.getBBox());if(t.isEdgeView()){var e=t.cell,n=e.getSourceCell(),r=e.getTargetCell();if(this.renderArea&&n&&r)return this.renderArea.isIntersectWithRect(n.getBBox())||this.renderArea.isIntersectWithRect(r.getBBox())}return!0}},{key:"getRenderPriority",value:function(t){return t.cell.isNode()?Zv.RenderNode:Zv.RenderEdge}},{key:"dispose",value:function(){var t=this;this.stopListening(),Object.keys(this.views).forEach((function(e){t.views[e].view.dispose()})),this.views={}}}]),n}(k);Fv([k.dispose()],Gv.prototype,"dispose",null),function(t){t.FLAG_INSERT=1<<30,t.FLAG_REMOVE=1<<29,t.FLAG_RENDER=67108863}(Gv||(Gv={})),function(t){!function(t){t[t.CREATED=0]="CREATED",t[t.MOUNTED=1]="MOUNTED",t[t.WAITING=2]="WAITING"}(t.ViewState||(t.ViewState={}))}(Gv||(Gv={}));var _v=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},qv=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){var t;return(0,m.Z)(this,n),(t=e.apply(this,arguments)).schedule=new Gv(t.graph),t}return(0,b.Z)(n,[{key:"requestViewUpdate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.schedule.requestViewUpdate(t,e,n)}},{key:"isViewMounted",value:function(t){return this.schedule.isViewMounted(t)}},{key:"setRenderArea",value:function(t){this.schedule.setRenderArea(t)}},{key:"findViewByElem",value:function(t){if(null==t)return null;var e=this.options.container,n="string"===typeof t?e.querySelector(t):t instanceof Element?t:t[0];if(n){var r=this.graph.view.findAttr("data-cell-id",n);if(r){var i=this.schedule.views;if(i[r])return i[r].view}}return null}},{key:"findViewByCell",value:function(t){if(null==t)return null;var e=Qd.isCell(t)?t.id:t,n=this.schedule.views;return n[e]?n[e].view:null}},{key:"findViewsFromPoint",value:function(t){var e=this,n={x:t.x,y:t.y};return this.model.getCells().map((function(t){return e.findViewByCell(t)})).filter((function(t){return null!=t&&Kh.getBBox(t.container,{target:e.view.stage}).containsPoint(n)}))}},{key:"findEdgeViewsFromPoint",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return this.model.getEdges().map((function(t){return e.findViewByCell(t)})).filter((function(e){if(null!=e){var r=e.getClosestPoint(t);if(r)return r.distance(t)<=n}return!1}))}},{key:"findViewsInArea",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=El.create(t);return this.model.getCells().map((function(t){return e.findViewByCell(t)})).filter((function(t){if(t){if(n.nodeOnly&&!t.isNodeView())return!1;var i=Kh.getBBox(t.container,{target:e.view.stage});return 0===i.width?i.inflate(1,0):0===i.height&&i.inflate(0,1),n.strict?r.containsRect(i):r.isIntersectWithRect(i)}return!1}))}},{key:"dispose",value:function(){this.schedule.dispose()}}]),n}(xv);_v([xv.dispose()],qv.prototype,"dispose",null);var Hv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Uv=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"cid",get:function(){return this.graph.view.cid}},{key:"svg",get:function(){return this.view.svg}},{key:"defs",get:function(){return this.view.defs}},{key:"isDefined",value:function(t){return null!=this.svg.getElementById(t)}},{key:"filter",value:function(t){var e=t.id,n=t.name;if(e||(e="filter-".concat(n,"-").concat(this.cid,"-").concat($a(JSON.stringify(t)))),!this.isDefined(e)){var r=ic.registry.get(n);if(null==r)return ic.registry.onNotFound(n);var i=r(t.args||{}),o=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},t.attrs),{id:e});Au.create(Uf.sanitize(i),o).appendTo(this.defs)}return e}},{key:"gradient",value:function(t){var e=t.id,n=t.type;if(e||(e="gradient-".concat(n,"-").concat(this.cid,"-").concat($a(JSON.stringify(t)))),!this.isDefined(e)){var r=t.stops.map((function(t){var e=null!=t.opacity&&Number.isFinite(t.opacity)?t.opacity:1;return'<stop offset="'.concat(t.offset,'" stop-color="').concat(t.color,'" stop-opacity="').concat(e,'"/>')})),i="<".concat(n,">").concat(r.join(""),"</").concat(n,">"),o=Object.assign({id:e},t.attrs);Au.create(i,o).appendTo(this.defs)}return e}},{key:"marker",value:function(t){var e=t.id,n=t.refX,r=t.refY,i=t.markerUnits,o=t.markerOrient,a=t.tagName,s=t.children,u=Hv(t,["id","refX","refY","markerUnits","markerOrient","tagName","children"]),l=e;if(l||(l="marker-".concat(this.cid,"-").concat($a(JSON.stringify(t)))),!this.isDefined(l)){"path"!==a&&delete u.d;var c=Au.create("marker",{refX:n,refY:r,id:l,overflow:"visible",orient:null!=o?o:"auto",markerUnits:i||"userSpaceOnUse"},s?s.map((function(t){var e=t.tagName,n=Hv(t,["tagName"]);return Au.create("".concat(e)||"path",ou(Object.assign(Object.assign({},u),n)))})):[Au.create(a||"path",ou(u))]);this.defs.appendChild(c.node)}return l}},{key:"remove",value:function(t){var e=this.svg.getElementById(t);e&&e.parentNode&&e.parentNode.removeChild(e)}}]),n}(xv),Wv=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"getClientMatrix",value:function(){return Wu(this.view.stage.getScreenCTM())}},{key:"getClientOffset",value:function(){var t=this.view.svg.getBoundingClientRect();return new Ol(t.left,t.top)}},{key:"getPageOffset",value:function(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}},{key:"snapToGrid",value:function(t,e){return("number"===typeof t?this.clientToLocalPoint(t,e):this.clientToLocalPoint(t.x,t.y)).snapToGrid(this.graph.getGridSize())}},{key:"localToGraphPoint",value:function(t,e){var n=Ol.create(t,e);return Kh.transformPoint(n,this.graph.matrix())}},{key:"localToClientPoint",value:function(t,e){var n=Ol.create(t,e);return Kh.transformPoint(n,this.getClientMatrix())}},{key:"localToPagePoint",value:function(t,e){return("number"===typeof t?this.localToGraphPoint(t,e):this.localToGraphPoint(t)).translate(this.getPageOffset())}},{key:"localToGraphRect",value:function(t,e,n,r){var i=El.create(t,e,n,r);return Kh.transformRectangle(i,this.graph.matrix())}},{key:"localToClientRect",value:function(t,e,n,r){var i=El.create(t,e,n,r);return Kh.transformRectangle(i,this.getClientMatrix())}},{key:"localToPageRect",value:function(t,e,n,r){return("number"===typeof t?this.localToGraphRect(t,e,n,r):this.localToGraphRect(t)).translate(this.getPageOffset())}},{key:"graphToLocalPoint",value:function(t,e){var n=Ol.create(t,e);return Kh.transformPoint(n,this.graph.matrix().inverse())}},{key:"clientToLocalPoint",value:function(t,e){var n=Ol.create(t,e);return Kh.transformPoint(n,this.getClientMatrix().inverse())}},{key:"clientToGraphPoint",value:function(t,e){var n=Ol.create(t,e);return Kh.transformPoint(n,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}},{key:"pageToLocalPoint",value:function(t,e){var n=Ol.create(t,e).diff(this.getPageOffset());return this.graphToLocalPoint(n)}},{key:"graphToLocalRect",value:function(t,e,n,r){var i=El.create(t,e,n,r);return Kh.transformRectangle(i,this.graph.matrix().inverse())}},{key:"clientToLocalRect",value:function(t,e,n,r){var i=El.create(t,e,n,r);return Kh.transformRectangle(i,this.getClientMatrix().inverse())}},{key:"clientToGraphRect",value:function(t,e,n,r){var i=El.create(t,e,n,r);return Kh.transformRectangle(i,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}},{key:"pageToLocalRect",value:function(t,e,n,r){var i=El.create(t,e,n,r),o=this.getPageOffset();return i.x-=o.x,i.y-=o.y,this.graphToLocalRect(i)}}]),n}(xv),Jv=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Xv=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){var t;return(0,m.Z)(this,n),(t=e.apply(this,arguments)).highlights={},t}return(0,b.Z)(n,[{key:"init",value:function(){this.startListening()}},{key:"startListening",value:function(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}},{key:"stopListening",value:function(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}},{key:"onCellHighlight",value:function(t){var e=t.view,n=t.magnet,r=t.options,i=void 0===r?{}:r,o=this.resolveHighlighter(i);if(o){var a=this.getHighlighterId(n,o);if(!this.highlights[a]){var s=o.highlighter;s.highlight(e,n,Object.assign({},o.args)),this.highlights[a]={cellView:e,magnet:n,highlighter:s,args:o.args}}}}},{key:"onCellUnhighlight",value:function(t){var e=t.magnet,n=t.options,r=void 0===n?{}:n,i=this.resolveHighlighter(r);if(i){var o=this.getHighlighterId(e,i);this.unhighlight(o)}}},{key:"resolveHighlighter",value:function(t){var e=this.options,n=t.highlighter;if(null==n){var r=t.type;n=r&&e.highlighting[r]||e.highlighting.default}if(null==n)return null;var i="string"===typeof n?{name:n}:n,o=i.name,a=sf.registry.get(o);return null==a?sf.registry.onNotFound(o):(sf.check(o,a),{name:o,highlighter:a,args:i.args||{}})}},{key:"getHighlighterId",value:function(t,e){return Ds(t),e.name+t.id+JSON.stringify(e.args)}},{key:"unhighlight",value:function(t){var e=this.highlights[t];e&&(e.highlighter.unhighlight(e.cellView,e.magnet,e.args),delete this.highlights[t])}},{key:"dispose",value:function(){var t=this;Object.keys(this.highlights).forEach((function(e){return t.unhighlight(e)})),this.stopListening()}}]),n}(xv);Jv([Xv.dispose()],Xv.prototype,"dispose",null);var Yv=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},$v=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n,[{key:"getScroller",value:function(){var t=this.graph.getPlugin("scroller");return t&&t.options.enabled?t:null}},{key:"getContainer",value:function(){var t=this.getScroller();return t?t.container.parentElement:this.graph.container.parentElement}},{key:"getSensorTarget",value:function(){var t=this.options.autoResize;if(t)return"boolean"===typeof t?this.getContainer():t}},{key:"init",value:function(){var t=this;if(this.options.autoResize){var e=this.getSensorTarget();e&&fl.bind(e,(function(){var n=e.offsetWidth,r=e.offsetHeight;t.resize(n,r)}))}}},{key:"resize",value:function(t,e){var n=this.getScroller();n?n.resize(t,e):this.graph.transform.resize(t,e)}},{key:"dispose",value:function(){fl.clear(this.graph.container)}}]),n}(xv);Yv([xv.dispose()],$v.prototype,"dispose",null);var Qv=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},Kv=function(t,e){(0,x.Z)(r,t);var n=(0,P.Z)(r);function r(t){var e;return(0,m.Z)(this,r),(e=n.call(this)).installedPlugins=new Set,e.options=Cv.get(t),e.css=new Av((0,Al.Z)(e)),e.view=new wv((0,Al.Z)(e)),e.defs=new Uv((0,Al.Z)(e)),e.coord=new Wv((0,Al.Z)(e)),e.transform=new Tv((0,Al.Z)(e)),e.highlight=new Xv((0,Al.Z)(e)),e.grid=new Sv((0,Al.Z)(e)),e.background=new Nv((0,Al.Z)(e)),e.options.model?e.model=e.options.model:(e.model=new sv,e.model.graph=(0,Al.Z)(e)),e.renderer=new qv((0,Al.Z)(e)),e.panning=new Bv((0,Al.Z)(e)),e.mousewheel=new Dv((0,Al.Z)(e)),e.virtualRender=new Vv((0,Al.Z)(e)),e.size=new $v((0,Al.Z)(e)),e}return(0,b.Z)(r,[{key:"container",get:function(){return this.options.container}},{key:e,get:function(){return r.toStringTag}},{key:"isNode",value:function(t){return t.isNode()}},{key:"isEdge",value:function(t){return t.isEdge()}},{key:"resetCells",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.resetCells(t,e),this}},{key:"clearCells",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.model.clear(t),this}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.model.toJSON(t)}},{key:"parseJSON",value:function(t){return this.model.parseJSON(t)}},{key:"fromJSON",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.fromJSON(t,e),this}},{key:"getCellById",value:function(t){return this.model.getCell(t)}},{key:"addNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.addNode(t,e)}},{key:"addNodes",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.addCell(t.map((function(t){return ev.isNode(t)?t:e.createNode(t)})),n)}},{key:"createNode",value:function(t){return this.model.createNode(t)}},{key:"removeNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.removeCell(t,e)}},{key:"addEdge",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.addEdge(t,e)}},{key:"addEdges",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.addCell(t.map((function(t){return rv.isEdge(t)?t:e.createEdge(t)})),n)}},{key:"removeEdge",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.removeCell(t,e)}},{key:"createEdge",value:function(t){return this.model.createEdge(t)}},{key:"addCell",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.addCell(t,e),this}},{key:"removeCell",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.removeCell(t,e)}},{key:"removeCells",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.removeCells(t,e)}},{key:"removeConnectedEdges",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.removeConnectedEdges(t,e)}},{key:"disconnectConnectedEdges",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.disconnectConnectedEdges(t,e),this}},{key:"hasCell",value:function(t){return this.model.has(t)}},{key:"getCells",value:function(){return this.model.getCells()}},{key:"getCellCount",value:function(){return this.model.total()}},{key:"getNodes",value:function(){return this.model.getNodes()}},{key:"getEdges",value:function(){return this.model.getEdges()}},{key:"getOutgoingEdges",value:function(t){return this.model.getOutgoingEdges(t)}},{key:"getIncomingEdges",value:function(t){return this.model.getIncomingEdges(t)}},{key:"getConnectedEdges",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.getConnectedEdges(t,e)}},{key:"getRootNodes",value:function(){return this.model.getRoots()}},{key:"getLeafNodes",value:function(){return this.model.getLeafs()}},{key:"isRootNode",value:function(t){return this.model.isRoot(t)}},{key:"isLeafNode",value:function(t){return this.model.isLeaf(t)}},{key:"getNeighbors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.getNeighbors(t,e)}},{key:"isNeighbor",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.model.isNeighbor(t,e,n)}},{key:"getSuccessors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.getSuccessors(t,e)}},{key:"isSuccessor",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.model.isSuccessor(t,e,n)}},{key:"getPredecessors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.getPredecessors(t,e)}},{key:"isPredecessor",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.model.isPredecessor(t,e,n)}},{key:"getCommonAncestor",value:function(){var t;return(t=this.model).getCommonAncestor.apply(t,arguments)}},{key:"getSubGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.getSubGraph(t,e)}},{key:"cloneSubGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.cloneSubGraph(t,e)}},{key:"cloneCells",value:function(t){return this.model.cloneCells(t)}},{key:"getNodesFromPoint",value:function(t,e){return this.model.getNodesFromPoint(t,e)}},{key:"getNodesInArea",value:function(t,e,n,r,i){return this.model.getNodesInArea(t,e,n,r,i)}},{key:"getNodesUnderNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.getNodesUnderNode(t,e)}},{key:"searchCell",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.model.search(t,e,n),this}},{key:"getShortestPath",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.model.getShortestPath(t,e,n)}},{key:"getAllCellsBBox",value:function(){return this.model.getAllCellsBBox()}},{key:"getCellsBBox",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.model.getCellsBBox(t,e)}},{key:"startBatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.model.startBatch(t,e)}},{key:"stopBatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.model.stopBatch(t,e)}},{key:"batchUpdate",value:function(t,e,n){var r="string"===typeof t?t:"update",i="string"===typeof t?e:t,o="function"===typeof e?n:e;this.startBatch(r,o);var a=i();return this.stopBatch(r,o),a}},{key:"updateCellId",value:function(t,e){return this.model.updateCellId(t,e)}},{key:"findView",value:function(t){return Qd.isCell(t)?this.findViewByCell(t):this.findViewByElem(t)}},{key:"findViews",value:function(t){return El.isRectangleLike(t)?this.findViewsInArea(t):Ol.isPointLike(t)?this.findViewsFromPoint(t):[]}},{key:"findViewByCell",value:function(t){return this.renderer.findViewByCell(t)}},{key:"findViewByElem",value:function(t){return this.renderer.findViewByElem(t)}},{key:"findViewsFromPoint",value:function(t,e){var n="number"===typeof t?{x:t,y:e}:t;return this.renderer.findViewsFromPoint(n)}},{key:"findViewsInArea",value:function(t,e,n,r,i){var o="number"===typeof t?{x:t,y:e,width:n,height:r}:t,a="number"===typeof t?i:e;return this.renderer.findViewsInArea(o,a)}},{key:"matrix",value:function(t){return"undefined"===typeof t?this.transform.getMatrix():(this.transform.setMatrix(t),this)}},{key:"resize",value:function(t,e){var n=this.getPlugin("scroller");return n?n.resize(t,e):this.transform.resize(t,e),this}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return"undefined"===typeof t?this.transform.getScale():(this.transform.scale(t,e,n,r),this)}},{key:"zoom",value:function(t,e){var n=this.getPlugin("scroller");if(n){if("undefined"===typeof t)return n.zoom();n.zoom(t,e)}else{if("undefined"===typeof t)return this.transform.getZoom();this.transform.zoom(t,e)}return this}},{key:"zoomTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getPlugin("scroller");return n?n.zoom(t,Object.assign(Object.assign({},e),{absolute:!0})):this.transform.zoom(t,Object.assign(Object.assign({},e),{absolute:!0})),this}},{key:"zoomToRect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getPlugin("scroller");return n?n.zoomToRect(t,e):this.transform.zoomToRect(t,e),this}},{key:"zoomToFit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getPlugin("scroller");return e?e.zoomToFit(t):this.transform.zoomToFit(t),this}},{key:"rotate",value:function(t,e,n){return"undefined"===typeof t?this.transform.getRotation():(this.transform.rotate(t,e,n),this)}},{key:"translate",value:function(t,e){return"undefined"===typeof t?this.transform.getTranslation():(this.transform.translate(t,e),this)}},{key:"translateBy",value:function(t,e){var n=this.translate(),r=n.tx+t,i=n.ty+e;return this.translate(r,i)}},{key:"getGraphArea",value:function(){return this.transform.getGraphArea()}},{key:"getContentArea",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.transform.getContentArea(t)}},{key:"getContentBBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.transform.getContentBBox(t)}},{key:"fitToContent",value:function(t,e,n,r){return this.transform.fitToContent(t,e,n,r)}},{key:"scaleContentToFit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.transform.scaleContentToFit(t),this}},{key:"center",value:function(t){return this.centerPoint(t)}},{key:"centerPoint",value:function(t,e,n){var r=this.getPlugin("scroller");return r?r.centerPoint(t,e,n):this.transform.centerPoint(t,e),this}},{key:"centerContent",value:function(t){var e=this.getPlugin("scroller");return e?e.centerContent(t):this.transform.centerContent(t),this}},{key:"centerCell",value:function(t,e){var n=this.getPlugin("scroller");return n?n.centerCell(t,e):this.transform.centerCell(t),this}},{key:"positionPoint",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.getPlugin("scroller");return i?i.positionPoint(t,e,n,r):this.transform.positionPoint(t,e,n),this}},{key:"positionRect",value:function(t,e,n){var r=this.getPlugin("scroller");return r?r.positionRect(t,e,n):this.transform.positionRect(t,e),this}},{key:"positionCell",value:function(t,e,n){var r=this.getPlugin("scroller");return r?r.positionCell(t,e,n):this.transform.positionCell(t,e),this}},{key:"positionContent",value:function(t,e){var n=this.getPlugin("scroller");return n?n.positionContent(t,e):this.transform.positionContent(t,e),this}},{key:"snapToGrid",value:function(t,e){return this.coord.snapToGrid(t,e)}},{key:"pageToLocal",value:function(t,e,n,r){return El.isRectangleLike(t)?this.coord.pageToLocalRect(t):"number"===typeof t&&"number"===typeof e&&"number"===typeof n&&"number"===typeof r?this.coord.pageToLocalRect(t,e,n,r):this.coord.pageToLocalPoint(t,e)}},{key:"localToPage",value:function(t,e,n,r){return El.isRectangleLike(t)?this.coord.localToPageRect(t):"number"===typeof t&&"number"===typeof e&&"number"===typeof n&&"number"===typeof r?this.coord.localToPageRect(t,e,n,r):this.coord.localToPagePoint(t,e)}},{key:"clientToLocal",value:function(t,e,n,r){return El.isRectangleLike(t)?this.coord.clientToLocalRect(t):"number"===typeof t&&"number"===typeof e&&"number"===typeof n&&"number"===typeof r?this.coord.clientToLocalRect(t,e,n,r):this.coord.clientToLocalPoint(t,e)}},{key:"localToClient",value:function(t,e,n,r){return El.isRectangleLike(t)?this.coord.localToClientRect(t):"number"===typeof t&&"number"===typeof e&&"number"===typeof n&&"number"===typeof r?this.coord.localToClientRect(t,e,n,r):this.coord.localToClientPoint(t,e)}},{key:"localToGraph",value:function(t,e,n,r){return El.isRectangleLike(t)?this.coord.localToGraphRect(t):"number"===typeof t&&"number"===typeof e&&"number"===typeof n&&"number"===typeof r?this.coord.localToGraphRect(t,e,n,r):this.coord.localToGraphPoint(t,e)}},{key:"graphToLocal",value:function(t,e,n,r){return El.isRectangleLike(t)?this.coord.graphToLocalRect(t):"number"===typeof t&&"number"===typeof e&&"number"===typeof n&&"number"===typeof r?this.coord.graphToLocalRect(t,e,n,r):this.coord.graphToLocalPoint(t,e)}},{key:"clientToGraph",value:function(t,e,n,r){return El.isRectangleLike(t)?this.coord.clientToGraphRect(t):"number"===typeof t&&"number"===typeof e&&"number"===typeof n&&"number"===typeof r?this.coord.clientToGraphRect(t,e,n,r):this.coord.clientToGraphPoint(t,e)}},{key:"defineFilter",value:function(t){return this.defs.filter(t)}},{key:"defineGradient",value:function(t){return this.defs.gradient(t)}},{key:"defineMarker",value:function(t){return this.defs.marker(t)}},{key:"getGridSize",value:function(){return this.grid.getGridSize()}},{key:"setGridSize",value:function(t){return this.grid.setGridSize(t),this}},{key:"showGrid",value:function(){return this.grid.show(),this}},{key:"hideGrid",value:function(){return this.grid.hide(),this}},{key:"clearGrid",value:function(){return this.grid.clear(),this}},{key:"drawGrid",value:function(t){return this.grid.draw(t),this}},{key:"updateBackground",value:function(){return this.background.update(),this}},{key:"drawBackground",value:function(t,e){var n=this.getPlugin("scroller");return null==n||null!=this.options.background&&e?this.background.draw(t):n.drawBackground(t,e),this}},{key:"clearBackground",value:function(t){var e=this.getPlugin("scroller");return null==e||null!=this.options.background&&t?this.background.clear():e.clearBackground(t),this}},{key:"enableVirtualRender",value:function(){return this.virtualRender.enableVirtualRender(),this}},{key:"disableVirtualRender",value:function(){return this.virtualRender.disableVirtualRender(),this}},{key:"isMouseWheelEnabled",value:function(){return!this.mousewheel.disabled}},{key:"enableMouseWheel",value:function(){return this.mousewheel.enable(),this}},{key:"disableMouseWheel",value:function(){return this.mousewheel.disable(),this}},{key:"toggleMouseWheel",value:function(t){return null==t?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():t?this.enableMouseWheel():this.disableMouseWheel(),this}},{key:"isPannable",value:function(){var t=this.getPlugin("scroller");return t?t.isPannable():this.panning.pannable}},{key:"enablePanning",value:function(){var t=this.getPlugin("scroller");return t?t.enablePanning():this.panning.enablePanning(),this}},{key:"disablePanning",value:function(){var t=this.getPlugin("scroller");return t?t.disablePanning():this.panning.disablePanning(),this}},{key:"togglePanning",value:function(t){return null==t?this.isPannable()?this.disablePanning():this.enablePanning():t!==this.isPannable()&&(t?this.enablePanning():this.disablePanning()),this}},{key:"use",value:function(t){if(!this.installedPlugins.has(t)){this.installedPlugins.add(t);for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t.init.apply(t,[this].concat(n))}return this}},{key:"getPlugin",value:function(t){return Array.from(this.installedPlugins).find((function(e){return e.name===t}))}},{key:"getPlugins",value:function(t){return Array.from(this.installedPlugins).filter((function(e){return t.includes(e.name)}))}},{key:"enablePlugins",value:function(t){var e=t;Array.isArray(e)||(e=[e]);var n=this.getPlugins(e);return null===n||void 0===n||n.forEach((function(t){var e;null===(e=null===t||void 0===t?void 0:t.enable)||void 0===e||e.call(t)})),this}},{key:"disablePlugins",value:function(t){var e=t;Array.isArray(e)||(e=[e]);var n=this.getPlugins(e);return null===n||void 0===n||n.forEach((function(t){var e;null===(e=null===t||void 0===t?void 0:t.disable)||void 0===e||e.call(t)})),this}},{key:"isPluginEnabled",value:function(t){var e,n=this.getPlugin(t);return null===(e=null===n||void 0===n?void 0:n.isEnabled)||void 0===e?void 0:e.call(n)}},{key:"disposePlugins",value:function(t){var e=this,n=t;Array.isArray(n)||(n=[n]);var r=this.getPlugins(n);return null===r||void 0===r||r.forEach((function(t){t.dispose(),e.installedPlugins.delete(t)})),this}},{key:"dispose",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.model.dispose(),this.css.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.highlight.dispose(),this.background.dispose(),this.mousewheel.dispose(),this.panning.dispose(),this.view.dispose(),this.renderer.dispose(),this.installedPlugins.forEach((function(t){t.dispose()}))}}]),r}(Wi,Symbol.toStringTag);Qv([Wi.dispose()],Kv.prototype,"dispose",null),function(t){t.View=wv,t.Renderer=qv,t.MouseWheel=Dv,t.DefsManager=Uv,t.GridManager=Sv,t.CoordManager=Wv,t.TransformManager=Tv,t.HighlightManager=Xv,t.BackgroundManager=Nv,t.PanningManager=Bv}(Kv||(Kv={})),function(t){t.toStringTag="X6.".concat(t.name),t.isGraph=function(e){if(null==e)return!1;if(e instanceof t)return!0;var n=e[Symbol.toStringTag];return null==n||n===t.toStringTag}}(Kv||(Kv={})),function(t){t.render=function(e,n){var r=e instanceof HTMLElement?new t({container:e}):new t(e);return null!=n&&r.fromJSON(n),r}}(Kv||(Kv={})),function(t){t.registerNode=ev.registry.register,t.registerEdge=rv.registry.register,t.registerView=Qf.registry.register,t.registerAttr=_h.registry.register,t.registerGrid=nc.registry.register,t.registerFilter=ic.registry.register,t.registerNodeTool=wg.registry.register,t.registerEdgeTool=xg.registry.register,t.registerBackground=rc.registry.register,t.registerHighlighter=sf.registry.register,t.registerPortLayout=pf.registry.register,t.registerPortLabelLayout=Vf.registry.register,t.registerMarker=Ph.registry.register,t.registerRouter=jd.registry.register,t.registerConnector=qd.registry.register,t.registerAnchor=Dg.registry.register,t.registerEdgeAnchor=zg.registry.register,t.registerConnectionPoint=$g.registry.register}(Kv||(Kv={})),function(t){t.unregisterNode=ev.registry.unregister,t.unregisterEdge=rv.registry.unregister,t.unregisterView=Qf.registry.unregister,t.unregisterAttr=_h.registry.unregister,t.unregisterGrid=nc.registry.unregister,t.unregisterFilter=ic.registry.unregister,t.unregisterNodeTool=wg.registry.unregister,t.unregisterEdgeTool=xg.registry.unregister,t.unregisterBackground=rc.registry.unregister,t.unregisterHighlighter=sf.registry.unregister,t.unregisterPortLayout=pf.registry.unregister,t.unregisterPortLabelLayout=Vf.registry.unregister,t.unregisterMarker=Ph.registry.unregister,t.unregisterRouter=jd.registry.unregister,t.unregisterConnector=qd.registry.unregister,t.unregisterAnchor=Dg.registry.unregister,t.unregisterEdgeAnchor=zg.registry.unregister,t.unregisterConnectionPoint=$g.registry.unregister}(Kv||(Kv={}));var tp=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},ep=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},np=function(t){(0,x.Z)(n,t);var e=(0,P.Z)(n);function n(){return(0,m.Z)(this,n),e.apply(this,arguments)}return(0,b.Z)(n)}(ev);!function(t){var e=function(e){(0,x.Z)(r,e);var n=(0,P.Z)(r);function r(){return(0,m.Z)(this,r),n.apply(this,arguments)}return(0,b.Z)(r,[{key:"init",value:function(){_f((0,Gf.Z)(r.prototype),"init",this).call(this),this.cell.on("change:*",this.onCellChangeAny,this)}},{key:"onCellChangeAny",value:function(e){var n=e.key,r=t.shapeMaps[this.cell.shape];if(r){var i=r.effect;i&&!i.includes(n)||this.renderHTMLComponent()}}},{key:"confirmUpdate",value:function(t){var e=this,n=_f((0,Gf.Z)(r.prototype),"confirmUpdate",this).call(this,t);return this.handleAction(n,r.action,(function(){return e.renderHTMLComponent()}))}},{key:"renderHTMLComponent",value:function(){var e=this.selectors&&this.selectors.foContent;if(e){Ws(e);var n=t.shapeMaps[this.cell.shape];if(!n)return;var r=n.html;"function"===typeof r&&(r=r(this.cell)),r&&("string"===typeof r?e.innerHTML=r:Js(e,r))}}},{key:"dispose",value:function(){this.cell.off("change:*",this.onCellChangeAny,this)}}]),r}(mv);tp([e.dispose()],e.prototype,"dispose",null),t.View=e,function(t){t.action="html",t.config({bootstrap:[t.action],actions:{html:t.action}}),mv.registry.register("html-view",t,!0)}(e=t.View||(t.View={}))}(np||(np={})),function(t){t.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},Uf.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),ev.registry.register("html",t,!0)}(np||(np={})),function(t){t.shapeMaps={},t.register=function(e){var n=e.shape,r=e.html,i=e.effect,o=e.inherit,a=ep(e,["shape","html","effect","inherit"]);if(!n)throw new Error("should specify shape in config");t.shapeMaps[n]={html:r,effect:i},Kv.registerNode(n,Object.assign({inherit:o||"html"},a),!0)}}(np||(np={}))}}]);