"use strict";(self.webpackChunkyang_template=self.webpackChunkyang_template||[]).push([[68],{3486:(e,t,r)=>{r.d(t,{d:()=>s});var o=r(1563);const s=()=>{const e=new o.cPb(45,1,1,1e8);return e.position.set(5,5,20),e.lookAt(0,0,0),e}},239:(e,t,r)=>{r.d(t,{z:()=>s});var o=r(1563);const s=()=>{const e=new o.DvJ(5,5,5),t=new o.Wid({color:"0xf00"});return new o.Kj0(e,t)}},2375:(e,t,r)=>{r.d(t,{o:()=>s});var o=r(1563);const s=()=>new o.CP7({antialias:!0})},9055:(e,t,r)=>{r.d(t,{a:()=>s});var o=r(1563);const s=()=>{const e=new o.xsS;return e.background=new o.Ilk("0xeee"),e}},2208:(e,t,r)=>{r.d(t,{r:()=>s});const o=new(r(1563).SUY);class s{constructor(e,t,r){this.updateAbles=void 0,this.renderer=void 0,this.scene=void 0,this.camera=void 0,this.camera=e,this.scene=t,this.renderer=r,this.updateAbles=[]}start(){this.renderer.setAnimationLoop((()=>{this.tick(),this.renderer.render(this.scene,this.camera)}))}stop(){this.renderer.setAnimationLoop(null)}tick(){const e=o.getDelta();for(const t of this.updateAbles)t.tick(e)}}},2783:(e,t,r)=>{function o(e,t,r){e.aspect=r.clientWidth/r.clientHeight,e.updateProjectionMatrix(),t.setSize(r.clientWidth,r.clientHeight),t.setPixelRatio(window.devicePixelRatio)}r.d(t,{t:()=>s});class s{constructor(e,t,r){o(e,t,r),window.addEventListener("resize",(()=>{o(e,t,r),this.onResize()}))}onResize(){}}},68:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var o=r(571),s=r(2208),n=r(2783),i=r(2375),a=r(3486),c=r(9055),d=r(239),l=r(1563);var u=r(8871),h=r(5380);function w(e){const t=new Map,r=new Map,o=e.clone();return f(e,o,(function(e,o){t.set(o,e),r.set(e,o)})),o.traverse((function(e){if(!e.isSkinnedMesh)return;const o=e,s=t.get(e),n=s.skeleton.bones;o.skeleton=s.skeleton.clone(),o.bindMatrix.copy(s.bindMatrix),o.skeleton.bones=n.map((function(e){return r.get(e)})),o.bind(o.skeleton,o.bindMatrix)})),o}function f(e,t,r){r(e,t);for(let o=0;o<e.children.length;o++)f(e.children[o],t.children[o],r)}const p=new u.E,b=async()=>{new h._;const e=await p.loadAsync("/yang-admin/models/soldier/Soldier.glb"),{cube1:t,cube2:r,cube3:o}=(e=>{console.log("data.scene",e.scene);const t=e.scene.children[0],r=w(e.scene.children[0]),o=w(e.scene.children[0]);console.log("model2",r),console.log("model3",o),e.scene.traverse((e=>{e.castShadow=!0})),r.traverse((e=>{e.castShadow=!0})),o.traverse((e=>{e.castShadow=!0}));const s=e.animations[0],n=e.animations[1],i=e.animations[3],a=new l.Xcj(t),c=new l.Xcj(r),d=new l.Xcj(o),u=a.clipAction(s),h=c.clipAction(n),f=d.clipAction(i);return t.tick=e=>{a.update(e)},r.tick=e=>{c.update(e)},o.tick=e=>{d.update(e)},u.play(),h.play(),f.play(),{cube1:t,cube2:r,cube3:o}})(e);return t.position.x=3,r.position.x=0,o.position.x=1,{cube1:t,cube2:r,cube3:o}};var y=r(4828);const m=async e=>{const t=(0,a.d)();t.position.set(3,6,-10),t.lookAt(0,1,0);const{huanj:r,light:o,hemiLight:u}=(()=>{const e=new l.Ox3(16777215);e.position.set(-3,10,-10),e.castShadow=!0,e.shadow.camera.top=10,e.shadow.camera.bottom=-10,e.shadow.camera.left=-10,e.shadow.camera.right=10,e.shadow.camera.near=.1,e.shadow.camera.far=40;const t=new l.Mig(16777215,3),r=new l.vmT(16777215,4473924);return r.position.set(0,4,0),{huanj:t,light:e,hemiLight:r}})(),h=await(0,d.z)();h.scale.set(.5,.5,.5),h.position.set(3,3,3),h.castShadow=!0;const{cube1:w,cube2:f,cube3:p}=await b(),m=(0,c.a)();m.background=new l.Ilk(10526880);const k=new l.Kj0(new l._12(40,40),new l.xoR({color:10066329,depthWrite:!1}));k.rotation.x=-Math.PI/2,k.receiveShadow=!0,m.add(w,f,p,h,k,o);const g=document.querySelector(e);if(g){const e=(0,i.o)();e.shadowMap.enabled=!0,e.outputEncoding=l.knz,e.shadowMap.type=l.ntZ,g.append(e.domElement);const r=new l.y8_(25);m.add(r);new y.z(t,e.domElement);const o=new s.r(t,m,e);o.updateAbles.push(w,f,p);return new n.t(t,e,g).onResize=()=>{e.render(m,t)},e.render(m,t),o.start(),{renderer:e}}throw new Error("\u672a\u67e5\u8be2\u5230\u5143\u7d20")};var k=r(3140);const g=()=>{let e={};return(0,o.useEffect)((()=>((async()=>{e=await m("#container")})(),()=>{}))),(0,k.jsx)("div",{className:"bg-white h-full",id:"container"})}},5380:(e,t,r)=>{r.d(t,{_:()=>n});var o=r(1563);const s=new WeakMap;class n extends o.aNw{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,s){const n=new o.hH6(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,(e=>{const r={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,r).then(t).catch(s)}),r,s)}decodeDracoFile(e,t,r,o){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:o||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const s in t.attributeTypes){const e=t.attributeTypes[s];void 0!==e.BYTES_PER_ELEMENT&&(t.attributeTypes[s]=e.name)}const r=JSON.stringify(t);if(s.has(e)){const t=s.get(e);if(t.key===r)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let o;const n=this.workerNextTaskID++,i=e.byteLength,a=this._getWorker(n,i).then((r=>(o=r,new Promise(((r,s)=>{o._callbacks[n]={resolve:r,reject:s},o.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return a.catch((()=>!0)).then((()=>{o&&n&&this._releaseTask(o,n)})),s.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new o.u9r;e.index&&t.setIndex(new o.TlE(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const s=e.attributes[r],n=s.name,i=s.array,a=s.itemSize;t.setAttribute(n,new o.TlE(i,a))}return t}_loadLibrary(e,t){const r=new o.hH6(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise(((t,o)=>{r.load(e,t,void 0,o)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const r=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const o=i.toString(),s=["/* draco decoder */",r,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([s]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const r=t.data;switch(r.type){case"decode":e._callbacks[r.id].resolve(r);break;case"error":e._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function i(){let e,t;function r(e,t,r,o,s,n){const i=n.num_components(),a=r.num_points()*i,c=a*s.BYTES_PER_ELEMENT,d=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,s),l=e._malloc(c);t.GetAttributeDataArrayForAllPoints(r,n,d,c,l);const u=new s(e.HEAPF32.buffer,l,a).slice();return e._free(l),{name:o,array:u,itemSize:i}}onmessage=function(o){const s=o.data;switch(s.type){case"init":e=s.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const o=s.buffer,n=s.taskConfig;t.then((e=>{const t=e.draco,i=new t.Decoder,a=new t.DecoderBuffer;a.Init(new Int8Array(o),o.byteLength);try{const e=function(e,t,o,s){const n=s.attributeIDs,i=s.attributeTypes;let a,c;const d=t.GetEncodedGeometryType(o);if(d===e.TRIANGULAR_MESH)a=new e.Mesh,c=t.DecodeBufferToMesh(o,a);else{if(d!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,c=t.DecodeBufferToPointCloud(o,a)}if(!c.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+c.error_msg());const l={index:null,attributes:[]};for(const u in n){const o=self[i[u]];let c,d;if(s.useUniqueIDs)d=n[u],c=t.GetAttributeByUniqueId(a,d);else{if(d=t.GetAttributeId(a,e[n[u]]),-1===d)continue;c=t.GetAttribute(a,d)}l.attributes.push(r(e,t,a,u,o,c))}d===e.TRIANGULAR_MESH&&(l.index=function(e,t,r){const o=r.num_faces(),s=3*o,n=4*s,i=e._malloc(n);t.GetTrianglesUInt32Array(r,n,i);const a=new Uint32Array(e.HEAPF32.buffer,i,s).slice();return e._free(i),{array:a,itemSize:1}}(e,t,a));return e.destroy(a),l}(t,i,a,n),o=e.attributes.map((e=>e.array.buffer));e.index&&o.push(e.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:e},o)}catch(c){console.error(c),self.postMessage({type:"error",id:s.id,error:c.message})}finally{t.destroy(a),t.destroy(i)}}))}}}}}]);