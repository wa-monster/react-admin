(self.webpackChunkyang_template=self.webpackChunkyang_template||[]).push([[71],{6286:(t,e,i)=>{"use strict";i.d(e,{T:()=>l});var n,s=i(469);class o{constructor(){this.cells=[]}copy(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.options=Object.assign({},i);const n=(s.Hn.isModel(e)?e:e.model).cloneSubGraph(t,i);this.cells=s.RO.sortBy(Object.keys(n).map((t=>n[t])),(t=>t.isEdge()?2:1)),this.serialize(i)}cut(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.copy(t,e,i);(s.kJ.isGraph(e)?e.model:e).batchUpdate("cut",(()=>{t.forEach((t=>t.remove()))}))}paste(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=Object.assign(Object.assign({},this.options),e),{offset:n,edgeProps:o,nodeProps:r}=i;let a=20,l=20;n&&(a="number"===typeof n?n:n.dx,l="number"===typeof n?n:n.dy),this.deserialize(i);const c=this.cells;c.forEach((t=>{t.model=null,t.removeProp("zIndex"),(a||l)&&t.translate(a,l),r&&t.isNode()&&t.prop(r),o&&t.isEdge()&&t.prop(o)}));const h=s.kJ.isGraph(t)?t.model:t;return h.batchUpdate("paste",(()=>{h.addCells(this.cells)})),this.copy(c,t,e),c}serialize(t){!1!==t.useLocalStorage&&n.save(this.cells)}deserialize(t){if(t.useLocalStorage){const t=n.fetch();t&&(this.cells=t)}}isEmpty(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.useLocalStorage&&this.deserialize(t),this.cells.length<=0}clean(){this.options={},this.cells=[],n.clean()}}!function(t){const e="".concat(s.De.prefixCls,".clipboard.cells");t.save=function(t){if(window.localStorage){const i=t.map((t=>t.toJSON()));localStorage.setItem(e,JSON.stringify(i))}},t.fetch=function(){if(window.localStorage){const t=localStorage.getItem(e),i=t?JSON.parse(t):[];if(i)return s.Hn.fromJSON(i)}},t.clean=function(){window.localStorage&&localStorage.removeItem(e)}}(n||(n={})),s.kJ.prototype.isClipboardEnabled=function(){const t=this.getPlugin("clipboard");return!!t&&t.isEnabled()},s.kJ.prototype.enableClipboard=function(){const t=this.getPlugin("clipboard");return t&&t.enable(),this},s.kJ.prototype.disableClipboard=function(){const t=this.getPlugin("clipboard");return t&&t.disable(),this},s.kJ.prototype.toggleClipboard=function(t){const e=this.getPlugin("clipboard");return e&&e.toggleEnabled(t),this},s.kJ.prototype.isClipboardEmpty=function(t){const e=this.getPlugin("clipboard");return!e||e.isEmpty(t)},s.kJ.prototype.getCellsInClipboard=function(){const t=this.getPlugin("clipboard");return t?t.getCellsInClipboard():[]},s.kJ.prototype.cleanClipboard=function(){const t=this.getPlugin("clipboard");return t&&t.clean(),this},s.kJ.prototype.copy=function(t,e){const i=this.getPlugin("clipboard");return i&&i.copy(t,e),this},s.kJ.prototype.cut=function(t,e){const i=this.getPlugin("clipboard");return i&&i.cut(t,e),this},s.kJ.prototype.paste=function(t,e){const i=this.getPlugin("clipboard");return i?i.paste(t,e):[]};var r=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},a=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(i[n[s]]=t[n[s]])}return i};class l extends s.ew{get disabled(){return!0!==this.options.enabled}get cells(){return this.clipboardImpl.cells}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.name="clipboard",this.options=Object.assign({enabled:!0},t)}init(t){this.graph=t,this.clipboardImpl=new o,this.clipboardImpl.deserialize(this.options)}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(t){return null!=t?t!==this.isEnabled()&&(t?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}isEmpty(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.clipboardImpl.isEmpty(t)}getCellsInClipboard(){return this.cells}clean(t){return this.disabled&&!t||(this.clipboardImpl.clean(),this.notify("clipboard:changed",{cells:[]})),this}copy(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.disabled||(this.clipboardImpl.copy(t,this.graph,Object.assign(Object.assign({},this.commonOptions),e)),this.notify("clipboard:changed",{cells:t})),this}cut(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.disabled||(this.clipboardImpl.cut(t,this.graph,Object.assign(Object.assign({},this.commonOptions),e)),this.notify("clipboard:changed",{cells:t})),this}paste(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;return this.disabled?[]:this.clipboardImpl.paste(e,Object.assign(Object.assign({},this.commonOptions),t))}get commonOptions(){const t=this.options,{enabled:e}=t;return a(t,["enabled"])}notify(t,e){this.trigger(t,e),this.graph.trigger(t,e)}dispose(){this.clean(!0),this.off()}}r([s.ew.dispose()],l.prototype,"dispose",null)},9990:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var n=i(469);n.kJ.prototype.isHistoryEnabled=function(){const t=this.getPlugin("history");return!!t&&t.isEnabled()},n.kJ.prototype.enableHistory=function(){const t=this.getPlugin("history");return t&&t.enable(),this},n.kJ.prototype.disableHistory=function(){const t=this.getPlugin("history");return t&&t.disable(),this},n.kJ.prototype.toggleHistory=function(t){const e=this.getPlugin("history");return e&&e.toggleEnabled(t),this},n.kJ.prototype.undo=function(t){const e=this.getPlugin("history");return e&&e.undo(t),this},n.kJ.prototype.redo=function(t){const e=this.getPlugin("history");return e&&e.redo(t),this},n.kJ.prototype.undoAndCancel=function(t){const e=this.getPlugin("history");return e&&e.cancel(t),this},n.kJ.prototype.canUndo=function(){const t=this.getPlugin("history");return!!t&&t.canUndo()},n.kJ.prototype.canRedo=function(){const t=this.getPlugin("history");return!!t&&t.canRedo()},n.kJ.prototype.cleanHistory=function(t){const e=this.getPlugin("history");return e&&e.clean(t),this},n.kJ.prototype.getHistoryStackSize=function(){return this.getPlugin("history").getSize()},n.kJ.prototype.getUndoStackSize=function(){return this.getPlugin("history").getUndoSize()},n.kJ.prototype.getRedoStackSize=function(){return this.getPlugin("history").getRedoSize()},n.kJ.prototype.getUndoRemainSize=function(){return this.getPlugin("history").getUndoRemainSize()};var s,o=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class r extends n.ew{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.name="history",this.batchCommands=null,this.batchLevel=0,this.lastBatchIndex=-1,this.freezed=!1,this.stackSize=0,this.handlers=[];const{stackSize:e=0}=t;this.stackSize=e,this.options=s.getOptions(t),this.validator=new r.Validator({history:this,cancelInvalid:this.options.cancelInvalid})}init(t){this.graph=t,this.model=this.graph.model,this.clean(),this.startListening()}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(t){return null!=t?t!==this.isEnabled()&&(t?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}undo(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.disabled){const e=this.undoStack.pop();e&&(this.revertCommand(e,t),this.redoStack.push(e),this.notify("undo",e,t))}return this}redo(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.disabled){const e=this.redoStack.pop();e&&(this.applyCommand(e,t),this.undoStackPush(e),this.notify("redo",e,t))}return this}cancel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.disabled){const e=this.undoStack.pop();e&&(this.revertCommand(e,t),this.redoStack=[],this.notify("cancel",e,t))}return this}getSize(){return this.stackSize}getUndoRemainSize(){const t=this.undoStack.length;return this.stackSize-t}getUndoSize(){return this.undoStack.length}getRedoSize(){return this.redoStack.length}canUndo(){return!this.disabled&&this.undoStack.length>0}canRedo(){return!this.disabled&&this.redoStack.length>0}clean(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.undoStack=[],this.redoStack=[],this.notify("clean",null,t),this}get disabled(){return!0!==this.options.enabled}validate(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return this.validator.validate(t,...i),this}startListening(){this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach(((t,e)=>{this.handlers[e]=this.addCommand.bind(this,t),this.model.on(t,this.handlers[e])})),this.validator.on("invalid",(t=>this.trigger("invalid",t)))}stopListening(){this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach(((t,e)=>{this.model.off(t,this.handlers[e])})),this.handlers.length=0),this.validator.off("invalid")}createCommand(t){return{batch:!!t&&t.batch,data:{}}}revertCommand(t,e){this.freezed=!0;const i=Array.isArray(t)?s.sortBatchCommands(t):[t];for(let s=i.length-1;s>=0;s-=1){const t=i[s],o=Object.assign(Object.assign({},e),n.QK.pick(t.options,this.options.revertOptionsList||[]));this.executeCommand(t,!0,o)}this.freezed=!1}applyCommand(t,e){this.freezed=!0;const i=Array.isArray(t)?s.sortBatchCommands(t):[t];for(let s=0;s<i.length;s+=1){const t=i[s],o=Object.assign(Object.assign({},e),n.QK.pick(t.options,this.options.applyOptionsList||[]));this.executeCommand(t,!1,o)}this.freezed=!1}executeCommand(t,e,i){const o=this.model,r=o.getCell(t.data.id),a=t.event;if(s.isAddEvent(a)&&e||s.isRemoveEvent(a)&&!e)r&&r.remove(i);else if(s.isAddEvent(a)&&!e||s.isRemoveEvent(a)&&e){const e=t.data;e.node?o.addNode(e.props,i):e.edge&&o.addEdge(e.props,i)}else if(s.isChangeEvent(a)){const n=t.data,s=n.key;if(s&&r){const t=e?n.prev[s]:n.next[s];if("attrs"===n.key){this.ensureUndefinedAttrs(t,e?n.next[s]:n.prev[s])&&(i.dirty=!0)}r.prop(s,t,i)}}else{const s=this.options.executeCommand;s&&n.Iw.call(s,this,t,e,i)}}addCommand(t,e){if(this.freezed||this.disabled)return;const i=e,o=i.options||{};if(o.dryrun)return;if(s.isAddEvent(t)&&this.options.ignoreAdd||s.isRemoveEvent(t)&&this.options.ignoreRemove||s.isChangeEvent(t)&&this.options.ignoreChange)return;const r=this.options.beforeAddCommand;if(null!=r&&!1===n.Iw.call(r,this,t,e))return;"cell:change:*"===t&&(t="cell:change:".concat(i.key));const a=i.cell,l=n.Hn.isModel(a);let c;if(this.batchCommands){c=this.batchCommands[Math.max(this.lastBatchIndex,0)];const e=l&&!c.modelChange||c.data.id!==a.id,i=c.event!==t;if(this.lastBatchIndex>=0&&(e||i)){const e=this.batchCommands.findIndex((e=>(l&&e.modelChange||e.data.id===a.id)&&e.event===t));e<0||s.isAddEvent(t)||s.isRemoveEvent(t)?c=this.createCommand({batch:!0}):(c=this.batchCommands[e],this.batchCommands.splice(e,1)),this.batchCommands.push(c),this.lastBatchIndex=this.batchCommands.length-1}}else c=this.createCommand({batch:!1});if(s.isAddEvent(t)||s.isRemoveEvent(t)){const e=c.data;return c.event=t,c.options=o,e.id=a.id,e.props=n.QK.cloneDeep(a.toJSON()),a.isEdge()?e.edge=!0:a.isNode()&&(e.node=!0),this.push(c,o)}if(s.isChangeEvent(t)){const i=e.key,s=c.data;return c.batch&&c.event||(c.event=t,c.options=o,s.key=i,null==s.prev&&(s.prev={}),s.prev[i]=n.QK.cloneDeep(a.previous(i)),l?c.modelChange=!0:s.id=a.id),null==s.next&&(s.next={}),s.next[i]=n.QK.cloneDeep(a.prop(i)),this.push(c,o)}const h=this.options.afterAddCommand;h&&n.Iw.call(h,this,t,e,c),this.push(c,o)}initBatchCommand(t){this.freezed||(this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1))}storeBatchCommand(t){if(!this.freezed)if(this.batchCommands&&this.batchLevel<=0){const e=this.filterBatchCommand(this.batchCommands);e.length>0&&(this.redoStack=[],this.undoStackPush(e),this.consolidateCommands(),this.notify("add",e,t)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)}filterBatchCommand(t){let e=t.slice();const i=[];for(;e.length>0;){const t=e.shift(),o=t.event,r=t.data.id;if(null!=o&&(null!=r||t.modelChange)){if(s.isAddEvent(o)){const t=e.findIndex((t=>s.isRemoveEvent(t.event)&&t.data.id===r));if(t>=0){e=e.filter(((e,i)=>t<i||e.data.id!==r));continue}}else if(s.isRemoveEvent(o)){const t=e.findIndex((t=>s.isAddEvent(t.event)&&t.data.id===r));if(t>=0){e.splice(t,1);continue}}else if(s.isChangeEvent(o)){const e=t.data;if(n.QK.isEqual(e.prev,e.next))continue}i.push(t)}}return i}notify(t,e,i){const n=null==e?null:Array.isArray(e)?e:[e];this.emit(t,{cmds:n,options:i}),this.graph.trigger("history:".concat(t),{cmds:n,options:i}),this.emit("change",{cmds:n,options:i}),this.graph.trigger("history:change",{cmds:n,options:i})}push(t,e){this.redoStack=[],t.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:t,options:e})):(this.undoStackPush(t),this.consolidateCommands(),this.notify("add",t,e))}consolidateCommands(){var t;const e=this.undoStack[this.undoStack.length-1],i=this.undoStack[this.undoStack.length-2];if(!Array.isArray(e))return;const n=new Set(e.map((t=>t.event)));if(2!==n.size||!n.has("cell:change:parent")||!n.has("cell:change:children"))return;if(!e.every((t=>{var e;return t.batch&&(null===(e=t.options)||void 0===e?void 0:e.ui)})))return;if(!Array.isArray(i)||1!==i.length)return;const s=i[0];"cell:change:position"===s.event&&(null===(t=s.options)||void 0===t?void 0:t.ui)&&(i.push(...e),this.undoStack.pop())}undoStackPush(t){0!==this.stackSize?(this.undoStack.length>=this.stackSize&&this.undoStack.shift(),this.undoStack.push(t)):this.undoStack.push(t)}ensureUndefinedAttrs(t,e){let i=!1;return null!==t&&null!==e&&"object"===typeof t&&"object"===typeof e&&Object.keys(e).forEach((n=>{void 0===t[n]&&void 0!==e[n]?(t[n]=void 0,i=!0):"object"===typeof t[n]&&"object"===typeof e[n]&&(i=this.ensureUndefinedAttrs(t[n],e[n]))})),i}dispose(){this.validator.dispose(),this.clean(),this.stopListening(),this.off()}}o([n.ew.dispose()],r.prototype,"dispose",null),function(t){class e extends n.ew{constructor(t){super(),this.map={},this.command=t.history,this.cancelInvalid=!1!==t.cancelInvalid,this.command.on("add",this.onCommandAdded,this)}onCommandAdded(t){let{cmds:e}=t;return Array.isArray(e)?e.every((t=>this.isValidCommand(t))):this.isValidCommand(e)}isValidCommand(t){if(t.options&&!1===t.options.validation)return!0;const e=t.event&&this.map[t.event]||[];let i=null;return e.forEach((e=>{let n=0;const s=o=>{const r=e[n];n+=1;try{if(!r)return void(i=o);r(o,t,s)}catch(o){s(o)}};s(i)})),!i||(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:i}),!1)}validate(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];const s=Array.isArray(t)?t:t.split(/\s+/);return i.forEach((t=>{if("function"!==typeof t)throw new Error("".concat(s.join(" ")," requires callback functions."))})),s.forEach((t=>{null==this.map[t]&&(this.map[t]=[]),this.map[t].push(i)})),this}dispose(){this.command.off("add",this.onCommandAdded,this)}}o([n.ew.dispose()],e.prototype,"dispose",null),t.Validator=e}(r||(r={})),function(t){t.isAddEvent=function(t){return"cell:added"===t},t.isRemoveEvent=function(t){return"cell:removed"===t},t.isChangeEvent=function(t){return null!=t&&t.startsWith("cell:change:")},t.getOptions=function(e){const i=["cell:added","cell:removed","cell:change:*"],n=["batch:start","batch:stop"],s=e.eventNames?e.eventNames.filter((e=>!(t.isChangeEvent(e)||i.includes(e)||n.includes(e)))):i;return Object.assign(Object.assign({enabled:!0},e),{eventNames:s,applyOptionsList:e.applyOptionsList||["propertyPath"],revertOptionsList:e.revertOptionsList||["propertyPath"]})},t.sortBatchCommands=function(e){const i=[];for(let n=0,s=e.length;n<s;n+=1){const s=e[n];let o=null;if(t.isAddEvent(s.event)){const t=s.data.id;for(let i=0;i<n;i+=1)if(e[i].data.id===t){o=i;break}}null!==o?i.splice(o,0,s):i.push(s)}return i}}(s||(s={}))},6875:(t,e,i)=>{"use strict";i.d(e,{N:()=>c});var n=i(469),s=i(7505),o=i.n(s),r=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class a extends n.JT{get graph(){return this.options.graph}constructor(t){super(),this.options=t;const e=this.graph.getPlugin("scroller");this.container=e?e.container:this.graph.container,t.global?this.target=document:(this.target=this.container,this.disabled||this.target.setAttribute("tabindex","-1"),this.graph.on("cell:mouseup",this.focus,this),this.graph.on("blank:mouseup",this.focus,this)),this.mousetrap=a.createMousetrap(this)}get disabled(){return!0!==this.options.enabled}enable(){this.disabled&&(this.options.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}disable(){this.disabled||(this.options.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}on(t,e,i){this.mousetrap.bind(this.getKeys(t),e,i)}off(t,e){this.mousetrap.unbind(this.getKeys(t),e)}clear(){this.mousetrap.reset()}trigger(t,e){this.mousetrap.trigger(t,e)}focus(t){if(this.isInputEvent(t.e))return;this.target.focus({preventScroll:!0})}getKeys(t){return(Array.isArray(t)?t:[t]).map((t=>this.formatkey(t)))}formatkey(t){const e=t.toLocaleLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command").replace("arrowup","up").replace("arrowright","right").replace("arrowdown","down").replace("arrowleft","left"),i=this.options.format;return i?n.Iw.call(i,this.graph,e):e}isGraphEvent(t){const e=t.target,i=t.currentTarget;return!!e&&(e===this.target||i===this.target||e===document.body||n.is.contains(this.container,e))}isInputEvent(t){var e;const i=t.target,s=null===(e=null===i||void 0===i?void 0:i.tagName)||void 0===e?void 0:e.toLowerCase();let o=["input","textarea"].includes(s);return"true"===n.is.attr(i,"contenteditable")&&(o=!0),o}isEnabledForEvent(t){const e=!this.disabled&&this.isGraphEvent(t),i=this.isInputEvent(t);if(e){if(i&&("Backspace"===t.key||"Delete"===t.key))return!1;if(this.options.guard)return n.Iw.call(this.options.guard,this.graph,t)}return e}dispose(){this.mousetrap.reset()}}r([n.JT.dispose()],a.prototype,"dispose",null),function(t){t.createMousetrap=function(t){const e=new(o())(t.target),i=e.stopCallback;return e.stopCallback=(n,s,o)=>!t.isEnabledForEvent(n)||!!i&&i.call(e,n,s,o),e}}(a||(a={})),n.kJ.prototype.isKeyboardEnabled=function(){const t=this.getPlugin("keyboard");return!!t&&t.isEnabled()},n.kJ.prototype.enableKeyboard=function(){const t=this.getPlugin("keyboard");return t&&t.enable(),this},n.kJ.prototype.disableKeyboard=function(){const t=this.getPlugin("keyboard");return t&&t.disable(),this},n.kJ.prototype.toggleKeyboard=function(t){const e=this.getPlugin("keyboard");return e&&e.toggleEnabled(t),this},n.kJ.prototype.bindKey=function(t,e,i){const n=this.getPlugin("keyboard");return n&&n.bindKey(t,e,i),this},n.kJ.prototype.unbindKey=function(t,e){const i=this.getPlugin("keyboard");return i&&i.unbindKey(t,e),this},n.kJ.prototype.clearKeys=function(){const t=this.getPlugin("keyboard");return t&&t.clear(),this},n.kJ.prototype.triggerKey=function(t,e){const i=this.getPlugin("keyboard");return i&&i.trigger(t,e),this};var l=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class c extends n.JT{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.name="keyboard",this.options=Object.assign({enabled:!0},t)}init(t){this.keyboardImpl=new a(Object.assign(Object.assign({},this.options),{graph:t}))}isEnabled(){return!this.keyboardImpl.disabled}enable(){this.keyboardImpl.enable()}disable(){this.keyboardImpl.disable()}toggleEnabled(t){return null!=t?t!==this.isEnabled()&&(t?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}bindKey(t,e,i){return this.keyboardImpl.on(t,e,i),this}trigger(t,e){return this.keyboardImpl.trigger(t,e),this}clear(){return this.keyboardImpl.clear(),this}unbindKey(t,e){return this.keyboardImpl.off(t,e),this}dispose(){this.keyboardImpl.dispose()}}l([n.JT.dispose()],c.prototype,"dispose",null)},7426:(t,e,i)=>{"use strict";i.d(e,{Y:()=>l});var n,s=i(469),o=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class r extends s.G7{get graph(){return this.options.graph}get boxClassName(){return this.prefixClassName(n.classNames.box)}get $boxes(){return s.is.children(this.container,this.boxClassName)}get handleOptions(){return this.options}constructor(t){super(),this.options=t,this.options.model&&(this.options.collection=this.options.model.collection),this.options.collection?this.collection=this.options.collection:(this.collection=new s.FE([],{comparator:n.depthComparator}),this.options.collection=this.collection),this.boxCount=0,this.createContainer(),this.startListening()}startListening(){const t=this.graph,e=this.collection;this.delegateEvents({["mousedown .".concat(this.boxClassName)]:"onSelectionBoxMouseDown",["touchstart .".concat(this.boxClassName)]:"onSelectionBoxMouseDown"},!0),t.on("scale",this.onGraphTransformed,this),t.on("translate",this.onGraphTransformed,this),t.model.on("updated",this.onModelUpdated,this),e.on("added",this.onCellAdded,this),e.on("removed",this.onCellRemoved,this),e.on("reseted",this.onReseted,this),e.on("updated",this.onCollectionUpdated,this),e.on("node:change:position",this.onNodePositionChanged,this),e.on("cell:changed",this.onCellChanged,this)}stopListening(){const t=this.graph,e=this.collection;this.undelegateEvents(),t.off("scale",this.onGraphTransformed,this),t.off("translate",this.onGraphTransformed,this),t.model.off("updated",this.onModelUpdated,this),e.off("added",this.onCellAdded,this),e.off("removed",this.onCellRemoved,this),e.off("reseted",this.onReseted,this),e.off("updated",this.onCollectionUpdated,this),e.off("node:change:position",this.onNodePositionChanged,this),e.off("cell:changed",this.onCellChanged,this)}onRemove(){this.stopListening()}onGraphTransformed(){this.updateSelectionBoxes()}onCellChanged(){this.updateSelectionBoxes()}onNodePositionChanged(t){let{node:e,options:i}=t;const{showNodeSelectionBox:n,pointerEvents:s}=this.options,{ui:o,selection:r,translateBy:a,snapped:l}=i,c=(!0!==n||s&&"none"===this.getPointerEventsValue(s))&&!this.translating&&!r,h=o&&a&&e.id===a;if(c&&(h||l)){this.translating=!0;const t=e.position(),n=e.previous("position"),s=t.x-n.x,o=t.y-n.y;0===s&&0===o||this.translateSelectedNodes(s,o,e,i),this.translating=!1}}onModelUpdated(t){let{removed:e}=t;e&&e.length&&this.unselect(e)}isEmpty(){return this.length<=0}isSelected(t){return this.collection.has(t)}get length(){return this.collection.length}get cells(){return this.collection.toArray()}select(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.dryrun=!0;const i=this.filter(Array.isArray(t)?t:[t]);return this.collection.add(i,e),this}unselect(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.dryrun=!0,this.collection.remove(Array.isArray(t)?t:[t],e),this}reset(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t){if(e.batch){const i=this.filter(Array.isArray(t)?t:[t]);return this.collection.reset(i,Object.assign(Object.assign({},e),{ui:!0})),this}const i=this.cells,n=this.filter(Array.isArray(t)?t:[t]),s={},o={};i.forEach((t=>s[t.id]=t)),n.forEach((t=>o[t.id]=t));const r=[],a=[];return n.forEach((t=>{s[t.id]||r.push(t)})),i.forEach((t=>{o[t.id]||a.push(t)})),a.length&&this.unselect(a,Object.assign(Object.assign({},e),{ui:!0})),r.length&&this.select(r,Object.assign(Object.assign({},e),{ui:!0})),0===a.length&&0===r.length&&this.updateContainer(),this}return this.clean(e)}clean(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.length&&(!1===t.batch?this.unselect(this.cells,t):this.collection.reset([],Object.assign(Object.assign({},t),{ui:!0}))),this}setFilter(t){this.options.filter=t}setContent(t){this.options.content=t}startSelecting(t){let e,i;t=this.normalizeEvent(t),this.clean();const o=this.graph.container;if(null!=t.offsetX&&null!=t.offsetY&&o.contains(t.target))e=t.offsetX,i=t.offsetY;else{const n=s.is.offset(o),r=o.scrollLeft,a=o.scrollTop;e=t.clientX-n.left+window.pageXOffset+r,i=t.clientY-n.top+window.pageYOffset+a}s.is.css(this.container,{top:i,left:e,width:1,height:1}),this.setEventData(t,{action:"selecting",clientX:t.clientX,clientY:t.clientY,offsetX:e,offsetY:i,scrollerX:0,scrollerY:0,moving:!1}),this.delegateDocumentEvents(n.documentEvents,t.data)}filter(t){const e=this.options.filter;return t.filter((t=>Array.isArray(e)?e.some((e=>"string"===typeof e?t.shape===e:t.id===e.id)):"function"!==typeof e||s.Iw.call(e,this.graph,t)))}stopSelecting(t){const e=this.graph,i=this.getEventData(t);switch(i.action){case"selecting":{let t=s.is.width(this.container),i=s.is.height(this.container);const n=s.is.offset(this.container),o=e.pageToLocal(n.left,n.top),r=e.transform.getScale();t/=r.sx,i/=r.sy;const a=new s.Ae(o.x,o.y,t,i),l=this.getCellViewsInArea(a).map((t=>t.cell));this.reset(l,{batch:!0}),this.hideRubberband();break}case"translating":{const n=e.snapToGrid(t.clientX,t.clientY);if(!this.options.following){const t=i;this.updateSelectedNodesPosition({dx:t.clientX-t.originX,dy:t.clientY-t.originY})}this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",t,n.x,n.y);break}default:this.clean()}}onMouseUp(t){this.getEventData(t).action&&(this.stopSelecting(t),this.undelegateDocumentEvents())}onSelectionBoxMouseDown(t){this.options.following||t.stopPropagation();const e=this.normalizeEvent(t);this.options.movable&&this.startTranslating(e);const i=this.getCellViewFromElem(e.target);this.setEventData(e,{activeView:i});const s=this.graph.snapToGrid(e.clientX,e.clientY);this.notifyBoxEvent("box:mousedown",e,s.x,s.y),this.delegateDocumentEvents(n.documentEvents,e.data)}startTranslating(t){this.graph.model.startBatch("move-selection");const e=this.graph.snapToGrid(t.clientX,t.clientY);this.setEventData(t,{action:"translating",clientX:e.x,clientY:e.y,originX:e.x,originY:e.y})}getRestrictArea(){const t=this.graph.options.translating.restrict,e="function"===typeof t?s.Iw.call(t,this.graph,null):t;return"number"===typeof e?this.graph.transform.getGraphArea().inflate(e):!0===e?this.graph.transform.getGraphArea():e||null}getSelectionOffset(t,e){let i=t.x-e.clientX,n=t.y-e.clientY;const o=this.getRestrictArea();if(o){const r=this.collection.toArray(),a=s.bL.getCellsBBox(r,{deep:!0})||s.Ae.create(),l=o.x-a.x,c=o.y-a.y,h=o.x+o.width-(a.x+a.width),d=o.y+o.height-(a.y+a.height);if(i<l&&(i=l),n<c&&(n=c),h<i&&(i=h),d<n&&(n=d),!this.options.following){const s=t.x-e.originX,o=t.y-e.originY;i=s<=l||s>=h?0:i,n=o<=c||o>=d?0:n}}return{dx:i,dy:n}}updateElementPosition(t,e,i){const n=s.is.css(t,"left"),o=s.is.css(t,"top"),r=n?parseFloat(n):0,a=o?parseFloat(o):0;s.is.css(t,"left",r+e),s.is.css(t,"top",a+i)}updateSelectedNodesPosition(t){const{dx:e,dy:i}=t;if(e||i)if(this.translateSelectedNodes(e,i),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{const t=this.graph.transform.getScale();for(let n=0,s=this.$boxes,o=s.length;n<o;n+=1)this.updateElementPosition(s[n],e*t.sx,i*t.sy);this.updateElementPosition(this.selectionContainer,e*t.sx,i*t.sy)}}autoScrollGraph(t,e){const i=this.graph.getPlugin("scroller");return i?i.autoScroll(t,e):{scrollerX:0,scrollerY:0}}adjustSelection(t){const e=this.normalizeEvent(t),i=this.getEventData(e);switch(i.action){case"selecting":{const t=i;!0!==t.moving&&(s.is.appendTo(this.container,this.graph.container),this.showRubberband(),t.moving=!0);const{scrollerX:n,scrollerY:o}=this.autoScrollGraph(e.clientX,e.clientY);t.scrollerX+=n,t.scrollerY+=o;const r=e.clientX-t.clientX+t.scrollerX,a=e.clientY-t.clientY+t.scrollerY,l=parseInt(s.is.css(this.container,"left")||"0",10),c=parseInt(s.is.css(this.container,"top")||"0",10);s.is.css(this.container,{left:r<0?t.offsetX+r:l,top:a<0?t.offsetY+a:c,width:Math.abs(r),height:Math.abs(a)});break}case"translating":{const n=this.graph.snapToGrid(e.clientX,e.clientY),s=i,o=this.getSelectionOffset(n,s);this.options.following?this.updateSelectedNodesPosition(o):this.updateContainerPosition(o),o.dx&&(s.clientX=n.x),o.dy&&(s.clientY=n.y),this.notifyBoxEvent("box:mousemove",t,n.x,n.y);break}}this.boxesUpdated=!1}translateSelectedNodes(t,e,i,n){const s={},o=[];if(i&&(s[i.id]=!0),this.collection.toArray().forEach((t=>{t.getDescendants({deep:!0}).forEach((t=>{s[t.id]=!0}))})),n&&n.translateBy){const t=this.graph.getCellById(n.translateBy);t&&(s[t.id]=!0,t.getDescendants({deep:!0}).forEach((t=>{s[t.id]=!0})),o.push(t))}this.collection.toArray().forEach((i=>{if(!s[i.id]){const r=Object.assign(Object.assign({},n),{selection:this.cid,exclude:o});i.translate(t,e,r),this.graph.model.getConnectedEdges(i).forEach((i=>{s[i.id]||(i.translate(t,e,r),s[i.id]=!0)}))}}))}getCellViewsInArea(t){const e=this.graph,i={strict:this.options.strict};let n=[];return this.options.rubberNode&&(n=n.concat(e.model.getNodesInArea(t,i).map((t=>e.renderer.findViewByCell(t))).filter((t=>null!=t)))),this.options.rubberEdge&&(n=n.concat(e.model.getEdgesInArea(t,i).map((t=>e.renderer.findViewByCell(t))).filter((t=>null!=t)))),n}notifyBoxEvent(t,e,i,n){const s=this.getEventData(e).activeView;this.trigger(t,{e:e,view:s,x:i,y:n,cell:s.cell})}getSelectedClassName(t){return this.prefixClassName("".concat(t.isNode()?"node":"edge","-selected"))}addCellSelectedClassName(t){const e=this.graph.renderer.findViewByCell(t);e&&e.addClass(this.getSelectedClassName(t))}removeCellUnSelectedClassName(t){const e=this.graph.renderer.findViewByCell(t);e&&e.removeClass(this.getSelectedClassName(t))}destroySelectionBox(t){this.removeCellUnSelectedClassName(t),this.canShowSelectionBox(t)&&(s.is.remove(this.container.querySelector('[data-cell-id="'.concat(t.id,'"]'))),0===this.$boxes.length&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}destroyAllSelectionBoxes(t){t.forEach((t=>this.removeCellUnSelectedClassName(t))),this.hide(),s.is.remove(this.$boxes),this.boxCount=0}hide(){s.is.removeClass(this.container,this.prefixClassName(n.classNames.rubberband)),s.is.removeClass(this.container,this.prefixClassName(n.classNames.selected))}showRubberband(){s.is.addClass(this.container,this.prefixClassName(n.classNames.rubberband))}hideRubberband(){s.is.removeClass(this.container,this.prefixClassName(n.classNames.rubberband))}showSelected(){s.is.removeAttribute(this.container,"style"),s.is.addClass(this.container,this.prefixClassName(n.classNames.selected))}createContainer(){this.container=document.createElement("div"),s.is.addClass(this.container,this.prefixClassName(n.classNames.root)),this.options.className&&s.is.addClass(this.container,this.options.className),this.selectionContainer=document.createElement("div"),s.is.addClass(this.selectionContainer,this.prefixClassName(n.classNames.inner)),this.selectionContent=document.createElement("div"),s.is.addClass(this.selectionContent,this.prefixClassName(n.classNames.content)),s.is.append(this.selectionContainer,this.selectionContent),s.is.attr(this.selectionContainer,"data-selection-length",this.collection.length),s.is.prepend(this.container,this.selectionContainer)}updateContainerPosition(t){(t.dx||t.dy)&&this.updateElementPosition(this.selectionContainer,t.dx,t.dy)}updateContainer(){const t={x:1/0,y:1/0},e={x:0,y:0};this.collection.toArray().filter((t=>this.canShowSelectionBox(t))).forEach((i=>{const n=this.graph.renderer.findViewByCell(i);if(n){const i=n.getBBox({useCellGeometry:!0});t.x=Math.min(t.x,i.x),t.y=Math.min(t.y,i.y),e.x=Math.max(e.x,i.x+i.width),e.y=Math.max(e.y,i.y+i.height)}})),s.is.css(this.selectionContainer,{position:"absolute",pointerEvents:"none",left:t.x,top:t.y,width:e.x-t.x,height:e.y-t.y}),s.is.attr(this.selectionContainer,"data-selection-length",this.collection.length);const i=this.options.content;if(i)if("function"===typeof i){const t=s.Iw.call(i,this.graph,this,this.selectionContent);t&&(this.selectionContent.innerHTML=t)}else this.selectionContent.innerHTML=i;this.collection.length>0&&!this.container.parentNode?s.is.appendTo(this.container,this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}canShowSelectionBox(t){return t.isNode()&&!0===this.options.showNodeSelectionBox||t.isEdge()&&!0===this.options.showEdgeSelectionBox}getPointerEventsValue(t){return"string"===typeof t?t:t(this.cells)}createSelectionBox(t){if(this.addCellSelectedClassName(t),this.canShowSelectionBox(t)){const e=this.graph.renderer.findViewByCell(t);if(e){const i=e.getBBox({useCellGeometry:!0}),n=this.boxClassName,o=document.createElement("div"),r=this.options.pointerEvents;s.is.addClass(o,n),s.is.addClass(o,"".concat(n,"-").concat(t.isNode()?"node":"edge")),s.is.attr(o,"data-cell-id",t.id),s.is.css(o,{position:"absolute",left:i.x,top:i.y,width:i.width,height:i.height,pointerEvents:r?this.getPointerEventsValue(r):"auto"}),s.is.appendTo(o,this.container),this.showSelected(),this.boxCount+=1}}}updateSelectionBoxes(){this.collection.length>0&&(this.boxesUpdated=!0,this.confirmUpdate())}confirmUpdate(){if(this.boxCount){this.hide();for(let t=0,e=this.$boxes,i=e.length;t<i;t+=1){const i=e[t],n=s.is.attr(i,"data-cell-id");s.is.remove(i),this.boxCount-=1;const o=this.collection.get(n);o&&this.createSelectionBox(o)}this.updateContainer()}return 0}getCellViewFromElem(t){const e=t.getAttribute("data-cell-id");if(e){const t=this.collection.get(e);if(t)return this.graph.renderer.findViewByCell(t)}return null}onCellRemoved(t){let{cell:e}=t;this.destroySelectionBox(e),this.updateContainer()}onReseted(t){let{previous:e,current:i}=t;this.destroyAllSelectionBoxes(e),i.forEach((t=>{this.listenCellRemoveEvent(t),this.createSelectionBox(t)})),this.updateContainer()}onCellAdded(t){let{cell:e}=t;this.listenCellRemoveEvent(e),this.createSelectionBox(e),this.updateContainer()}listenCellRemoveEvent(t){t.off("removed",this.onCellRemoved,this),t.on("removed",this.onCellRemoved,this)}onCollectionUpdated(t){let{added:e,removed:i,options:n}=t;e.forEach((t=>{this.trigger("cell:selected",{cell:t,options:n}),t.isNode()?this.trigger("node:selected",{cell:t,options:n,node:t}):t.isEdge()&&this.trigger("edge:selected",{cell:t,options:n,edge:t})})),i.forEach((t=>{this.trigger("cell:unselected",{cell:t,options:n}),t.isNode()?this.trigger("node:unselected",{cell:t,options:n,node:t}):t.isEdge()&&this.trigger("edge:unselected",{cell:t,options:n,edge:t})}));const s={added:e,removed:i,options:n,selected:this.cells.filter((t=>!!this.graph.getCellById(t.id)))};this.trigger("selection:changed",s)}dispose(){this.clean(),this.remove(),this.off()}}o([s.G7.dispose()],r.prototype,"dispose",null),function(t){const e="widget-selection";t.classNames={root:e,inner:"".concat(e,"-inner"),box:"".concat(e,"-box"),content:"".concat(e,"-content"),rubberband:"".concat(e,"-rubberband"),selected:"".concat(e,"-selected")},t.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},t.depthComparator=function(t){return t.getAncestors().length}}(n||(n={}));s.kJ.prototype.isSelectionEnabled=function(){const t=this.getPlugin("selection");return!!t&&t.isEnabled()},s.kJ.prototype.enableSelection=function(){const t=this.getPlugin("selection");return t&&t.enable(),this},s.kJ.prototype.disableSelection=function(){const t=this.getPlugin("selection");return t&&t.disable(),this},s.kJ.prototype.toggleSelection=function(t){const e=this.getPlugin("selection");return e&&e.toggleEnabled(t),this},s.kJ.prototype.isMultipleSelection=function(){const t=this.getPlugin("selection");return!!t&&t.isMultipleSelection()},s.kJ.prototype.enableMultipleSelection=function(){const t=this.getPlugin("selection");return t&&t.enableMultipleSelection(),this},s.kJ.prototype.disableMultipleSelection=function(){const t=this.getPlugin("selection");return t&&t.disableMultipleSelection(),this},s.kJ.prototype.toggleMultipleSelection=function(t){const e=this.getPlugin("selection");return e&&e.toggleMultipleSelection(t),this},s.kJ.prototype.isSelectionMovable=function(){const t=this.getPlugin("selection");return!!t&&t.isSelectionMovable()},s.kJ.prototype.enableSelectionMovable=function(){const t=this.getPlugin("selection");return t&&t.enableSelectionMovable(),this},s.kJ.prototype.disableSelectionMovable=function(){const t=this.getPlugin("selection");return t&&t.disableSelectionMovable(),this},s.kJ.prototype.toggleSelectionMovable=function(t){const e=this.getPlugin("selection");return e&&e.toggleSelectionMovable(t),this},s.kJ.prototype.isRubberbandEnabled=function(){const t=this.getPlugin("selection");return!!t&&t.isRubberbandEnabled()},s.kJ.prototype.enableRubberband=function(){const t=this.getPlugin("selection");return t&&t.enableRubberband(),this},s.kJ.prototype.disableRubberband=function(){const t=this.getPlugin("selection");return t&&t.disableRubberband(),this},s.kJ.prototype.toggleRubberband=function(t){const e=this.getPlugin("selection");return e&&e.toggleRubberband(t),this},s.kJ.prototype.isStrictRubberband=function(){const t=this.getPlugin("selection");return!!t&&t.isStrictRubberband()},s.kJ.prototype.enableStrictRubberband=function(){const t=this.getPlugin("selection");return t&&t.enableStrictRubberband(),this},s.kJ.prototype.disableStrictRubberband=function(){const t=this.getPlugin("selection");return t&&t.disableStrictRubberband(),this},s.kJ.prototype.toggleStrictRubberband=function(t){const e=this.getPlugin("selection");return e&&e.toggleStrictRubberband(t),this},s.kJ.prototype.setRubberbandModifiers=function(t){const e=this.getPlugin("selection");return e&&e.setRubberbandModifiers(t),this},s.kJ.prototype.setSelectionFilter=function(t){const e=this.getPlugin("selection");return e&&e.setSelectionFilter(t),this},s.kJ.prototype.setSelectionDisplayContent=function(t){const e=this.getPlugin("selection");return e&&e.setSelectionDisplayContent(t),this},s.kJ.prototype.isSelectionEmpty=function(){const t=this.getPlugin("selection");return!t||t.isEmpty()},s.kJ.prototype.cleanSelection=function(t){const e=this.getPlugin("selection");return e&&e.clean(t),this},s.kJ.prototype.resetSelection=function(t,e){const i=this.getPlugin("selection");return i&&i.reset(t,e),this},s.kJ.prototype.getSelectedCells=function(){const t=this.getPlugin("selection");return t?t.getSelectedCells():[]},s.kJ.prototype.getSelectedCellCount=function(){const t=this.getPlugin("selection");return t?t.getSelectedCellCount():0},s.kJ.prototype.isSelected=function(t){const e=this.getPlugin("selection");return!!e&&e.isSelected(t)},s.kJ.prototype.select=function(t,e){const i=this.getPlugin("selection");return i&&i.select(t,e),this},s.kJ.prototype.unselect=function(t,e){const i=this.getPlugin("selection");return i&&i.unselect(t,e),this};var a=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class l extends s.ew{get rubberbandDisabled(){return!0!==this.options.enabled||!0!==this.options.rubberband}get disabled(){return!0!==this.options.enabled}get length(){return this.selectionImpl.length}get cells(){return this.selectionImpl.cells}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.name="selection",this.movedMap=new WeakMap,this.unselectMap=new WeakMap,this.options=Object.assign(Object.assign({enabled:!0},l.defaultOptions),t),s.mf.ensure(this.name,".x6-widget-selection {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: none;\n  width: 0;\n  height: 0;\n  touch-action: none;\n}\n.x6-widget-selection-rubberband {\n  display: block;\n  overflow: visible;\n  opacity: 0.3;\n}\n.x6-widget-selection-selected {\n  display: block;\n}\n.x6-widget-selection-box {\n  cursor: move;\n}\n.x6-widget-selection-inner[data-selection-length='0'],\n.x6-widget-selection-inner[data-selection-length='1'] {\n  display: none;\n}\n.x6-widget-selection-content {\n  position: absolute;\n  top: 100%;\n  right: -20px;\n  left: -20px;\n  margin-top: 30px;\n  padding: 6px;\n  line-height: 14px;\n  text-align: center;\n  border-radius: 6px;\n}\n.x6-widget-selection-content:empty {\n  display: none;\n}\n.x6-widget-selection-rubberband {\n  background-color: #3498db;\n  border: 2px solid #2980b9;\n}\n.x6-widget-selection-box {\n  box-sizing: content-box !important;\n  margin-top: -4px;\n  margin-left: -4px;\n  padding-right: 4px;\n  padding-bottom: 4px;\n  border: 2px dashed #feb663;\n  box-shadow: 2px 2px 5px #d3d3d3;\n}\n.x6-widget-selection-inner {\n  box-sizing: content-box !important;\n  margin-top: -8px;\n  margin-left: -8px;\n  padding-right: 12px;\n  padding-bottom: 12px;\n  border: 2px solid #feb663;\n  box-shadow: 2px 2px 5px #d3d3d3;\n}\n.x6-widget-selection-content {\n  color: #fff;\n  font-size: 10px;\n  background-color: #6a6b8a;\n}\n")}init(t){this.graph=t,this.selectionImpl=new r(Object.assign(Object.assign({},this.options),{graph:t})),this.setup(),this.startListening()}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(t){return null!=t?t!==this.isEnabled()&&(t?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}isMultipleSelection(){return this.isMultiple()}enableMultipleSelection(){return this.enableMultiple(),this}disableMultipleSelection(){return this.disableMultiple(),this}toggleMultipleSelection(t){return null!=t?t!==this.isMultipleSelection()&&(t?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}isSelectionMovable(){return!1!==this.options.movable}enableSelectionMovable(){return this.selectionImpl.options.movable=!0,this}disableSelectionMovable(){return this.selectionImpl.options.movable=!1,this}toggleSelectionMovable(t){return null!=t?t!==this.isSelectionMovable()&&(t?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}isRubberbandEnabled(){return!this.rubberbandDisabled}enableRubberband(){return this.rubberbandDisabled&&(this.options.rubberband=!0),this}disableRubberband(){return this.rubberbandDisabled||(this.options.rubberband=!1),this}toggleRubberband(t){return null!=t?t!==this.isRubberbandEnabled()&&(t?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}isStrictRubberband(){return!0===this.selectionImpl.options.strict}enableStrictRubberband(){return this.selectionImpl.options.strict=!0,this}disableStrictRubberband(){return this.selectionImpl.options.strict=!1,this}toggleStrictRubberband(t){return null!=t?t!==this.isStrictRubberband()&&(t?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}setRubberbandModifiers(t){this.setModifiers(t)}setSelectionFilter(t){return this.setFilter(t),this}setSelectionDisplayContent(t){return this.setContent(t),this}isEmpty(){return this.length<=0}clean(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.selectionImpl.clean(t),this}reset(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.selectionImpl.reset(t?this.getCells(t):[],e),this}getSelectedCells(){return this.cells}getSelectedCellCount(){return this.length}isSelected(t){return this.selectionImpl.isSelected(t)}select(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this.getCells(t);return i.length&&(this.isMultiple()?this.selectionImpl.select(i,e):this.reset(i.slice(0,1),e)),this}unselect(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.selectionImpl.unselect(this.getCells(t),e),this}setup(){this.selectionImpl.on("*",((t,e)=>{this.trigger(t,e),this.graph.trigger(t,e)}))}startListening(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.selectionImpl.on("box:mousedown",this.onBoxMouseDown,this)}stopListening(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.selectionImpl.off("box:mousedown",this.onBoxMouseDown,this)}onBlankMouseDown(t){let{e:e}=t;if(!this.allowBlankMouseDown(e))return;const i=this.graph.panning.allowPanning(e,!0),n=this.graph.getPlugin("scroller"),s=n&&n.allowPanning(e,!0);(this.allowRubberband(e,!0)||this.allowRubberband(e)&&!s&&!i)&&this.startRubberband(e)}allowBlankMouseDown(t){const e=this.options.eventTypes;return(null===e||void 0===e?void 0:e.includes("leftMouseDown"))&&0===t.button||(null===e||void 0===e?void 0:e.includes("mouseWheelDown"))&&1===t.button}onBlankClick(){this.clean()}allowRubberband(t,e){return!this.rubberbandDisabled&&s.tx.isMatch(t,this.options.modifiers,e)}allowMultipleSelection(t){return this.isMultiple()&&s.tx.isMatch(t,this.options.multipleSelectionModifiers)}onCellMouseMove(t){let{cell:e}=t;this.movedMap.set(e,!0)}onCellMouseUp(t){let{e:e,cell:i}=t;const n=this.options;let s=this.disabled;!s&&this.movedMap.has(i)&&(s=!1===n.selectCellOnMoved,s||(s=!1===n.selectNodeOnMoved&&i.isNode()),s||(s=!1===n.selectEdgeOnMoved&&i.isEdge())),s||(this.allowMultipleSelection(e)?this.unselectMap.has(i)?this.unselectMap.delete(i):this.isSelected(i)?this.unselect(i):this.select(i):this.reset(i)),this.movedMap.delete(i)}onBoxMouseDown(t){let{e:e,cell:i}=t;this.disabled||this.allowMultipleSelection(e)&&(this.unselect(i),this.unselectMap.set(i,!0))}getCells(t){return(Array.isArray(t)?t:[t]).map((t=>"string"===typeof t?this.graph.getCellById(t):t)).filter((t=>null!=t))}startRubberband(t){return this.rubberbandDisabled||this.selectionImpl.startSelecting(t),this}isMultiple(){return!1!==this.options.multiple}enableMultiple(){return this.options.multiple=!0,this}disableMultiple(){return this.options.multiple=!1,this}setModifiers(t){return this.options.modifiers=t,this}setContent(t){return this.selectionImpl.setContent(t),this}setFilter(t){return this.selectionImpl.setFilter(t),this}dispose(){this.stopListening(),this.off(),this.selectionImpl.dispose(),s.mf.clean(this.name)}}a([s.ew.dispose()],l.prototype,"dispose",null),function(t){t.defaultOptions={rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,following:!0,content:null,eventTypes:["leftMouseDown","mouseWheelDown"]}}(l||(l={}))},1552:(t,e,i)=>{"use strict";i.d(e,{t:()=>c});var n,s=i(469),o=i(4447);!function(t){t.getMaxDim=function(t,e){return t.reduce(((t,i)=>Math.max(null===i||void 0===i?void 0:i.getSize()[e],t)),0)},t.getNodesInRow=function(t,e,i){const n=[];for(let s=i*e,o=s+i;s<o;s+=1)t[s]&&n.push(t[s]);return n},t.getNodesInColumn=function(t,e,i){const n=[];for(let s=e,o=t.length;s<o;s+=i)t[s]&&n.push(t[s]);return n},t.accumulate=function(t,e){return t.reduce(((t,e,i)=>(t.push(t[i]+e),t)),[e||0])}}(n||(n={}));var r,a,l=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class c extends s.G7{get targetScroller(){return this.options.target.getPlugin("scroller")}get targetGraph(){return this.options.target}get targetModel(){return this.targetGraph.model}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.name="stencil",s.mf.ensure(this.name,".x6-widget-dnd {\n  position: absolute;\n  top: -10000px;\n  left: -10000px;\n  z-index: 999999;\n  display: none;\n  cursor: move;\n  opacity: 0.7;\n  pointer-events: 'cursor';\n}\n.x6-widget-dnd.dragging {\n  display: inline-block;\n}\n.x6-widget-dnd.dragging * {\n  pointer-events: none !important;\n}\n.x6-widget-dnd .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-stencil {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-widget-stencil::after {\n  position: absolute;\n  top: 0;\n  display: block;\n  width: 100%;\n  height: 20px;\n  padding: 8px 0;\n  line-height: 20px;\n  text-align: center;\n  opacity: 0;\n  transition: top 0.1s linear, opacity 0.1s linear;\n  content: ' ';\n  pointer-events: none;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: auto;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {\n  pointer-events: none;\n}\n.x6-widget-stencil-group {\n  padding: 0;\n  padding-bottom: 8px;\n  overflow: hidden;\n  user-select: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  padding-bottom: 0;\n}\n.x6-widget-stencil-group-title {\n  position: relative;\n  margin-top: 0;\n  margin-bottom: 0;\n  padding: 4px;\n  cursor: pointer;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  user-select: none;\n}\n.x6-widget-stencil .unmatched {\n  opacity: 0.3;\n}\n.x6-widget-stencil .x6-node.unmatched {\n  display: none;\n}\n.x6-widget-stencil-group.unmatched {\n  display: none;\n}\n.x6-widget-stencil-search-text {\n  position: relative;\n  z-index: 1;\n  box-sizing: border-box;\n  width: 100%;\n  height: 30px;\n  max-height: 30px;\n  line-height: 30px;\n  outline: 0;\n}\n.x6-widget-stencil.not-found::after {\n  opacity: 1;\n  content: attr(data-not-found-text);\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 30px;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 50px;\n}\n.x6-widget-stencil {\n  color: #333;\n  background: #f5f5f5;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-content {\n  top: 32px;\n}\n.x6-widget-stencil.searchable > .x6-widget-stencil-content {\n  top: 80px;\n}\n.x6-widget-stencil.not-found::after {\n  position: absolute;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 80px;\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 60px;\n}\n.x6-widget-stencil-group {\n  height: auto;\n  margin-bottom: 1px;\n  padding: 0;\n  transition: none;\n}\n.x6-widget-stencil-group .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  max-height: 31px;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  position: relative;\n  left: 0;\n  box-sizing: border-box;\n  width: 100%;\n  height: 32px;\n  padding: 0 5px 0 8px;\n  color: #666;\n  font-weight: 700;\n  font-size: 12px;\n  line-height: 32px;\n  cursor: default;\n  transition: all 0.3;\n}\n.x6-widget-stencil-title:hover,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {\n  color: #444;\n}\n.x6-widget-stencil-title {\n  background: #e9e9e9;\n}\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  background: #ededed;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {\n  padding-left: 32px;\n  cursor: pointer;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  position: absolute;\n  top: 6px;\n  left: 8px;\n  display: block;\n  width: 18px;\n  height: 18px;\n  margin: 0;\n  padding: 0;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: 0 0;\n  border: none;\n  content: ' ';\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');\n  opacity: 0.4;\n  transition: all 0.3s;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');\n  opacity: 0.4;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil input[type='search'] {\n  appearance: textfield;\n}\n.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,\n.x6-widget-stencil input[type='search']::-webkit-search-decoration {\n  appearance: none;\n}\n.x6-widget-stencil-search-text {\n  display: block;\n  width: 90%;\n  margin: 8px 5%;\n  padding-left: 8px;\n  color: #333;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  border-radius: 12px;\n  outline: 0;\n}\n.x6-widget-stencil-search-text:focus {\n  outline: 0;\n}\n.x6-widget-stencil::after {\n  color: #808080;\n  font-weight: 600;\n  font-size: 12px;\n  background: 0 0;\n}\n"),this.graphs={},this.groups={},this.options=Object.assign(Object.assign({},c.defaultOptions),t),this.init()}init(){this.dnd=new o.q(this.options),this.onSearch=s.Iw.debounce(this.onSearch,200),this.initContainer(),this.initSearch(),this.initContent(),this.initGroups(),this.setTitle(),this.startListening()}load(t,e){return Array.isArray(t)?this.loadGroup(t,e):this.options.groups&&Object.keys(this.options.groups).forEach((e=>{t[e]&&this.loadGroup(t[e],e)})),this}unload(t,e){return Array.isArray(t)?this.loadGroup(t,e,!0):this.options.groups&&Object.keys(this.options.groups).forEach((e=>{t[e]&&this.loadGroup(t[e],e,!0)})),this}toggleGroup(t){return this.isGroupCollapsed(t)?this.expandGroup(t):this.collapseGroup(t),this}collapseGroup(t){if(this.isGroupCollapsable(t)){const e=this.groups[t];e&&!this.isGroupCollapsed(t)&&(this.trigger("group:collapse",{name:t}),s.is.addClass(e,"collapsed"))}return this}expandGroup(t){if(this.isGroupCollapsable(t)){const e=this.groups[t];e&&this.isGroupCollapsed(t)&&(this.trigger("group:expand",{name:t}),s.is.removeClass(e,"collapsed"))}return this}isGroupCollapsable(t){const e=this.groups[t];return s.is.hasClass(e,"collapsable")}isGroupCollapsed(t){const e=this.groups[t];return e&&s.is.hasClass(e,"collapsed")}collapseGroups(){return Object.keys(this.groups).forEach((t=>this.collapseGroup(t))),this}expandGroups(){return Object.keys(this.groups).forEach((t=>this.expandGroup(t))),this}resizeGroup(t,e){const i=this.graphs[t];return i&&i.resize(e.width,e.height),this}addGroup(t){const e=Array.isArray(t)?t:[t];this.options.groups?this.options.groups.push(...e):this.options.groups=e,e.forEach((t=>this.initGroup(t)))}removeGroup(t){const e=Array.isArray(t)?t:[t];this.options.groups&&(this.options.groups=this.options.groups.filter((t=>!e.includes(t.name))),e.forEach((t=>{const e=this.graphs[t];this.unregisterGraphEvents(e),e.dispose(),delete this.graphs[t];const i=this.groups[t];s.is.remove(i),delete this.groups[t]})))}initContainer(){this.container=document.createElement("div"),s.is.addClass(this.container,this.prefixClassName(r.base)),s.is.attr(this.container,"data-not-found-text",this.options.notFoundText||"No matches found")}initContent(){this.content=document.createElement("div"),s.is.addClass(this.content,this.prefixClassName(r.content)),s.is.appendTo(this.content,this.container)}initSearch(){this.options.search&&(s.is.addClass(this.container,"searchable"),s.is.append(this.container,this.renderSearch()))}initGroup(t){const e=this.options.stencilGraphOptions||{},i=document.createElement("div");s.is.addClass(i,this.prefixClassName(r.group)),s.is.attr(i,"data-name",t.name),(null==t.collapsable&&this.options.collapsable||!1!==t.collapsable)&&s.is.addClass(i,"collapsable"),s.is.toggleClass(i,"collapsed",!0===t.collapsed);const n=document.createElement("h3");s.is.addClass(n,this.prefixClassName(r.groupTitle)),n.innerHTML=t.title||t.name;const o=document.createElement("div");s.is.addClass(o,this.prefixClassName(r.groupContent));const a=t.graphOptions,l=new s.kJ(Object.assign(Object.assign(Object.assign({},e),a),{container:document.createElement("div"),model:e.model||new s.Hn,width:t.graphWidth||this.options.stencilGraphWidth,height:t.graphHeight||this.options.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));this.registerGraphEvents(l),s.is.append(o,l.container),s.is.append(i,[n,o]),s.is.appendTo(i,this.content),this.groups[t.name]=i,this.graphs[t.name]=l}initGroups(){if(this.clearGroups(),this.setCollapsableState(),this.options.groups&&this.options.groups.length)this.options.groups.forEach((t=>{this.initGroup(t)}));else{const t=this.options.stencilGraphOptions||{},e=new s.kJ(Object.assign(Object.assign({},t),{container:document.createElement("div"),model:t.model||new s.Hn,width:this.options.stencilGraphWidth,height:this.options.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));s.is.append(this.content,e.container),this.graphs[a.defaultGroupName]=e}}setCollapsableState(){if(this.options.collapsable=this.options.collapsable&&this.options.groups&&this.options.groups.some((t=>!1!==t.collapsable)),this.options.collapsable){s.is.addClass(this.container,"collapsable");this.options.groups&&this.options.groups.every((t=>t.collapsed||!1===t.collapsable))?s.is.addClass(this.container,"collapsed"):s.is.removeClass(this.container,"collapsed")}else s.is.removeClass(this.container,"collapsable")}setTitle(){const t=document.createElement("div");s.is.addClass(t,this.prefixClassName(r.title)),t.innerHTML=this.options.title,s.is.appendTo(t,this.container)}renderSearch(){const t=document.createElement("div");s.is.addClass(t,this.prefixClassName(r.search));const e=document.createElement("input");return s.is.attr(e,{type:"search",placeholder:this.options.placeholder||"Search"}),s.is.addClass(e,this.prefixClassName(r.searchText)),s.is.append(t,e),t}startListening(){const t=this.prefixClassName(r.title),e=this.prefixClassName(r.searchText),i=this.prefixClassName(r.groupTitle);this.delegateEvents({["click .".concat(t)]:"onTitleClick",["touchstart .".concat(t)]:"onTitleClick",["click .".concat(i)]:"onGroupTitleClick",["touchstart .".concat(i)]:"onGroupTitleClick",["input .".concat(e)]:"onSearch",["focusin .".concat(e)]:"onSearchFocusIn",["focusout .".concat(e)]:"onSearchFocusOut"})}stopListening(){this.undelegateEvents()}registerGraphEvents(t){t.on("cell:mousedown",this.onDragStart,this)}unregisterGraphEvents(t){t.off("cell:mousedown",this.onDragStart,this)}loadGroup(t,e,i){const n=this.getModel(e);if(n){const e=t.map((t=>s.NB.isNode(t)?t:s.NB.create(t)));!0===i?n.removeCells(e):n.resetCells(e)}const o=this.getGroup(e);let r=this.options.stencilGraphHeight;o&&null!=o.graphHeight&&(r=o.graphHeight);const a=o&&o.layout||this.options.layout;if(a&&n&&s.Iw.call(a,this,n,o),!r){const t=this.getGraph(e);t.fitToContent({minWidth:t.options.width,gridHeight:1,padding:o&&o.graphPadding||this.options.stencilGraphPadding||10})}return this}onDragStart(t){const{e:e,node:i}=t,n=this.getGroupByNode(i);n&&!1===n.nodeMovable||this.dnd.start(i,e)}filter(t,e){const i=Object.keys(this.graphs).reduce(((i,n)=>{const o=this.graphs[n],r=n===a.defaultGroupName?null:n,l=o.model.getNodes().filter((i=>{let n=!1;n="function"===typeof e?s.Iw.call(e,this,i,t,r,this):"boolean"===typeof e?e:this.isCellMatched(i,t,e,t.toLowerCase()!==t);const a=o.renderer.findViewByCell(i);return a&&s.is.toggleClass(a.container,"unmatched",!n),n})),c=l.length>0,h=this.options,d=new s.Hn;return d.resetCells(l),h.layout&&s.Iw.call(h.layout,this,d,this.getGroup(n)),this.groups[n]&&s.is.toggleClass(this.groups[n],"unmatched",!c),o.fitToContent({gridWidth:1,gridHeight:1,padding:h.stencilGraphPadding||10}),i||c}),!1);s.is.toggleClass(this.container,"not-found",!i)}isCellMatched(t,e,i,n){return!e||!i||Object.keys(i).some((s=>{if("*"===s||t.shape===s){const o=i[s];if("boolean"===typeof o)return o;return(Array.isArray(o)?o:[o]).some((i=>{let s=t.getPropByPath(i);return null!=s&&(s="".concat(s),n||(s=s.toLowerCase()),s.indexOf(e)>=0)}))}return!1}))}onSearch(t){this.filter(t.target.value,this.options.search)}onSearchFocusIn(){s.is.addClass(this.container,"is-focused")}onSearchFocusOut(){s.is.removeClass(this.container,"is-focused")}onTitleClick(){this.options.collapsable&&(s.is.toggleClass(this.container,"collapsed"),s.is.hasClass(this.container,"collapsed")?this.collapseGroups():this.expandGroups())}onGroupTitleClick(t){const e=t.target.closest(".".concat(this.prefixClassName(r.group)));e&&this.toggleGroup(s.is.attr(e,"data-name")||"");const i=Object.keys(this.groups).every((t=>{const e=this.getGroup(t),i=this.groups[t];return e&&!1===e.collapsable||s.is.hasClass(i,"collapsed")}));s.is.toggleClass(this.container,"collapsed",i)}getModel(t){const e=this.getGraph(t);return e?e.model:null}getGraph(t){return this.graphs[t||a.defaultGroupName]}getGroup(t){const e=this.options.groups;return null!=t&&e&&e.length?e.find((e=>e.name===t)):null}getGroupByNode(t){const e=this.options.groups;return e?e.find((e=>{const i=this.getModel(e.name);return!!i&&i.has(t.id)})):null}clearGroups(){Object.keys(this.graphs).forEach((t=>{const e=this.graphs[t];this.unregisterGraphEvents(e),e.dispose()})),Object.keys(this.groups).forEach((t=>{const e=this.groups[t];s.is.remove(e)})),this.graphs={},this.groups={}}onRemove(){this.clearGroups(),this.dnd.remove(),this.stopListening(),this.undelegateDocumentEvents()}dispose(){this.remove(),s.mf.clean(this.name)}}l([s.G7.dispose()],c.prototype,"dispose",null),function(t){t.defaultOptions=Object.assign({stencilGraphWidth:200,stencilGraphHeight:800,title:"Stencil",collapsable:!1,placeholder:"Search",notFoundText:"No matches found",layout(t,e){const i={columnWidth:this.options.stencilGraphWidth/2-10,columns:2,rowHeight:80,resizeToFit:!1,dx:10,dy:10};!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=s.Hn.isModel(t)?t:(new s.Hn).resetCells(t,{sort:!1,dryrun:!0}),o=i.getNodes(),r=e.columns||1,a=Math.ceil(o.length/r),l=e.dx||0,c=e.dy||0,h=!1!==e.center,d=!0===e.resizeToFit,p=e.marginX||0,u=e.marginY||0,g=[];let b=e.columnWidth;if("compact"===b)for(let s=0;s<r;s+=1){const t=n.getNodesInColumn(o,s,r);g.push(n.getMaxDim(t,"width")+l)}else{null!=b&&"auto"!==b||(b=n.getMaxDim(o,"width")+l);for(let t=0;t<r;t+=1)g.push(b)}const f=n.accumulate(g,p),m=[];let y=e.rowHeight;if("compact"===y)for(let s=0;s<a;s+=1){const t=n.getNodesInRow(o,s,r);m.push(n.getMaxDim(t,"height")+c)}else{null!=y&&"auto"!==y||(y=n.getMaxDim(o,"height")+c);for(let t=0;t<a;t+=1)m.push(y)}const v=n.accumulate(m,u);i.startBatch("layout"),o.forEach(((t,i)=>{const n=i%r,s=Math.floor(i/r),o=g[n],a=m[s];let p=0,u=0,b=t.getSize();if(d){let i=o-2*l,n=a-2*c;const s=b.height*(b.width?i/b.width:1),r=b.width*(b.height?n/b.height:1);a<s?i=r:n=s,b={width:i,height:n},t.setSize(b,e)}h&&(p=(o-b.width)/2,u=(a-b.height)/2),t.position(f[n]+l+p,v[s]+c+u,e)})),i.stopBatch("layout")}(t,Object.assign(Object.assign(Object.assign({},i),this.options.layoutOptions),e?e.layoutOptions:{}))}},o.q.defaults)}(c||(c={})),function(t){t.base="widget-stencil",t.title="".concat(t.base,"-title"),t.search="".concat(t.base,"-search"),t.searchText="".concat(t.search,"-text"),t.content="".concat(t.base,"-content"),t.group="".concat(t.base,"-group"),t.groupTitle="".concat(t.group,"-title"),t.groupContent="".concat(t.group,"-content")}(r||(r={})),function(t){t.defaultGroupName="__default__"}(a||(a={}))},5971:(t,e,i)=>{"use strict";i.d(e,{w:()=>l});var n,s=i(469),o=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class r extends s.G7{get model(){return this.graph.model}get view(){return this.graph.renderer.findViewByCell(this.node)}get containerClassName(){return this.prefixClassName("widget-transform")}get resizeClassName(){return"".concat(this.containerClassName,"-resize")}get rotateClassName(){return"".concat(this.containerClassName,"-rotate")}constructor(t,e,i){super(),this.node=e,this.graph=i,this.options=Object.assign(Object.assign({},n.defaultOptions),t),this.render(),this.startListening()}startListening(){this.delegateEvents({["mousedown .".concat(this.resizeClassName)]:"startResizing",["touchstart .".concat(this.resizeClassName)]:"startResizing",["mousedown .".concat(this.rotateClassName)]:"startRotating",["touchstart .".concat(this.rotateClassName)]:"startRotating"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.node.on("removed",this.remove,this),this.model.on("reseted",this.remove,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this)}stopListening(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.node.off("removed",this.remove,this),this.model.off("reseted",this.remove,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this)}renderHandles(){this.container=document.createElement("div");const t=document.createElement("div");s.is.attr(t,"draggable","false");const e=t.cloneNode(!0);s.is.addClass(e,this.rotateClassName);const i=n.POSITIONS.map((e=>{const i=t.cloneNode(!0);return s.is.addClass(i,this.resizeClassName),s.is.attr(i,"data-position",e),i}));this.empty(),s.is.append(this.container,[...i,e])}render(){return this.renderHandles(),this.view&&this.view.addClass(n.NODE_CLS),s.is.addClass(this.container,this.containerClassName),s.is.toggleClass(this.container,"no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing),s.is.toggleClass(this.container,"no-resize",!this.options.resizable),s.is.toggleClass(this.container,"no-rotate",!this.options.rotatable),this.options.className&&s.is.addClass(this.container,this.options.className),this.graph.container.appendChild(this.container),this.update()}update(){const t=this.graph.matrix(),e=this.node.getBBox();e.x*=t.a,e.x+=t.e,e.y*=t.d,e.y+=t.f,e.width*=t.a,e.height*=t.d;const i=s.RZ.normalize(this.node.getAngle()),n=0!==i?"rotate(".concat(i,"deg)"):"";return s.is.css(this.container,{transform:n,width:e.width,height:e.height,left:e.x,top:e.y}),this.updateResizerDirections(),this}remove(){return this.view&&this.view.removeClass(n.NODE_CLS),super.remove()}onKnobMouseDown(){this.startHandle()}onKnobMouseUp(){this.stopHandle()}updateResizerDirections(){const t=s.RZ.normalize(this.node.getAngle()),e=Math.floor(t*(n.DIRECTIONS.length/360));if(e!==this.prevShift){const t=n.DIRECTIONS.slice(e).concat(n.DIRECTIONS.slice(0,e)),i=t=>"".concat(this.containerClassName,"-cursor-").concat(t);this.container.querySelectorAll(".".concat(this.resizeClassName)).forEach(((e,o)=>{s.is.removeClass(e,n.DIRECTIONS.map((t=>i(t))).join(" ")),s.is.addClass(e,i(t[o]))})),this.prevShift=e}}getTrueDirection(t){const e=s.RZ.normalize(this.node.getAngle());let i=n.POSITIONS.indexOf(t);return i+=Math.floor(e*(n.POSITIONS.length/360)),i%=n.POSITIONS.length,n.POSITIONS[i]}toValidResizeDirection(t){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[t]||t}startResizing(t){t.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});const e=s.is.attr(t.target,"data-position");this.prepareResizing(t,e),this.startAction(t)}prepareResizing(t,e){const i=this.getTrueDirection(e);let n=0,o=0;e.split("-").forEach((t=>{n={left:-1,right:1}[t]||n,o={top:-1,bottom:1}[t]||o}));const r=this.toValidResizeDirection(e),a={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[r],l=s.RZ.normalize(this.node.getAngle());this.setEventData(t,{selector:a,direction:r,trueDirection:i,relativeDirection:e,angle:l,resizeX:n,resizeY:o,action:"resizing"})}startRotating(t){t.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});const e=this.node.getBBox().getCenter(),i=this.normalizeEvent(t),n=this.graph.snapToGrid(i.clientX,i.clientY);this.setEventData(t,{center:e,action:"rotating",angle:s.RZ.normalize(this.node.getAngle()),start:s.E9.create(n).theta(e)}),this.startAction(t)}onMouseMove(t){const e=this.graph.findViewByCell(this.node);let i=this.getEventData(t);if(i.action){const n=this.normalizeEvent(t);let o=n.clientX,r=n.clientY;const a=this.graph.getPlugin("scroller"),l=this.options.restrictedResizing;if(!0===l||"number"===typeof l){const t=!0===l?0:l,e=a?Math.max(t,8):t,i=this.graph.container.getBoundingClientRect();o=s.GH.clamp(o,i.left+e,i.right-e),r=s.GH.clamp(r,i.top+e,i.bottom-e)}else this.options.autoScrollOnResizing&&a&&a.autoScroll(o,r);const c=this.graph.snapToGrid(o,r),h=this.graph.getGridSize(),d=this.node,p=this.options;if("resizing"===i.action){i.resized||(e&&(e.addClass("node-resizing"),this.notify("node:resize",t,e)),i.resized=!0);const n=d.getBBox(),o=s.E9.create(c).rotate(i.angle,n.getCenter()).diff(n[i.selector]);let r=i.resizeX?o.x*i.resizeX:n.width,a=i.resizeY?o.y*i.resizeY:n.height;const l=r,u=a;if(r=s.Z4.snapToGrid(r,h),a=s.Z4.snapToGrid(a,h),r=Math.max(r,p.minWidth||h),a=Math.max(a,p.minHeight||h),r=Math.min(r,p.maxWidth||1/0),a=Math.min(a,p.maxHeight||1/0),p.preserveAspectRatio){const t=n.width*a/n.height,e=n.height*r/n.width;r<t?a=e:r=t}const g=i.relativeDirection;if(p.allowReverse&&(l<=-r||u<=-a)){let e;"left"===g?l<=-r&&(e="right"):"right"===g?l<=-r&&(e="left"):"top"===g?u<=-a&&(e="bottom"):"bottom"===g?u<=-a&&(e="top"):"top-left"===g?l<=-r&&u<=-a?e="bottom-right":l<=-r?e="top-right":u<=-a&&(e="bottom-left"):"top-right"===g?l<=-r&&u<=-a?e="bottom-left":l<=-r?e="top-left":u<=-a&&(e="bottom-right"):"bottom-left"===g?l<=-r&&u<=-a?e="top-right":l<=-r?e="bottom-right":u<=-a&&(e="top-left"):"bottom-right"===g&&(l<=-r&&u<=-a?e="top-left":l<=-r?e="bottom-left":u<=-a&&(e="top-right"));const i=e;this.stopHandle();const n=this.container.querySelector(".".concat(this.resizeClassName,'[data-position="').concat(i,'"]'));this.startHandle(n),this.prepareResizing(t,i),this.onMouseMove(t)}if(n.width!==r||n.height!==a){const n={ui:!0,direction:i.direction,relativeDirection:i.relativeDirection,trueDirection:i.trueDirection,minWidth:p.minWidth,minHeight:p.minHeight,maxWidth:p.maxWidth,maxHeight:p.maxHeight,preserveAspectRatio:!0===p.preserveAspectRatio};d.resize(r,a,n),this.notify("node:resizing",t,e)}}else if("rotating"===i.action){i.rotated||(e&&(e.addClass("node-rotating"),this.notify("node:rotate",t,e)),i.rotated=!0);const n=d.getAngle(),o=i.start-s.E9.create(c).theta(i.center);let r=i.angle+o;p.rotateGrid&&(r=s.Z4.snapToGrid(r,p.rotateGrid)),r=s.RZ.normalize(r),n!==r&&(d.rotate(r,{absolute:!0}),this.notify("node:rotating",t,e))}}}onMouseUp(t){const e=this.getEventData(t);e.action&&(this.stopAction(t),this.model.stopBatch("resizing"===e.action?"resize":"rotate",{cid:this.cid}))}startHandle(t){if(this.handle=t||null,s.is.addClass(this.container,"".concat(this.containerClassName,"-active")),t){s.is.addClass(t,"".concat(this.containerClassName,"-active-handle"));const e=t.getAttribute("data-position");if(e){const t=n.DIRECTIONS[n.POSITIONS.indexOf(e)];s.is.addClass(this.container,"".concat(this.containerClassName,"-cursor-").concat(t))}}}stopHandle(){if(s.is.removeClass(this.container,"".concat(this.containerClassName,"-active")),this.handle){s.is.removeClass(this.handle,"".concat(this.containerClassName,"-active-handle"));const t=this.handle.getAttribute("data-position");if(t){const e=n.DIRECTIONS[n.POSITIONS.indexOf(t)];s.is.removeClass(this.container,"".concat(this.containerClassName,"-cursor-").concat(e))}this.handle=null}}startAction(t){this.startHandle(t.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(n.documentEvents,t.data)}stopAction(t){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();const e=this.graph.findViewByCell(this.node),i=this.getEventData(t);e&&(e.removeClass("node-".concat(i.action)),"resizing"===i.action&&i.resized?this.notify("node:resized",t,e):"rotating"===i.action&&i.rotated&&this.notify("node:rotated",t,e))}notify(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(i){const s=i.graph,o=s.view.normalizeEvent(e),r=s.snapToGrid(o.clientX,o.clientY);this.trigger(t,Object.assign({e:o,view:i,node:i.cell,cell:i.cell,x:r.x,y:r.y},n))}}dispose(){this.stopListening(),this.remove(),this.off()}}o([s.G7.dispose()],r.prototype,"dispose",null),function(t){t.NODE_CLS="has-widget-transform",t.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],t.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],t.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},t.defaultOptions={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0,allowReverse:!0}}(n||(n={}));s.kJ.prototype.createTransformWidget=function(t){const e=this.getPlugin("transform");return e&&e.createWidget(t),this},s.kJ.prototype.clearTransformWidgets=function(){const t=this.getPlugin("transform");return t&&t.clearWidgets(),this};var a=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class l extends s.ew{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.name="transform",this.widgets=new Map,this.disabled=!1,this.options=t,s.mf.ensure(this.name,".x6-widget-transform {\n  position: absolute;\n  box-sizing: content-box !important;\n  margin: -5px 0 0 -5px;\n  padding: 4px;\n  border: 1px dashed #000;\n  border-radius: 5px;\n  user-select: none;\n  pointer-events: none;\n}\n.x6-widget-transform > div {\n  position: absolute;\n  box-sizing: border-box;\n  background-color: #fff;\n  border: 1px solid #000;\n  transition: background-color 0.2s;\n  pointer-events: auto;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-transform > div:hover {\n  background-color: #d3d3d3;\n}\n.x6-widget-transform-cursor-n {\n  cursor: n-resize;\n}\n.x6-widget-transform-cursor-s {\n  cursor: s-resize;\n}\n.x6-widget-transform-cursor-e {\n  cursor: e-resize;\n}\n.x6-widget-transform-cursor-w {\n  cursor: w-resize;\n}\n.x6-widget-transform-cursor-ne {\n  cursor: ne-resize;\n}\n.x6-widget-transform-cursor-nw {\n  cursor: nw-resize;\n}\n.x6-widget-transform-cursor-se {\n  cursor: se-resize;\n}\n.x6-widget-transform-cursor-sw {\n  cursor: sw-resize;\n}\n.x6-widget-transform-resize {\n  width: 10px;\n  height: 10px;\n  border-radius: 6px;\n}\n.x6-widget-transform-resize[data-position='top-left'] {\n  top: -5px;\n  left: -5px;\n}\n.x6-widget-transform-resize[data-position='top-right'] {\n  top: -5px;\n  right: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom-left'] {\n  bottom: -5px;\n  left: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom-right'] {\n  right: -5px;\n  bottom: -5px;\n}\n.x6-widget-transform-resize[data-position='top'] {\n  top: -5px;\n  left: 50%;\n  margin-left: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom'] {\n  bottom: -5px;\n  left: 50%;\n  margin-left: -5px;\n}\n.x6-widget-transform-resize[data-position='left'] {\n  top: 50%;\n  left: -5px;\n  margin-top: -5px;\n}\n.x6-widget-transform-resize[data-position='right'] {\n  top: 50%;\n  right: -5px;\n  margin-top: -5px;\n}\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {\n  display: none;\n}\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {\n  display: none;\n}\n.x6-widget-transform.no-resize .x6-widget-transform-resize {\n  display: none;\n}\n.x6-widget-transform-rotate {\n  top: -20px;\n  left: -20px;\n  width: 12px;\n  height: 12px;\n  border-radius: 6px;\n  cursor: crosshair;\n}\n.x6-widget-transform.no-rotate .x6-widget-transform-rotate {\n  display: none;\n}\n.x6-widget-transform-active {\n  border-color: transparent;\n  pointer-events: all;\n}\n.x6-widget-transform-active > div {\n  display: none;\n}\n.x6-widget-transform-active > .x6-widget-transform-active-handle {\n  display: block;\n  background-color: #808080;\n}\n")}init(t){this.graph=t,this.disabled||this.startListening()}startListening(){this.graph.on("node:click",this.onNodeClick,this),this.graph.on("blank:mousedown",this.onBlankMouseDown,this)}stopListening(){this.graph.off("node:click",this.onNodeClick,this),this.graph.off("blank:mousedown",this.onBlankMouseDown,this)}enable(){this.disabled&&(this.disabled=!1,this.startListening())}disable(){this.disabled||(this.disabled=!0,this.stopListening())}isEnabled(){return!this.disabled}createWidget(t){this.clearWidgets();const e=this.createTransform(t);e&&(this.widgets.set(t,e),e.on("*",((t,e)=>{this.trigger(t,e),this.graph.trigger(t,e)})))}onNodeClick(t){let{node:e}=t;this.createWidget(e)}onBlankMouseDown(){this.clearWidgets()}createTransform(t){const e=this.getTransformOptions(t);return e.resizable||e.rotatable?new r(e,t,this.graph):null}getTransformOptions(t){this.options.resizing||(this.options.resizing={enabled:!1}),this.options.rotating||(this.options.rotating={enabled:!1}),"boolean"===typeof this.options.resizing&&(this.options.resizing={enabled:this.options.resizing}),"boolean"===typeof this.options.rotating&&(this.options.rotating={enabled:this.options.rotating});const e=l.parseOptionGroup(this.graph,t,this.options.resizing),i=l.parseOptionGroup(this.graph,t,this.options.rotating);return{resizable:!!e.enabled,minWidth:e.minWidth||0,maxWidth:e.maxWidth||Number.MAX_SAFE_INTEGER,minHeight:e.minHeight||0,maxHeight:e.maxHeight||Number.MAX_SAFE_INTEGER,orthogonalResizing:"boolean"!==typeof e.orthogonal||e.orthogonal,restrictedResizing:!!e.restrict,autoScrollOnResizing:"boolean"!==typeof e.autoScroll||e.autoScroll,preserveAspectRatio:!!e.preserveAspectRatio,allowReverse:"boolean"!==typeof e.allowReverse||e.allowReverse,rotatable:!!i.enabled,rotateGrid:i.grid||15}}clearWidgets(){this.widgets.forEach(((t,e)=>{this.graph.getCellById(e.id)&&t.dispose()})),this.widgets.clear()}dispose(){this.clearWidgets(),this.stopListening(),this.off(),s.mf.clean(this.name)}}a([s.ew.dispose()],l.prototype,"dispose",null),function(t){t.parseOptionGroup=function(t,e,i){const n={};return Object.keys(i||{}).forEach((s=>{const o=i[s];n[s]="function"===typeof o?o.call(t,e):o})),n}}(l||(l={}))},1521:t=>{var e=[],i=[];function n(t,n){if(n=n||{},void 0===t)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var s,o=!0===n.prepend?"prepend":"append",r=void 0!==n.container?n.container:document.querySelector("head"),a=e.indexOf(r);return-1===a&&(a=e.push(r)-1,i[a]={}),void 0!==i[a]&&void 0!==i[a][o]?s=i[a][o]:(s=i[a][o]=function(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t}(),"prepend"===o?r.insertBefore(s,r.childNodes[0]):r.appendChild(s)),65279===t.charCodeAt(0)&&(t=t.substr(1,t.length)),s.styleSheet?s.styleSheet.cssText+=t:s.textContent+=t,s}t.exports=n,t.exports.insertCss=n},7505:(t,e,i)=>{var n;!function(s,o,r){if(s){for(var a,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},c={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},h={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},d={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p=1;p<20;++p)l[111+p]="f"+p;for(p=0;p<=9;++p)l[p+96]=p.toString();v.prototype.bind=function(t,e,i){var n=this;return t=t instanceof Array?t:[t],n._bindMultiple.call(n,t,e,i),n},v.prototype.unbind=function(t,e){return this.bind.call(this,t,(function(){}),e)},v.prototype.trigger=function(t,e){var i=this;return i._directMap[t+":"+e]&&i._directMap[t+":"+e]({},t),i},v.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},v.prototype.stopCallback=function(t,e){if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(y(e,this.target))return!1;if("composedPath"in t&&"function"===typeof t.composedPath){var i=t.composedPath()[0];i!==t.target&&(e=i)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},v.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},v.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(l[e]=t[e]);a=null},v.init=function(){var t=v(o);for(var e in t)"_"!==e.charAt(0)&&(v[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},v.init(),s.Mousetrap=v,t.exports&&(t.exports=v),void 0===(n=function(){return v}.call(e,i,e,t))||(t.exports=n)}function u(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i)}function g(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return l[t.which]?l[t.which]:c[t.which]?c[t.which]:String.fromCharCode(t.which).toLowerCase()}function b(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function f(t,e,i){return i||(i=function(){if(!a)for(var t in a={},l)t>95&&t<112||l.hasOwnProperty(t)&&(a[l[t]]=t);return a}()[t]?"keydown":"keypress"),"keypress"==i&&e.length&&(i="keydown"),i}function m(t,e){var i,n,s,o=[];for(i=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),s=0;s<i.length;++s)n=i[s],d[n]&&(n=d[n]),e&&"keypress"!=e&&h[n]&&(n=h[n],o.push("shift")),b(n)&&o.push(n);return{key:n,modifiers:o,action:e=f(n,o,e)}}function y(t,e){return null!==t&&t!==o&&(t===e||y(t.parentNode,e))}function v(t){var e=this;if(t=t||o,!(e instanceof v))return new v(t);e.target=t,e._callbacks={},e._directMap={};var i,n={},s=!1,r=!1,a=!1;function l(t){t=t||{};var e,i=!1;for(e in n)t[e]?i=!0:n[e]=0;i||(a=!1)}function c(t,i,s,o,r,a){var l,c,h,d,p=[],u=s.type;if(!e._callbacks[t])return[];for("keyup"==u&&b(t)&&(i=[t]),l=0;l<e._callbacks[t].length;++l)if(c=e._callbacks[t][l],(o||!c.seq||n[c.seq]==c.level)&&u==c.action&&("keypress"==u&&!s.metaKey&&!s.ctrlKey||(h=i,d=c.modifiers,h.sort().join(",")===d.sort().join(",")))){var g=!o&&c.combo==r,f=o&&c.seq==o&&c.level==a;(g||f)&&e._callbacks[t].splice(l,1),p.push(c)}return p}function h(t,i,n,s){e.stopCallback(i,i.target||i.srcElement,n,s)||!1===t(i,n)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(i),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(i))}function d(t){"number"!==typeof t.which&&(t.which=t.keyCode);var i=g(t);i&&("keyup"!=t.type||s!==i?e.handleKey(i,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):s=!1)}function p(t,e,o,r){function c(e){return function(){a=e,++n[t],clearTimeout(i),i=setTimeout(l,1e3)}}function d(e){h(o,e,t),"keyup"!==r&&(s=g(e)),setTimeout(l,10)}n[t]=0;for(var p=0;p<e.length;++p){var u=p+1===e.length?d:c(r||m(e[p+1]).action);f(e[p],u,r,t,p)}}function f(t,i,n,s,o){e._directMap[t+":"+n]=i;var r,a=(t=t.replace(/\s+/g," ")).split(" ");a.length>1?p(t,a,i,n):(r=m(t,n),e._callbacks[r.key]=e._callbacks[r.key]||[],c(r.key,r.modifiers,{type:r.action},s,t,o),e._callbacks[r.key][s?"unshift":"push"]({callback:i,modifiers:r.modifiers,action:r.action,seq:s,level:o,combo:t}))}e._handleKey=function(t,e,i){var n,s=c(t,e,i),o={},d=0,p=!1;for(n=0;n<s.length;++n)s[n].seq&&(d=Math.max(d,s[n].level));for(n=0;n<s.length;++n)if(s[n].seq){if(s[n].level!=d)continue;p=!0,o[s[n].seq]=1,h(s[n].callback,i,s[n].combo,s[n].seq)}else p||h(s[n].callback,i,s[n].combo);var u="keypress"==i.type&&r;i.type!=a||b(t)||u||l(o),r=p&&"keydown"==i.type},e._bindMultiple=function(t,e,i){for(var n=0;n<t.length;++n)f(t[n],e,i)},u(t,"keypress",d),u(t,"keydown",d),u(t,"keyup",d)}}("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)}}]);